(self["webpackChunkstudy_guide"]=self["webpackChunkstudy_guide"]||[]).push([[998],{9662:function(t,e,n){var i=n(614),r=n(6330),o=TypeError;t.exports=function(t){if(i(t))return t;throw o(r(t)+" is not a function")}},6077:function(t,e,n){var i=n(614),r=String,o=TypeError;t.exports=function(t){if("object"==typeof t||i(t))return t;throw o("Can't set "+r(t)+" as a prototype")}},5787:function(t,e,n){var i=n(7976),r=TypeError;t.exports=function(t,e){if(i(e,t))return t;throw r("Incorrect invocation")}},9670:function(t,e,n){var i=n(111),r=String,o=TypeError;t.exports=function(t){if(i(t))return t;throw o(r(t)+" is not an object")}},3013:function(t){t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},260:function(t,e,n){"use strict";var i,r,o,s=n(3013),a=n(9781),l=n(7854),c=n(614),h=n(111),u=n(2597),d=n(648),p=n(6330),f=n(8880),m=n(8052),g=n(7045),v=n(7976),y=n(9518),b=n(7674),w=n(5112),x=n(9711),S=n(9909),k=S.enforce,_=S.get,E=l.Int8Array,L=E&&E.prototype,C=l.Uint8ClampedArray,A=C&&C.prototype,M=E&&y(E),N=L&&y(L),P=Object.prototype,T=l.TypeError,I=w("toStringTag"),O=x("TYPED_ARRAY_TAG"),D="TypedArrayConstructor",j=s&&!!b&&"Opera"!==d(l.opera),R=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},z=function(t){if(!h(t))return!1;var e=d(t);return"DataView"===e||u(F,e)||u(B,e)},$=function(t){var e=y(t);if(h(e)){var n=_(e);return n&&u(n,D)?n[D]:$(e)}},q=function(t){if(!h(t))return!1;var e=d(t);return u(F,e)||u(B,e)},U=function(t){if(q(t))return t;throw T("Target is not a typed array")},G=function(t){if(c(t)&&(!b||v(M,t)))return t;throw T(p(t)+" is not a typed array constructor")},H=function(t,e,n,i){if(a){if(n)for(var r in F){var o=l[r];if(o&&u(o.prototype,t))try{delete o.prototype[t]}catch(s){try{o.prototype[t]=e}catch(c){}}}N[t]&&!n||m(N,t,n?e:j&&L[t]||e,i)}},W=function(t,e,n){var i,r;if(a){if(b){if(n)for(i in F)if(r=l[i],r&&u(r,t))try{delete r[t]}catch(o){}if(M[t]&&!n)return;try{return m(M,t,n?e:j&&M[t]||e)}catch(o){}}for(i in F)r=l[i],!r||r[t]&&!n||m(r,t,e)}};for(i in F)r=l[i],o=r&&r.prototype,o?k(o)[D]=r:j=!1;for(i in B)r=l[i],o=r&&r.prototype,o&&(k(o)[D]=r);if((!j||!c(M)||M===Function.prototype)&&(M=function(){throw T("Incorrect invocation")},j))for(i in F)l[i]&&b(l[i],M);if((!j||!N||N===P)&&(N=M.prototype,j))for(i in F)l[i]&&b(l[i].prototype,N);if(j&&y(A)!==N&&b(A,N),a&&!u(N,I))for(i in R=!0,g(N,I,{configurable:!0,get:function(){return h(this)?this[O]:void 0}}),F)l[i]&&f(l[i],O,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:j,TYPED_ARRAY_TAG:R&&O,aTypedArray:U,aTypedArrayConstructor:G,exportTypedArrayMethod:H,exportTypedArrayStaticMethod:W,getTypedArrayConstructor:$,isView:z,isTypedArray:q,TypedArray:M,TypedArrayPrototype:N}},7745:function(t,e,n){var i=n(6244);t.exports=function(t,e){var n=0,r=i(e),o=new t(r);while(r>n)o[n]=e[n++];return o}},1318:function(t,e,n){var i=n(5656),r=n(1400),o=n(6244),s=function(t){return function(e,n,s){var a,l=i(e),c=o(l),h=r(s,c);if(t&&n!=n){while(c>h)if(a=l[h++],a!=a)return!0}else for(;c>h;h++)if((t||h in l)&&l[h]===n)return t||h||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},3658:function(t,e,n){"use strict";var i=n(9781),r=n(3157),o=TypeError,s=Object.getOwnPropertyDescriptor,a=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(r(t)&&!s(t,"length").writable)throw o("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},1843:function(t,e,n){var i=n(6244);t.exports=function(t,e){for(var n=i(t),r=new e(n),o=0;o<n;o++)r[o]=t[n-o-1];return r}},1572:function(t,e,n){var i=n(6244),r=n(9303),o=RangeError;t.exports=function(t,e,n,s){var a=i(t),l=r(n),c=l<0?a+l:l;if(c>=a||c<0)throw o("Incorrect index");for(var h=new e(a),u=0;u<a;u++)h[u]=u===c?s:t[u];return h}},4326:function(t,e,n){var i=n(1702),r=i({}.toString),o=i("".slice);t.exports=function(t){return o(r(t),8,-1)}},648:function(t,e,n){var i=n(1694),r=n(614),o=n(4326),s=n(5112),a=s("toStringTag"),l=Object,c="Arguments"==o(function(){return arguments}()),h=function(t,e){try{return t[e]}catch(n){}};t.exports=i?o:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=h(e=l(t),a))?n:c?o(e):"Object"==(i=o(e))&&r(e.callee)?"Arguments":i}},9920:function(t,e,n){var i=n(2597),r=n(3887),o=n(1236),s=n(3070);t.exports=function(t,e,n){for(var a=r(e),l=s.f,c=o.f,h=0;h<a.length;h++){var u=a[h];i(t,u)||n&&i(n,u)||l(t,u,c(e,u))}}},8544:function(t,e,n){var i=n(7293);t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},8880:function(t,e,n){var i=n(9781),r=n(3070),o=n(9114);t.exports=i?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9114:function(t){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},6135:function(t,e,n){"use strict";var i=n(4948),r=n(3070),o=n(9114);t.exports=function(t,e,n){var s=i(e);s in t?r.f(t,s,o(0,n)):t[s]=n}},7045:function(t,e,n){var i=n(6339),r=n(3070);t.exports=function(t,e,n){return n.get&&i(n.get,e,{getter:!0}),n.set&&i(n.set,e,{setter:!0}),r.f(t,e,n)}},8052:function(t,e,n){var i=n(614),r=n(3070),o=n(6339),s=n(3072);t.exports=function(t,e,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:e;if(i(n)&&o(n,c,a),a.global)l?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(l=!0):delete t[e]}catch(h){}l?t[e]=n:r.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},3072:function(t,e,n){var i=n(7854),r=Object.defineProperty;t.exports=function(t,e){try{r(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},9781:function(t,e,n){var i=n(7293);t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(t){var e="object"==typeof document&&document.all,n="undefined"==typeof e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:n}},317:function(t,e,n){var i=n(7854),r=n(111),o=i.document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},7207:function(t){var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},3678:function(t){t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},7871:function(t,e,n){var i=n(3823),r=n(5268);t.exports=!i&&!r&&"object"==typeof window&&"object"==typeof document},3823:function(t){t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},5268:function(t,e,n){var i=n(4326);t.exports="undefined"!=typeof process&&"process"==i(process)},8113:function(t){t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(t,e,n){var i,r,o=n(7854),s=n(8113),a=o.process,l=o.Deno,c=a&&a.versions||l&&l.version,h=c&&c.v8;h&&(i=h.split("."),r=i[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&s&&(i=s.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/),i&&(r=+i[1]))),t.exports=r},748:function(t){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},1060:function(t,e,n){var i=n(1702),r=Error,o=i("".replace),s=function(t){return String(r(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,l=a.test(s);t.exports=function(t,e){if(l&&"string"==typeof t&&!r.prepareStackTrace)while(e--)t=o(t,a,"");return t}},2914:function(t,e,n){var i=n(7293),r=n(9114);t.exports=!i((function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",r(1,7)),7!==t.stack)}))},2109:function(t,e,n){var i=n(7854),r=n(1236).f,o=n(8880),s=n(8052),a=n(3072),l=n(9920),c=n(4705);t.exports=function(t,e){var n,h,u,d,p,f,m=t.target,g=t.global,v=t.stat;if(h=g?i:v?i[m]||a(m,{}):(i[m]||{}).prototype,h)for(u in e){if(p=e[u],t.dontCallGetSet?(f=r(h,u),d=f&&f.value):d=h[u],n=c(g?u:m+(v?".":"#")+u,t.forced),!n&&void 0!==d){if(typeof p==typeof d)continue;l(p,d)}(t.sham||d&&d.sham)&&o(p,"sham",!0),s(h,u,p,t)}}},7293:function(t){t.exports=function(t){try{return!!t()}catch(e){return!0}}},9974:function(t,e,n){var i=n(1470),r=n(9662),o=n(4374),s=i(i.bind);t.exports=function(t,e){return r(t),void 0===e?t:o?s(t,e):function(){return t.apply(e,arguments)}}},4374:function(t,e,n){var i=n(7293);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},6916:function(t,e,n){var i=n(4374),r=Function.prototype.call;t.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},6530:function(t,e,n){var i=n(9781),r=n(2597),o=Function.prototype,s=i&&Object.getOwnPropertyDescriptor,a=r(o,"name"),l=a&&"something"===function(){}.name,c=a&&(!i||i&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},5668:function(t,e,n){var i=n(1702),r=n(9662);t.exports=function(t,e,n){try{return i(r(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(o){}}},1470:function(t,e,n){var i=n(4326),r=n(1702);t.exports=function(t){if("Function"===i(t))return r(t)}},1702:function(t,e,n){var i=n(4374),r=Function.prototype,o=r.call,s=i&&r.bind.bind(o,o);t.exports=i?s:function(t){return function(){return o.apply(t,arguments)}}},5005:function(t,e,n){var i=n(7854),r=n(614),o=function(t){return r(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(i[t]):i[t]&&i[t][e]}},1246:function(t,e,n){var i=n(648),r=n(8173),o=n(8554),s=n(7497),a=n(5112),l=a("iterator");t.exports=function(t){if(!o(t))return r(t,l)||r(t,"@@iterator")||s[i(t)]}},4121:function(t,e,n){var i=n(6916),r=n(9662),o=n(9670),s=n(6330),a=n(1246),l=TypeError;t.exports=function(t,e){var n=arguments.length<2?a(t):e;if(r(n))return o(i(n,t));throw l(s(t)+" is not iterable")}},8173:function(t,e,n){var i=n(9662),r=n(8554);t.exports=function(t,e){var n=t[e];return r(n)?void 0:i(n)}},7854:function(t,e,n){var i=function(t){return t&&t.Math==Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},2597:function(t,e,n){var i=n(1702),r=n(7908),o=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(r(t),e)}},3501:function(t){t.exports={}},4664:function(t,e,n){var i=n(9781),r=n(7293),o=n(317);t.exports=!i&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},8361:function(t,e,n){var i=n(1702),r=n(7293),o=n(4326),s=Object,a=i("".split);t.exports=r((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"==o(t)?a(t,""):s(t)}:s},9587:function(t,e,n){var i=n(614),r=n(111),o=n(7674);t.exports=function(t,e,n){var s,a;return o&&i(s=e.constructor)&&s!==n&&r(a=s.prototype)&&a!==n.prototype&&o(t,a),t}},2788:function(t,e,n){var i=n(1702),r=n(614),o=n(5465),s=i(Function.toString);r(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},9909:function(t,e,n){var i,r,o,s=n(4811),a=n(7854),l=n(111),c=n(8880),h=n(2597),u=n(5465),d=n(6200),p=n(3501),f="Object already initialized",m=a.TypeError,g=a.WeakMap,v=function(t){return o(t)?r(t):i(t,{})},y=function(t){return function(e){var n;if(!l(e)||(n=r(e)).type!==t)throw m("Incompatible receiver, "+t+" required");return n}};if(s||u.state){var b=u.state||(u.state=new g);b.get=b.get,b.has=b.has,b.set=b.set,i=function(t,e){if(b.has(t))throw m(f);return e.facade=t,b.set(t,e),e},r=function(t){return b.get(t)||{}},o=function(t){return b.has(t)}}else{var w=d("state");p[w]=!0,i=function(t,e){if(h(t,w))throw m(f);return e.facade=t,c(t,w,e),e},r=function(t){return h(t,w)?t[w]:{}},o=function(t){return h(t,w)}}t.exports={set:i,get:r,has:o,enforce:v,getterFor:y}},7659:function(t,e,n){var i=n(5112),r=n(7497),o=i("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||s[o]===t)}},3157:function(t,e,n){var i=n(4326);t.exports=Array.isArray||function(t){return"Array"==i(t)}},4067:function(t,e,n){var i=n(648);t.exports=function(t){var e=i(t);return"BigInt64Array"==e||"BigUint64Array"==e}},614:function(t,e,n){var i=n(4154),r=i.all;t.exports=i.IS_HTMLDDA?function(t){return"function"==typeof t||t===r}:function(t){return"function"==typeof t}},4411:function(t,e,n){var i=n(1702),r=n(7293),o=n(614),s=n(648),a=n(5005),l=n(2788),c=function(){},h=[],u=a("Reflect","construct"),d=/^\s*(?:class|function)\b/,p=i(d.exec),f=!d.exec(c),m=function(t){if(!o(t))return!1;try{return u(c,h,t),!0}catch(e){return!1}},g=function(t){if(!o(t))return!1;switch(s(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(d,l(t))}catch(e){return!0}};g.sham=!0,t.exports=!u||r((function(){var t;return m(m.call)||!m(Object)||!m((function(){t=!0}))||t}))?g:m},4705:function(t,e,n){var i=n(7293),r=n(614),o=/#|\.prototype\./,s=function(t,e){var n=l[a(t)];return n==h||n!=c&&(r(e)?i(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},l=s.data={},c=s.NATIVE="N",h=s.POLYFILL="P";t.exports=s},8554:function(t){t.exports=function(t){return null===t||void 0===t}},111:function(t,e,n){var i=n(614),r=n(4154),o=r.all;t.exports=r.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:i(t)||t===o}:function(t){return"object"==typeof t?null!==t:i(t)}},1913:function(t){t.exports=!1},2190:function(t,e,n){var i=n(5005),r=n(614),o=n(7976),s=n(3307),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return r(e)&&o(e.prototype,a(t))}},408:function(t,e,n){var i=n(9974),r=n(6916),o=n(9670),s=n(6330),a=n(7659),l=n(6244),c=n(7976),h=n(4121),u=n(1246),d=n(9212),p=TypeError,f=function(t,e){this.stopped=t,this.result=e},m=f.prototype;t.exports=function(t,e,n){var g,v,y,b,w,x,S,k=n&&n.that,_=!(!n||!n.AS_ENTRIES),E=!(!n||!n.IS_RECORD),L=!(!n||!n.IS_ITERATOR),C=!(!n||!n.INTERRUPTED),A=i(e,k),M=function(t){return g&&d(g,"normal",t),new f(!0,t)},N=function(t){return _?(o(t),C?A(t[0],t[1],M):A(t[0],t[1])):C?A(t,M):A(t)};if(E)g=t.iterator;else if(L)g=t;else{if(v=u(t),!v)throw p(s(t)+" is not iterable");if(a(v)){for(y=0,b=l(t);b>y;y++)if(w=N(t[y]),w&&c(m,w))return w;return new f(!1)}g=h(t,v)}x=E?t.next:g.next;while(!(S=r(x,g)).done){try{w=N(S.value)}catch(P){d(g,"throw",P)}if("object"==typeof w&&w&&c(m,w))return w}return new f(!1)}},9212:function(t,e,n){var i=n(6916),r=n(9670),o=n(8173);t.exports=function(t,e,n){var s,a;r(t);try{if(s=o(t,"return"),!s){if("throw"===e)throw n;return n}s=i(s,t)}catch(l){a=!0,s=l}if("throw"===e)throw n;if(a)throw s;return r(s),n}},7497:function(t){t.exports={}},6244:function(t,e,n){var i=n(7466);t.exports=function(t){return i(t.length)}},6339:function(t,e,n){var i=n(1702),r=n(7293),o=n(614),s=n(2597),a=n(9781),l=n(6530).CONFIGURABLE,c=n(2788),h=n(9909),u=h.enforce,d=h.get,p=String,f=Object.defineProperty,m=i("".slice),g=i("".replace),v=i([].join),y=a&&!r((function(){return 8!==f((function(){}),"length",{value:8}).length})),b=String(String).split("String"),w=t.exports=function(t,e,n){"Symbol("===m(p(e),0,7)&&(e="["+g(p(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||l&&t.name!==e)&&(a?f(t,"name",{value:e,configurable:!0}):t.name=e),y&&n&&s(n,"arity")&&t.length!==n.arity&&f(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(r){}var i=u(t);return s(i,"source")||(i.source=v(b,"string"==typeof e?e:"")),t};Function.prototype.toString=w((function(){return o(this)&&d(this).source||c(this)}),"toString")},5706:function(t,e,n){var i=n(1702),r=Map.prototype;t.exports={Map:Map,set:i(r.set),get:i(r.get),has:i(r.has),remove:i(r["delete"]),proto:r}},4758:function(t){var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?n:e)(i)}},6277:function(t,e,n){var i=n(1340);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:i(t)}},3070:function(t,e,n){var i=n(9781),r=n(4664),o=n(3353),s=n(9670),a=n(4948),l=TypeError,c=Object.defineProperty,h=Object.getOwnPropertyDescriptor,u="enumerable",d="configurable",p="writable";e.f=i?o?function(t,e,n){if(s(t),e=a(e),s(n),"function"===typeof t&&"prototype"===e&&"value"in n&&p in n&&!n[p]){var i=h(t,e);i&&i[p]&&(t[e]=n.value,n={configurable:d in n?n[d]:i[d],enumerable:u in n?n[u]:i[u],writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(s(t),e=a(e),s(n),r)try{return c(t,e,n)}catch(i){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},1236:function(t,e,n){var i=n(9781),r=n(6916),o=n(5296),s=n(9114),a=n(5656),l=n(4948),c=n(2597),h=n(4664),u=Object.getOwnPropertyDescriptor;e.f=i?u:function(t,e){if(t=a(t),e=l(e),h)try{return u(t,e)}catch(n){}if(c(t,e))return s(!r(o.f,t,e),t[e])}},8006:function(t,e,n){var i=n(6324),r=n(748),o=r.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,o)}},5181:function(t,e){e.f=Object.getOwnPropertySymbols},9518:function(t,e,n){var i=n(2597),r=n(614),o=n(7908),s=n(6200),a=n(8544),l=s("IE_PROTO"),c=Object,h=c.prototype;t.exports=a?c.getPrototypeOf:function(t){var e=o(t);if(i(e,l))return e[l];var n=e.constructor;return r(n)&&e instanceof n?n.prototype:e instanceof c?h:null}},7976:function(t,e,n){var i=n(1702);t.exports=i({}.isPrototypeOf)},6324:function(t,e,n){var i=n(1702),r=n(2597),o=n(5656),s=n(1318).indexOf,a=n(3501),l=i([].push);t.exports=function(t,e){var n,i=o(t),c=0,h=[];for(n in i)!r(a,n)&&r(i,n)&&l(h,n);while(e.length>c)r(i,n=e[c++])&&(~s(h,n)||l(h,n));return h}},5296:function(t,e){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);e.f=r?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},7674:function(t,e,n){var i=n(5668),r=n(9670),o=n(6077);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=i(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(s){}return function(n,i){return r(n),o(i),e?t(n,i):n.__proto__=i,n}}():void 0)},2140:function(t,e,n){var i=n(6916),r=n(614),o=n(111),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&r(n=t.toString)&&!o(a=i(n,t)))return a;if(r(n=t.valueOf)&&!o(a=i(n,t)))return a;if("string"!==e&&r(n=t.toString)&&!o(a=i(n,t)))return a;throw s("Can't convert object to primitive value")}},3887:function(t,e,n){var i=n(5005),r=n(1702),o=n(8006),s=n(5181),a=n(9670),l=r([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?l(e,n(t)):e}},7066:function(t,e,n){"use strict";var i=n(9670);t.exports=function(){var t=i(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},4706:function(t,e,n){var i=n(6916),r=n(2597),o=n(7976),s=n(7066),a=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in a||r(t,"flags")||!o(a,t)?e:i(s,t)}},4488:function(t,e,n){var i=n(8554),r=TypeError;t.exports=function(t){if(i(t))throw r("Can't call method on "+t);return t}},9405:function(t,e,n){var i=n(1702),r=Set.prototype;t.exports={Set:Set,add:i(r.add),has:i(r.has),remove:i(r["delete"]),proto:r}},6200:function(t,e,n){var i=n(2309),r=n(9711),o=i("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},5465:function(t,e,n){var i=n(7854),r=n(3072),o="__core-js_shared__",s=i[o]||r(o,{});t.exports=s},2309:function(t,e,n){var i=n(1913),r=n(5465);(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.30.2",mode:i?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"})},4124:function(t,e,n){var i=n(7854),r=n(7293),o=n(7392),s=n(7871),a=n(3823),l=n(5268),c=i.structuredClone;t.exports=!!c&&!r((function(){if(a&&o>92||l&&o>94||s&&o>97)return!1;var t=new ArrayBuffer(8),e=c(t,{transfer:[t]});return 0!=t.byteLength||8!=e.byteLength}))},6293:function(t,e,n){var i=n(7392),r=n(7293),o=n(7854),s=o.String;t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol();return!s(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},1400:function(t,e,n){var i=n(9303),r=Math.max,o=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):o(n,e)}},4599:function(t,e,n){var i=n(7593),r=TypeError;t.exports=function(t){var e=i(t,"number");if("number"==typeof e)throw r("Can't convert number to bigint");return BigInt(e)}},5656:function(t,e,n){var i=n(8361),r=n(4488);t.exports=function(t){return i(r(t))}},9303:function(t,e,n){var i=n(4758);t.exports=function(t){var e=+t;return e!==e||0===e?0:i(e)}},7466:function(t,e,n){var i=n(9303),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},7908:function(t,e,n){var i=n(4488),r=Object;t.exports=function(t){return r(i(t))}},7593:function(t,e,n){var i=n(6916),r=n(111),o=n(2190),s=n(8173),a=n(2140),l=n(5112),c=TypeError,h=l("toPrimitive");t.exports=function(t,e){if(!r(t)||o(t))return t;var n,l=s(t,h);if(l){if(void 0===e&&(e="default"),n=i(l,t,e),!r(n)||o(n))return n;throw c("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},4948:function(t,e,n){var i=n(7593),r=n(2190);t.exports=function(t){var e=i(t,"string");return r(e)?e:e+""}},1694:function(t,e,n){var i=n(5112),r=i("toStringTag"),o={};o[r]="z",t.exports="[object z]"===String(o)},1340:function(t,e,n){var i=n(648),r=String;t.exports=function(t){if("Symbol"===i(t))throw TypeError("Cannot convert a Symbol value to a string");return r(t)}},6330:function(t){var e=String;t.exports=function(t){try{return e(t)}catch(n){return"Object"}}},9711:function(t,e,n){var i=n(1702),r=0,o=Math.random(),s=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++r+o,36)}},3307:function(t,e,n){var i=n(6293);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(t,e,n){var i=n(9781),r=n(7293);t.exports=i&&r((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},8053:function(t){var e=TypeError;t.exports=function(t,n){if(t<n)throw e("Not enough arguments");return t}},4811:function(t,e,n){var i=n(7854),r=n(614),o=i.WeakMap;t.exports=r(o)&&/native code/.test(String(o))},5112:function(t,e,n){var i=n(7854),r=n(2309),o=n(2597),s=n(9711),a=n(6293),l=n(3307),c=i.Symbol,h=r("wks"),u=l?c["for"]||c:c&&c.withoutSetter||s;t.exports=function(t){return o(h,t)||(h[t]=a&&o(c,t)?c[t]:u("Symbol."+t)),h[t]}},7658:function(t,e,n){"use strict";var i=n(2109),r=n(7908),o=n(6244),s=n(3658),a=n(7207),l=n(7293),c=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),h=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},u=c||!h();i({target:"Array",proto:!0,arity:1,forced:u},{push:function(t){var e=r(this),n=o(e),i=arguments.length;a(n+i);for(var l=0;l<i;l++)e[n]=arguments[l],n++;return s(e,n),n}})},1439:function(t,e,n){"use strict";var i=n(1843),r=n(260),o=r.aTypedArray,s=r.exportTypedArrayMethod,a=r.getTypedArrayConstructor;s("toReversed",(function(){return i(o(this),a(this))}))},7585:function(t,e,n){"use strict";var i=n(260),r=n(1702),o=n(9662),s=n(7745),a=i.aTypedArray,l=i.getTypedArrayConstructor,c=i.exportTypedArrayMethod,h=r(i.TypedArrayPrototype.sort);c("toSorted",(function(t){void 0!==t&&o(t);var e=a(this),n=s(l(e),e);return h(n,t)}))},5315:function(t,e,n){"use strict";var i=n(1572),r=n(260),o=n(4067),s=n(9303),a=n(4599),l=r.aTypedArray,c=r.getTypedArrayConstructor,h=r.exportTypedArrayMethod,u=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();h("with",{with:function(t,e){var n=l(this),r=s(t),h=o(n)?a(e):+e;return i(n,c(n),r,h)}}["with"],!u)},3767:function(t,e,n){n(1439)},8585:function(t,e,n){n(7585)},8696:function(t,e,n){n(5315)},2801:function(t,e,n){"use strict";var i=n(2109),r=n(7854),o=n(5005),s=n(9114),a=n(3070).f,l=n(2597),c=n(5787),h=n(9587),u=n(6277),d=n(3678),p=n(1060),f=n(9781),m=n(1913),g="DOMException",v=o("Error"),y=o(g),b=function(){c(this,w);var t=arguments.length,e=u(t<1?void 0:arguments[0]),n=u(t<2?void 0:arguments[1],"Error"),i=new y(e,n),r=v(e);return r.name=g,a(i,"stack",s(1,p(r.stack,1))),h(i,this,b),i},w=b.prototype=y.prototype,x="stack"in v(g),S="stack"in new y(1,2),k=y&&f&&Object.getOwnPropertyDescriptor(r,g),_=!!k&&!(k.writable&&k.configurable),E=x&&!_&&!S;i({global:!0,constructor:!0,forced:m||E},{DOMException:E?b:y});var L=o(g),C=L.prototype;if(C.constructor!==L)for(var A in m||a(C,"constructor",s(1,L)),d)if(l(d,A)){var M=d[A],N=M.s;l(L,N)||a(L,N,s(6,M.c))}},1295:function(t,e,n){var i=n(1913),r=n(2109),o=n(7854),s=n(5005),a=n(1702),l=n(7293),c=n(9711),h=n(614),u=n(4411),d=n(8554),p=n(111),f=n(2190),m=n(408),g=n(9670),v=n(648),y=n(2597),b=n(6135),w=n(8880),x=n(6244),S=n(8053),k=n(4706),_=n(5706),E=n(9405),L=n(2914),C=n(4124),A=o.Object,M=o.Array,N=o.Date,P=o.Error,T=o.EvalError,I=o.RangeError,O=o.ReferenceError,D=o.SyntaxError,j=o.TypeError,R=o.URIError,F=o.PerformanceMark,B=o.WebAssembly,z=B&&B.CompileError||P,$=B&&B.LinkError||P,q=B&&B.RuntimeError||P,U=s("DOMException"),G=_.Map,H=_.has,W=_.get,V=_.set,Y=E.Set,J=E.add,X=s("Object","keys"),K=a([].push),Z=a((!0).valueOf),Q=a(1..valueOf),tt=a("".valueOf),et=a(N.prototype.getTime),nt=c("structuredClone"),it="DataCloneError",rt="Transferring",ot=function(t){return!l((function(){var e=new o.Set([7]),n=t(e),i=t(A(7));return n==e||!n.has(7)||"object"!=typeof i||7!=i}))&&t},st=function(t,e){return!l((function(){var n=new e,i=t({a:n,b:n});return!(i&&i.a===i.b&&i.a instanceof e&&i.a.stack===n.stack)}))},at=function(t){return!l((function(){var e=t(new o.AggregateError([1],nt,{cause:3}));return"AggregateError"!=e.name||1!=e.errors[0]||e.message!=nt||3!=e.cause}))},lt=o.structuredClone,ct=i||!st(lt,P)||!st(lt,U)||!at(lt),ht=!lt&&ot((function(t){return new F(nt,{detail:t}).detail})),ut=ot(lt)||ht,dt=function(t){throw new U("Uncloneable type: "+t,it)},pt=function(t,e){throw new U((e||"Cloning")+" of "+t+" cannot be properly polyfilled in this engine",it)},ft=function(t,e){return ut||pt(e),ut(t)},mt=function(){var t;try{t=new o.DataTransfer}catch(e){try{t=new o.ClipboardEvent("").clipboardData}catch(n){}}return t&&t.items&&t.files?t:null},gt=function(t,e){if(f(t)&&dt("Symbol"),!p(t))return t;if(e){if(H(e,t))return W(e,t)}else e=new G;var n,i,r,a,l,c,u,d,m,g,S,_=v(t),E=!1;switch(_){case"Array":r=M(x(t)),E=!0;break;case"Object":r={},E=!0;break;case"Map":r=new G,E=!0;break;case"Set":r=new Y,E=!0;break;case"RegExp":r=new RegExp(t.source,k(t));break;case"Error":switch(i=t.name,i){case"AggregateError":r=s("AggregateError")([]);break;case"EvalError":r=T();break;case"RangeError":r=I();break;case"ReferenceError":r=O();break;case"SyntaxError":r=D();break;case"TypeError":r=j();break;case"URIError":r=R();break;case"CompileError":r=z();break;case"LinkError":r=$();break;case"RuntimeError":r=q();break;default:r=P()}E=!0;break;case"DOMException":r=new U(t.message,t.name),E=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":n=o[_],p(n)||pt(_),r=new n(gt(t.buffer,e),t.byteOffset,"DataView"===_?t.byteLength:t.length);break;case"DOMQuad":try{r=new DOMQuad(gt(t.p1,e),gt(t.p2,e),gt(t.p3,e),gt(t.p4,e))}catch(C){r=ft(t,_)}break;case"File":if(ut)try{r=ut(t),v(r)!==_&&(r=void 0)}catch(C){}if(!r)try{r=new File([t],t.name,t)}catch(C){}r||pt(_);break;case"FileList":if(a=mt(),a){for(l=0,c=x(t);l<c;l++)a.items.add(gt(t[l],e));r=a.files}else r=ft(t,_);break;case"ImageData":try{r=new ImageData(gt(t.data,e),t.width,t.height,{colorSpace:t.colorSpace})}catch(C){r=ft(t,_)}break;default:if(ut)r=ut(t);else switch(_){case"BigInt":r=A(t.valueOf());break;case"Boolean":r=A(Z(t));break;case"Number":r=A(Q(t));break;case"String":r=A(tt(t));break;case"Date":r=new N(et(t));break;case"ArrayBuffer":n=o.DataView,n||"function"==typeof t.slice||pt(_);try{if("function"!=typeof t.slice||t.resizable){c=t.byteLength,S="maxByteLength"in t?{maxByteLength:t.maxByteLength}:void 0,r=new ArrayBuffer(c,S),m=new n(t),g=new n(r);for(l=0;l<c;l++)g.setUint8(l,m.getUint8(l))}else r=t.slice(0)}catch(C){throw new U("ArrayBuffer is detached",it)}break;case"SharedArrayBuffer":r=t;break;case"Blob":try{r=t.slice(0,t.size,t.type)}catch(C){pt(_)}break;case"DOMPoint":case"DOMPointReadOnly":n=o[_];try{r=n.fromPoint?n.fromPoint(t):new n(t.x,t.y,t.z,t.w)}catch(C){pt(_)}break;case"DOMRect":case"DOMRectReadOnly":n=o[_];try{r=n.fromRect?n.fromRect(t):new n(t.x,t.y,t.width,t.height)}catch(C){pt(_)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=o[_];try{r=n.fromMatrix?n.fromMatrix(t):new n(t)}catch(C){pt(_)}break;case"AudioData":case"VideoFrame":h(t.clone)||pt(_);try{r=t.clone()}catch(C){dt(_)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":pt(_);default:dt(_)}}if(V(e,t,r),E)switch(_){case"Array":case"Object":for(u=X(t),l=0,c=x(u);l<c;l++)d=u[l],b(r,d,gt(t[d],e));break;case"Map":t.forEach((function(t,n){V(r,gt(n,e),gt(t,e))}));break;case"Set":t.forEach((function(t){J(r,gt(t,e))}));break;case"Error":w(r,"message",gt(t.message,e)),y(t,"cause")&&w(r,"cause",gt(t.cause,e)),"AggregateError"==i&&(r.errors=gt(t.errors,e));case"DOMException":L&&w(r,"stack",gt(t.stack,e))}return r},vt=function(t,e){if(!p(t))throw j("Transfer option cannot be converted to a sequence");var n=[];m(t,(function(t){K(n,g(t))}));var i,r,s,a,l,c,d,f=0,y=x(n);if(C){a=lt(n,{transfer:n});while(f<y)V(e,n[f],a[f++])}else while(f<y){if(i=n[f++],H(e,i))throw new U("Duplicate transferable",it);switch(r=v(i),r){case"ImageBitmap":s=o.OffscreenCanvas,u(s)||pt(r,rt);try{c=new s(i.width,i.height),d=c.getContext("bitmaprenderer"),d.transferFromImageBitmap(i),l=c.transferToImageBitmap()}catch(b){}break;case"AudioData":case"VideoFrame":h(i.clone)&&h(i.close)||pt(r,rt);try{l=i.clone(),i.close()}catch(b){}break;case"ArrayBuffer":h(i.transfer)||pt(r,rt),l=i.transfer();break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":pt(r,rt)}if(void 0===l)throw new U("This object cannot be transferred: "+r,it);V(e,i,l)}};r({global:!0,enumerable:!0,sham:!C,forced:ct},{structuredClone:function(t){var e,n=S(arguments.length,1)>1&&!d(arguments[1])?g(arguments[1]):void 0,i=n?n.transfer:void 0;return void 0!==i&&(e=new G,vt(i,e)),gt(t,e)}})},4870:function(t,e,n){"use strict";n.d(e,{B:function(){return s},Bj:function(){return o},Fl:function(){return Wt},IU:function(){return Pt},Jd:function(){return E},PG:function(){return Ct},SU:function(){return qt},Um:function(){return _t},WL:function(){return Gt},X$:function(){return M},X3:function(){return Nt},XI:function(){return Bt},Xl:function(){return Tt},dq:function(){return Rt},iH:function(){return Ft},j:function(){return C},lk:function(){return L},nZ:function(){return l},qj:function(){return kt},qq:function(){return x},yT:function(){return Mt}});n(7658);var i=n(7139);let r;class o{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=r,!t&&r&&(this.index=(r.scopes||(r.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=r;try{return r=this,t()}finally{r=e}}else 0}on(){r=this}off(){r=this.parent}stop(t){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0,this._active=!1}}}function s(t){return new o(t)}function a(t,e=r){e&&e.active&&e.effects.push(t)}function l(){return r}const c=t=>{const e=new Set(t);return e.w=0,e.n=0,e},h=t=>(t.w&g)>0,u=t=>(t.n&g)>0,d=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=g},p=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const r=e[i];h(r)&&!u(r)?r.delete(t):e[n++]=r,r.w&=~g,r.n&=~g}e.length=n}},f=new WeakMap;let m=0,g=1;const v=30;let y;const b=Symbol(""),w=Symbol("");class x{constructor(t,e=null,n){this.fn=t,this.scheduler=e,this.active=!0,this.deps=[],this.parent=void 0,a(this,n)}run(){if(!this.active)return this.fn();let t=y,e=k;while(t){if(t===this)return;t=t.parent}try{return this.parent=y,y=this,k=!0,g=1<<++m,m<=v?d(this):S(this),this.fn()}finally{m<=v&&p(this),g=1<<--m,y=this.parent,k=e,this.parent=void 0,this.deferStop&&this.stop()}}stop(){y===this?this.deferStop=!0:this.active&&(S(this),this.onStop&&this.onStop(),this.active=!1)}}function S(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let k=!0;const _=[];function E(){_.push(k),k=!1}function L(){const t=_.pop();k=void 0===t||t}function C(t,e,n){if(k&&y){let e=f.get(t);e||f.set(t,e=new Map);let i=e.get(n);i||e.set(n,i=c());const r=void 0;A(i,r)}}function A(t,e){let n=!1;m<=v?u(t)||(t.n|=g,n=!h(t)):n=!t.has(y),n&&(t.add(y),y.deps.push(t))}function M(t,e,n,r,o,s){const a=f.get(t);if(!a)return;let l=[];if("clear"===e)l=[...a.values()];else if("length"===n&&(0,i.kJ)(t)){const t=Number(r);a.forEach(((e,n)=>{("length"===n||n>=t)&&l.push(e)}))}else switch(void 0!==n&&l.push(a.get(n)),e){case"add":(0,i.kJ)(t)?(0,i.S0)(n)&&l.push(a.get("length")):(l.push(a.get(b)),(0,i._N)(t)&&l.push(a.get(w)));break;case"delete":(0,i.kJ)(t)||(l.push(a.get(b)),(0,i._N)(t)&&l.push(a.get(w)));break;case"set":(0,i._N)(t)&&l.push(a.get(b));break}if(1===l.length)l[0]&&N(l[0]);else{const t=[];for(const e of l)e&&t.push(...e);N(c(t))}}function N(t,e){const n=(0,i.kJ)(t)?t:[...t];for(const i of n)i.computed&&P(i,e);for(const i of n)i.computed||P(i,e)}function P(t,e){(t!==y||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const T=(0,i.fY)("__proto__,__v_isRef,__isVue"),I=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(i.yk)),O=z(),D=z(!1,!0),j=z(!0),R=F();function F(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=Pt(this);for(let e=0,r=this.length;e<r;e++)C(n,"get",e+"");const i=n[e](...t);return-1===i||!1===i?n[e](...t.map(Pt)):i}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){E();const n=Pt(this)[e].apply(this,t);return L(),n}})),t}function B(t){const e=Pt(this);return C(e,"has",t),e.hasOwnProperty(t)}function z(t=!1,e=!1){return function(n,r,o){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_isShallow"===r)return e;if("__v_raw"===r&&o===(t?e?wt:bt:e?yt:vt).get(n))return n;const s=(0,i.kJ)(n);if(!t){if(s&&(0,i.RI)(R,r))return Reflect.get(R,r,o);if("hasOwnProperty"===r)return B}const a=Reflect.get(n,r,o);return((0,i.yk)(r)?I.has(r):T(r))?a:(t||C(n,"get",r),e?a:Rt(a)?s&&(0,i.S0)(r)?a:a.value:(0,i.Kn)(a)?t?Et(a):kt(a):a)}}const $=U(),q=U(!0);function U(t=!1){return function(e,n,r,o){let s=e[n];if(At(s)&&Rt(s)&&!Rt(r))return!1;if(!t&&(Mt(r)||At(r)||(s=Pt(s),r=Pt(r)),!(0,i.kJ)(e)&&Rt(s)&&!Rt(r)))return s.value=r,!0;const a=(0,i.kJ)(e)&&(0,i.S0)(n)?Number(n)<e.length:(0,i.RI)(e,n),l=Reflect.set(e,n,r,o);return e===Pt(o)&&(a?(0,i.aU)(r,s)&&M(e,"set",n,r,s):M(e,"add",n,r)),l}}function G(t,e){const n=(0,i.RI)(t,e),r=t[e],o=Reflect.deleteProperty(t,e);return o&&n&&M(t,"delete",e,void 0,r),o}function H(t,e){const n=Reflect.has(t,e);return(0,i.yk)(e)&&I.has(e)||C(t,"has",e),n}function W(t){return C(t,"iterate",(0,i.kJ)(t)?"length":b),Reflect.ownKeys(t)}const V={get:O,set:$,deleteProperty:G,has:H,ownKeys:W},Y={get:j,set(t,e){return!0},deleteProperty(t,e){return!0}},J=(0,i.l7)({},V,{get:D,set:q}),X=t=>t,K=t=>Reflect.getPrototypeOf(t);function Z(t,e,n=!1,i=!1){t=t["__v_raw"];const r=Pt(t),o=Pt(e);n||(e!==o&&C(r,"get",e),C(r,"get",o));const{has:s}=K(r),a=i?X:n?Ot:It;return s.call(r,e)?a(t.get(e)):s.call(r,o)?a(t.get(o)):void(t!==r&&t.get(e))}function Q(t,e=!1){const n=this["__v_raw"],i=Pt(n),r=Pt(t);return e||(t!==r&&C(i,"has",t),C(i,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function tt(t,e=!1){return t=t["__v_raw"],!e&&C(Pt(t),"iterate",b),Reflect.get(t,"size",t)}function et(t){t=Pt(t);const e=Pt(this),n=K(e),i=n.has.call(e,t);return i||(e.add(t),M(e,"add",t,t)),this}function nt(t,e){e=Pt(e);const n=Pt(this),{has:r,get:o}=K(n);let s=r.call(n,t);s||(t=Pt(t),s=r.call(n,t));const a=o.call(n,t);return n.set(t,e),s?(0,i.aU)(e,a)&&M(n,"set",t,e,a):M(n,"add",t,e),this}function it(t){const e=Pt(this),{has:n,get:i}=K(e);let r=n.call(e,t);r||(t=Pt(t),r=n.call(e,t));const o=i?i.call(e,t):void 0,s=e.delete(t);return r&&M(e,"delete",t,void 0,o),s}function rt(){const t=Pt(this),e=0!==t.size,n=void 0,i=t.clear();return e&&M(t,"clear",void 0,void 0,n),i}function ot(t,e){return function(n,i){const r=this,o=r["__v_raw"],s=Pt(o),a=e?X:t?Ot:It;return!t&&C(s,"iterate",b),o.forEach(((t,e)=>n.call(i,a(t),a(e),r)))}}function st(t,e,n){return function(...r){const o=this["__v_raw"],s=Pt(o),a=(0,i._N)(s),l="entries"===t||t===Symbol.iterator&&a,c="keys"===t&&a,h=o[t](...r),u=n?X:e?Ot:It;return!e&&C(s,"iterate",c?w:b),{next(){const{value:t,done:e}=h.next();return e?{value:t,done:e}:{value:l?[u(t[0]),u(t[1])]:u(t),done:e}},[Symbol.iterator](){return this}}}}function at(t){return function(...e){return"delete"!==t&&this}}function lt(){const t={get(t){return Z(this,t)},get size(){return tt(this)},has:Q,add:et,set:nt,delete:it,clear:rt,forEach:ot(!1,!1)},e={get(t){return Z(this,t,!1,!0)},get size(){return tt(this)},has:Q,add:et,set:nt,delete:it,clear:rt,forEach:ot(!1,!0)},n={get(t){return Z(this,t,!0)},get size(){return tt(this,!0)},has(t){return Q.call(this,t,!0)},add:at("add"),set:at("set"),delete:at("delete"),clear:at("clear"),forEach:ot(!0,!1)},i={get(t){return Z(this,t,!0,!0)},get size(){return tt(this,!0)},has(t){return Q.call(this,t,!0)},add:at("add"),set:at("set"),delete:at("delete"),clear:at("clear"),forEach:ot(!0,!0)},r=["keys","values","entries",Symbol.iterator];return r.forEach((r=>{t[r]=st(r,!1,!1),n[r]=st(r,!0,!1),e[r]=st(r,!1,!0),i[r]=st(r,!0,!0)})),[t,n,e,i]}const[ct,ht,ut,dt]=lt();function pt(t,e){const n=e?t?dt:ut:t?ht:ct;return(e,r,o)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get((0,i.RI)(n,r)&&r in e?n:e,r,o)}const ft={get:pt(!1,!1)},mt={get:pt(!1,!0)},gt={get:pt(!0,!1)};const vt=new WeakMap,yt=new WeakMap,bt=new WeakMap,wt=new WeakMap;function xt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function St(t){return t["__v_skip"]||!Object.isExtensible(t)?0:xt((0,i.W7)(t))}function kt(t){return At(t)?t:Lt(t,!1,V,ft,vt)}function _t(t){return Lt(t,!1,J,mt,yt)}function Et(t){return Lt(t,!0,Y,gt,bt)}function Lt(t,e,n,r,o){if(!(0,i.Kn)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const s=o.get(t);if(s)return s;const a=St(t);if(0===a)return t;const l=new Proxy(t,2===a?r:n);return o.set(t,l),l}function Ct(t){return At(t)?Ct(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function At(t){return!(!t||!t["__v_isReadonly"])}function Mt(t){return!(!t||!t["__v_isShallow"])}function Nt(t){return Ct(t)||At(t)}function Pt(t){const e=t&&t["__v_raw"];return e?Pt(e):t}function Tt(t){return(0,i.Nj)(t,"__v_skip",!0),t}const It=t=>(0,i.Kn)(t)?kt(t):t,Ot=t=>(0,i.Kn)(t)?Et(t):t;function Dt(t){k&&y&&(t=Pt(t),A(t.dep||(t.dep=c())))}function jt(t,e){t=Pt(t);const n=t.dep;n&&N(n)}function Rt(t){return!(!t||!0!==t.__v_isRef)}function Ft(t){return zt(t,!1)}function Bt(t){return zt(t,!0)}function zt(t,e){return Rt(t)?t:new $t(t,e)}class $t{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Pt(t),this._value=e?t:It(t)}get value(){return Dt(this),this._value}set value(t){const e=this.__v_isShallow||Mt(t)||At(t);t=e?t:Pt(t),(0,i.aU)(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:It(t),jt(this,t))}}function qt(t){return Rt(t)?t.value:t}const Ut={get:(t,e,n)=>qt(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const r=t[e];return Rt(r)&&!Rt(n)?(r.value=n,!0):Reflect.set(t,e,n,i)}};function Gt(t){return Ct(t)?t:new Proxy(t,Ut)}class Ht{constructor(t,e,n,i){this._setter=e,this.dep=void 0,this.__v_isRef=!0,this["__v_isReadonly"]=!1,this._dirty=!0,this.effect=new x(t,(()=>{this._dirty||(this._dirty=!0,jt(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!i,this["__v_isReadonly"]=n}get value(){const t=Pt(this);return Dt(t),!t._dirty&&t._cacheable||(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function Wt(t,e,n=!1){let r,o;const s=(0,i.mf)(t);s?(r=t,o=i.dG):(r=t.get,o=t.set);const a=new Ht(r,o,s||!o,n);return a}},3396:function(t,e,n){"use strict";n.d(e,{$d:function(){return s},Cn:function(){return j},FN:function(){return vn},Fl:function(){return jn},HY:function(){return je},JJ:function(){return ce},Ko:function(){return Ft},P$:function(){return rt},Q6:function(){return ht},U2:function(){return st},Uk:function(){return sn},Us:function(){return Ne},Wm:function(){return en},Y3:function(){return y},Y8:function(){return tt},YP:function(){return V},_:function(){return tn},aZ:function(){return ut},dD:function(){return D},f3:function(){return he},h:function(){return Rn},iD:function(){return Ve},ic:function(){return Lt},kq:function(){return an},nJ:function(){return nt},nK:function(){return ct},up:function(){return Ot},w5:function(){return R},wg:function(){return qe},wy:function(){return Z}});n(7658);var i=n(4870),r=n(7139);function o(t,e,n,i){let r;try{r=i?t(...i):t()}catch(o){a(o,e,n)}return r}function s(t,e,n,i){if((0,r.mf)(t)){const s=o(t,e,n,i);return s&&(0,r.tI)(s)&&s.catch((t=>{a(t,e,n)})),s}const l=[];for(let r=0;r<t.length;r++)l.push(s(t[r],e,n,i));return l}function a(t,e,n,i=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const r=e.proxy,s=n;while(i){const e=i.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,r,s))return;i=i.parent}const a=e.appContext.config.errorHandler;if(a)return void o(a,null,10,[t,r,s])}l(t,n,r,i)}function l(t,e,n,i=!0){console.error(t)}let c=!1,h=!1;const u=[];let d=0;const p=[];let f=null,m=0;const g=Promise.resolve();let v=null;function y(t){const e=v||g;return t?e.then(this?t.bind(this):t):e}function b(t){let e=d+1,n=u.length;while(e<n){const i=e+n>>>1,r=L(u[i]);r<t?e=i+1:n=i}return e}function w(t){u.length&&u.includes(t,c&&t.allowRecurse?d+1:d)||(null==t.id?u.push(t):u.splice(b(t.id),0,t),x())}function x(){c||h||(h=!0,v=g.then(A))}function S(t){const e=u.indexOf(t);e>d&&u.splice(e,1)}function k(t){(0,r.kJ)(t)?p.push(...t):f&&f.includes(t,t.allowRecurse?m+1:m)||p.push(t),x()}function _(t,e=(c?d+1:0)){for(0;e<u.length;e++){const t=u[e];t&&t.pre&&(u.splice(e,1),e--,t())}}function E(t){if(p.length){const t=[...new Set(p)];if(p.length=0,f)return void f.push(...t);for(f=t,f.sort(((t,e)=>L(t)-L(e))),m=0;m<f.length;m++)f[m]();f=null,m=0}}const L=t=>null==t.id?1/0:t.id,C=(t,e)=>{const n=L(t)-L(e);if(0===n){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function A(t){h=!1,c=!0,u.sort(C);r.dG;try{for(d=0;d<u.length;d++){const t=u[d];t&&!1!==t.active&&o(t,null,14)}}finally{d=0,u.length=0,E(t),c=!1,v=null,(u.length||p.length)&&A(t)}}function M(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||r.kT;let o=n;const a=e.startsWith("update:"),l=a&&e.slice(7);if(l&&l in i){const t=`${"modelValue"===l?"model":l}Modifiers`,{number:e,trim:s}=i[t]||r.kT;s&&(o=n.map((t=>(0,r.HD)(t)?t.trim():t))),e&&(o=n.map(r.h5))}let c;let h=i[c=(0,r.hR)(e)]||i[c=(0,r.hR)((0,r._A)(e))];!h&&a&&(h=i[c=(0,r.hR)((0,r.rs)(e))]),h&&s(h,t,6,o);const u=i[c+"Once"];if(u){if(t.emitted){if(t.emitted[c])return}else t.emitted={};t.emitted[c]=!0,s(u,t,6,o)}}function N(t,e,n=!1){const i=e.emitsCache,o=i.get(t);if(void 0!==o)return o;const s=t.emits;let a={},l=!1;if(!(0,r.mf)(t)){const i=t=>{const n=N(t,e,!0);n&&(l=!0,(0,r.l7)(a,n))};!n&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}return s||l?((0,r.kJ)(s)?s.forEach((t=>a[t]=null)):(0,r.l7)(a,s),(0,r.Kn)(t)&&i.set(t,a),a):((0,r.Kn)(t)&&i.set(t,null),null)}function P(t,e){return!(!t||!(0,r.F7)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,r.RI)(t,e[0].toLowerCase()+e.slice(1))||(0,r.RI)(t,(0,r.rs)(e))||(0,r.RI)(t,e))}let T=null,I=null;function O(t){const e=T;return T=t,I=t&&t.type.__scopeId||null,e}function D(t){I=t}function j(){I=null}function R(t,e=T,n){if(!e)return t;if(t._n)return t;const i=(...n)=>{i._d&&He(-1);const r=O(e);let o;try{o=t(...n)}finally{O(r),i._d&&He(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function F(t){const{type:e,vnode:n,proxy:i,withProxy:o,props:s,propsOptions:[l],slots:c,attrs:h,emit:u,render:d,renderCache:p,data:f,setupState:m,ctx:g,inheritAttrs:v}=t;let y,b;const w=O(t);try{if(4&n.shapeFlag){const t=o||i;y=ln(d.call(t,t,p,s,m,f,g)),b=h}else{const t=e;0,y=ln(t.length>1?t(s,{attrs:h,slots:c,emit:u}):t(s,null)),b=e.props?h:B(h)}}catch(S){ze.length=0,a(S,t,1),y=en(Fe)}let x=y;if(b&&!1!==v){const t=Object.keys(b),{shapeFlag:e}=x;t.length&&7&e&&(l&&t.some(r.tR)&&(b=z(b,l)),x=on(x,b))}return n.dirs&&(x=on(x),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&(x.transition=n.transition),y=x,O(w),y}const B=t=>{let e;for(const n in t)("class"===n||"style"===n||(0,r.F7)(n))&&((e||(e={}))[n]=t[n]);return e},z=(t,e)=>{const n={};for(const i in t)(0,r.tR)(i)&&i.slice(9)in e||(n[i]=t[i]);return n};function $(t,e,n){const{props:i,children:r,component:o}=t,{props:s,children:a,patchFlag:l}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&l>=0))return!(!r&&!a||a&&a.$stable)||i!==s&&(i?!s||q(i,s,c):!!s);if(1024&l)return!0;if(16&l)return i?q(i,s,c):!!s;if(8&l){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==i[n]&&!P(c,n))return!0}}return!1}function q(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let r=0;r<i.length;r++){const o=i[r];if(e[o]!==t[o]&&!P(n,o))return!0}return!1}function U({vnode:t,parent:e},n){while(e&&e.subTree===t)(t=e.vnode).el=n,e=e.parent}const G=t=>t.__isSuspense;function H(t,e){e&&e.pendingBranch?(0,r.kJ)(t)?e.effects.push(...t):e.effects.push(t):k(t)}const W={};function V(t,e,n){return Y(t,e,n)}function Y(t,e,{immediate:n,deep:a,flush:l,onTrack:c,onTrigger:h}=r.kT){var u;const d=(0,i.nZ)()===(null==(u=gn)?void 0:u.scope)?gn:null;let p,f,m=!1,g=!1;if((0,i.dq)(t)?(p=()=>t.value,m=(0,i.yT)(t)):(0,i.PG)(t)?(p=()=>t,a=!0):(0,r.kJ)(t)?(g=!0,m=t.some((t=>(0,i.PG)(t)||(0,i.yT)(t))),p=()=>t.map((t=>(0,i.dq)(t)?t.value:(0,i.PG)(t)?K(t):(0,r.mf)(t)?o(t,d,2):void 0))):p=(0,r.mf)(t)?e?()=>o(t,d,2):()=>{if(!d||!d.isUnmounted)return f&&f(),s(t,d,3,[y])}:r.dG,e&&a){const t=p;p=()=>K(t())}let v,y=t=>{f=k.onStop=()=>{o(t,d,4)}};if(Ln){if(y=r.dG,e?n&&s(e,d,3,[p(),g?[]:void 0,y]):p(),"sync"!==l)return r.dG;{const t=Bn();v=t.__watcherHandles||(t.__watcherHandles=[])}}let b=g?new Array(t.length).fill(W):W;const x=()=>{if(k.active)if(e){const t=k.run();(a||m||(g?t.some(((t,e)=>(0,r.aU)(t,b[e]))):(0,r.aU)(t,b)))&&(f&&f(),s(e,d,3,[t,b===W?void 0:g&&b[0]===W?[]:b,y]),b=t)}else k.run()};let S;x.allowRecurse=!!e,"sync"===l?S=x:"post"===l?S=()=>Me(x,d&&d.suspense):(x.pre=!0,d&&(x.id=d.uid),S=()=>w(x));const k=new i.qq(p,S);e?n?x():b=k.run():"post"===l?Me(k.run.bind(k),d&&d.suspense):k.run();const _=()=>{k.stop(),d&&d.scope&&(0,r.Od)(d.scope.effects,k)};return v&&v.push(_),_}function J(t,e,n){const i=this.proxy,o=(0,r.HD)(t)?t.includes(".")?X(i,t):()=>i[t]:t.bind(i,i);let s;(0,r.mf)(e)?s=e:(s=e.handler,n=e);const a=gn;xn(this);const l=Y(o,s.bind(i),n);return a?xn(a):Sn(),l}function X(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function K(t,e){if(!(0,r.Kn)(t)||t["__v_skip"])return t;if(e=e||new Set,e.has(t))return t;if(e.add(t),(0,i.dq)(t))K(t.value,e);else if((0,r.kJ)(t))for(let n=0;n<t.length;n++)K(t[n],e);else if((0,r.DM)(t)||(0,r._N)(t))t.forEach((t=>{K(t,e)}));else if((0,r.PO)(t))for(const n in t)K(t[n],e);return t}function Z(t,e){const n=T;if(null===n)return t;const i=In(n)||n.proxy,o=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[t,n,a,l=r.kT]=e[s];t&&((0,r.mf)(t)&&(t={mounted:t,updated:t}),t.deep&&K(n),o.push({dir:t,instance:i,value:n,oldValue:void 0,arg:a,modifiers:l}))}return t}function Q(t,e,n,r){const o=t.dirs,a=e&&e.dirs;for(let l=0;l<o.length;l++){const c=o[l];a&&(c.oldValue=a[l].value);let h=c.dir[r];h&&((0,i.Jd)(),s(h,n,8,[t.el,c,t,e]),(0,i.lk)())}}function tt(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return _t((()=>{t.isMounted=!0})),Ct((()=>{t.isUnmounting=!0})),t}const et=[Function,Array],nt={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:et,onEnter:et,onAfterEnter:et,onEnterCancelled:et,onBeforeLeave:et,onLeave:et,onAfterLeave:et,onLeaveCancelled:et,onBeforeAppear:et,onAppear:et,onAfterAppear:et,onAppearCancelled:et},it={name:"BaseTransition",props:nt,setup(t,{slots:e}){const n=vn(),r=tt();let o;return()=>{const s=e.default&&ht(e.default(),!0);if(!s||!s.length)return;let a=s[0];if(s.length>1){let t=!1;for(const e of s)if(e.type!==Fe){0,a=e,t=!0;break}}const l=(0,i.IU)(t),{mode:c}=l;if(r.isLeaving)return at(a);const h=lt(a);if(!h)return at(a);const u=st(h,l,r,n);ct(h,u);const d=n.subTree,p=d&&lt(d);let f=!1;const{getTransitionKey:m}=h.type;if(m){const t=m();void 0===o?o=t:t!==o&&(o=t,f=!0)}if(p&&p.type!==Fe&&(!Xe(h,p)||f)){const t=st(p,l,r,n);if(ct(p,t),"out-in"===c)return r.isLeaving=!0,t.afterLeave=()=>{r.isLeaving=!1,!1!==n.update.active&&n.update()},at(a);"in-out"===c&&h.type!==Fe&&(t.delayLeave=(t,e,n)=>{const i=ot(r,p);i[String(p.key)]=p,t._leaveCb=()=>{e(),t._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=n})}return a}}},rt=it;function ot(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function st(t,e,n,i){const{appear:o,mode:a,persisted:l=!1,onBeforeEnter:c,onEnter:h,onAfterEnter:u,onEnterCancelled:d,onBeforeLeave:p,onLeave:f,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:v,onAppear:y,onAfterAppear:b,onAppearCancelled:w}=e,x=String(t.key),S=ot(n,t),k=(t,e)=>{t&&s(t,i,9,e)},_=(t,e)=>{const n=e[1];k(t,e),(0,r.kJ)(t)?t.every((t=>t.length<=1))&&n():t.length<=1&&n()},E={mode:a,persisted:l,beforeEnter(e){let i=c;if(!n.isMounted){if(!o)return;i=v||c}e._leaveCb&&e._leaveCb(!0);const r=S[x];r&&Xe(t,r)&&r.el._leaveCb&&r.el._leaveCb(),k(i,[e])},enter(t){let e=h,i=u,r=d;if(!n.isMounted){if(!o)return;e=y||h,i=b||u,r=w||d}let s=!1;const a=t._enterCb=e=>{s||(s=!0,k(e?r:i,[t]),E.delayedLeave&&E.delayedLeave(),t._enterCb=void 0)};e?_(e,[t,a]):a()},leave(e,i){const r=String(t.key);if(e._enterCb&&e._enterCb(!0),n.isUnmounting)return i();k(p,[e]);let o=!1;const s=e._leaveCb=n=>{o||(o=!0,i(),k(n?g:m,[e]),e._leaveCb=void 0,S[r]===t&&delete S[r])};S[r]=t,f?_(f,[e,s]):s()},clone(t){return st(t,e,n,i)}};return E}function at(t){if(pt(t))return t=on(t),t.children=null,t}function lt(t){return pt(t)?t.children?t.children[0]:void 0:t}function ct(t,e){6&t.shapeFlag&&t.component?ct(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function ht(t,e=!1,n){let i=[],r=0;for(let o=0;o<t.length;o++){let s=t[o];const a=null==n?s.key:String(n)+String(null!=s.key?s.key:o);s.type===je?(128&s.patchFlag&&r++,i=i.concat(ht(s.children,e,a))):(e||s.type!==Fe)&&i.push(null!=a?on(s,{key:a}):s)}if(r>1)for(let o=0;o<i.length;o++)i[o].patchFlag=-2;return i}function ut(t,e){return(0,r.mf)(t)?(()=>(0,r.l7)({name:t.name},e,{setup:t}))():t}const dt=t=>!!t.type.__asyncLoader;const pt=t=>t.type.__isKeepAlive;RegExp,RegExp;function ft(t,e){return(0,r.kJ)(t)?t.some((t=>ft(t,e))):(0,r.HD)(t)?t.split(",").includes(e):!!(0,r.Kj)(t)&&t.test(e)}function mt(t,e){vt(t,"a",e)}function gt(t,e){vt(t,"da",e)}function vt(t,e,n=gn){const i=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(xt(e,i,n),n){let t=n.parent;while(t&&t.parent)pt(t.parent.vnode)&&yt(i,e,n,t),t=t.parent}}function yt(t,e,n,i){const o=xt(e,t,i,!0);At((()=>{(0,r.Od)(i[e],o)}),n)}function bt(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function wt(t){return 128&t.shapeFlag?t.ssContent:t}function xt(t,e,n=gn,r=!1){if(n){const o=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;(0,i.Jd)(),xn(n);const o=s(e,n,t,r);return Sn(),(0,i.lk)(),o});return r?o.unshift(a):o.push(a),a}}const St=t=>(e,n=gn)=>(!Ln||"sp"===t)&&xt(t,((...t)=>e(...t)),n),kt=St("bm"),_t=St("m"),Et=St("bu"),Lt=St("u"),Ct=St("bum"),At=St("um"),Mt=St("sp"),Nt=St("rtg"),Pt=St("rtc");function Tt(t,e=gn){xt("ec",t,e)}const It="components";function Ot(t,e){return jt(It,t,!0,e)||t}const Dt=Symbol.for("v-ndc");function jt(t,e,n=!0,i=!1){const o=T||gn;if(o){const n=o.type;if(t===It){const t=On(n,!1);if(t&&(t===e||t===(0,r._A)(e)||t===(0,r.kC)((0,r._A)(e))))return n}const s=Rt(o[t]||n[t],e)||Rt(o.appContext[t],e);return!s&&i?n:s}}function Rt(t,e){return t&&(t[e]||t[(0,r._A)(e)]||t[(0,r.kC)((0,r._A)(e))])}function Ft(t,e,n,i){let o;const s=n&&n[i];if((0,r.kJ)(t)||(0,r.HD)(t)){o=new Array(t.length);for(let n=0,i=t.length;n<i;n++)o[n]=e(t[n],n,void 0,s&&s[n])}else if("number"===typeof t){0,o=new Array(t);for(let n=0;n<t;n++)o[n]=e(n+1,n,void 0,s&&s[n])}else if((0,r.Kn)(t))if(t[Symbol.iterator])o=Array.from(t,((t,n)=>e(t,n,void 0,s&&s[n])));else{const n=Object.keys(t);o=new Array(n.length);for(let i=0,r=n.length;i<r;i++){const r=n[i];o[i]=e(t[r],r,i,s&&s[i])}}else o=[];return n&&(n[i]=o),o}const Bt=t=>t?kn(t)?In(t)||t.proxy:Bt(t.parent):null,zt=(0,r.l7)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Bt(t.parent),$root:t=>Bt(t.root),$emit:t=>t.emit,$options:t=>Jt(t),$forceUpdate:t=>t.f||(t.f=()=>w(t.update)),$nextTick:t=>t.n||(t.n=y.bind(t.proxy)),$watch:t=>J.bind(t)}),$t=(t,e)=>t!==r.kT&&!t.__isScriptSetup&&(0,r.RI)(t,e),qt={get({_:t},e){const{ctx:n,setupState:o,data:s,props:a,accessCache:l,type:c,appContext:h}=t;let u;if("$"!==e[0]){const i=l[e];if(void 0!==i)switch(i){case 1:return o[e];case 2:return s[e];case 4:return n[e];case 3:return a[e]}else{if($t(o,e))return l[e]=1,o[e];if(s!==r.kT&&(0,r.RI)(s,e))return l[e]=2,s[e];if((u=t.propsOptions[0])&&(0,r.RI)(u,e))return l[e]=3,a[e];if(n!==r.kT&&(0,r.RI)(n,e))return l[e]=4,n[e];Gt&&(l[e]=0)}}const d=zt[e];let p,f;return d?("$attrs"===e&&(0,i.j)(t,"get",e),d(t)):(p=c.__cssModules)&&(p=p[e])?p:n!==r.kT&&(0,r.RI)(n,e)?(l[e]=4,n[e]):(f=h.config.globalProperties,(0,r.RI)(f,e)?f[e]:void 0)},set({_:t},e,n){const{data:i,setupState:o,ctx:s}=t;return $t(o,e)?(o[e]=n,!0):i!==r.kT&&(0,r.RI)(i,e)?(i[e]=n,!0):!(0,r.RI)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(s[e]=n,!0))},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:o,propsOptions:s}},a){let l;return!!n[a]||t!==r.kT&&(0,r.RI)(t,a)||$t(e,a)||(l=s[0])&&(0,r.RI)(l,a)||(0,r.RI)(i,a)||(0,r.RI)(zt,a)||(0,r.RI)(o.config.globalProperties,a)},defineProperty(t,e,n){return null!=n.get?t._.accessCache[e]=0:(0,r.RI)(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Ut(t){return(0,r.kJ)(t)?t.reduce(((t,e)=>(t[e]=null,t)),{}):t}let Gt=!0;function Ht(t){const e=Jt(t),n=t.proxy,o=t.ctx;Gt=!1,e.beforeCreate&&Vt(e.beforeCreate,t,"bc");const{data:s,computed:a,methods:l,watch:c,provide:h,inject:u,created:d,beforeMount:p,mounted:f,beforeUpdate:m,updated:g,activated:v,deactivated:y,beforeDestroy:b,beforeUnmount:w,destroyed:x,unmounted:S,render:k,renderTracked:_,renderTriggered:E,errorCaptured:L,serverPrefetch:C,expose:A,inheritAttrs:M,components:N,directives:P,filters:T}=e,I=null;if(u&&Wt(u,o,I),l)for(const i in l){const t=l[i];(0,r.mf)(t)&&(o[i]=t.bind(n))}if(s){0;const e=s.call(n,n);0,(0,r.Kn)(e)&&(t.data=(0,i.qj)(e))}if(Gt=!0,a)for(const i in a){const t=a[i],e=(0,r.mf)(t)?t.bind(n,n):(0,r.mf)(t.get)?t.get.bind(n,n):r.dG;0;const s=!(0,r.mf)(t)&&(0,r.mf)(t.set)?t.set.bind(n):r.dG,l=jn({get:e,set:s});Object.defineProperty(o,i,{enumerable:!0,configurable:!0,get:()=>l.value,set:t=>l.value=t})}if(c)for(const i in c)Yt(c[i],o,n,i);if(h){const t=(0,r.mf)(h)?h.call(n):h;Reflect.ownKeys(t).forEach((e=>{ce(e,t[e])}))}function O(t,e){(0,r.kJ)(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(d&&Vt(d,t,"c"),O(kt,p),O(_t,f),O(Et,m),O(Lt,g),O(mt,v),O(gt,y),O(Tt,L),O(Pt,_),O(Nt,E),O(Ct,w),O(At,S),O(Mt,C),(0,r.kJ)(A))if(A.length){const e=t.exposed||(t.exposed={});A.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});k&&t.render===r.dG&&(t.render=k),null!=M&&(t.inheritAttrs=M),N&&(t.components=N),P&&(t.directives=P)}function Wt(t,e,n=r.dG){(0,r.kJ)(t)&&(t=te(t));for(const o in t){const n=t[o];let s;s=(0,r.Kn)(n)?"default"in n?he(n.from||o,n.default,!0):he(n.from||o):he(n),(0,i.dq)(s)?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>s.value,set:t=>s.value=t}):e[o]=s}}function Vt(t,e,n){s((0,r.kJ)(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function Yt(t,e,n,i){const o=i.includes(".")?X(n,i):()=>n[i];if((0,r.HD)(t)){const n=e[t];(0,r.mf)(n)&&V(o,n)}else if((0,r.mf)(t))V(o,t.bind(n));else if((0,r.Kn)(t))if((0,r.kJ)(t))t.forEach((t=>Yt(t,e,n,i)));else{const i=(0,r.mf)(t.handler)?t.handler.bind(n):e[t.handler];(0,r.mf)(i)&&V(o,i,t)}else 0}function Jt(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:o,optionsCache:s,config:{optionMergeStrategies:a}}=t.appContext,l=s.get(e);let c;return l?c=l:o.length||n||i?(c={},o.length&&o.forEach((t=>Xt(c,t,a,!0))),Xt(c,e,a)):c=e,(0,r.Kn)(e)&&s.set(e,c),c}function Xt(t,e,n,i=!1){const{mixins:r,extends:o}=e;o&&Xt(t,o,n,!0),r&&r.forEach((e=>Xt(t,e,n,!0)));for(const s in e)if(i&&"expose"===s);else{const i=Kt[s]||n&&n[s];t[s]=i?i(t[s],e[s]):e[s]}return t}const Kt={data:Zt,props:ie,emits:ie,methods:ne,computed:ne,beforeCreate:ee,created:ee,beforeMount:ee,mounted:ee,beforeUpdate:ee,updated:ee,beforeDestroy:ee,beforeUnmount:ee,destroyed:ee,unmounted:ee,activated:ee,deactivated:ee,errorCaptured:ee,serverPrefetch:ee,components:ne,directives:ne,watch:re,provide:Zt,inject:Qt};function Zt(t,e){return e?t?function(){return(0,r.l7)((0,r.mf)(t)?t.call(this,this):t,(0,r.mf)(e)?e.call(this,this):e)}:e:t}function Qt(t,e){return ne(te(t),te(e))}function te(t){if((0,r.kJ)(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function ee(t,e){return t?[...new Set([].concat(t,e))]:e}function ne(t,e){return t?(0,r.l7)(Object.create(null),t,e):e}function ie(t,e){return t?(0,r.kJ)(t)&&(0,r.kJ)(e)?[...new Set([...t,...e])]:(0,r.l7)(Object.create(null),Ut(t),Ut(null!=e?e:{})):e}function re(t,e){if(!t)return e;if(!e)return t;const n=(0,r.l7)(Object.create(null),t);for(const i in e)n[i]=ee(t[i],e[i]);return n}function oe(){return{app:null,config:{isNativeTag:r.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let se=0;function ae(t,e){return function(n,i=null){(0,r.mf)(n)||(n=(0,r.l7)({},n)),null==i||(0,r.Kn)(i)||(i=null);const o=oe();const s=new Set;let a=!1;const l=o.app={_uid:se++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:zn,get config(){return o.config},set config(t){0},use(t,...e){return s.has(t)||(t&&(0,r.mf)(t.install)?(s.add(t),t.install(l,...e)):(0,r.mf)(t)&&(s.add(t),t(l,...e))),l},mixin(t){return o.mixins.includes(t)||o.mixins.push(t),l},component(t,e){return e?(o.components[t]=e,l):o.components[t]},directive(t,e){return e?(o.directives[t]=e,l):o.directives[t]},mount(r,s,c){if(!a){0;const h=en(n,i);return h.appContext=o,s&&e?e(h,r):t(h,r,c),a=!0,l._container=r,r.__vue_app__=l,In(h.component)||h.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(t,e){return o.provides[t]=e,l},runWithContext(t){le=l;try{return t()}finally{le=null}}};return l}}let le=null;function ce(t,e){if(gn){let n=gn.provides;const i=gn.parent&&gn.parent.provides;i===n&&(n=gn.provides=Object.create(i)),n[t]=e}else 0}function he(t,e,n=!1){const i=gn||T;if(i||le){const o=i?null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:le._context.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&(0,r.mf)(e)?e.call(i&&i.proxy):e}else 0}function ue(t,e,n,o=!1){const s={},a={};(0,r.Nj)(a,Ke,1),t.propsDefaults=Object.create(null),pe(t,e,s,a);for(const i in t.propsOptions[0])i in s||(s[i]=void 0);n?t.props=o?s:(0,i.Um)(s):t.type.props?t.props=s:t.props=a,t.attrs=a}function de(t,e,n,o){const{props:s,attrs:a,vnode:{patchFlag:l}}=t,c=(0,i.IU)(s),[h]=t.propsOptions;let u=!1;if(!(o||l>0)||16&l){let i;pe(t,e,s,a)&&(u=!0);for(const o in c)e&&((0,r.RI)(e,o)||(i=(0,r.rs)(o))!==o&&(0,r.RI)(e,i))||(h?!n||void 0===n[o]&&void 0===n[i]||(s[o]=fe(h,c,o,void 0,t,!0)):delete s[o]);if(a!==c)for(const t in a)e&&(0,r.RI)(e,t)||(delete a[t],u=!0)}else if(8&l){const n=t.vnode.dynamicProps;for(let i=0;i<n.length;i++){let o=n[i];if(P(t.emitsOptions,o))continue;const l=e[o];if(h)if((0,r.RI)(a,o))l!==a[o]&&(a[o]=l,u=!0);else{const e=(0,r._A)(o);s[e]=fe(h,c,e,l,t,!1)}else l!==a[o]&&(a[o]=l,u=!0)}}u&&(0,i.X$)(t,"set","$attrs")}function pe(t,e,n,o){const[s,a]=t.propsOptions;let l,c=!1;if(e)for(let i in e){if((0,r.Gg)(i))continue;const h=e[i];let u;s&&(0,r.RI)(s,u=(0,r._A)(i))?a&&a.includes(u)?(l||(l={}))[u]=h:n[u]=h:P(t.emitsOptions,i)||i in o&&h===o[i]||(o[i]=h,c=!0)}if(a){const e=(0,i.IU)(n),o=l||r.kT;for(let i=0;i<a.length;i++){const l=a[i];n[l]=fe(s,e,l,o[l],t,!(0,r.RI)(o,l))}}return c}function fe(t,e,n,i,o,s){const a=t[n];if(null!=a){const t=(0,r.RI)(a,"default");if(t&&void 0===i){const t=a.default;if(a.type!==Function&&!a.skipFactory&&(0,r.mf)(t)){const{propsDefaults:r}=o;n in r?i=r[n]:(xn(o),i=r[n]=t.call(null,e),Sn())}else i=t}a[0]&&(s&&!t?i=!1:!a[1]||""!==i&&i!==(0,r.rs)(n)||(i=!0))}return i}function me(t,e,n=!1){const i=e.propsCache,o=i.get(t);if(o)return o;const s=t.props,a={},l=[];let c=!1;if(!(0,r.mf)(t)){const i=t=>{c=!0;const[n,i]=me(t,e,!0);(0,r.l7)(a,n),i&&l.push(...i)};!n&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}if(!s&&!c)return(0,r.Kn)(t)&&i.set(t,r.Z6),r.Z6;if((0,r.kJ)(s))for(let u=0;u<s.length;u++){0;const t=(0,r._A)(s[u]);ge(t)&&(a[t]=r.kT)}else if(s){0;for(const t in s){const e=(0,r._A)(t);if(ge(e)){const n=s[t],i=a[e]=(0,r.kJ)(n)||(0,r.mf)(n)?{type:n}:(0,r.l7)({},n);if(i){const t=be(Boolean,i.type),n=be(String,i.type);i[0]=t>-1,i[1]=n<0||t<n,(t>-1||(0,r.RI)(i,"default"))&&l.push(e)}}}}const h=[a,l];return(0,r.Kn)(t)&&i.set(t,h),h}function ge(t){return"$"!==t[0]}function ve(t){const e=t&&t.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:null===t?"null":""}function ye(t,e){return ve(t)===ve(e)}function be(t,e){return(0,r.kJ)(e)?e.findIndex((e=>ye(e,t))):(0,r.mf)(e)&&ye(e,t)?0:-1}const we=t=>"_"===t[0]||"$stable"===t,xe=t=>(0,r.kJ)(t)?t.map(ln):[ln(t)],Se=(t,e,n)=>{if(e._n)return e;const i=R(((...t)=>xe(e(...t))),n);return i._c=!1,i},ke=(t,e,n)=>{const i=t._ctx;for(const o in t){if(we(o))continue;const n=t[o];if((0,r.mf)(n))e[o]=Se(o,n,i);else if(null!=n){0;const t=xe(n);e[o]=()=>t}}},_e=(t,e)=>{const n=xe(e);t.slots.default=()=>n},Ee=(t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=(0,i.IU)(e),(0,r.Nj)(e,"_",n)):ke(e,t.slots={})}else t.slots={},e&&_e(t,e);(0,r.Nj)(t.slots,Ke,1)},Le=(t,e,n)=>{const{vnode:i,slots:o}=t;let s=!0,a=r.kT;if(32&i.shapeFlag){const t=e._;t?n&&1===t?s=!1:((0,r.l7)(o,e),n||1!==t||delete o._):(s=!e.$stable,ke(e,o)),a=e}else e&&(_e(t,e),a={default:1});if(s)for(const r in o)we(r)||r in a||delete o[r]};function Ce(t,e,n,s,a=!1){if((0,r.kJ)(t))return void t.forEach(((t,i)=>Ce(t,e&&((0,r.kJ)(e)?e[i]:e),n,s,a)));if(dt(s)&&!a)return;const l=4&s.shapeFlag?In(s.component)||s.component.proxy:s.el,c=a?null:l,{i:h,r:u}=t;const d=e&&e.r,p=h.refs===r.kT?h.refs={}:h.refs,f=h.setupState;if(null!=d&&d!==u&&((0,r.HD)(d)?(p[d]=null,(0,r.RI)(f,d)&&(f[d]=null)):(0,i.dq)(d)&&(d.value=null)),(0,r.mf)(u))o(u,h,12,[c,p]);else{const e=(0,r.HD)(u),o=(0,i.dq)(u);if(e||o){const i=()=>{if(t.f){const n=e?(0,r.RI)(f,u)?f[u]:p[u]:u.value;a?(0,r.kJ)(n)&&(0,r.Od)(n,l):(0,r.kJ)(n)?n.includes(l)||n.push(l):e?(p[u]=[l],(0,r.RI)(f,u)&&(f[u]=p[u])):(u.value=[l],t.k&&(p[t.k]=u.value))}else e?(p[u]=c,(0,r.RI)(f,u)&&(f[u]=c)):o&&(u.value=c,t.k&&(p[t.k]=c))};c?(i.id=-1,Me(i,n)):i()}else 0}}function Ae(){}const Me=H;function Ne(t){return Pe(t)}function Pe(t,e){Ae();const n=(0,r.E9)();n.__VUE__=!0;const{insert:o,remove:s,patchProp:a,createElement:l,createText:c,createComment:h,setText:u,setElementText:d,parentNode:p,nextSibling:f,setScopeId:m=r.dG,insertStaticContent:g}=t,v=(t,e,n,i=null,r=null,o=null,s=!1,a=null,l=!!e.dynamicChildren)=>{if(t===e)return;t&&!Xe(t,e)&&(i=Z(t),V(t,r,o,!0),t=null),-2===e.patchFlag&&(l=!1,e.dynamicChildren=null);const{type:c,ref:h,shapeFlag:u}=e;switch(c){case Re:y(t,e,n,i);break;case Fe:b(t,e,n,i);break;case Be:null==t&&x(e,n,i,s);break;case je:O(t,e,n,i,r,o,s,a,l);break;default:1&u?C(t,e,n,i,r,o,s,a,l):6&u?D(t,e,n,i,r,o,s,a,l):(64&u||128&u)&&c.process(t,e,n,i,r,o,s,a,l,et)}null!=h&&r&&Ce(h,t&&t.ref,o,e||t,!e)},y=(t,e,n,i)=>{if(null==t)o(e.el=c(e.children),n,i);else{const n=e.el=t.el;e.children!==t.children&&u(n,e.children)}},b=(t,e,n,i)=>{null==t?o(e.el=h(e.children||""),n,i):e.el=t.el},x=(t,e,n,i)=>{[t.el,t.anchor]=g(t.children,e,n,i,t.el,t.anchor)},k=({el:t,anchor:e},n,i)=>{let r;while(t&&t!==e)r=f(t),o(t,n,i),t=r;o(e,n,i)},L=({el:t,anchor:e})=>{let n;while(t&&t!==e)n=f(t),s(t),t=n;s(e)},C=(t,e,n,i,r,o,s,a,l)=>{s=s||"svg"===e.type,null==t?A(e,n,i,r,o,s,a,l):P(t,e,r,o,s,a,l)},A=(t,e,n,i,s,c,h,u)=>{let p,f;const{type:m,props:g,shapeFlag:v,transition:y,dirs:b}=t;if(p=t.el=l(t.type,c,g&&g.is,g),8&v?d(p,t.children):16&v&&N(t.children,p,null,i,s,c&&"foreignObject"!==m,h,u),b&&Q(t,null,i,"created"),M(p,t,t.scopeId,h,i),g){for(const e in g)"value"===e||(0,r.Gg)(e)||a(p,e,null,g[e],c,t.children,i,s,K);"value"in g&&a(p,"value",null,g.value),(f=g.onVnodeBeforeMount)&&dn(f,i,t)}b&&Q(t,null,i,"beforeMount");const w=(!s||s&&!s.pendingBranch)&&y&&!y.persisted;w&&y.beforeEnter(p),o(p,e,n),((f=g&&g.onVnodeMounted)||w||b)&&Me((()=>{f&&dn(f,i,t),w&&y.enter(p),b&&Q(t,null,i,"mounted")}),s)},M=(t,e,n,i,r)=>{if(n&&m(t,n),i)for(let o=0;o<i.length;o++)m(t,i[o]);if(r){let n=r.subTree;if(e===n){const e=r.vnode;M(t,e,e.scopeId,e.slotScopeIds,r.parent)}}},N=(t,e,n,i,r,o,s,a,l=0)=>{for(let c=l;c<t.length;c++){const l=t[c]=a?cn(t[c]):ln(t[c]);v(null,l,e,n,i,r,o,s,a)}},P=(t,e,n,i,o,s,l)=>{const c=e.el=t.el;let{patchFlag:h,dynamicChildren:u,dirs:p}=e;h|=16&t.patchFlag;const f=t.props||r.kT,m=e.props||r.kT;let g;n&&Te(n,!1),(g=m.onVnodeBeforeUpdate)&&dn(g,n,e,t),p&&Q(e,t,n,"beforeUpdate"),n&&Te(n,!0);const v=o&&"foreignObject"!==e.type;if(u?T(t.dynamicChildren,u,c,n,i,v,s):l||q(t,e,c,null,n,i,v,s,!1),h>0){if(16&h)I(c,e,f,m,n,i,o);else if(2&h&&f.class!==m.class&&a(c,"class",null,m.class,o),4&h&&a(c,"style",f.style,m.style,o),8&h){const r=e.dynamicProps;for(let e=0;e<r.length;e++){const s=r[e],l=f[s],h=m[s];h===l&&"value"!==s||a(c,s,l,h,o,t.children,n,i,K)}}1&h&&t.children!==e.children&&d(c,e.children)}else l||null!=u||I(c,e,f,m,n,i,o);((g=m.onVnodeUpdated)||p)&&Me((()=>{g&&dn(g,n,e,t),p&&Q(e,t,n,"updated")}),i)},T=(t,e,n,i,r,o,s)=>{for(let a=0;a<e.length;a++){const l=t[a],c=e[a],h=l.el&&(l.type===je||!Xe(l,c)||70&l.shapeFlag)?p(l.el):n;v(l,c,h,null,i,r,o,s,!0)}},I=(t,e,n,i,o,s,l)=>{if(n!==i){if(n!==r.kT)for(const c in n)(0,r.Gg)(c)||c in i||a(t,c,n[c],null,l,e.children,o,s,K);for(const c in i){if((0,r.Gg)(c))continue;const h=i[c],u=n[c];h!==u&&"value"!==c&&a(t,c,u,h,l,e.children,o,s,K)}"value"in i&&a(t,"value",n.value,i.value)}},O=(t,e,n,i,r,s,a,l,h)=>{const u=e.el=t?t.el:c(""),d=e.anchor=t?t.anchor:c("");let{patchFlag:p,dynamicChildren:f,slotScopeIds:m}=e;m&&(l=l?l.concat(m):m),null==t?(o(u,n,i),o(d,n,i),N(e.children,n,d,r,s,a,l,h)):p>0&&64&p&&f&&t.dynamicChildren?(T(t.dynamicChildren,f,n,r,s,a,l),(null!=e.key||r&&e===r.subTree)&&Ie(t,e,!0)):q(t,e,n,d,r,s,a,l,h)},D=(t,e,n,i,r,o,s,a,l)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?r.ctx.activate(e,n,i,s,l):j(e,n,i,r,o,s,l):R(t,e,l)},j=(t,e,n,i,r,o,s)=>{const a=t.component=mn(t,i,r);if(pt(t)&&(a.ctx.renderer=et),Cn(a),a.asyncDep){if(r&&r.registerDep(a,B),!t.el){const t=a.subTree=en(Fe);b(null,t,e,n)}}else B(a,t,e,n,r,o,s)},R=(t,e,n)=>{const i=e.component=t.component;if($(t,e,n)){if(i.asyncDep&&!i.asyncResolved)return void z(i,e,n);i.next=e,S(i.update),i.update()}else e.el=t.el,i.vnode=e},B=(t,e,n,o,s,a,l)=>{const c=()=>{if(t.isMounted){let e,{next:n,bu:i,u:o,parent:c,vnode:h}=t,u=n;0,Te(t,!1),n?(n.el=h.el,z(t,n,l)):n=h,i&&(0,r.ir)(i),(e=n.props&&n.props.onVnodeBeforeUpdate)&&dn(e,c,n,h),Te(t,!0);const d=F(t);0;const f=t.subTree;t.subTree=d,v(f,d,p(f.el),Z(f),t,s,a),n.el=d.el,null===u&&U(t,d.el),o&&Me(o,s),(e=n.props&&n.props.onVnodeUpdated)&&Me((()=>dn(e,c,n,h)),s)}else{let i;const{el:l,props:c}=e,{bm:h,m:u,parent:d}=t,p=dt(e);if(Te(t,!1),h&&(0,r.ir)(h),!p&&(i=c&&c.onVnodeBeforeMount)&&dn(i,d,e),Te(t,!0),l&&it){const n=()=>{t.subTree=F(t),it(l,t.subTree,t,s,null)};p?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{0;const i=t.subTree=F(t);0,v(null,i,n,o,t,s,a),e.el=i.el}if(u&&Me(u,s),!p&&(i=c&&c.onVnodeMounted)){const t=e;Me((()=>dn(i,d,t)),s)}(256&e.shapeFlag||d&&dt(d.vnode)&&256&d.vnode.shapeFlag)&&t.a&&Me(t.a,s),t.isMounted=!0,e=n=o=null}},h=t.effect=new i.qq(c,(()=>w(u)),t.scope),u=t.update=()=>h.run();u.id=t.uid,Te(t,!0),u()},z=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,de(t,e.props,r,n),Le(t,e.children,n),(0,i.Jd)(),_(),(0,i.lk)()},q=(t,e,n,i,r,o,s,a,l=!1)=>{const c=t&&t.children,h=t?t.shapeFlag:0,u=e.children,{patchFlag:p,shapeFlag:f}=e;if(p>0){if(128&p)return void H(c,u,n,i,r,o,s,a,l);if(256&p)return void G(c,u,n,i,r,o,s,a,l)}8&f?(16&h&&K(c,r,o),u!==c&&d(n,u)):16&h?16&f?H(c,u,n,i,r,o,s,a,l):K(c,r,o,!0):(8&h&&d(n,""),16&f&&N(u,n,i,r,o,s,a,l))},G=(t,e,n,i,o,s,a,l,c)=>{t=t||r.Z6,e=e||r.Z6;const h=t.length,u=e.length,d=Math.min(h,u);let p;for(p=0;p<d;p++){const i=e[p]=c?cn(e[p]):ln(e[p]);v(t[p],i,n,null,o,s,a,l,c)}h>u?K(t,o,s,!0,!1,d):N(e,n,i,o,s,a,l,c,d)},H=(t,e,n,i,o,s,a,l,c)=>{let h=0;const u=e.length;let d=t.length-1,p=u-1;while(h<=d&&h<=p){const i=t[h],r=e[h]=c?cn(e[h]):ln(e[h]);if(!Xe(i,r))break;v(i,r,n,null,o,s,a,l,c),h++}while(h<=d&&h<=p){const i=t[d],r=e[p]=c?cn(e[p]):ln(e[p]);if(!Xe(i,r))break;v(i,r,n,null,o,s,a,l,c),d--,p--}if(h>d){if(h<=p){const t=p+1,r=t<u?e[t].el:i;while(h<=p)v(null,e[h]=c?cn(e[h]):ln(e[h]),n,r,o,s,a,l,c),h++}}else if(h>p)while(h<=d)V(t[h],o,s,!0),h++;else{const f=h,m=h,g=new Map;for(h=m;h<=p;h++){const t=e[h]=c?cn(e[h]):ln(e[h]);null!=t.key&&g.set(t.key,h)}let y,b=0;const w=p-m+1;let x=!1,S=0;const k=new Array(w);for(h=0;h<w;h++)k[h]=0;for(h=f;h<=d;h++){const i=t[h];if(b>=w){V(i,o,s,!0);continue}let r;if(null!=i.key)r=g.get(i.key);else for(y=m;y<=p;y++)if(0===k[y-m]&&Xe(i,e[y])){r=y;break}void 0===r?V(i,o,s,!0):(k[r-m]=h+1,r>=S?S=r:x=!0,v(i,e[r],n,null,o,s,a,l,c),b++)}const _=x?Oe(k):r.Z6;for(y=_.length-1,h=w-1;h>=0;h--){const t=m+h,r=e[t],d=t+1<u?e[t+1].el:i;0===k[h]?v(null,r,n,d,o,s,a,l,c):x&&(y<0||h!==_[y]?W(r,n,d,2):y--)}}},W=(t,e,n,i,r=null)=>{const{el:s,type:a,transition:l,children:c,shapeFlag:h}=t;if(6&h)return void W(t.component.subTree,e,n,i);if(128&h)return void t.suspense.move(e,n,i);if(64&h)return void a.move(t,e,n,et);if(a===je){o(s,e,n);for(let t=0;t<c.length;t++)W(c[t],e,n,i);return void o(t.anchor,e,n)}if(a===Be)return void k(t,e,n);const u=2!==i&&1&h&&l;if(u)if(0===i)l.beforeEnter(s),o(s,e,n),Me((()=>l.enter(s)),r);else{const{leave:t,delayLeave:i,afterLeave:r}=l,a=()=>o(s,e,n),c=()=>{t(s,(()=>{a(),r&&r()}))};i?i(s,a,c):c()}else o(s,e,n)},V=(t,e,n,i=!1,r=!1)=>{const{type:o,props:s,ref:a,children:l,dynamicChildren:c,shapeFlag:h,patchFlag:u,dirs:d}=t;if(null!=a&&Ce(a,null,n,t,!0),256&h)return void e.ctx.deactivate(t);const p=1&h&&d,f=!dt(t);let m;if(f&&(m=s&&s.onVnodeBeforeUnmount)&&dn(m,e,t),6&h)X(t.component,n,i);else{if(128&h)return void t.suspense.unmount(n,i);p&&Q(t,null,e,"beforeUnmount"),64&h?t.type.remove(t,e,n,r,et,i):c&&(o!==je||u>0&&64&u)?K(c,e,n,!1,!0):(o===je&&384&u||!r&&16&h)&&K(l,e,n),i&&Y(t)}(f&&(m=s&&s.onVnodeUnmounted)||p)&&Me((()=>{m&&dn(m,e,t),p&&Q(t,null,e,"unmounted")}),n)},Y=t=>{const{type:e,el:n,anchor:i,transition:r}=t;if(e===je)return void J(n,i);if(e===Be)return void L(t);const o=()=>{s(n),r&&!r.persisted&&r.afterLeave&&r.afterLeave()};if(1&t.shapeFlag&&r&&!r.persisted){const{leave:e,delayLeave:i}=r,s=()=>e(n,o);i?i(t.el,o,s):s()}else o()},J=(t,e)=>{let n;while(t!==e)n=f(t),s(t),t=n;s(e)},X=(t,e,n)=>{const{bum:i,scope:o,update:s,subTree:a,um:l}=t;i&&(0,r.ir)(i),o.stop(),s&&(s.active=!1,V(a,t,e,n)),l&&Me(l,e),Me((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},K=(t,e,n,i=!1,r=!1,o=0)=>{for(let s=o;s<t.length;s++)V(t[s],e,n,i,r)},Z=t=>6&t.shapeFlag?Z(t.component.subTree):128&t.shapeFlag?t.suspense.next():f(t.anchor||t.el),tt=(t,e,n)=>{null==t?e._vnode&&V(e._vnode,null,null,!0):v(e._vnode||null,t,e,null,null,null,n),_(),E(),e._vnode=t},et={p:v,um:V,m:W,r:Y,mt:j,mc:N,pc:q,pbc:T,n:Z,o:t};let nt,it;return e&&([nt,it]=e(et)),{render:tt,hydrate:nt,createApp:ae(tt,nt)}}function Te({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Ie(t,e,n=!1){const i=t.children,o=e.children;if((0,r.kJ)(i)&&(0,r.kJ)(o))for(let r=0;r<i.length;r++){const t=i[r];let e=o[r];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=o[r]=cn(o[r]),e.el=t.el),n||Ie(t,e)),e.type===Re&&(e.el=t.el)}}function Oe(t){const e=t.slice(),n=[0];let i,r,o,s,a;const l=t.length;for(i=0;i<l;i++){const l=t[i];if(0!==l){if(r=n[n.length-1],t[r]<l){e[i]=r,n.push(i);continue}o=0,s=n.length-1;while(o<s)a=o+s>>1,t[n[a]]<l?o=a+1:s=a;l<t[n[o]]&&(o>0&&(e[i]=n[o-1]),n[o]=i)}}o=n.length,s=n[o-1];while(o-- >0)n[o]=s,s=e[s];return n}const De=t=>t.__isTeleport;const je=Symbol.for("v-fgt"),Re=Symbol.for("v-txt"),Fe=Symbol.for("v-cmt"),Be=Symbol.for("v-stc"),ze=[];let $e=null;function qe(t=!1){ze.push($e=t?null:[])}function Ue(){ze.pop(),$e=ze[ze.length-1]||null}let Ge=1;function He(t){Ge+=t}function We(t){return t.dynamicChildren=Ge>0?$e||r.Z6:null,Ue(),Ge>0&&$e&&$e.push(t),t}function Ve(t,e,n,i,r,o){return We(tn(t,e,n,i,r,o,!0))}function Ye(t,e,n,i,r){return We(en(t,e,n,i,r,!0))}function Je(t){return!!t&&!0===t.__v_isVNode}function Xe(t,e){return t.type===e.type&&t.key===e.key}const Ke="__vInternal",Ze=({key:t})=>null!=t?t:null,Qe=({ref:t,ref_key:e,ref_for:n})=>("number"===typeof t&&(t=""+t),null!=t?(0,r.HD)(t)||(0,i.dq)(t)||(0,r.mf)(t)?{i:T,r:t,k:e,f:!!n}:t:null);function tn(t,e=null,n=null,i=0,o=null,s=(t===je?0:1),a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ze(e),ref:e&&Qe(e),scopeId:I,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:T};return l?(hn(c,n),128&s&&t.normalize(c)):n&&(c.shapeFlag|=(0,r.HD)(n)?8:16),Ge>0&&!a&&$e&&(c.patchFlag>0||6&s)&&32!==c.patchFlag&&$e.push(c),c}const en=nn;function nn(t,e=null,n=null,o=0,s=null,a=!1){if(t&&t!==Dt||(t=Fe),Je(t)){const i=on(t,e,!0);return n&&hn(i,n),Ge>0&&!a&&$e&&(6&i.shapeFlag?$e[$e.indexOf(t)]=i:$e.push(i)),i.patchFlag|=-2,i}if(Dn(t)&&(t=t.__vccOpts),e){e=rn(e);let{class:t,style:n}=e;t&&!(0,r.HD)(t)&&(e.class=(0,r.C_)(t)),(0,r.Kn)(n)&&((0,i.X3)(n)&&!(0,r.kJ)(n)&&(n=(0,r.l7)({},n)),e.style=(0,r.j5)(n))}const l=(0,r.HD)(t)?1:G(t)?128:De(t)?64:(0,r.Kn)(t)?4:(0,r.mf)(t)?2:0;return tn(t,e,n,o,s,l,a,!0)}function rn(t){return t?(0,i.X3)(t)||Ke in t?(0,r.l7)({},t):t:null}function on(t,e,n=!1){const{props:i,ref:o,patchFlag:s,children:a}=t,l=e?un(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&Ze(l),ref:e&&e.ref?n&&o?(0,r.kJ)(o)?o.concat(Qe(e)):[o,Qe(e)]:Qe(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==je?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&on(t.ssContent),ssFallback:t.ssFallback&&on(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c}function sn(t=" ",e=0){return en(Re,null,t,e)}function an(t="",e=!1){return e?(qe(),Ye(Fe,null,t)):en(Fe,null,t)}function ln(t){return null==t||"boolean"===typeof t?en(Fe):(0,r.kJ)(t)?en(je,null,t.slice()):"object"===typeof t?cn(t):en(Re,null,String(t))}function cn(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:on(t)}function hn(t,e){let n=0;const{shapeFlag:i}=t;if(null==e)e=null;else if((0,r.kJ)(e))n=16;else if("object"===typeof e){if(65&i){const n=e.default;return void(n&&(n._c&&(n._d=!1),hn(t,n()),n._c&&(n._d=!0)))}{n=32;const i=e._;i||Ke in e?3===i&&T&&(1===T.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=T}}else(0,r.mf)(e)?(e={default:e,_ctx:T},n=32):(e=String(e),64&i?(n=16,e=[sn(e)]):n=8);t.children=e,t.shapeFlag|=n}function un(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=(0,r.C_)([e.class,i.class]));else if("style"===t)e.style=(0,r.j5)([e.style,i.style]);else if((0,r.F7)(t)){const n=e[t],o=i[t];!o||n===o||(0,r.kJ)(n)&&n.includes(o)||(e[t]=n?[].concat(n,o):o)}else""!==t&&(e[t]=i[t])}return e}function dn(t,e,n,i=null){s(t,e,7,[n,i])}const pn=oe();let fn=0;function mn(t,e,n){const o=t.type,s=(e?e.appContext:t.appContext)||pn,a={uid:fn++,vnode:t,type:o,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new i.Bj(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:me(o,s),emitsOptions:N(o,s),emit:null,emitted:null,propsDefaults:r.kT,inheritAttrs:o.inheritAttrs,ctx:r.kT,data:r.kT,props:r.kT,attrs:r.kT,slots:r.kT,refs:r.kT,setupState:r.kT,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=M.bind(null,a),t.ce&&t.ce(a),a}let gn=null;const vn=()=>gn||T;let yn,bn,wn="__VUE_INSTANCE_SETTERS__";(bn=(0,r.E9)()[wn])||(bn=(0,r.E9)()[wn]=[]),bn.push((t=>gn=t)),yn=t=>{bn.length>1?bn.forEach((e=>e(t))):bn[0](t)};const xn=t=>{yn(t),t.scope.on()},Sn=()=>{gn&&gn.scope.off(),yn(null)};function kn(t){return 4&t.vnode.shapeFlag}let _n,En,Ln=!1;function Cn(t,e=!1){Ln=e;const{props:n,children:i}=t.vnode,r=kn(t);ue(t,n,r,e),Ee(t,i);const o=r?An(t,e):void 0;return Ln=!1,o}function An(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=(0,i.Xl)(new Proxy(t.ctx,qt));const{setup:s}=n;if(s){const n=t.setupContext=s.length>1?Tn(t):null;xn(t),(0,i.Jd)();const l=o(s,t,0,[t.props,n]);if((0,i.lk)(),Sn(),(0,r.tI)(l)){if(l.then(Sn,Sn),e)return l.then((n=>{Mn(t,n,e)})).catch((e=>{a(e,t,0)}));t.asyncDep=l}else Mn(t,l,e)}else Nn(t,e)}function Mn(t,e,n){(0,r.mf)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,r.Kn)(e)&&(t.setupState=(0,i.WL)(e)),Nn(t,n)}function Nn(t,e,n){const o=t.type;if(!t.render){if(!e&&_n&&!o.render){const e=o.template||Jt(t).template;if(e){0;const{isCustomElement:n,compilerOptions:i}=t.appContext.config,{delimiters:s,compilerOptions:a}=o,l=(0,r.l7)((0,r.l7)({isCustomElement:n,delimiters:s},i),a);o.render=_n(e,l)}}t.render=o.render||r.dG,En&&En(t)}xn(t),(0,i.Jd)(),Ht(t),(0,i.lk)(),Sn()}function Pn(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return(0,i.j)(t,"get","$attrs"),e[n]}}))}function Tn(t){const e=e=>{t.exposed=e||{}};return{get attrs(){return Pn(t)},slots:t.slots,emit:t.emit,expose:e}}function In(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy((0,i.WL)((0,i.Xl)(t.exposed)),{get(e,n){return n in e?e[n]:n in zt?zt[n](t):void 0},has(t,e){return e in t||e in zt}}))}function On(t,e=!0){return(0,r.mf)(t)?t.displayName||t.name:t.name||e&&t.__name}function Dn(t){return(0,r.mf)(t)&&"__vccOpts"in t}const jn=(t,e)=>(0,i.Fl)(t,e,Ln);function Rn(t,e,n){const i=arguments.length;return 2===i?(0,r.Kn)(e)&&!(0,r.kJ)(e)?Je(e)?en(t,null,[e]):en(t,e):en(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&Je(n)&&(n=[n]),en(t,e,n))}const Fn=Symbol.for("v-scx"),Bn=()=>{{const t=he(Fn);return t}};const zn="3.3.4"},9242:function(t,e,n){"use strict";n.d(e,{F8:function(){return dt},iM:function(){return ut},nr:function(){return lt},ri:function(){return vt}});n(7658);var i=n(7139),r=n(3396),o=n(4870);const s="http://www.w3.org/2000/svg",a="undefined"!==typeof document?document:null,l=a&&a.createElement("template"),c={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const r=e?a.createElementNS(s,t):a.createElement(t,n?{is:n}:void 0);return"select"===t&&i&&null!=i.multiple&&r.setAttribute("multiple",i.multiple),r},createText:t=>a.createTextNode(t),createComment:t=>a.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>a.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,r,o){const s=n?n.previousSibling:e.lastChild;if(r&&(r===o||r.nextSibling)){while(1)if(e.insertBefore(r.cloneNode(!0),n),r===o||!(r=r.nextSibling))break}else{l.innerHTML=i?`<svg>${t}</svg>`:t;const r=l.content;if(i){const t=r.firstChild;while(t.firstChild)r.appendChild(t.firstChild);r.removeChild(t)}e.insertBefore(r,n)}return[s?s.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function h(t,e,n){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function u(t,e,n){const r=t.style,o=(0,i.HD)(n);if(n&&!o){if(e&&!(0,i.HD)(e))for(const t in e)null==n[t]&&p(r,t,"");for(const t in n)p(r,t,n[t])}else{const i=r.display;o?e!==n&&(r.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(r.display=i)}}const d=/\s*!important$/;function p(t,e,n){if((0,i.kJ)(n))n.forEach((n=>p(t,e,n)));else if(null==n&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=g(t,e);d.test(n)?t.setProperty((0,i.rs)(r),n.replace(d,""),"important"):t[r]=n}}const f=["Webkit","Moz","ms"],m={};function g(t,e){const n=m[e];if(n)return n;let r=(0,i._A)(e);if("filter"!==r&&r in t)return m[e]=r;r=(0,i.kC)(r);for(let i=0;i<f.length;i++){const n=f[i]+r;if(n in t)return m[e]=n}return e}const v="http://www.w3.org/1999/xlink";function y(t,e,n,r,o){if(r&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(v,e.slice(6,e.length)):t.setAttributeNS(v,e,n);else{const r=(0,i.Pq)(e);null==n||r&&!(0,i.yA)(n)?t.removeAttribute(e):t.setAttribute(e,r?"":n)}}function b(t,e,n,r,o,s,a){if("innerHTML"===e||"textContent"===e)return r&&a(r,o,s),void(t[e]=null==n?"":n);const l=t.tagName;if("value"===e&&"PROGRESS"!==l&&!l.includes("-")){t._value=n;const i="OPTION"===l?t.getAttribute("value"):t.value,r=null==n?"":n;return i!==r&&(t.value=r),void(null==n&&t.removeAttribute(e))}let c=!1;if(""===n||null==n){const r=typeof t[e];"boolean"===r?n=(0,i.yA)(n):null==n&&"string"===r?(n="",c=!0):"number"===r&&(n=0,c=!0)}try{t[e]=n}catch(h){0}c&&t.removeAttribute(e)}function w(t,e,n,i){t.addEventListener(e,n,i)}function x(t,e,n,i){t.removeEventListener(e,n,i)}function S(t,e,n,i,r=null){const o=t._vei||(t._vei={}),s=o[e];if(i&&s)s.value=i;else{const[n,a]=_(e);if(i){const s=o[e]=A(i,r);w(t,n,s,a)}else s&&(x(t,n,s,a),o[e]=void 0)}}const k=/(?:Once|Passive|Capture)$/;function _(t){let e;if(k.test(t)){let n;e={};while(n=t.match(k))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}const n=":"===t[2]?t.slice(3):(0,i.rs)(t.slice(2));return[n,e]}let E=0;const L=Promise.resolve(),C=()=>E||(L.then((()=>E=0)),E=Date.now());function A(t,e){const n=t=>{if(t._vts){if(t._vts<=n.attached)return}else t._vts=Date.now();(0,r.$d)(M(t,n.value),e,5,[t])};return n.value=t,n.attached=C(),n}function M(t,e){if((0,i.kJ)(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const N=/^on[a-z]/,P=(t,e,n,r,o=!1,s,a,l,c)=>{"class"===e?h(t,r,o):"style"===e?u(t,n,r):(0,i.F7)(e)?(0,i.tR)(e)||S(t,e,n,r,a):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):T(t,e,r,o))?b(t,e,r,s,a,l,c):("true-value"===e?t._trueValue=r:"false-value"===e&&(t._falseValue=r),y(t,e,r,o))};function T(t,e,n,r){return r?"innerHTML"===e||"textContent"===e||!!(e in t&&N.test(e)&&(0,i.mf)(n)):"spellcheck"!==e&&"draggable"!==e&&"translate"!==e&&("form"!==e&&(("list"!==e||"INPUT"!==t.tagName)&&(("type"!==e||"TEXTAREA"!==t.tagName)&&((!N.test(e)||!(0,i.HD)(n))&&e in t))))}"undefined"!==typeof HTMLElement&&HTMLElement;const I="transition",O="animation",D=(t,{slots:e})=>(0,r.h)(r.P$,z(t),e);D.displayName="Transition";const j={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},R=D.props=(0,i.l7)({},r.nJ,j),F=(t,e=[])=>{(0,i.kJ)(t)?t.forEach((t=>t(...e))):t&&t(...e)},B=t=>!!t&&((0,i.kJ)(t)?t.some((t=>t.length>1)):t.length>1);function z(t){const e={};for(const i in t)i in j||(e[i]=t[i]);if(!1===t.css)return e;const{name:n="v",type:r,duration:o,enterFromClass:s=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=s,appearActiveClass:h=a,appearToClass:u=l,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,m=$(o),g=m&&m[0],v=m&&m[1],{onBeforeEnter:y,onEnter:b,onEnterCancelled:w,onLeave:x,onLeaveCancelled:S,onBeforeAppear:k=y,onAppear:_=b,onAppearCancelled:E=w}=e,L=(t,e,n)=>{G(t,e?u:l),G(t,e?h:a),n&&n()},C=(t,e)=>{t._isLeaving=!1,G(t,d),G(t,f),G(t,p),e&&e()},A=t=>(e,n)=>{const i=t?_:b,o=()=>L(e,t,n);F(i,[e,o]),H((()=>{G(e,t?c:s),U(e,t?u:l),B(i)||V(e,r,g,o)}))};return(0,i.l7)(e,{onBeforeEnter(t){F(y,[t]),U(t,s),U(t,a)},onBeforeAppear(t){F(k,[t]),U(t,c),U(t,h)},onEnter:A(!1),onAppear:A(!0),onLeave(t,e){t._isLeaving=!0;const n=()=>C(t,e);U(t,d),K(),U(t,p),H((()=>{t._isLeaving&&(G(t,d),U(t,f),B(x)||V(t,r,v,n))})),F(x,[t,n])},onEnterCancelled(t){L(t,!1),F(w,[t])},onAppearCancelled(t){L(t,!0),F(E,[t])},onLeaveCancelled(t){C(t),F(S,[t])}})}function $(t){if(null==t)return null;if((0,i.Kn)(t))return[q(t.enter),q(t.leave)];{const e=q(t);return[e,e]}}function q(t){const e=(0,i.He)(t);return e}function U(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t._vtc||(t._vtc=new Set)).add(e)}function G(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function H(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let W=0;function V(t,e,n,i){const r=t._endId=++W,o=()=>{r===t._endId&&i()};if(n)return setTimeout(o,n);const{type:s,timeout:a,propCount:l}=Y(t,e);if(!s)return i();const c=s+"end";let h=0;const u=()=>{t.removeEventListener(c,d),o()},d=e=>{e.target===t&&++h>=l&&u()};setTimeout((()=>{h<l&&u()}),a+1),t.addEventListener(c,d)}function Y(t,e){const n=window.getComputedStyle(t),i=t=>(n[t]||"").split(", "),r=i(`${I}Delay`),o=i(`${I}Duration`),s=J(r,o),a=i(`${O}Delay`),l=i(`${O}Duration`),c=J(a,l);let h=null,u=0,d=0;e===I?s>0&&(h=I,u=s,d=o.length):e===O?c>0&&(h=O,u=c,d=l.length):(u=Math.max(s,c),h=u>0?s>c?I:O:null,d=h?h===I?o.length:l.length:0);const p=h===I&&/\b(transform|all)(,|$)/.test(i(`${I}Property`).toString());return{type:h,timeout:u,propCount:d,hasTransform:p}}function J(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map(((e,n)=>X(e)+X(t[n]))))}function X(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function K(){return document.body.offsetHeight}const Z=new WeakMap,Q=new WeakMap,tt={name:"TransitionGroup",props:(0,i.l7)({},R,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=(0,r.FN)(),i=(0,r.Y8)();let s,a;return(0,r.ic)((()=>{if(!s.length)return;const e=t.moveClass||`${t.name||"v"}-move`;if(!rt(s[0].el,n.vnode.el,e))return;s.forEach(et),s.forEach(nt);const i=s.filter(it);K(),i.forEach((t=>{const n=t.el,i=n.style;U(n,e),i.transform=i.webkitTransform=i.transitionDuration="";const r=n._moveCb=t=>{t&&t.target!==n||t&&!/transform$/.test(t.propertyName)||(n.removeEventListener("transitionend",r),n._moveCb=null,G(n,e))};n.addEventListener("transitionend",r)}))})),()=>{const l=(0,o.IU)(t),c=z(l);let h=l.tag||r.HY;s=a,a=e.default?(0,r.Q6)(e.default()):[];for(let t=0;t<a.length;t++){const e=a[t];null!=e.key&&(0,r.nK)(e,(0,r.U2)(e,c,i,n))}if(s)for(let t=0;t<s.length;t++){const e=s[t];(0,r.nK)(e,(0,r.U2)(e,c,i,n)),Z.set(e,e.el.getBoundingClientRect())}return(0,r.Wm)(h,null,a)}}};tt.props;function et(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function nt(t){Q.set(t,t.el.getBoundingClientRect())}function it(t){const e=Z.get(t),n=Q.get(t),i=e.left-n.left,r=e.top-n.top;if(i||r){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${i}px,${r}px)`,e.transitionDuration="0s",t}}function rt(t,e,n){const i=t.cloneNode();t._vtc&&t._vtc.forEach((t=>{t.split(/\s+/).forEach((t=>t&&i.classList.remove(t)))})),n.split(/\s+/).forEach((t=>t&&i.classList.add(t))),i.style.display="none";const r=1===e.nodeType?e:e.parentNode;r.appendChild(i);const{hasTransform:o}=Y(i);return r.removeChild(i),o}const ot=t=>{const e=t.props["onUpdate:modelValue"]||!1;return(0,i.kJ)(e)?t=>(0,i.ir)(e,t):e};function st(t){t.target.composing=!0}function at(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const lt={created(t,{modifiers:{lazy:e,trim:n,number:r}},o){t._assign=ot(o);const s=r||o.props&&"number"===o.props.type;w(t,e?"change":"input",(e=>{if(e.target.composing)return;let r=t.value;n&&(r=r.trim()),s&&(r=(0,i.h5)(r)),t._assign(r)})),n&&w(t,"change",(()=>{t.value=t.value.trim()})),e||(w(t,"compositionstart",st),w(t,"compositionend",at),w(t,"change",at))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:o}},s){if(t._assign=ot(s),t.composing)return;if(document.activeElement===t&&"range"!==t.type){if(n)return;if(r&&t.value.trim()===e)return;if((o||"number"===t.type)&&(0,i.h5)(t.value)===e)return}const a=null==e?"":e;t.value!==a&&(t.value=a)}};const ct=["ctrl","shift","alt","meta"],ht={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>ct.some((n=>t[`${n}Key`]&&!e.includes(n)))},ut=(t,e)=>(n,...i)=>{for(let t=0;t<e.length;t++){const i=ht[e[t]];if(i&&i(n,e))return}return t(n,...i)},dt={beforeMount(t,{value:e},{transition:n}){t._vod="none"===t.style.display?"":t.style.display,n&&e?n.beforeEnter(t):pt(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!==!n&&(i?e?(i.beforeEnter(t),pt(t,!0),i.enter(t)):i.leave(t,(()=>{pt(t,!1)})):pt(t,e))},beforeUnmount(t,{value:e}){pt(t,e)}};function pt(t,e){t.style.display=e?t._vod:"none"}const ft=(0,i.l7)({patchProp:P},c);let mt;function gt(){return mt||(mt=(0,r.Us)(ft))}const vt=(...t)=>{const e=gt().createApp(...t);const{mount:n}=e;return e.mount=t=>{const r=yt(t);if(!r)return;const o=e._component;(0,i.mf)(o)||o.render||o.template||(o.template=r.innerHTML),r.innerHTML="";const s=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),s},e};function yt(t){if((0,i.HD)(t)){const e=document.querySelector(t);return e}return t}},7139:function(t,e,n){"use strict";n.d(e,{C_:function(){return Z},DM:function(){return v},E9:function(){return G},F7:function(){return c},Gg:function(){return N},HD:function(){return x},He:function(){return q},Kj:function(){return b},Kn:function(){return k},NO:function(){return a},Nj:function(){return z},Od:function(){return d},PO:function(){return A},Pq:function(){return tt},RI:function(){return f},S0:function(){return M},W7:function(){return C},WV:function(){return it},Z6:function(){return o},_A:function(){return I},_N:function(){return g},aU:function(){return F},dG:function(){return s},e1:function(){return W},fY:function(){return i},h5:function(){return $},hR:function(){return R},hq:function(){return rt},ir:function(){return B},j5:function(){return V},kC:function(){return j},kJ:function(){return m},kT:function(){return r},l7:function(){return u},mf:function(){return w},rs:function(){return D},tI:function(){return _},tR:function(){return h},yA:function(){return et},yk:function(){return S},zw:function(){return ot}});n(7658);function i(t,e){const n=Object.create(null),i=t.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const r={},o=[],s=()=>{},a=()=>!1,l=/^on[^a-z]/,c=t=>l.test(t),h=t=>t.startsWith("onUpdate:"),u=Object.assign,d=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},p=Object.prototype.hasOwnProperty,f=(t,e)=>p.call(t,e),m=Array.isArray,g=t=>"[object Map]"===L(t),v=t=>"[object Set]"===L(t),y=t=>"[object Date]"===L(t),b=t=>"[object RegExp]"===L(t),w=t=>"function"===typeof t,x=t=>"string"===typeof t,S=t=>"symbol"===typeof t,k=t=>null!==t&&"object"===typeof t,_=t=>k(t)&&w(t.then)&&w(t.catch),E=Object.prototype.toString,L=t=>E.call(t),C=t=>L(t).slice(8,-1),A=t=>"[object Object]"===L(t),M=t=>x(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,N=i(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),P=t=>{const e=Object.create(null);return n=>{const i=e[n];return i||(e[n]=t(n))}},T=/-(\w)/g,I=P((t=>t.replace(T,((t,e)=>e?e.toUpperCase():"")))),O=/\B([A-Z])/g,D=P((t=>t.replace(O,"-$1").toLowerCase())),j=P((t=>t.charAt(0).toUpperCase()+t.slice(1))),R=P((t=>t?`on${j(t)}`:"")),F=(t,e)=>!Object.is(t,e),B=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},z=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},$=t=>{const e=parseFloat(t);return isNaN(e)?t:e},q=t=>{const e=x(t)?Number(t):NaN;return isNaN(e)?t:e};let U;const G=()=>U||(U="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});const H="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console",W=i(H);function V(t){if(m(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],r=x(i)?K(i):V(i);if(r)for(const t in r)e[t]=r[t]}return e}return x(t)||k(t)?t:void 0}const Y=/;(?![^(]*\))/g,J=/:([^]+)/,X=/\/\*[^]*?\*\//g;function K(t){const e={};return t.replace(X,"").split(Y).forEach((t=>{if(t){const n=t.split(J);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function Z(t){let e="";if(x(t))e=t;else if(m(t))for(let n=0;n<t.length;n++){const i=Z(t[n]);i&&(e+=i+" ")}else if(k(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Q="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tt=i(Q);function et(t){return!!t||""===t}function nt(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=it(t[i],e[i]);return n}function it(t,e){if(t===e)return!0;let n=y(t),i=y(e);if(n||i)return!(!n||!i)&&t.getTime()===e.getTime();if(n=S(t),i=S(e),n||i)return t===e;if(n=m(t),i=m(e),n||i)return!(!n||!i)&&nt(t,e);if(n=k(t),i=k(e),n||i){if(!n||!i)return!1;const r=Object.keys(t).length,o=Object.keys(e).length;if(r!==o)return!1;for(const n in t){const i=t.hasOwnProperty(n),r=e.hasOwnProperty(n);if(i&&!r||!i&&r||!it(t[n],e[n]))return!1}}return String(t)===String(e)}function rt(t,e){return t.findIndex((t=>it(t,e)))}const ot=t=>x(t)?t:null==t?"":m(t)||k(t)&&(t.toString===E||!w(t.toString))?JSON.stringify(t,st,2):String(t),st=(t,e)=>e&&e.__v_isRef?st(t,e.value):g(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:v(e)?{[`Set(${e.size})`]:[...e.values()]}:!k(e)||m(e)||A(e)?e:String(e)},3455:function(t,e,n){n(7658),
/*!
  * Bootstrap v5.2.3 (https://getbootstrap.com/)
  * Copyright 2011-2022 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
function(e,n){t.exports=n()}(0,(function(){"use strict";const t=1e6,e=1e3,n="transitionend",i=t=>null===t||void 0===t?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),r=e=>{do{e+=Math.floor(Math.random()*t)}while(document.getElementById(e));return e},o=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?n.trim():null}return e},s=t=>{const e=o(t);return e&&document.querySelector(e)?e:null},a=t=>{const e=o(t);return e?document.querySelector(e):null},l=t=>{if(!t)return 0;let{transitionDuration:n,transitionDelay:i}=window.getComputedStyle(t);const r=Number.parseFloat(n),o=Number.parseFloat(i);return r||o?(n=n.split(",")[0],i=i.split(",")[0],(Number.parseFloat(n)+Number.parseFloat(i))*e):0},c=t=>{t.dispatchEvent(new Event(n))},h=t=>!(!t||"object"!==typeof t)&&("undefined"!==typeof t.jquery&&(t=t[0]),"undefined"!==typeof t.nodeType),u=t=>h(t)?t.jquery?t[0]:t:"string"===typeof t&&t.length>0?document.querySelector(t):null,d=t=>{if(!h(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const e=t.closest("summary");if(e&&e.parentNode!==n)return!1;if(null===e)return!1}return e},p=t=>!t||t.nodeType!==Node.ELEMENT_NODE||(!!t.classList.contains("disabled")||("undefined"!==typeof t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled"))),f=t=>{if(!document.documentElement.attachShadow)return null;if("function"===typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?f(t.parentNode):null},m=()=>{},g=t=>{t.offsetHeight},v=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,y=[],b=t=>{"loading"===document.readyState?(y.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of y)t()})),y.push(t)):t()},w=()=>"rtl"===document.documentElement.dir,x=t=>{b((()=>{const e=v();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}}))},S=t=>{"function"===typeof t&&t()},k=(t,e,i=!0)=>{if(!i)return void S(t);const r=5,o=l(e)+r;let s=!1;const a=({target:i})=>{i===e&&(s=!0,e.removeEventListener(n,a),S(t))};e.addEventListener(n,a),setTimeout((()=>{s||c(e)}),o)},_=(t,e,n,i)=>{const r=t.length;let o=t.indexOf(e);return-1===o?!n&&i?t[r-1]:t[0]:(o+=n?1:-1,i&&(o=(o+r)%r),t[Math.max(0,Math.min(o,r-1))])},E=/[^.]*(?=\..*)\.|.*/,L=/\..*/,C=/::\d+$/,A={};let M=1;const N={mouseenter:"mouseover",mouseleave:"mouseout"},P=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function T(t,e){return e&&`${e}::${M++}`||t.uidEvent||M++}function I(t){const e=T(t);return t.uidEvent=e,A[e]=A[e]||{},A[e]}function O(t,e){return function n(i){return U(i,{delegateTarget:t}),n.oneOff&&q.off(t,i.type,e),e.apply(t,[i])}}function D(t,e,n){return function i(r){const o=t.querySelectorAll(e);for(let{target:s}=r;s&&s!==this;s=s.parentNode)for(const a of o)if(a===s)return U(r,{delegateTarget:s}),i.oneOff&&q.off(t,r.type,e,n),n.apply(s,[r])}}function j(t,e,n=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===n))}function R(t,e,n){const i="string"===typeof e,r=i?n:e||n;let o=$(t);return P.has(o)||(o=t),[i,r,o]}function F(t,e,n,i,r){if("string"!==typeof e||!t)return;let[o,s,a]=R(e,n,i);if(e in N){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};s=t(s)}const l=I(t),c=l[a]||(l[a]={}),h=j(c,s,o?n:null);if(h)return void(h.oneOff=h.oneOff&&r);const u=T(s,e.replace(E,"")),d=o?D(t,n,s):O(t,s);d.delegationSelector=o?n:null,d.callable=s,d.oneOff=r,d.uidEvent=u,c[u]=d,t.addEventListener(a,d,o)}function B(t,e,n,i,r){const o=j(e[n],i,r);o&&(t.removeEventListener(n,o,Boolean(r)),delete e[n][o.uidEvent])}function z(t,e,n,i){const r=e[n]||{};for(const o of Object.keys(r))if(o.includes(i)){const i=r[o];B(t,e,n,i.callable,i.delegationSelector)}}function $(t){return t=t.replace(L,""),N[t]||t}const q={on(t,e,n,i){F(t,e,n,i,!1)},one(t,e,n,i){F(t,e,n,i,!0)},off(t,e,n,i){if("string"!==typeof e||!t)return;const[r,o,s]=R(e,n,i),a=s!==e,l=I(t),c=l[s]||{},h=e.startsWith(".");if("undefined"===typeof o){if(h)for(const n of Object.keys(l))z(t,l,n,e.slice(1));for(const n of Object.keys(c)){const i=n.replace(C,"");if(!a||e.includes(i)){const e=c[n];B(t,l,s,e.callable,e.delegationSelector)}}}else{if(!Object.keys(c).length)return;B(t,l,s,o,r?n:null)}},trigger(t,e,n){if("string"!==typeof e||!t)return null;const i=v(),r=$(e),o=e!==r;let s=null,a=!0,l=!0,c=!1;o&&i&&(s=i.Event(e,n),i(t).trigger(s),a=!s.isPropagationStopped(),l=!s.isImmediatePropagationStopped(),c=s.isDefaultPrevented());let h=new Event(e,{bubbles:a,cancelable:!0});return h=U(h,n),c&&h.preventDefault(),l&&t.dispatchEvent(h),h.defaultPrevented&&s&&s.preventDefault(),h}};function U(t,e){for(const[i,r]of Object.entries(e||{}))try{t[i]=r}catch(n){Object.defineProperty(t,i,{configurable:!0,get(){return r}})}return t}const G=new Map,H={set(t,e,n){G.has(t)||G.set(t,new Map);const i=G.get(t);i.has(e)||0===i.size?i.set(e,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get(t,e){return G.has(t)&&G.get(t).get(e)||null},remove(t,e){if(!G.has(t))return;const n=G.get(t);n.delete(e),0===n.size&&G.delete(t)}};function W(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!==typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function V(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const Y={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${V(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${V(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const i of n){let n=i.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=W(t.dataset[i])}return e},getDataAttribute(t,e){return W(t.getAttribute(`data-bs-${V(e)}`))}};class J{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=h(e)?Y.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"===typeof n?n:{},...h(e)?Y.getDataAttributes(e):{},..."object"===typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const n of Object.keys(e)){const r=e[n],o=t[n],s=h(o)?"element":i(o);if(!new RegExp(r).test(s))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${s}" but expected type "${r}".`)}}}const X="5.2.3";class K extends J{constructor(t,e){super(),t=u(t),t&&(this._element=t,this._config=this._getConfig(e),H.set(this._element,this.constructor.DATA_KEY,this))}dispose(){H.remove(this._element,this.constructor.DATA_KEY),q.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){k(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return H.get(u(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"===typeof e?e:null)}static get VERSION(){return X}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const Z=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;q.on(document,n,`[data-bs-dismiss="${i}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),p(this))return;const r=a(this)||this.closest(`.${i}`),o=t.getOrCreateInstance(r);o[e]()}))},Q="alert",tt="bs.alert",et=`.${tt}`,nt=`close${et}`,it=`closed${et}`,rt="fade",ot="show";class st extends K{static get NAME(){return Q}close(){const t=q.trigger(this._element,nt);if(t.defaultPrevented)return;this._element.classList.remove(ot);const e=this._element.classList.contains(rt);this._queueCallback((()=>this._destroyElement()),this._element,e)}_destroyElement(){this._element.remove(),q.trigger(this._element,it),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=st.getOrCreateInstance(this);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}Z(st,"close"),x(st);const at="button",lt="bs.button",ct=`.${lt}`,ht=".data-api",ut="active",dt='[data-bs-toggle="button"]',pt=`click${ct}${ht}`;class ft extends K{static get NAME(){return at}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(ut))}static jQueryInterface(t){return this.each((function(){const e=ft.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}q.on(document,pt,dt,(t=>{t.preventDefault();const e=t.target.closest(dt),n=ft.getOrCreateInstance(e);n.toggle()})),x(ft);const mt={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter((t=>t.matches(e)))},parents(t,e){const n=[];let i=t.parentNode.closest(e);while(i)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;while(n){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;while(n){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(e,t).filter((t=>!p(t)&&d(t)))}},gt="swipe",vt=".bs.swipe",yt=`touchstart${vt}`,bt=`touchmove${vt}`,wt=`touchend${vt}`,xt=`pointerdown${vt}`,St=`pointerup${vt}`,kt="touch",_t="pen",Et="pointer-event",Lt=40,Ct={endCallback:null,leftCallback:null,rightCallback:null},At={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Mt extends J{constructor(t,e){super(),this._element=t,t&&Mt.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return Ct}static get DefaultType(){return At}static get NAME(){return gt}dispose(){q.off(this._element,vt)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),S(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=Lt)return;const e=t/this._deltaX;this._deltaX=0,e&&S(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(q.on(this._element,xt,(t=>this._start(t))),q.on(this._element,St,(t=>this._end(t))),this._element.classList.add(Et)):(q.on(this._element,yt,(t=>this._start(t))),q.on(this._element,bt,(t=>this._move(t))),q.on(this._element,wt,(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===_t||t.pointerType===kt)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Nt="carousel",Pt="bs.carousel",Tt=`.${Pt}`,It=".data-api",Ot="ArrowLeft",Dt="ArrowRight",jt=500,Rt="next",Ft="prev",Bt="left",zt="right",$t=`slide${Tt}`,qt=`slid${Tt}`,Ut=`keydown${Tt}`,Gt=`mouseenter${Tt}`,Ht=`mouseleave${Tt}`,Wt=`dragstart${Tt}`,Vt=`load${Tt}${It}`,Yt=`click${Tt}${It}`,Jt="carousel",Xt="active",Kt="slide",Zt="carousel-item-end",Qt="carousel-item-start",te="carousel-item-next",ee="carousel-item-prev",ne=".active",ie=".carousel-item",re=ne+ie,oe=".carousel-item img",se=".carousel-indicators",ae="[data-bs-slide], [data-bs-slide-to]",le='[data-bs-ride="carousel"]',ce={[Ot]:zt,[Dt]:Bt},he={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ue={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class de extends K{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=mt.findOne(se,this._element),this._addEventListeners(),this._config.ride===Jt&&this.cycle()}static get Default(){return he}static get DefaultType(){return ue}static get NAME(){return Nt}next(){this._slide(Rt)}nextWhenVisible(){!document.hidden&&d(this._element)&&this.next()}prev(){this._slide(Ft)}pause(){this._isSliding&&c(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?q.one(this._element,qt,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void q.one(this._element,qt,(()=>this.to(t)));const n=this._getItemIndex(this._getActive());if(n===t)return;const i=t>n?Rt:Ft;this._slide(i,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&q.on(this._element,Ut,(t=>this._keydown(t))),"hover"===this._config.pause&&(q.on(this._element,Gt,(()=>this.pause())),q.on(this._element,Ht,(()=>this._maybeEnableCycle()))),this._config.touch&&Mt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of mt.find(oe,this._element))q.on(n,Wt,(t=>t.preventDefault()));const t=()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),jt+this._config.interval))},e={leftCallback:()=>this._slide(this._directionToOrder(Bt)),rightCallback:()=>this._slide(this._directionToOrder(zt)),endCallback:t};this._swipeHelper=new Mt(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=ce[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=mt.findOne(ne,this._indicatorsElement);e.classList.remove(Xt),e.removeAttribute("aria-current");const n=mt.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(Xt),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),i=t===Rt,r=e||_(this._getItems(),n,i,this._config.wrap);if(r===n)return;const o=this._getItemIndex(r),s=e=>q.trigger(this._element,e,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:o}),a=s($t);if(a.defaultPrevented)return;if(!n||!r)return;const l=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const c=i?Qt:Zt,h=i?te:ee;r.classList.add(h),g(r),n.classList.add(c),r.classList.add(c);const u=()=>{r.classList.remove(c,h),r.classList.add(Xt),n.classList.remove(Xt,h,c),this._isSliding=!1,s(qt)};this._queueCallback(u,n,this._isAnimated()),l&&this.cycle()}_isAnimated(){return this._element.classList.contains(Kt)}_getActive(){return mt.findOne(re,this._element)}_getItems(){return mt.find(ie,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return w()?t===Bt?Ft:Rt:t===Bt?Rt:Ft}_orderToDirection(t){return w()?t===Ft?Bt:zt:t===Ft?zt:Bt}static jQueryInterface(t){return this.each((function(){const e=de.getOrCreateInstance(this,t);if("number"!==typeof t){if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)}))}}q.on(document,Yt,ae,(function(t){const e=a(this);if(!e||!e.classList.contains(Jt))return;t.preventDefault();const n=de.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");return i?(n.to(i),void n._maybeEnableCycle()):"next"===Y.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),q.on(window,Vt,(()=>{const t=mt.find(le);for(const e of t)de.getOrCreateInstance(e)})),x(de);const pe="collapse",fe="bs.collapse",me=`.${fe}`,ge=".data-api",ve=`show${me}`,ye=`shown${me}`,be=`hide${me}`,we=`hidden${me}`,xe=`click${me}${ge}`,Se="show",ke="collapse",_e="collapsing",Ee="collapsed",Le=`:scope .${ke} .${ke}`,Ce="collapse-horizontal",Ae="width",Me="height",Ne=".collapse.show, .collapse.collapsing",Pe='[data-bs-toggle="collapse"]',Te={parent:null,toggle:!0},Ie={parent:"(null|element)",toggle:"boolean"};class Oe extends K{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=mt.find(Pe);for(const i of n){const t=s(i),e=mt.find(t).filter((t=>t===this._element));null!==t&&e.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Te}static get DefaultType(){return Ie}static get NAME(){return pe}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(Ne).filter((t=>t!==this._element)).map((t=>Oe.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;const e=q.trigger(this._element,ve);if(e.defaultPrevented)return;for(const s of t)s.hide();const n=this._getDimension();this._element.classList.remove(ke),this._element.classList.add(_e),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(_e),this._element.classList.add(ke,Se),this._element.style[n]="",q.trigger(this._element,ye)},r=n[0].toUpperCase()+n.slice(1),o=`scroll${r}`;this._queueCallback(i,this._element,!0),this._element.style[n]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown())return;const t=q.trigger(this._element,be);if(t.defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,g(this._element),this._element.classList.add(_e),this._element.classList.remove(ke,Se);for(const i of this._triggerArray){const t=a(i);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(_e),this._element.classList.add(ke),q.trigger(this._element,we)};this._element.style[e]="",this._queueCallback(n,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Se)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=u(t.parent),t}_getDimension(){return this._element.classList.contains(Ce)?Ae:Me}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Pe);for(const e of t){const t=a(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=mt.find(Le,this._config.parent);return mt.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle(Ee,!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"===typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const n=Oe.getOrCreateInstance(this,e);if("string"===typeof t){if("undefined"===typeof n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}))}}q.on(document,xe,Pe,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();const e=s(this),n=mt.find(e);for(const i of n)Oe.getOrCreateInstance(i,{toggle:!1}).toggle()})),x(Oe);var De="top",je="bottom",Re="right",Fe="left",Be="auto",ze=[De,je,Re,Fe],$e="start",qe="end",Ue="clippingParents",Ge="viewport",He="popper",We="reference",Ve=ze.reduce((function(t,e){return t.concat([e+"-"+$e,e+"-"+qe])}),[]),Ye=[].concat(ze,[Be]).reduce((function(t,e){return t.concat([e,e+"-"+$e,e+"-"+qe])}),[]),Je="beforeRead",Xe="read",Ke="afterRead",Ze="beforeMain",Qe="main",tn="afterMain",en="beforeWrite",nn="write",rn="afterWrite",on=[Je,Xe,Ke,Ze,Qe,tn,en,nn,rn];function sn(t){return t?(t.nodeName||"").toLowerCase():null}function an(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ln(t){var e=an(t).Element;return t instanceof e||t instanceof Element}function cn(t){var e=an(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function hn(t){if("undefined"===typeof ShadowRoot)return!1;var e=an(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function un(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];cn(r)&&sn(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))}function dn(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],r=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]),s=o.reduce((function(t,e){return t[e]="",t}),{});cn(i)&&sn(i)&&(Object.assign(i.style,s),Object.keys(r).forEach((function(t){i.removeAttribute(t)})))}))}}const pn={name:"applyStyles",enabled:!0,phase:"write",fn:un,effect:dn,requires:["computeStyles"]};function fn(t){return t.split("-")[0]}var mn=Math.max,gn=Math.min,vn=Math.round;function yn(){var t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function bn(){return!/^((?!chrome|android).)*safari/i.test(yn())}function wn(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=t.getBoundingClientRect(),r=1,o=1;e&&cn(t)&&(r=t.offsetWidth>0&&vn(i.width)/t.offsetWidth||1,o=t.offsetHeight>0&&vn(i.height)/t.offsetHeight||1);var s=ln(t)?an(t):window,a=s.visualViewport,l=!bn()&&n,c=(i.left+(l&&a?a.offsetLeft:0))/r,h=(i.top+(l&&a?a.offsetTop:0))/o,u=i.width/r,d=i.height/o;return{width:u,height:d,top:h,right:c+u,bottom:h+d,left:c,x:c,y:h}}function xn(t){var e=wn(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function Sn(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&hn(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function kn(t){return an(t).getComputedStyle(t)}function _n(t){return["table","td","th"].indexOf(sn(t))>=0}function En(t){return((ln(t)?t.ownerDocument:t.document)||window.document).documentElement}function Ln(t){return"html"===sn(t)?t:t.assignedSlot||t.parentNode||(hn(t)?t.host:null)||En(t)}function Cn(t){return cn(t)&&"fixed"!==kn(t).position?t.offsetParent:null}function An(t){var e=/firefox/i.test(yn()),n=/Trident/i.test(yn());if(n&&cn(t)){var i=kn(t);if("fixed"===i.position)return null}var r=Ln(t);hn(r)&&(r=r.host);while(cn(r)&&["html","body"].indexOf(sn(r))<0){var o=kn(r);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||e&&"filter"===o.willChange||e&&o.filter&&"none"!==o.filter)return r;r=r.parentNode}return null}function Mn(t){var e=an(t),n=Cn(t);while(n&&_n(n)&&"static"===kn(n).position)n=Cn(n);return n&&("html"===sn(n)||"body"===sn(n)&&"static"===kn(n).position)?e:n||An(t)||e}function Nn(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Pn(t,e,n){return mn(t,gn(e,n))}function Tn(t,e,n){var i=Pn(t,e,n);return i>n?n:i}function In(){return{top:0,right:0,bottom:0,left:0}}function On(t){return Object.assign({},In(),t)}function Dn(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}var jn=function(t,e){return t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t,On("number"!==typeof t?t:Dn(t,ze))};function Rn(t){var e,n=t.state,i=t.name,r=t.options,o=n.elements.arrow,s=n.modifiersData.popperOffsets,a=fn(n.placement),l=Nn(a),c=[Fe,Re].indexOf(a)>=0,h=c?"height":"width";if(o&&s){var u=jn(r.padding,n),d=xn(o),p="y"===l?De:Fe,f="y"===l?je:Re,m=n.rects.reference[h]+n.rects.reference[l]-s[l]-n.rects.popper[h],g=s[l]-n.rects.reference[l],v=Mn(o),y=v?"y"===l?v.clientHeight||0:v.clientWidth||0:0,b=m/2-g/2,w=u[p],x=y-d[h]-u[f],S=y/2-d[h]/2+b,k=Pn(w,S,x),_=l;n.modifiersData[i]=(e={},e[_]=k,e.centerOffset=k-S,e)}}function Fn(t){var e=t.state,n=t.options,i=n.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"!==typeof r||(r=e.elements.popper.querySelector(r),r))&&Sn(e.elements.popper,r)&&(e.elements.arrow=r)}const Bn={name:"arrow",enabled:!0,phase:"main",fn:Rn,effect:Fn,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function zn(t){return t.split("-")[1]}var $n={top:"auto",right:"auto",bottom:"auto",left:"auto"};function qn(t){var e=t.x,n=t.y,i=window,r=i.devicePixelRatio||1;return{x:vn(e*r)/r||0,y:vn(n*r)/r||0}}function Un(t){var e,n=t.popper,i=t.popperRect,r=t.placement,o=t.variation,s=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,h=t.roundOffsets,u=t.isFixed,d=s.x,p=void 0===d?0:d,f=s.y,m=void 0===f?0:f,g="function"===typeof h?h({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=s.hasOwnProperty("x"),y=s.hasOwnProperty("y"),b=Fe,w=De,x=window;if(c){var S=Mn(n),k="clientHeight",_="clientWidth";if(S===an(n)&&(S=En(n),"static"!==kn(S).position&&"absolute"===a&&(k="scrollHeight",_="scrollWidth")),r===De||(r===Fe||r===Re)&&o===qe){w=je;var E=u&&S===x&&x.visualViewport?x.visualViewport.height:S[k];m-=E-i.height,m*=l?1:-1}if(r===Fe||(r===De||r===je)&&o===qe){b=Re;var L=u&&S===x&&x.visualViewport?x.visualViewport.width:S[_];p-=L-i.width,p*=l?1:-1}}var C,A=Object.assign({position:a},c&&$n),M=!0===h?qn({x:p,y:m}):{x:p,y:m};return p=M.x,m=M.y,l?Object.assign({},A,(C={},C[w]=y?"0":"",C[b]=v?"0":"",C.transform=(x.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",C)):Object.assign({},A,(e={},e[w]=y?m+"px":"",e[b]=v?p+"px":"",e.transform="",e))}function Gn(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,o=n.adaptive,s=void 0===o||o,a=n.roundOffsets,l=void 0===a||a,c={placement:fn(e.placement),variation:zn(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Un(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Un(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const Hn={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Gn,data:{}};var Wn={passive:!0};function Vn(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,o=void 0===r||r,s=i.resize,a=void 0===s||s,l=an(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach((function(t){t.addEventListener("scroll",n.update,Wn)})),a&&l.addEventListener("resize",n.update,Wn),function(){o&&c.forEach((function(t){t.removeEventListener("scroll",n.update,Wn)})),a&&l.removeEventListener("resize",n.update,Wn)}}const Yn={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Vn,data:{}};var Jn={left:"right",right:"left",bottom:"top",top:"bottom"};function Xn(t){return t.replace(/left|right|bottom|top/g,(function(t){return Jn[t]}))}var Kn={start:"end",end:"start"};function Zn(t){return t.replace(/start|end/g,(function(t){return Kn[t]}))}function Qn(t){var e=an(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function ti(t){return wn(En(t)).left+Qn(t).scrollLeft}function ei(t,e){var n=an(t),i=En(t),r=n.visualViewport,o=i.clientWidth,s=i.clientHeight,a=0,l=0;if(r){o=r.width,s=r.height;var c=bn();(c||!c&&"fixed"===e)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:o,height:s,x:a+ti(t),y:l}}function ni(t){var e,n=En(t),i=Qn(t),r=null==(e=t.ownerDocument)?void 0:e.body,o=mn(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=mn(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+ti(t),l=-i.scrollTop;return"rtl"===kn(r||n).direction&&(a+=mn(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:s,x:a,y:l}}function ii(t){var e=kn(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function ri(t){return["html","body","#document"].indexOf(sn(t))>=0?t.ownerDocument.body:cn(t)&&ii(t)?t:ri(Ln(t))}function oi(t,e){var n;void 0===e&&(e=[]);var i=ri(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),o=an(i),s=r?[o].concat(o.visualViewport||[],ii(i)?i:[]):i,a=e.concat(s);return r?a:a.concat(oi(Ln(s)))}function si(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ai(t,e){var n=wn(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function li(t,e,n){return e===Ge?si(ei(t,n)):ln(e)?ai(e,n):si(ni(En(t)))}function ci(t){var e=oi(Ln(t)),n=["absolute","fixed"].indexOf(kn(t).position)>=0,i=n&&cn(t)?Mn(t):t;return ln(i)?e.filter((function(t){return ln(t)&&Sn(t,i)&&"body"!==sn(t)})):[]}function hi(t,e,n,i){var r="clippingParents"===e?ci(t):[].concat(e),o=[].concat(r,[n]),s=o[0],a=o.reduce((function(e,n){var r=li(t,n,i);return e.top=mn(r.top,e.top),e.right=gn(r.right,e.right),e.bottom=gn(r.bottom,e.bottom),e.left=mn(r.left,e.left),e}),li(t,s,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function ui(t){var e,n=t.reference,i=t.element,r=t.placement,o=r?fn(r):null,s=r?zn(r):null,a=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(o){case De:e={x:a,y:n.y-i.height};break;case je:e={x:a,y:n.y+n.height};break;case Re:e={x:n.x+n.width,y:l};break;case Fe:e={x:n.x-i.width,y:l};break;default:e={x:n.x,y:n.y}}var c=o?Nn(o):null;if(null!=c){var h="y"===c?"height":"width";switch(s){case $e:e[c]=e[c]-(n[h]/2-i[h]/2);break;case qe:e[c]=e[c]+(n[h]/2-i[h]/2);break}}return e}function di(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=void 0===i?t.placement:i,o=n.strategy,s=void 0===o?t.strategy:o,a=n.boundary,l=void 0===a?Ue:a,c=n.rootBoundary,h=void 0===c?Ge:c,u=n.elementContext,d=void 0===u?He:u,p=n.altBoundary,f=void 0!==p&&p,m=n.padding,g=void 0===m?0:m,v=On("number"!==typeof g?g:Dn(g,ze)),y=d===He?We:He,b=t.rects.popper,w=t.elements[f?y:d],x=hi(ln(w)?w:w.contextElement||En(t.elements.popper),l,h,s),S=wn(t.elements.reference),k=ui({reference:S,element:b,strategy:"absolute",placement:r}),_=si(Object.assign({},b,k)),E=d===He?_:S,L={top:x.top-E.top+v.top,bottom:E.bottom-x.bottom+v.bottom,left:x.left-E.left+v.left,right:E.right-x.right+v.right},C=t.modifiersData.offset;if(d===He&&C){var A=C[r];Object.keys(L).forEach((function(t){var e=[Re,je].indexOf(t)>=0?1:-1,n=[De,je].indexOf(t)>=0?"y":"x";L[t]+=A[n]*e}))}return L}function pi(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Ye:l,h=zn(i),u=h?a?Ve:Ve.filter((function(t){return zn(t)===h})):ze,d=u.filter((function(t){return c.indexOf(t)>=0}));0===d.length&&(d=u);var p=d.reduce((function(e,n){return e[n]=di(t,{placement:n,boundary:r,rootBoundary:o,padding:s})[fn(n)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}function fi(t){if(fn(t)===Be)return[];var e=Xn(t);return[Zn(t),e,Zn(e)]}function mi(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0===s||s,l=n.fallbackPlacements,c=n.padding,h=n.boundary,u=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,f=void 0===p||p,m=n.allowedAutoPlacements,g=e.options.placement,v=fn(g),y=v===g,b=l||(y||!f?[Xn(g)]:fi(g)),w=[g].concat(b).reduce((function(t,n){return t.concat(fn(n)===Be?pi(e,{placement:n,boundary:h,rootBoundary:u,padding:c,flipVariations:f,allowedAutoPlacements:m}):n)}),[]),x=e.rects.reference,S=e.rects.popper,k=new Map,_=!0,E=w[0],L=0;L<w.length;L++){var C=w[L],A=fn(C),M=zn(C)===$e,N=[De,je].indexOf(A)>=0,P=N?"width":"height",T=di(e,{placement:C,boundary:h,rootBoundary:u,altBoundary:d,padding:c}),I=N?M?Re:Fe:M?je:De;x[P]>S[P]&&(I=Xn(I));var O=Xn(I),D=[];if(o&&D.push(T[A]<=0),a&&D.push(T[I]<=0,T[O]<=0),D.every((function(t){return t}))){E=C,_=!1;break}k.set(C,D)}if(_)for(var j=f?3:1,R=function(t){var e=w.find((function(e){var n=k.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return E=e,"break"},F=j;F>0;F--){var B=R(F);if("break"===B)break}e.placement!==E&&(e.modifiersData[i]._skip=!0,e.placement=E,e.reset=!0)}}const gi={name:"flip",enabled:!0,phase:"main",fn:mi,requiresIfExists:["offset"],data:{_skip:!1}};function vi(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function yi(t){return[De,Re,je,Fe].some((function(e){return t[e]>=0}))}function bi(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,s=di(e,{elementContext:"reference"}),a=di(e,{altBoundary:!0}),l=vi(s,i),c=vi(a,r,o),h=yi(l),u=yi(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":u})}const wi={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:bi};function xi(t,e,n){var i=fn(t),r=[Fe,De].indexOf(i)>=0?-1:1,o="function"===typeof n?n(Object.assign({},e,{placement:t})):n,s=o[0],a=o[1];return s=s||0,a=(a||0)*r,[Fe,Re].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}function Si(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=void 0===r?[0,0]:r,s=Ye.reduce((function(t,n){return t[n]=xi(n,e.rects,o),t}),{}),a=s[e.placement],l=a.x,c=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=s}const ki={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Si};function _i(t){var e=t.state,n=t.name;e.modifiersData[n]=ui({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Ei={name:"popperOffsets",enabled:!0,phase:"read",fn:_i,data:{}};function Li(t){return"x"===t?"y":"x"}function Ci(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=void 0===r||r,s=n.altAxis,a=void 0!==s&&s,l=n.boundary,c=n.rootBoundary,h=n.altBoundary,u=n.padding,d=n.tether,p=void 0===d||d,f=n.tetherOffset,m=void 0===f?0:f,g=di(e,{boundary:l,rootBoundary:c,padding:u,altBoundary:h}),v=fn(e.placement),y=zn(e.placement),b=!y,w=Nn(v),x=Li(w),S=e.modifiersData.popperOffsets,k=e.rects.reference,_=e.rects.popper,E="function"===typeof m?m(Object.assign({},e.rects,{placement:e.placement})):m,L="number"===typeof E?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),C=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,A={x:0,y:0};if(S){if(o){var M,N="y"===w?De:Fe,P="y"===w?je:Re,T="y"===w?"height":"width",I=S[w],O=I+g[N],D=I-g[P],j=p?-_[T]/2:0,R=y===$e?k[T]:_[T],F=y===$e?-_[T]:-k[T],B=e.elements.arrow,z=p&&B?xn(B):{width:0,height:0},$=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:In(),q=$[N],U=$[P],G=Pn(0,k[T],z[T]),H=b?k[T]/2-j-G-q-L.mainAxis:R-G-q-L.mainAxis,W=b?-k[T]/2+j+G+U+L.mainAxis:F+G+U+L.mainAxis,V=e.elements.arrow&&Mn(e.elements.arrow),Y=V?"y"===w?V.clientTop||0:V.clientLeft||0:0,J=null!=(M=null==C?void 0:C[w])?M:0,X=I+H-J-Y,K=I+W-J,Z=Pn(p?gn(O,X):O,I,p?mn(D,K):D);S[w]=Z,A[w]=Z-I}if(a){var Q,tt="x"===w?De:Fe,et="x"===w?je:Re,nt=S[x],it="y"===x?"height":"width",rt=nt+g[tt],ot=nt-g[et],st=-1!==[De,Fe].indexOf(v),at=null!=(Q=null==C?void 0:C[x])?Q:0,lt=st?rt:nt-k[it]-_[it]-at+L.altAxis,ct=st?nt+k[it]+_[it]-at-L.altAxis:ot,ht=p&&st?Tn(lt,nt,ct):Pn(p?lt:rt,nt,p?ct:ot);S[x]=ht,A[x]=ht-nt}e.modifiersData[i]=A}}const Ai={name:"preventOverflow",enabled:!0,phase:"main",fn:Ci,requiresIfExists:["offset"]};function Mi(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Ni(t){return t!==an(t)&&cn(t)?Mi(t):Qn(t)}function Pi(t){var e=t.getBoundingClientRect(),n=vn(e.width)/t.offsetWidth||1,i=vn(e.height)/t.offsetHeight||1;return 1!==n||1!==i}function Ti(t,e,n){void 0===n&&(n=!1);var i=cn(e),r=cn(e)&&Pi(e),o=En(e),s=wn(t,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&(("body"!==sn(e)||ii(o))&&(a=Ni(e)),cn(e)?(l=wn(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):o&&(l.x=ti(o))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function Ii(t){var e=new Map,n=new Set,i=[];function r(t){n.add(t.name);var o=[].concat(t.requires||[],t.requiresIfExists||[]);o.forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&r(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||r(t)})),i}function Oi(t){var e=Ii(t);return on.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}function Di(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}function ji(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}var Ri={placement:"bottom",modifiers:[],strategy:"absolute"};function Fi(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"===typeof t.getBoundingClientRect)}))}function Bi(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,o=void 0===r?Ri:r;return function(t,e,n){void 0===n&&(n=o);var r={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ri,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},s=[],a=!1,l={state:r,setOptions:function(n){var s="function"===typeof n?n(r.options):n;h(),r.options=Object.assign({},o,r.options,s),r.scrollParents={reference:ln(t)?oi(t):t.contextElement?oi(t.contextElement):[],popper:oi(e)};var a=Oi(ji([].concat(i,r.options.modifiers)));return r.orderedModifiers=a.filter((function(t){return t.enabled})),c(),l.update()},forceUpdate:function(){if(!a){var t=r.elements,e=t.reference,n=t.popper;if(Fi(e,n)){r.rects={reference:Ti(e,Mn(n),"fixed"===r.options.strategy),popper:xn(n)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach((function(t){return r.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<r.orderedModifiers.length;i++)if(!0!==r.reset){var o=r.orderedModifiers[i],s=o.fn,c=o.options,h=void 0===c?{}:c,u=o.name;"function"===typeof s&&(r=s({state:r,options:h,name:u,instance:l})||r)}else r.reset=!1,i=-1}}},update:Di((function(){return new Promise((function(t){l.forceUpdate(),t(r)}))})),destroy:function(){h(),a=!0}};if(!Fi(t,e))return l;function c(){r.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,o=t.effect;if("function"===typeof o){var a=o({state:r,name:e,instance:l,options:i}),c=function(){};s.push(a||c)}}))}function h(){s.forEach((function(t){return t()})),s=[]}return l.setOptions(n).then((function(t){!a&&n.onFirstUpdate&&n.onFirstUpdate(t)})),l}}var zi=Bi(),$i=[Yn,Ei,Hn,pn],qi=Bi({defaultModifiers:$i}),Ui=[Yn,Ei,Hn,pn,ki,gi,Ai,Bn,wi],Gi=Bi({defaultModifiers:Ui});const Hi=Object.freeze(Object.defineProperty({__proto__:null,popperGenerator:Bi,detectOverflow:di,createPopperBase:zi,createPopper:Gi,createPopperLite:qi,top:De,bottom:je,right:Re,left:Fe,auto:Be,basePlacements:ze,start:$e,end:qe,clippingParents:Ue,viewport:Ge,popper:He,reference:We,variationPlacements:Ve,placements:Ye,beforeRead:Je,read:Xe,afterRead:Ke,beforeMain:Ze,main:Qe,afterMain:tn,beforeWrite:en,write:nn,afterWrite:rn,modifierPhases:on,applyStyles:pn,arrow:Bn,computeStyles:Hn,eventListeners:Yn,flip:gi,hide:wi,offset:ki,popperOffsets:Ei,preventOverflow:Ai},Symbol.toStringTag,{value:"Module"})),Wi="dropdown",Vi="bs.dropdown",Yi=`.${Vi}`,Ji=".data-api",Xi="Escape",Ki="Tab",Zi="ArrowUp",Qi="ArrowDown",tr=2,er=`hide${Yi}`,nr=`hidden${Yi}`,ir=`show${Yi}`,rr=`shown${Yi}`,or=`click${Yi}${Ji}`,sr=`keydown${Yi}${Ji}`,ar=`keyup${Yi}${Ji}`,lr="show",cr="dropup",hr="dropend",ur="dropstart",dr="dropup-center",pr="dropdown-center",fr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',mr=`${fr}.${lr}`,gr=".dropdown-menu",vr=".navbar",yr=".navbar-nav",br=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",wr=w()?"top-end":"top-start",xr=w()?"top-start":"top-end",Sr=w()?"bottom-end":"bottom-start",kr=w()?"bottom-start":"bottom-end",_r=w()?"left-start":"right-start",Er=w()?"right-start":"left-start",Lr="top",Cr="bottom",Ar={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Mr={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Nr extends K{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=mt.next(this._element,gr)[0]||mt.prev(this._element,gr)[0]||mt.findOne(gr,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ar}static get DefaultType(){return Mr}static get NAME(){return Wi}toggle(){return this._isShown()?this.hide():this.show()}show(){if(p(this._element)||this._isShown())return;const t={relatedTarget:this._element},e=q.trigger(this._element,ir,t);if(!e.defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(yr))for(const t of[].concat(...document.body.children))q.on(t,"mouseover",m);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(lr),this._element.classList.add(lr),q.trigger(this._element,rr,t)}}hide(){if(p(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){const e=q.trigger(this._element,er,t);if(!e.defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))q.off(t,"mouseover",m);this._popper&&this._popper.destroy(),this._menu.classList.remove(lr),this._element.classList.remove(lr),this._element.setAttribute("aria-expanded","false"),Y.removeDataAttribute(this._menu,"popper"),q.trigger(this._element,nr,t)}}_getConfig(t){if(t=super._getConfig(t),"object"===typeof t.reference&&!h(t.reference)&&"function"!==typeof t.reference.getBoundingClientRect)throw new TypeError(`${Wi.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if("undefined"===typeof Hi)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=this._parent:h(this._config.reference)?t=u(this._config.reference):"object"===typeof this._config.reference&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=Gi(t,this._menu,e)}_isShown(){return this._menu.classList.contains(lr)}_getPlacement(){const t=this._parent;if(t.classList.contains(hr))return _r;if(t.classList.contains(ur))return Er;if(t.classList.contains(dr))return Lr;if(t.classList.contains(pr))return Cr;const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains(cr)?e?xr:wr:e?kr:Sr}_detectNavbar(){return null!==this._element.closest(vr)}_getOffset(){const{offset:t}=this._config;return"string"===typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"===typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(Y.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,..."function"===typeof this._config.popperConfig?this._config.popperConfig(t):this._config.popperConfig}}_selectMenuItem({key:t,target:e}){const n=mt.find(br,this._menu).filter((t=>d(t)));n.length&&_(n,e,t===Qi,!n.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=Nr.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(t.button===tr||"keyup"===t.type&&t.key!==Ki)return;const e=mt.find(mr);for(const n of e){const e=Nr.getInstance(n);if(!e||!1===e._config.autoClose)continue;const i=t.composedPath(),r=i.includes(e._menu);if(i.includes(e._element)||"inside"===e._config.autoClose&&!r||"outside"===e._config.autoClose&&r)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&t.key===Ki||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const o={relatedTarget:e._element};"click"===t.type&&(o.clickEvent=t),e._completeHide(o)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n=t.key===Xi,i=[Zi,Qi].includes(t.key);if(!i&&!n)return;if(e&&!n)return;t.preventDefault();const r=this.matches(fr)?this:mt.prev(this,fr)[0]||mt.next(this,fr)[0]||mt.findOne(fr,t.delegateTarget.parentNode),o=Nr.getOrCreateInstance(r);if(i)return t.stopPropagation(),o.show(),void o._selectMenuItem(t);o._isShown()&&(t.stopPropagation(),o.hide(),r.focus())}}q.on(document,sr,fr,Nr.dataApiKeydownHandler),q.on(document,sr,gr,Nr.dataApiKeydownHandler),q.on(document,or,Nr.clearMenus),q.on(document,ar,Nr.clearMenus),q.on(document,or,fr,(function(t){t.preventDefault(),Nr.getOrCreateInstance(this).toggle()})),x(Nr);const Pr=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Tr=".sticky-top",Ir="padding-right",Or="margin-right";class Dr{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ir,(e=>e+t)),this._setElementAttributes(Pr,Ir,(e=>e+t)),this._setElementAttributes(Tr,Or,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ir),this._resetElementAttributes(Pr,Ir),this._resetElementAttributes(Tr,Or)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const i=this.getWidth(),r=t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+i)return;this._saveInitialAttribute(t,e);const r=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${n(Number.parseFloat(r))}px`)};this._applyManipulationCallback(t,r)}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&Y.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){const n=t=>{const n=Y.getDataAttribute(t,e);null!==n?(Y.removeDataAttribute(t,e),t.style.setProperty(e,n)):t.style.removeProperty(e)};this._applyManipulationCallback(t,n)}_applyManipulationCallback(t,e){if(h(t))e(t);else for(const n of mt.find(t,this._element))e(n)}}const jr="backdrop",Rr="fade",Fr="show",Br=`mousedown.bs.${jr}`,zr={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},$r={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class qr extends J{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return zr}static get DefaultType(){return $r}static get NAME(){return jr}show(t){if(!this._config.isVisible)return void S(t);this._append();const e=this._getElement();this._config.isAnimated&&g(e),e.classList.add(Fr),this._emulateAnimation((()=>{S(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(Fr),this._emulateAnimation((()=>{this.dispose(),S(t)}))):S(t)}dispose(){this._isAppended&&(q.off(this._element,Br),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(Rr),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=u(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),q.on(t,Br,(()=>{S(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){k(t,this._getElement(),this._config.isAnimated)}}const Ur="focustrap",Gr="bs.focustrap",Hr=`.${Gr}`,Wr=`focusin${Hr}`,Vr=`keydown.tab${Hr}`,Yr="Tab",Jr="forward",Xr="backward",Kr={autofocus:!0,trapElement:null},Zr={autofocus:"boolean",trapElement:"element"};class Qr extends J{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Kr}static get DefaultType(){return Zr}static get NAME(){return Ur}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),q.off(document,Hr),q.on(document,Wr,(t=>this._handleFocusin(t))),q.on(document,Vr,(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,q.off(document,Hr))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=mt.focusableChildren(e);0===n.length?e.focus():this._lastTabNavDirection===Xr?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){t.key===Yr&&(this._lastTabNavDirection=t.shiftKey?Xr:Jr)}}const to="modal",eo="bs.modal",no=`.${eo}`,io=".data-api",ro="Escape",oo=`hide${no}`,so=`hidePrevented${no}`,ao=`hidden${no}`,lo=`show${no}`,co=`shown${no}`,ho=`resize${no}`,uo=`click.dismiss${no}`,po=`mousedown.dismiss${no}`,fo=`keydown.dismiss${no}`,mo=`click${no}${io}`,go="modal-open",vo="fade",yo="show",bo="modal-static",wo=".modal.show",xo=".modal-dialog",So=".modal-body",ko='[data-bs-toggle="modal"]',_o={backdrop:!0,focus:!0,keyboard:!0},Eo={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Lo extends K{constructor(t,e){super(t,e),this._dialog=mt.findOne(xo,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Dr,this._addEventListeners()}static get Default(){return _o}static get DefaultType(){return Eo}static get NAME(){return to}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;const e=q.trigger(this._element,lo,{relatedTarget:t});e.defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(go),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){if(!this._isShown||this._isTransitioning)return;const t=q.trigger(this._element,oo);t.defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(yo),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated()))}dispose(){for(const t of[window,this._dialog])q.off(t,no);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new qr({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Qr({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=mt.findOne(So,this._dialog);e&&(e.scrollTop=0),g(this._element),this._element.classList.add(yo);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,q.trigger(this._element,co,{relatedTarget:t})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){q.on(this._element,fo,(t=>{if(t.key===ro)return this._config.keyboard?(t.preventDefault(),void this.hide()):void this._triggerBackdropTransition()})),q.on(window,ho,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),q.on(this._element,po,(t=>{q.one(this._element,uo,(e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(go),this._resetAdjustments(),this._scrollBar.reset(),q.trigger(this._element,ao)}))}_isAnimated(){return this._element.classList.contains(vo)}_triggerBackdropTransition(){const t=q.trigger(this._element,so);if(t.defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;"hidden"===n||this._element.classList.contains(bo)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(bo),this._queueCallback((()=>{this._element.classList.remove(bo),this._queueCallback((()=>{this._element.style.overflowY=n}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const t=w()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!n&&t){const t=w()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const n=Lo.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}}))}}q.on(document,mo,ko,(function(t){const e=a(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),q.one(e,lo,(t=>{t.defaultPrevented||q.one(e,ao,(()=>{d(this)&&this.focus()}))}));const n=mt.findOne(wo);n&&Lo.getInstance(n).hide();const i=Lo.getOrCreateInstance(e);i.toggle(this)})),Z(Lo),x(Lo);const Co="offcanvas",Ao="bs.offcanvas",Mo=`.${Ao}`,No=".data-api",Po=`load${Mo}${No}`,To="Escape",Io="show",Oo="showing",Do="hiding",jo="offcanvas-backdrop",Ro=".offcanvas.show",Fo=`show${Mo}`,Bo=`shown${Mo}`,zo=`hide${Mo}`,$o=`hidePrevented${Mo}`,qo=`hidden${Mo}`,Uo=`resize${Mo}`,Go=`click${Mo}${No}`,Ho=`keydown.dismiss${Mo}`,Wo='[data-bs-toggle="offcanvas"]',Vo={backdrop:!0,keyboard:!0,scroll:!1},Yo={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Jo extends K{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Vo}static get DefaultType(){return Yo}static get NAME(){return Co}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown)return;const e=q.trigger(this._element,Fo,{relatedTarget:t});if(e.defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new Dr).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Oo);const n=()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Io),this._element.classList.remove(Oo),q.trigger(this._element,Bo,{relatedTarget:t})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown)return;const t=q.trigger(this._element,zo);if(t.defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Do),this._backdrop.hide();const e=()=>{this._element.classList.remove(Io,Do),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new Dr).reset(),q.trigger(this._element,qo)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{"static"!==this._config.backdrop?this.hide():q.trigger(this._element,$o)},e=Boolean(this._config.backdrop);return new qr({className:jo,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new Qr({trapElement:this._element})}_addEventListeners(){q.on(this._element,Ho,(t=>{t.key===To&&(this._config.keyboard?this.hide():q.trigger(this._element,$o))}))}static jQueryInterface(t){return this.each((function(){const e=Jo.getOrCreateInstance(this,t);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}q.on(document,Go,Wo,(function(t){const e=a(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),p(this))return;q.one(e,qo,(()=>{d(this)&&this.focus()}));const n=mt.findOne(Ro);n&&n!==e&&Jo.getInstance(n).hide();const i=Jo.getOrCreateInstance(e);i.toggle(this)})),q.on(window,Po,(()=>{for(const t of mt.find(Ro))Jo.getOrCreateInstance(t).show()})),q.on(window,Uo,(()=>{for(const t of mt.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&Jo.getOrCreateInstance(t).hide()})),Z(Jo),x(Jo);const Xo=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ko=/^aria-[\w-]*$/i,Zo=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^#&/:?]*(?:[#/?]|$))/i,Qo=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,ts=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?!Xo.has(n)||Boolean(Zo.test(t.nodeValue)||Qo.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(n)))},es={"*":["class","dir","id","lang","role",Ko],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]};function ns(t,e,n){if(!t.length)return t;if(n&&"function"===typeof n)return n(t);const i=new window.DOMParser,r=i.parseFromString(t,"text/html"),o=[].concat(...r.body.querySelectorAll("*"));for(const s of o){const t=s.nodeName.toLowerCase();if(!Object.keys(e).includes(t)){s.remove();continue}const n=[].concat(...s.attributes),i=[].concat(e["*"]||[],e[t]||[]);for(const e of n)ts(e,i)||s.removeAttribute(e.nodeName)}return r.body.innerHTML}const is="TemplateFactory",rs={allowList:es,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},os={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},ss={entry:"(string|element|function|null)",selector:"(string|element)"};class as extends J{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return rs}static get DefaultType(){return os}static get NAME(){return is}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[i,r]of Object.entries(this._config.content))this._setContent(t,r,i);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},ss)}_setContent(t,e,n){const i=mt.findOne(n,t);i&&(e=this._resolvePossibleFunction(e),e?h(e)?this._putElementInTemplate(u(e),i):this._config.html?i.innerHTML=this._maybeSanitize(e):i.textContent=e:i.remove())}_maybeSanitize(t){return this._config.sanitize?ns(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return"function"===typeof t?t(this):t}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const ls="tooltip",cs=new Set(["sanitize","allowList","sanitizeFn"]),hs="fade",us="modal",ds="show",ps=".tooltip-inner",fs=`.${us}`,ms="hide.bs.modal",gs="hover",vs="focus",ys="click",bs="manual",ws="hide",xs="hidden",Ss="show",ks="shown",_s="inserted",Es="click",Ls="focusin",Cs="focusout",As="mouseenter",Ms="mouseleave",Ns={AUTO:"auto",TOP:"top",RIGHT:w()?"left":"right",BOTTOM:"bottom",LEFT:w()?"right":"left"},Ps={allowList:es,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,0],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Ts={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Is extends K{constructor(t,e){if("undefined"===typeof Hi)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Ps}static get DefaultType(){return Ts}static get NAME(){return ls}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),q.off(this._element.closest(fs),ms,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=q.trigger(this._element,this.constructor.eventName(Ss)),e=f(this._element),n=(e||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!n)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(i),q.trigger(this._element,this.constructor.eventName(_s))),this._popper=this._createPopper(i),i.classList.add(ds),"ontouchstart"in document.documentElement)for(const s of[].concat(...document.body.children))q.on(s,"mouseover",m);const o=()=>{q.trigger(this._element,this.constructor.eventName(ks)),!1===this._isHovered&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown())return;const t=q.trigger(this._element,this.constructor.eventName(ws));if(t.defaultPrevented)return;const e=this._getTipElement();if(e.classList.remove(ds),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))q.off(i,"mouseover",m);this._activeTrigger[ys]=!1,this._activeTrigger[vs]=!1,this._activeTrigger[gs]=!1,this._isHovered=null;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),q.trigger(this._element,this.constructor.eventName(xs)))};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(hs,ds),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=r(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(hs),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new as({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[ps]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(hs)}_isShown(){return this.tip&&this.tip.classList.contains(ds)}_createPopper(t){const e="function"===typeof this._config.placement?this._config.placement.call(this,t,this._element):this._config.placement,n=Ns[e.toUpperCase()];return Gi(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return"string"===typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"===typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return"function"===typeof t?t.call(this._element):t}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,..."function"===typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)q.on(this._element,this.constructor.eventName(Es),this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e.toggle()}));else if(e!==bs){const t=e===gs?this.constructor.eventName(As):this.constructor.eventName(Ls),n=e===gs?this.constructor.eventName(Ms):this.constructor.eventName(Cs);q.on(this._element,t,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?vs:gs]=!0,e._enter()})),q.on(this._element,n,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?vs:gs]=e._element.contains(t.relatedTarget),e._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},q.on(this._element.closest(fs),ms,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=Y.getDataAttributes(this._element);for(const n of Object.keys(e))cs.has(n)&&delete e[n];return t={...e,..."object"===typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:u(t.container),"number"===typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"===typeof t.title&&(t.title=t.title.toString()),"number"===typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const e in this._config)this.constructor.Default[e]!==this._config[e]&&(t[e]=this._config[e]);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each((function(){const e=Is.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}x(Is);const Os="popover",Ds=".popover-header",js=".popover-body",Rs={...Is.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Fs={...Is.DefaultType,content:"(null|string|element|function)"};class Bs extends Is{static get Default(){return Rs}static get DefaultType(){return Fs}static get NAME(){return Os}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Ds]:this._getTitle(),[js]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each((function(){const e=Bs.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}x(Bs);const zs="scrollspy",$s="bs.scrollspy",qs=`.${$s}`,Us=".data-api",Gs=`activate${qs}`,Hs=`click${qs}`,Ws=`load${qs}${Us}`,Vs="dropdown-item",Ys="active",Js='[data-bs-spy="scroll"]',Xs="[href]",Ks=".nav, .list-group",Zs=".nav-link",Qs=".nav-item",ta=".list-group-item",ea=`${Zs}, ${Qs} > ${Zs}, ${ta}`,na=".dropdown",ia=".dropdown-toggle",ra={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},oa={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class sa extends K{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return ra}static get DefaultType(){return oa}static get NAME(){return zs}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=u(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"===typeof t.threshold&&(t.threshold=t.threshold.split(",").map((t=>Number.parseFloat(t)))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(q.off(this._config.target,Hs),q.on(this._config.target,Hs,Xs,(t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,i=e.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:i,behavior:"smooth"});n.scrollTop=i}})))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((t=>this._observerCallback(t)),t)}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),n=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},i=(this._rootElement||document.documentElement).scrollTop,r=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const t=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&t){if(n(o),!i)return}else r||t||n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=mt.find(Xs,this._config.target);for(const e of t){if(!e.hash||p(e))continue;const t=mt.findOne(e.hash,this._element);d(t)&&(this._targetLinks.set(e.hash,e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Ys),this._activateParents(t),q.trigger(this._element,Gs,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(Vs))mt.findOne(ia,t.closest(na)).classList.add(Ys);else for(const e of mt.parents(t,Ks))for(const t of mt.prev(e,ea))t.classList.add(Ys)}_clearActiveClass(t){t.classList.remove(Ys);const e=mt.find(`${Xs}.${Ys}`,t);for(const n of e)n.classList.remove(Ys)}static jQueryInterface(t){return this.each((function(){const e=sa.getOrCreateInstance(this,t);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}q.on(window,Ws,(()=>{for(const t of mt.find(Js))sa.getOrCreateInstance(t)})),x(sa);const aa="tab",la="bs.tab",ca=`.${la}`,ha=`hide${ca}`,ua=`hidden${ca}`,da=`show${ca}`,pa=`shown${ca}`,fa=`click${ca}`,ma=`keydown${ca}`,ga=`load${ca}`,va="ArrowLeft",ya="ArrowRight",ba="ArrowUp",wa="ArrowDown",xa="active",Sa="fade",ka="show",_a="dropdown",Ea=".dropdown-toggle",La=".dropdown-menu",Ca=":not(.dropdown-toggle)",Aa='.list-group, .nav, [role="tablist"]',Ma=".nav-item, .list-group-item",Na=`.nav-link${Ca}, .list-group-item${Ca}, [role="tab"]${Ca}`,Pa='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ta=`${Na}, ${Pa}`,Ia=`.${xa}[data-bs-toggle="tab"], .${xa}[data-bs-toggle="pill"], .${xa}[data-bs-toggle="list"]`;class Oa extends K{constructor(t){super(t),this._parent=this._element.closest(Aa),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),q.on(this._element,ma,(t=>this._keydown(t))))}static get NAME(){return aa}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?q.trigger(e,ha,{relatedTarget:t}):null,i=q.trigger(t,da,{relatedTarget:e});i.defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(xa),this._activate(a(t));const n=()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),q.trigger(t,pa,{relatedTarget:e})):t.classList.add(ka)};this._queueCallback(n,t,t.classList.contains(Sa))}_deactivate(t,e){if(!t)return;t.classList.remove(xa),t.blur(),this._deactivate(a(t));const n=()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),q.trigger(t,ua,{relatedTarget:e})):t.classList.remove(ka)};this._queueCallback(n,t,t.classList.contains(Sa))}_keydown(t){if(![va,ya,ba,wa].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=[ya,wa].includes(t.key),n=_(this._getChildren().filter((t=>!p(t))),t.target,e,!0);n&&(n.focus({preventScroll:!0}),Oa.getOrCreateInstance(n).show())}_getChildren(){return mt.find(Ta,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const n of e)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=a(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`#${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains(_a))return;const i=(t,i)=>{const r=mt.findOne(t,n);r&&r.classList.toggle(i,e)};i(Ea,xa),i(La,ka),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(xa)}_getInnerElement(t){return t.matches(Ta)?t:mt.findOne(Ta,t)}_getOuterElement(t){return t.closest(Ma)||t}static jQueryInterface(t){return this.each((function(){const e=Oa.getOrCreateInstance(this);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}q.on(document,fa,Pa,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),p(this)||Oa.getOrCreateInstance(this).show()})),q.on(window,ga,(()=>{for(const t of mt.find(Ia))Oa.getOrCreateInstance(t)})),x(Oa);const Da="toast",ja="bs.toast",Ra=`.${ja}`,Fa=`mouseover${Ra}`,Ba=`mouseout${Ra}`,za=`focusin${Ra}`,$a=`focusout${Ra}`,qa=`hide${Ra}`,Ua=`hidden${Ra}`,Ga=`show${Ra}`,Ha=`shown${Ra}`,Wa="fade",Va="hide",Ya="show",Ja="showing",Xa={animation:"boolean",autohide:"boolean",delay:"number"},Ka={animation:!0,autohide:!0,delay:5e3};class Za extends K{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Ka}static get DefaultType(){return Xa}static get NAME(){return Da}show(){const t=q.trigger(this._element,Ga);if(t.defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Wa);const e=()=>{this._element.classList.remove(Ja),q.trigger(this._element,Ha),this._maybeScheduleHide()};this._element.classList.remove(Va),g(this._element),this._element.classList.add(Ya,Ja),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown())return;const t=q.trigger(this._element,qa);if(t.defaultPrevented)return;const e=()=>{this._element.classList.add(Va),this._element.classList.remove(Ja,Ya),q.trigger(this._element,Ua)};this._element.classList.add(Ja),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Ya),super.dispose()}isShown(){return this._element.classList.contains(Ya)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e;break}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){q.on(this._element,Fa,(t=>this._onInteraction(t,!0))),q.on(this._element,Ba,(t=>this._onInteraction(t,!1))),q.on(this._element,za,(t=>this._onInteraction(t,!0))),q.on(this._element,$a,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=Za.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}Z(Za),x(Za);const Qa={Alert:st,Button:ft,Carousel:de,Collapse:Oe,Dropdown:Nr,Modal:Lo,Offcanvas:Jo,Popover:Bs,ScrollSpy:sa,Tab:Oa,Toast:Za,Tooltip:Is};return Qa}))},6612:function(t,e,n){"use strict";n.d(e,{kH:function(){return It}});n(1487),n(7782),n(4345),n(102),n(9801);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}n(3767),n(8585),n(8696),n(7658);var r=Uint8Array,o=Uint16Array,s=Int32Array,a=new r([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l=new r([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c=new r([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=function(t,e){for(var n=new o(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new s(n[30]);for(i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)r[a]=a-n[i]<<5|i;return{b:n,r:r}},u=h(a,2),d=u.b,p=u.r;d[28]=258,p[258]=28;for(var f=h(l,0),m=f.b,g=f.r,v=new o(32768),y=0;y<32768;++y){var b=(43690&y)>>1|(21845&y)<<1;b=(52428&b)>>2|(13107&b)<<2,b=(61680&b)>>4|(3855&b)<<4,v[y]=((65280&b)>>8|(255&b)<<8)>>1}var w=function(t,e,n){for(var i=t.length,r=0,s=new o(e);r<i;++r)t[r]&&++s[t[r]-1];var a,l=new o(e);for(r=1;r<e;++r)l[r]=l[r-1]+s[r-1]<<1;if(n){a=new o(1<<e);var c=15-e;for(r=0;r<i;++r)if(t[r])for(var h=r<<4|t[r],u=e-t[r],d=l[t[r]-1]++<<u,p=d|(1<<u)-1;d<=p;++d)a[v[d]>>c]=h}else for(a=new o(i),r=0;r<i;++r)t[r]&&(a[r]=v[l[t[r]-1]++]>>15-t[r]);return a},x=new r(288);for(y=0;y<144;++y)x[y]=8;for(y=144;y<256;++y)x[y]=9;for(y=256;y<280;++y)x[y]=7;for(y=280;y<288;++y)x[y]=8;var S=new r(32);for(y=0;y<32;++y)S[y]=5;var k=w(x,9,0),_=w(x,9,1),E=w(S,5,0),L=w(S,5,1),C=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},A=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(7&e)&n},M=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},N=function(t){return(t+7)/8|0},P=function(t,e,n){return(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length),new r(t.subarray(e,n))},T=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],I=function(t,e,n){var i=new Error(e||T[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,I),!n)throw i;return i},O=function(t,e,n,i){var o=t.length,s=i?i.length:0;if(!o||e.f&&!e.l)return n||new r(0);var h=!n,u=h||2!=e.i,p=e.i;h&&(n=new r(3*o));var f=function(t){var e=n.length;if(t>e){var i=new r(Math.max(2*e,t));i.set(n),n=i}},g=e.f||0,v=e.p||0,y=e.b||0,b=e.l,x=e.d,S=e.m,k=e.n,E=8*o;do{if(!b){g=A(t,v,1);var T=A(t,v+1,3);if(v+=3,!T){var O=N(v)+4,D=t[O-4]|t[O-3]<<8,j=O+D;if(j>o){p&&I(0);break}u&&f(y+D),n.set(t.subarray(O,j),y),e.b=y+=D,e.p=v=8*j,e.f=g;continue}if(1==T)b=_,x=L,S=9,k=5;else if(2==T){var R=A(t,v,31)+257,F=A(t,v+10,15)+4,B=R+A(t,v+5,31)+1;v+=14;for(var z=new r(B),$=new r(19),q=0;q<F;++q)$[c[q]]=A(t,v+3*q,7);v+=3*F;var U=C($),G=(1<<U)-1,H=w($,U,1);for(q=0;q<B;){var W=H[A(t,v,G)];v+=15&W;O=W>>4;if(O<16)z[q++]=O;else{var V=0,Y=0;16==O?(Y=3+A(t,v,3),v+=2,V=z[q-1]):17==O?(Y=3+A(t,v,7),v+=3):18==O&&(Y=11+A(t,v,127),v+=7);while(Y--)z[q++]=V}}var J=z.subarray(0,R),X=z.subarray(R);S=C(J),k=C(X),b=w(J,S,1),x=w(X,k,1)}else I(1);if(v>E){p&&I(0);break}}u&&f(y+131072);for(var K=(1<<S)-1,Z=(1<<k)-1,Q=v;;Q=v){V=b[M(t,v)&K];var tt=V>>4;if(v+=15&V,v>E){p&&I(0);break}if(V||I(2),tt<256)n[y++]=tt;else{if(256==tt){Q=v,b=null;break}var et=tt-254;if(tt>264){q=tt-257;var nt=a[q];et=A(t,v,(1<<nt)-1)+d[q],v+=nt}var it=x[M(t,v)&Z],rt=it>>4;it||I(3),v+=15&it;X=m[rt];if(rt>3){nt=l[rt];X+=M(t,v)&(1<<nt)-1,v+=nt}if(v>E){p&&I(0);break}u&&f(y+131072);var ot=y+et;if(y<X){var st=s-X,at=Math.min(X,ot);for(st+y<0&&I(3);y<at;++y)n[y]=i[st+y]}for(;y<ot;++y)n[y]=n[y-X]}}e.l=b,e.p=Q,e.b=y,e.f=g,b&&(g=1,e.m=S,e.d=x,e.n=k)}while(!g);return y!=n.length&&h?P(n,0,y):n.subarray(0,y)},D=function(t,e,n){n<<=7&e;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8},j=function(t,e,n){n<<=7&e;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8,t[i+2]|=n>>16},R=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var s=n.length,a=n.slice();if(!s)return{t:G,l:0};if(1==s){var l=new r(n[0].s+1);return l[n[0].s]=1,{t:l,l:1}}n.sort((function(t,e){return t.f-e.f})),n.push({s:-1,f:25001});var c=n[0],h=n[1],u=0,d=1,p=2;n[0]={s:-1,f:c.f+h.f,l:c,r:h};while(d!=s-1)c=n[n[u].f<n[p].f?u++:p++],h=n[u!=d&&n[u].f<n[p].f?u++:p++],n[d++]={s:-1,f:c.f+h.f,l:c,r:h};var f=a[0].s;for(i=1;i<s;++i)a[i].s>f&&(f=a[i].s);var m=new o(f+1),g=F(n[d-1],m,0);if(g>e){i=0;var v=0,y=g-e,b=1<<y;for(a.sort((function(t,e){return m[e.s]-m[t.s]||t.f-e.f}));i<s;++i){var w=a[i].s;if(!(m[w]>e))break;v+=b-(1<<g-m[w]),m[w]=e}v>>=y;while(v>0){var x=a[i].s;m[x]<e?v-=1<<e-m[x]++-1:++i}for(;i>=0&&v;--i){var S=a[i].s;m[S]==e&&(--m[S],++v)}g=e}return{t:new r(m),l:g}},F=function(t,e,n){return-1==t.s?Math.max(F(t.l,e,n+1),F(t.r,e,n+1)):e[t.s]=n},B=function(t){var e=t.length;while(e&&!t[--e]);for(var n=new o(++e),i=0,r=t[0],s=1,a=function(t){n[i++]=t},l=1;l<=e;++l)if(t[l]==r&&l!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(r),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}while(s--)a(r);s=1,r=t[l]}return{c:n.subarray(0,i),n:e}},z=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},$=function(t,e,n){var i=n.length,r=N(e+2);t[r]=255&i,t[r+1]=i>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var o=0;o<i;++o)t[r+o+4]=n[o];return 8*(r+4+i)},q=function(t,e,n,i,r,s,h,u,d,p,f){D(e,f++,n),++r[256];for(var m=R(r,15),g=m.t,v=m.l,y=R(s,15),b=y.t,_=y.l,L=B(g),C=L.c,A=L.n,M=B(b),N=M.c,P=M.n,T=new o(19),I=0;I<C.length;++I)++T[31&C[I]];for(I=0;I<N.length;++I)++T[31&N[I]];for(var O=R(T,7),F=O.t,q=O.l,U=19;U>4&&!F[c[U-1]];--U);var G,H,W,V,Y=p+5<<3,J=z(r,x)+z(s,S)+h,X=z(r,g)+z(s,b)+h+14+3*U+z(T,F)+2*T[16]+3*T[17]+7*T[18];if(d>=0&&Y<=J&&Y<=X)return $(e,f,t.subarray(d,d+p));if(D(e,f,1+(X<J)),f+=2,X<J){G=w(g,v,0),H=g,W=w(b,_,0),V=b;var K=w(F,q,0);D(e,f,A-257),D(e,f+5,P-1),D(e,f+10,U-4),f+=14;for(I=0;I<U;++I)D(e,f+3*I,F[c[I]]);f+=3*U;for(var Z=[C,N],Q=0;Q<2;++Q){var tt=Z[Q];for(I=0;I<tt.length;++I){var et=31&tt[I];D(e,f,K[et]),f+=F[et],et>15&&(D(e,f,tt[I]>>5&127),f+=tt[I]>>12)}}}else G=k,H=x,W=E,V=S;for(I=0;I<u;++I){var nt=i[I];if(nt>255){et=nt>>18&31;j(e,f,G[et+257]),f+=H[et+257],et>7&&(D(e,f,nt>>23&31),f+=a[et]);var it=31&nt;j(e,f,W[it]),f+=V[it],it>3&&(j(e,f,nt>>5&8191),f+=l[it])}else j(e,f,G[nt]),f+=H[nt]}return j(e,f,G[256]),f+H[256]},U=new s([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),G=new r(0),H=function(t,e,n,i,c,h){var u=h.z||t.length,d=new r(i+u+5*(1+Math.ceil(u/7e3))+c),f=d.subarray(i,d.length-c),m=h.l,v=7&(h.r||0);if(e){v&&(f[0]=h.r>>3);for(var y=U[e-1],b=y>>13,w=8191&y,x=(1<<n)-1,S=h.p||new o(32768),k=h.h||new o(x+1),_=Math.ceil(n/3),E=2*_,L=function(e){return(t[e]^t[e+1]<<_^t[e+2]<<E)&x},C=new s(25e3),A=new o(288),M=new o(32),T=0,I=0,O=h.i||0,D=0,j=h.w||0,R=0;O+2<u;++O){var F=L(O),B=32767&O,z=k[F];if(S[B]=z,k[F]=B,j<=O){var G=u-O;if((T>7e3||D>24576)&&(G>423||!m)){v=q(t,f,0,C,A,M,I,D,R,O-R,v),D=T=I=0,R=O;for(var H=0;H<286;++H)A[H]=0;for(H=0;H<30;++H)M[H]=0}var W=2,V=0,Y=w,J=B-z&32767;if(G>2&&F==L(O-J)){var X=Math.min(b,G)-1,K=Math.min(32767,O),Z=Math.min(258,G);while(J<=K&&--Y&&B!=z){if(t[O+W]==t[O+W-J]){for(var Q=0;Q<Z&&t[O+Q]==t[O+Q-J];++Q);if(Q>W){if(W=Q,V=J,Q>X)break;var tt=Math.min(J,Q-2),et=0;for(H=0;H<tt;++H){var nt=O-J+H&32767,it=S[nt],rt=nt-it&32767;rt>et&&(et=rt,z=nt)}}}B=z,z=S[B],J+=B-z&32767}}if(V){C[D++]=268435456|p[W]<<18|g[V];var ot=31&p[W],st=31&g[V];I+=a[ot]+l[st],++A[257+ot],++M[st],j=O+W,++T}else C[D++]=t[O],++A[t[O]]}}for(O=Math.max(O,j);O<u;++O)C[D++]=t[O],++A[t[O]];v=q(t,f,m,C,A,M,I,D,R,O-R,v),m||(h.r=7&v|f[v/8|0]<<3,v-=7,h.h=k,h.p=S,h.i=O,h.w=j)}else{for(O=h.w||0;O<u+m;O+=65535){var at=O+65535;at>=u&&(f[v/8|0]=m,at=u),v=$(f,v+1,t.subarray(O,at))}h.i=u}return P(d,0,i+N(v)+c)},W=function(){var t=1,e=0;return{p:function(n){for(var i=t,r=e,o=0|n.length,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)r+=i+=n[s];i=(65535&i)+15*(i>>16),r=(65535&r)+15*(r>>16)}t=i,e=r},d:function(){return t%=65521,e%=65521,(255&t)<<24|(65280&t)<<8|(255&e)<<8|e>>8}}},V=function(t,e,n,i,o){if(!o&&(o={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new r(s.length+t.length);a.set(s),a.set(t,s.length),t=a,o.w=s.length}return H(t,null==e.level?6:e.level,null==e.mem?o.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):20:12+e.mem,n,i,o)},Y=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},J=function(t,e){var n=e.level,i=0==n?0:n<6?1:9==n?3:2;if(t[0]=120,t[1]=i<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var r=W();r.p(e.dictionary),Y(t,2,r.d())}},X=function(t,e){return(8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31)&&I(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&I(6,"invalid zlib data: "+(32&t[1]?"need":"unexpected")+" dictionary"),2+(t[1]>>3&4)};function K(t,e){e||(e={});var n=W();n.p(t);var i=V(t,e,e.dictionary?6:2,4);return J(i,e),Y(i,i.length-4,n.d()),i}function Z(t,e){return O(t.subarray(X(t,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var Q="undefined"!=typeof TextDecoder&&new TextDecoder;try{Q.decode(G,{stream:!0}),1}catch(wn){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;
/** @license
 *
 * jsPDF - PDF Document creation from JavaScript
 * Version 2.5.2 Built on 2024-09-17T13:29:57.859Z
 *                      CommitID 00000000
 *
 * Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
 *               2015-2021 yWorks GmbH, http://www.yworks.com
 *               2015-2021 Lukas Holländer <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
 *               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
 *               2010 Aaron Spike, https://github.com/acspike
 *               2012 Willow Systems Corporation, https://github.com/willowsystems
 *               2012 Pablo Hess, https://github.com/pablohess
 *               2012 Florian Jenett, https://github.com/fjenett
 *               2013 Warren Weckesser, https://github.com/warrenweckesser
 *               2013 Youssef Beddad, https://github.com/lifof
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2013 Stefan Slonevskiy, https://github.com/stefslon
 *               2013 Jeremy Morel, https://github.com/jmorel
 *               2013 Christoph Hartmann, https://github.com/chris-rock
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Makes, https://github.com/dollaruw
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Steven Spungin, https://github.com/Flamenco
 *               2014 Kenneth Glassey, https://github.com/Gavvers
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * Contributor(s):
 *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
 *    kim3er, mfo, alnorth, Flamenco
 */
var tt=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function et(){tt.console&&"function"==typeof tt.console.log&&tt.console.log.apply(tt.console,arguments)}var nt={log:et,warn:function(t){tt.console&&("function"==typeof tt.console.warn?tt.console.warn.apply(tt.console,arguments):et.call(null,arguments))},error:function(t){tt.console&&("function"==typeof tt.console.error?tt.console.error.apply(tt.console,arguments):et(t))}};function it(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){lt(i.response,e,n)},i.onerror=function(){nt.error("could not download file")},i.send()}function rt(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return e.status>=200&&e.status<=299}function ot(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var st,at,lt=tt.saveAs||("object"!==("undefined"==typeof window?"undefined":i(window))||window!==tt?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var i=tt.URL||tt.webkitURL,r=document.createElement("a");e=e||t.name||"download",r.download=e,r.rel="noopener","string"==typeof t?(r.href=t,r.origin!==location.origin?rt(r.href)?it(t,e,n):ot(r,r.target="_blank"):ot(r)):(r.href=i.createObjectURL(t),setTimeout((function(){i.revokeObjectURL(r.href)}),4e4),setTimeout((function(){ot(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download","string"==typeof t)if(rt(t))it(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){ot(r)}))}else navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!==i(e)&&(nt.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return it(t,e,n);var o="application/octet-stream"===t.type,s=/constructor/i.test(tt.HTMLElement)||tt.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||o&&s)&&"object"===("undefined"==typeof FileReader?"undefined":i(FileReader))){var l=new FileReader;l.onloadend=function(){var t=l.result;t=a?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},l.readAsDataURL(t)}else{var c=tt.URL||tt.webkitURL,h=c.createObjectURL(t);r?r.location=h:location.href=h,r=null,setTimeout((function(){c.revokeObjectURL(h)}),4e4)}});
/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function ct(t){var e;t=t||"",this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],i=0;i<n.length;i++){var r=n[i].re,o=n[i].process,s=r.exec(t);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n}}
/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function ht(t,e){var n=t[0],i=t[1],r=t[2],o=t[3];n=dt(n,i,r,o,e[0],7,-680876936),o=dt(o,n,i,r,e[1],12,-389564586),r=dt(r,o,n,i,e[2],17,606105819),i=dt(i,r,o,n,e[3],22,-1044525330),n=dt(n,i,r,o,e[4],7,-176418897),o=dt(o,n,i,r,e[5],12,1200080426),r=dt(r,o,n,i,e[6],17,-1473231341),i=dt(i,r,o,n,e[7],22,-45705983),n=dt(n,i,r,o,e[8],7,1770035416),o=dt(o,n,i,r,e[9],12,-1958414417),r=dt(r,o,n,i,e[10],17,-42063),i=dt(i,r,o,n,e[11],22,-1990404162),n=dt(n,i,r,o,e[12],7,1804603682),o=dt(o,n,i,r,e[13],12,-40341101),r=dt(r,o,n,i,e[14],17,-1502002290),n=pt(n,i=dt(i,r,o,n,e[15],22,1236535329),r,o,e[1],5,-165796510),o=pt(o,n,i,r,e[6],9,-1069501632),r=pt(r,o,n,i,e[11],14,643717713),i=pt(i,r,o,n,e[0],20,-373897302),n=pt(n,i,r,o,e[5],5,-701558691),o=pt(o,n,i,r,e[10],9,38016083),r=pt(r,o,n,i,e[15],14,-660478335),i=pt(i,r,o,n,e[4],20,-405537848),n=pt(n,i,r,o,e[9],5,568446438),o=pt(o,n,i,r,e[14],9,-1019803690),r=pt(r,o,n,i,e[3],14,-187363961),i=pt(i,r,o,n,e[8],20,1163531501),n=pt(n,i,r,o,e[13],5,-1444681467),o=pt(o,n,i,r,e[2],9,-51403784),r=pt(r,o,n,i,e[7],14,1735328473),n=ft(n,i=pt(i,r,o,n,e[12],20,-1926607734),r,o,e[5],4,-378558),o=ft(o,n,i,r,e[8],11,-2022574463),r=ft(r,o,n,i,e[11],16,1839030562),i=ft(i,r,o,n,e[14],23,-35309556),n=ft(n,i,r,o,e[1],4,-1530992060),o=ft(o,n,i,r,e[4],11,1272893353),r=ft(r,o,n,i,e[7],16,-155497632),i=ft(i,r,o,n,e[10],23,-1094730640),n=ft(n,i,r,o,e[13],4,681279174),o=ft(o,n,i,r,e[0],11,-358537222),r=ft(r,o,n,i,e[3],16,-722521979),i=ft(i,r,o,n,e[6],23,76029189),n=ft(n,i,r,o,e[9],4,-640364487),o=ft(o,n,i,r,e[12],11,-421815835),r=ft(r,o,n,i,e[15],16,530742520),n=mt(n,i=ft(i,r,o,n,e[2],23,-995338651),r,o,e[0],6,-198630844),o=mt(o,n,i,r,e[7],10,1126891415),r=mt(r,o,n,i,e[14],15,-1416354905),i=mt(i,r,o,n,e[5],21,-57434055),n=mt(n,i,r,o,e[12],6,1700485571),o=mt(o,n,i,r,e[3],10,-1894986606),r=mt(r,o,n,i,e[10],15,-1051523),i=mt(i,r,o,n,e[1],21,-2054922799),n=mt(n,i,r,o,e[8],6,1873313359),o=mt(o,n,i,r,e[15],10,-30611744),r=mt(r,o,n,i,e[6],15,-1560198380),i=mt(i,r,o,n,e[13],21,1309151649),n=mt(n,i,r,o,e[4],6,-145523070),o=mt(o,n,i,r,e[11],10,-1120210379),r=mt(r,o,n,i,e[2],15,718787259),i=mt(i,r,o,n,e[9],21,-343485551),t[0]=kt(n,t[0]),t[1]=kt(i,t[1]),t[2]=kt(r,t[2]),t[3]=kt(o,t[3])}function ut(t,e,n,i,r,o){return e=kt(kt(e,t),kt(i,o)),kt(e<<r|e>>>32-r,n)}function dt(t,e,n,i,r,o,s){return ut(e&n|~e&i,t,e,r,o,s)}function pt(t,e,n,i,r,o,s){return ut(e&i|n&~i,t,e,r,o,s)}function ft(t,e,n,i,r,o,s){return ut(e^n^i,t,e,r,o,s)}function mt(t,e,n,i,r,o,s){return ut(n^(e|~i),t,e,r,o,s)}function gt(t){var e,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)ht(i,vt(t.substring(e-64,e)));t=t.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)r[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(ht(i,r),e=0;e<16;e++)r[e]=0;return r[14]=8*n,ht(i,r),i}function vt(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}st=tt.atob.bind(tt),at=tt.btoa.bind(tt);var yt="0123456789abcdef".split("");function bt(t){for(var e="",n=0;n<4;n++)e+=yt[t>>8*n+4&15]+yt[t>>8*n&15];return e}function wt(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function xt(t){return gt(t).map(wt).join("")}var St="5d41402abc4b2a76b9719d911017c592"!=function(t){for(var e=0;e<t.length;e++)t[e]=bt(t[e]);return t.join("")}(gt("hello"));function kt(t,e){if(St){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}
/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function _t(t,e){var n,i,r,o;if(t!==n){for(var s=(r=t,o=1+(256/t.length>>0),new Array(o+1).join(r)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var h=a[l];c=(c+h+s.charCodeAt(l))%256,a[l]=a[c],a[c]=h}n=t,i=a}else a=i;var u=e.length,d=0,p=0,f="";for(l=0;l<u;l++)p=(p+(h=a[d=(d+1)%256]))%256,a[d]=a[p],a[p]=h,s=a[(a[d]+a[p])%256],f+=String.fromCharCode(e.charCodeAt(l)^s);return f}
/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Et={print:4,modify:8,copy:16,"annot-forms":32};function Lt(t,e,n,i){this.v=1,this.r=2;var r=192;t.forEach((function(t){if(void 0!==Et.perm)throw new Error("Invalid permission: "+t);r+=Et[t]})),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var o=(e+this.padding).substr(0,32),s=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^r)),this.encryptionKey=xt(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=_t(this.encryptionKey,this.padding)}function Ct(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,i=0;i<n;i++){var r=t.charCodeAt(i);e+=r<33||35===r||37===r||40===r||41===r||47===r||60===r||62===r||91===r||93===r||123===r||125===r||r>126?"#"+("0"+r.toString(16)).slice(-2):t[i]}return e}function At(t){if("object"!==i(t))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,i){if(i=i||!1,"string"!=typeof t||"function"!=typeof n||"boolean"!=typeof i)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var r=Math.random().toString(35);return e[t][r]=[n,!!i],r},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],0===Object.keys(e[n]).length&&delete e[n],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var o in e[n]){var s=e[n][o];try{s[0].apply(t,i)}catch(n){tt.console&&nt.error("jsPDF PubSub Error",n.message,n)}s[1]&&r.push(o)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Mt(t){if(!(this instanceof Mt))return new Mt(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Nt(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Pt(t,e,n,i,r){if(!(this instanceof Pt))return new Pt(t,e,n,i,r);this.type="axial"===t?2:3,this.coords=e,this.colors=n,Nt.call(this,i,r)}function Tt(t,e,n,i,r){if(!(this instanceof Tt))return new Tt(t,e,n,i,r);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Nt.call(this,i,r)}function It(t){var e,n="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],o=arguments[2],s=arguments[3],a=[],l=1,c=16,h="S",u=null;"object"===i(t=t||{})&&(n=t.orientation,r=t.unit||r,o=t.format||o,s=t.compress||t.compressPdf||s,null!==(u=t.encryption||null)&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l="number"==typeof t.userUnit?Math.abs(t.userUnit):1,void 0!==t.precision&&(e=t.precision),void 0!==t.floatPrecision&&(c=t.floatPrecision),h=t.defaultPathOperation||"S"),a=t.filters||(!0===s?["FlateEncode"]:a),r=r||"mm",n=(""+(n||"P")).toLowerCase();var d=t.putOnlyUsedFonts||!1,p={},f={internal:{},__private__:{}};f.__private__.PubSub=At;var m="1.3",g=f.__private__.getPdfVersion=function(){return m};f.__private__.setPdfVersion=function(t){m=t};var v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return v};var y=f.__private__.getPageFormat=function(t){return v[t]};o=o||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},w=b.COMPAT;function x(){this.saveGraphicsState(),Q(new Ht(bt,0,0,-bt,0,zn()*bt).toString()+" cm"),this.setFontSize(this.getFontSize()/bt),h="n",w=b.ADVANCED}function S(){this.restoreGraphicsState(),h="S",w=b.COMPAT}var k=f.__private__.combineFontStyleAndFontWeight=function(t,e){if("bold"==t&&"normal"==e||"bold"==t&&400==e||"normal"==t&&"italic"==e||"bold"==t&&"italic"==e)throw new Error("Invalid Combination of fontweight and fontstyle");return e&&(t=400==e||"normal"===e?"italic"===t?"italic":"normal":700!=e&&"bold"!==e||"normal"!==t?(700==e?"bold":e)+""+t:"bold"),t};f.advancedAPI=function(t){var e=w===b.COMPAT;return e&&x.call(this),"function"!=typeof t||(t(this),e&&S.call(this)),this},f.compatAPI=function(t){var e=w===b.ADVANCED;return e&&S.call(this),"function"!=typeof t||(t(this),e&&x.call(this)),this},f.isAdvancedAPI=function(){return w===b.ADVANCED};var _,E=function(t){if(w!==b.ADVANCED)throw new Error(t+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},L=f.roundToPrecision=f.__private__.roundToPrecision=function(t,n){var i=e||n;if(isNaN(t)||isNaN(i))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return t.toFixed(i).replace(/0+$/,"")};_=f.hpf=f.__private__.hpf="number"==typeof c?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return L(t,c)}:"smart"===c?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return L(t,t>-1&&t<1?16:5)}:function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return L(t,16)};var C=f.f2=f.__private__.f2=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f2");return L(t,2)},A=f.__private__.f3=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f3");return L(t,3)},M=f.scale=f.__private__.scale=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.scale");return w===b.COMPAT?t*bt:w===b.ADVANCED?t:void 0},N=function(t){return w===b.COMPAT?zn()-t:w===b.ADVANCED?t:void 0},P=function(t){return M(N(t))};f.__private__.setPrecision=f.setPrecision=function(t){"number"==typeof parseInt(t,10)&&(e=parseInt(t,10))};var T,I="00000000000000000000000000000000",O=f.__private__.getFileId=function(){return I},D=f.__private__.setFileId=function(t){return I=void 0!==t&&/^[a-fA-F0-9]{32}$/.test(t)?t.toUpperCase():I.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==u&&(Ve=new Lt(u.userPermissions,u.userPassword,u.ownerPassword,I)),I};f.setFileId=function(t){return D(t),this},f.getFileId=function(){return O()};var j=f.__private__.convertDateToPDFDate=function(t){var e=t.getTimezoneOffset(),n=e<0?"+":"-",i=Math.floor(Math.abs(e/60)),r=Math.abs(e%60),o=[n,$(i),"'",$(r),"'"].join("");return["D:",t.getFullYear(),$(t.getMonth()+1),$(t.getDate()),$(t.getHours()),$(t.getMinutes()),$(t.getSeconds()),o].join("")},R=f.__private__.convertPDFDateToDate=function(t){var e=parseInt(t.substr(2,4),10),n=parseInt(t.substr(6,2),10)-1,i=parseInt(t.substr(8,2),10),r=parseInt(t.substr(10,2),10),o=parseInt(t.substr(12,2),10),s=parseInt(t.substr(14,2),10);return new Date(e,n,i,r,o,s,0)},F=f.__private__.setCreationDate=function(t){var e;if(void 0===t&&(t=new Date),t instanceof Date)e=j(t);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(t))throw new Error("Invalid argument passed to jsPDF.setCreationDate");e=t}return T=e},B=f.__private__.getCreationDate=function(t){var e=T;return"jsDate"===t&&(e=R(T)),e};f.setCreationDate=function(t){return F(t),this},f.getCreationDate=function(t){return B(t)};var z,$=f.__private__.padd2=function(t){return("0"+parseInt(t)).slice(-2)},q=f.__private__.padd2Hex=function(t){return("00"+(t=t.toString())).substr(t.length)},U=0,G=[],H=[],W=0,V=[],Y=[],J=!1,X=H,K=function(){U=0,W=0,H=[],G=[],V=[],Qt=Xt(),te=Xt()};f.__private__.setCustomOutputDestination=function(t){J=!0,X=t};var Z=function(t){J||(X=t)};f.__private__.resetCustomOutputDestination=function(){J=!1,X=H};var Q=f.__private__.out=function(t){return t=t.toString(),W+=t.length+1,X.push(t),X},et=f.__private__.write=function(t){return Q(1===arguments.length?t.toString():Array.prototype.join.call(arguments," "))},it=f.__private__.getArrayBuffer=function(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n);e--;)i[e]=t.charCodeAt(e);return n},rt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return rt};var ot=t.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(t){return ot=w===b.ADVANCED?t/bt:t,this};var st,ht=f.__private__.getFontSize=f.getFontSize=function(){return w===b.COMPAT?ot:ot*bt},ut=t.R2L||!1;f.__private__.setR2L=f.setR2L=function(t){return ut=t,this},f.__private__.getR2L=f.getR2L=function(){return ut};var dt,pt=f.__private__.setZoomMode=function(t){var e=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(t))st=t;else if(isNaN(t)){if(-1===e.indexOf(t))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+t+'" is not recognized.');st=t}else st=parseInt(t,10)};f.__private__.getZoomMode=function(){return st};var ft,mt=f.__private__.setPageMode=function(t){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(t))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+t+'" is not recognized.');dt=t};f.__private__.getPageMode=function(){return dt};var gt=f.__private__.setLayoutMode=function(t){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(t))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+t+'" is not recognized.');ft=t};f.__private__.getLayoutMode=function(){return ft},f.__private__.setDisplayMode=f.setDisplayMode=function(t,e,n){return pt(t),gt(e),mt(n),this};var vt={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(t){if(-1===Object.keys(vt).indexOf(t))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return vt[t]},f.__private__.getDocumentProperties=function(){return vt},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(t){for(var e in vt)vt.hasOwnProperty(e)&&t[e]&&(vt[e]=t[e]);return this},f.__private__.setDocumentProperty=function(t,e){if(-1===Object.keys(vt).indexOf(t))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return vt[t]=e};var yt,bt,wt,xt,St,kt={},_t={},Et=[],Nt={},Ot={},Dt={},jt={},Rt=null,Ft=0,Bt=[],zt=new At(f),$t=t.hotfixes||[],qt={},Ut={},Gt=[],Ht=function t(e,n,i,r,o,s){if(!(this instanceof t))return new t(e,n,i,r,o,s);isNaN(e)&&(e=1),isNaN(n)&&(n=0),isNaN(i)&&(i=0),isNaN(r)&&(r=1),isNaN(o)&&(o=0),isNaN(s)&&(s=0),this._matrix=[e,n,i,r,o,s]};Object.defineProperty(Ht.prototype,"sx",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Ht.prototype,"shy",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Ht.prototype,"shx",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Ht.prototype,"sy",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Ht.prototype,"tx",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Ht.prototype,"ty",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Ht.prototype,"a",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Ht.prototype,"b",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Ht.prototype,"c",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Ht.prototype,"d",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Ht.prototype,"e",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Ht.prototype,"f",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Ht.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ht.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ht.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ht.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Ht.prototype.join=function(t){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(_).join(t)},Ht.prototype.multiply=function(t){var e=t.sx*this.sx+t.shy*this.shx,n=t.sx*this.shy+t.shy*this.sy,i=t.shx*this.sx+t.sy*this.shx,r=t.shx*this.shy+t.sy*this.sy,o=t.tx*this.sx+t.ty*this.shx+this.tx,s=t.tx*this.shy+t.ty*this.sy+this.ty;return new Ht(e,n,i,r,o,s)},Ht.prototype.decompose=function(){var t=this.sx,e=this.shy,n=this.shx,i=this.sy,r=this.tx,o=this.ty,s=Math.sqrt(t*t+e*e),a=(t/=s)*n+(e/=s)*i;n-=t*a,i-=e*a;var l=Math.sqrt(n*n+i*i);return a/=l,t*(i/=l)<e*(n/=l)&&(t=-t,e=-e,a=-a,s=-s),{scale:new Ht(s,0,0,l,0,0),translate:new Ht(1,0,0,1,r,o),rotate:new Ht(t,e,-e,t,0,0),skew:new Ht(1,0,a,1,0,0)}},Ht.prototype.toString=function(t){return this.join(" ")},Ht.prototype.inversed=function(){var t=this.sx,e=this.shy,n=this.shx,i=this.sy,r=this.tx,o=this.ty,s=1/(t*i-e*n),a=i*s,l=-e*s,c=-n*s,h=t*s;return new Ht(a,l,c,h,-a*r-c*o,-l*r-h*o)},Ht.prototype.applyToPoint=function(t){var e=t.x*this.sx+t.y*this.shx+this.tx,n=t.x*this.shy+t.y*this.sy+this.ty;return new Tn(e,n)},Ht.prototype.applyToRectangle=function(t){var e=this.applyToPoint(t),n=this.applyToPoint(new Tn(t.x+t.w,t.y+t.h));return new In(e.x,e.y,n.x-e.x,n.y-e.y)},Ht.prototype.clone=function(){var t=this.sx,e=this.shy,n=this.shx,i=this.sy,r=this.tx,o=this.ty;return new Ht(t,e,n,i,r,o)},f.Matrix=Ht;var Wt=f.matrixMult=function(t,e){return e.multiply(t)},Vt=new Ht(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Vt;var Yt=function(t,e){if(!Ot[t]){var n=(e instanceof Pt?"Sh":"P")+(Object.keys(Nt).length+1).toString(10);e.id=n,Ot[t]=n,Nt[n]=e,zt.publish("addPattern",e)}};f.ShadingPattern=Pt,f.TilingPattern=Tt,f.addShadingPattern=function(t,e){return E("addShadingPattern()"),Yt(t,e),this},f.beginTilingPattern=function(t){E("beginTilingPattern()"),Dn(t.boundingBox[0],t.boundingBox[1],t.boundingBox[2]-t.boundingBox[0],t.boundingBox[3]-t.boundingBox[1],t.matrix)},f.endTilingPattern=function(t,e){E("endTilingPattern()"),e.stream=Y[z].join("\n"),Yt(t,e),zt.publish("endTilingPattern",e),Gt.pop().restore()};var Jt=f.__private__.newObject=function(){var t=Xt();return Kt(t,!0),t},Xt=f.__private__.newObjectDeferred=function(){return U++,G[U]=function(){return W},U},Kt=function(t,e){return e="boolean"==typeof e&&e,G[t]=W,e&&Q(t+" 0 obj"),t},Zt=f.__private__.newAdditionalObject=function(){var t={objId:Xt(),content:""};return V.push(t),t},Qt=Xt(),te=Xt(),ee=f.__private__.decodeColorString=function(t){var e=t.split(" ");if(2!==e.length||"g"!==e[1]&&"G"!==e[1])5!==e.length||"k"!==e[4]&&"K"!==e[4]||(e=[(1-e[0])*(1-e[3]),(1-e[1])*(1-e[3]),(1-e[2])*(1-e[3]),"r"]);else{var n=parseFloat(e[0]);e=[n,n,n,"r"]}for(var i="#",r=0;r<3;r++)i+=("0"+Math.floor(255*parseFloat(e[r])).toString(16)).slice(-2);return i},ne=f.__private__.encodeColorString=function(t){var e;"string"==typeof t&&(t={ch1:t});var n=t.ch1,r=t.ch2,o=t.ch3,s=t.ch4,a="draw"===t.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var l=new ct(n);if(l.ok)n=l.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var c=parseInt(n.substr(1),16);n=c>>16&255,r=c>>8&255,o=255&c}if(void 0===r||void 0===s&&n===r&&r===o)if("string"==typeof n)e=n+" "+a[0];else switch(t.precision){case 2:e=C(n/255)+" "+a[0];break;case 3:default:e=A(n/255)+" "+a[0]}else if(void 0===s||"object"===i(s)){if(s&&!isNaN(s.a)&&0===s.a)return["1.","1.","1.",a[1]].join(" ");if("string"==typeof n)e=[n,r,o,a[1]].join(" ");else switch(t.precision){case 2:e=[C(n/255),C(r/255),C(o/255),a[1]].join(" ");break;default:case 3:e=[A(n/255),A(r/255),A(o/255),a[1]].join(" ")}}else if("string"==typeof n)e=[n,r,o,s,a[2]].join(" ");else switch(t.precision){case 2:e=[C(n),C(r),C(o),C(s),a[2]].join(" ");break;case 3:default:e=[A(n),A(r),A(o),A(s),a[2]].join(" ")}return e},ie=f.__private__.getFilters=function(){return a},re=f.__private__.putStream=function(t){var e=(t=t||{}).data||"",n=t.filters||ie(),i=t.alreadyAppliedFilters||[],r=t.addLength1||!1,o=e.length,s=t.objectId,a=function(t){return t};if(null!==u&&void 0===s)throw new Error("ObjectId must be passed to putStream for file encryption");null!==u&&(a=Ve.encryptor(s,0));var l={};!0===n&&(n=["FlateEncode"]);var c=t.additionalKeyValues||[],h=(l=void 0!==It.API.processDataByFilters?It.API.processDataByFilters(e,n):{data:e,reverseChain:[]}).reverseChain+(Array.isArray(i)?i.join(" "):i.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===r&&c.push({key:"Length1",value:o})),0!=h.length)if(h.split("/").length-1==1)c.push({key:"Filter",value:h});else{c.push({key:"Filter",value:"["+h+"]"});for(var d=0;d<c.length;d+=1)if("DecodeParms"===c[d].key){for(var p=[],f=0;f<l.reverseChain.split("/").length-1;f+=1)p.push("null");p.push(c[d].value),c[d].value="["+p.join(" ")+"]"}}Q("<<");for(var m=0;m<c.length;m++)Q("/"+c[m].key+" "+c[m].value);Q(">>"),0!==l.data.length&&(Q("stream"),Q(a(l.data)),Q("endstream"))},oe=f.__private__.putPage=function(t){var e=t.number,n=t.data,i=t.objId,r=t.contentsObjId;Kt(i,!0),Q("<</Type /Page"),Q("/Parent "+t.rootDictionaryObjId+" 0 R"),Q("/Resources "+t.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(_(t.mediaBox.bottomLeftX))+" "+parseFloat(_(t.mediaBox.bottomLeftY))+" "+_(t.mediaBox.topRightX)+" "+_(t.mediaBox.topRightY)+"]"),null!==t.cropBox&&Q("/CropBox ["+_(t.cropBox.bottomLeftX)+" "+_(t.cropBox.bottomLeftY)+" "+_(t.cropBox.topRightX)+" "+_(t.cropBox.topRightY)+"]"),null!==t.bleedBox&&Q("/BleedBox ["+_(t.bleedBox.bottomLeftX)+" "+_(t.bleedBox.bottomLeftY)+" "+_(t.bleedBox.topRightX)+" "+_(t.bleedBox.topRightY)+"]"),null!==t.trimBox&&Q("/TrimBox ["+_(t.trimBox.bottomLeftX)+" "+_(t.trimBox.bottomLeftY)+" "+_(t.trimBox.topRightX)+" "+_(t.trimBox.topRightY)+"]"),null!==t.artBox&&Q("/ArtBox ["+_(t.artBox.bottomLeftX)+" "+_(t.artBox.bottomLeftY)+" "+_(t.artBox.topRightX)+" "+_(t.artBox.topRightY)+"]"),"number"==typeof t.userUnit&&1!==t.userUnit&&Q("/UserUnit "+t.userUnit),zt.publish("putPage",{objId:i,pageContext:Bt[e],pageNumber:e,page:n}),Q("/Contents "+r+" 0 R"),Q(">>"),Q("endobj");var o=n.join("\n");return w===b.ADVANCED&&(o+="\nQ"),Kt(r,!0),re({data:o,filters:ie(),objectId:r}),Q("endobj"),i},se=f.__private__.putPages=function(){var t,e,n=[];for(t=1;t<=Ft;t++)Bt[t].objId=Xt(),Bt[t].contentsObjId=Xt();for(t=1;t<=Ft;t++)n.push(oe({number:t,data:Y[t],objId:Bt[t].objId,contentsObjId:Bt[t].contentsObjId,mediaBox:Bt[t].mediaBox,cropBox:Bt[t].cropBox,bleedBox:Bt[t].bleedBox,trimBox:Bt[t].trimBox,artBox:Bt[t].artBox,userUnit:Bt[t].userUnit,rootDictionaryObjId:Qt,resourceDictionaryObjId:te}));Kt(Qt,!0),Q("<</Type /Pages");var i="/Kids [";for(e=0;e<Ft;e++)i+=n[e]+" 0 R ";Q(i+"]"),Q("/Count "+Ft),Q(">>"),Q("endobj"),zt.publish("postPutPages")},ae=function(t){zt.publish("putFont",{font:t,out:Q,newObject:Jt,putStream:re}),!0!==t.isAlreadyPutted&&(t.objectNumber=Jt(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+Ct(t.postScriptName)),Q("/Subtype /Type1"),"string"==typeof t.encoding&&Q("/Encoding /"+t.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},le=function(){for(var t in kt)kt.hasOwnProperty(t)&&(!1===d||!0===d&&p.hasOwnProperty(t))&&ae(kt[t])},ce=function(t){t.objectNumber=Jt();var e=[];e.push({key:"Type",value:"/XObject"}),e.push({key:"Subtype",value:"/Form"}),e.push({key:"BBox",value:"["+[_(t.x),_(t.y),_(t.x+t.width),_(t.y+t.height)].join(" ")+"]"}),e.push({key:"Matrix",value:"["+t.matrix.toString()+"]"});var n=t.pages[1].join("\n");re({data:n,additionalKeyValues:e,objectId:t.objectNumber}),Q("endobj")},he=function(){for(var t in qt)qt.hasOwnProperty(t)&&ce(qt[t])},ue=function(t,e){var n,i=[],r=1/(e-1);for(n=0;n<1;n+=r)i.push(n);if(i.push(1),0!=t[0].offset){var o={offset:0,color:t[0].color};t.unshift(o)}if(1!=t[t.length-1].offset){var s={offset:1,color:t[t.length-1].color};t.push(s)}for(var a="",l=0,c=0;c<i.length;c++){for(n=i[c];n>t[l+1].offset;)l++;var h=t[l].offset,u=(n-h)/(t[l+1].offset-h),d=t[l].color,p=t[l+1].color;a+=q(Math.round((1-u)*d[0]+u*p[0]).toString(16))+q(Math.round((1-u)*d[1]+u*p[1]).toString(16))+q(Math.round((1-u)*d[2]+u*p[2]).toString(16))}return a.trim()},de=function(t,e){e||(e=21);var n=Jt(),i=ue(t.colors,e),r=[];r.push({key:"FunctionType",value:"0"}),r.push({key:"Domain",value:"[0.0 1.0]"}),r.push({key:"Size",value:"["+e+"]"}),r.push({key:"BitsPerSample",value:"8"}),r.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),r.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),re({data:i,additionalKeyValues:r,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),Q("endobj"),t.objectNumber=Jt(),Q("<< /ShadingType "+t.type),Q("/ColorSpace /DeviceRGB");var o="/Coords ["+_(parseFloat(t.coords[0]))+" "+_(parseFloat(t.coords[1]))+" ";2===t.type?o+=_(parseFloat(t.coords[2]))+" "+_(parseFloat(t.coords[3])):o+=_(parseFloat(t.coords[2]))+" "+_(parseFloat(t.coords[3]))+" "+_(parseFloat(t.coords[4]))+" "+_(parseFloat(t.coords[5])),Q(o+="]"),t.matrix&&Q("/Matrix ["+t.matrix.toString()+"]"),Q("/Function "+n+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},pe=function(t,e){var n=Xt(),i=Jt();e.push({resourcesOid:n,objectOid:i}),t.objectNumber=i;var r=[];r.push({key:"Type",value:"/Pattern"}),r.push({key:"PatternType",value:"1"}),r.push({key:"PaintType",value:"1"}),r.push({key:"TilingType",value:"1"}),r.push({key:"BBox",value:"["+t.boundingBox.map(_).join(" ")+"]"}),r.push({key:"XStep",value:_(t.xStep)}),r.push({key:"YStep",value:_(t.yStep)}),r.push({key:"Resources",value:n+" 0 R"}),t.matrix&&r.push({key:"Matrix",value:"["+t.matrix.toString()+"]"}),re({data:t.stream,additionalKeyValues:r,objectId:t.objectNumber}),Q("endobj")},fe=function(t){var e;for(e in Nt)Nt.hasOwnProperty(e)&&(Nt[e]instanceof Pt?de(Nt[e]):Nt[e]instanceof Tt&&pe(Nt[e],t))},me=function(t){for(var e in t.objectNumber=Jt(),Q("<<"),t)switch(e){case"opacity":Q("/ca "+C(t[e]));break;case"stroke-opacity":Q("/CA "+C(t[e]))}Q(">>"),Q("endobj")},ge=function(){var t;for(t in Dt)Dt.hasOwnProperty(t)&&me(Dt[t])},ve=function(){for(var t in Q("/XObject <<"),qt)qt.hasOwnProperty(t)&&qt[t].objectNumber>=0&&Q("/"+t+" "+qt[t].objectNumber+" 0 R");zt.publish("putXobjectDict"),Q(">>")},ye=function(){Ve.oid=Jt(),Q("<<"),Q("/Filter /Standard"),Q("/V "+Ve.v),Q("/R "+Ve.r),Q("/U <"+Ve.toHexString(Ve.U)+">"),Q("/O <"+Ve.toHexString(Ve.O)+">"),Q("/P "+Ve.P),Q(">>"),Q("endobj")},be=function(){for(var t in Q("/Font <<"),kt)kt.hasOwnProperty(t)&&(!1===d||!0===d&&p.hasOwnProperty(t))&&Q("/"+t+" "+kt[t].objectNumber+" 0 R");Q(">>")},we=function(){if(Object.keys(Nt).length>0){for(var t in Q("/Shading <<"),Nt)Nt.hasOwnProperty(t)&&Nt[t]instanceof Pt&&Nt[t].objectNumber>=0&&Q("/"+t+" "+Nt[t].objectNumber+" 0 R");zt.publish("putShadingPatternDict"),Q(">>")}},xe=function(t){if(Object.keys(Nt).length>0){for(var e in Q("/Pattern <<"),Nt)Nt.hasOwnProperty(e)&&Nt[e]instanceof f.TilingPattern&&Nt[e].objectNumber>=0&&Nt[e].objectNumber<t&&Q("/"+e+" "+Nt[e].objectNumber+" 0 R");zt.publish("putTilingPatternDict"),Q(">>")}},Se=function(){if(Object.keys(Dt).length>0){var t;for(t in Q("/ExtGState <<"),Dt)Dt.hasOwnProperty(t)&&Dt[t].objectNumber>=0&&Q("/"+t+" "+Dt[t].objectNumber+" 0 R");zt.publish("putGStateDict"),Q(">>")}},ke=function(t){Kt(t.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),be(),we(),xe(t.objectOid),Se(),ve(),Q(">>"),Q("endobj")},_e=function(){var t=[];le(),ge(),he(),fe(t),zt.publish("putResources"),t.forEach(ke),ke({resourcesOid:te,objectOid:Number.MAX_SAFE_INTEGER}),zt.publish("postPutResources")},Ee=function(){zt.publish("putAdditionalObjects");for(var t=0;t<V.length;t++){var e=V[t];Kt(e.objId,!0),Q(e.content),Q("endobj")}zt.publish("postPutAdditionalObjects")},Le=function(t){_t[t.fontName]=_t[t.fontName]||{},_t[t.fontName][t.fontStyle]=t.id},Ce=function(t,e,n,i,r){var o={id:"F"+(Object.keys(kt).length+1).toString(10),postScriptName:t,fontName:e,fontStyle:n,encoding:i,isStandardFont:r||!1,metadata:{}};return zt.publish("addFont",{font:o,instance:this}),kt[o.id]=o,Le(o),o.id},Ae=function(t){for(var e=0,n=rt.length;e<n;e++){var i=Ce.call(this,t[e][0],t[e][1],t[e][2],rt[e][3],!0);!1===d&&(p[i]=!0);var r=t[e][0].split("-");Le({id:i,fontName:r[0],fontStyle:r[1]||""})}zt.publish("addFonts",{fonts:kt,dictionary:_t})},Me=function(t){return t.foo=function(){try{return t.apply(this,arguments)}catch(t){var e=t.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var n="Error in function "+e.split("\n")[0].split("<")[0]+": "+t.message;if(!tt.console)throw new Error(n);tt.console.error(n,t),tt.alert&&alert(n)}},t.foo.bar=t,t.foo},Ne=function(t,e){var n,i,r,o,s,a,l,c,h;if(r=(e=e||{}).sourceEncoding||"Unicode",s=e.outputEncoding,(e.autoencode||s)&&kt[yt].metadata&&kt[yt].metadata[r]&&kt[yt].metadata[r].encoding&&(o=kt[yt].metadata[r].encoding,!s&&kt[yt].encoding&&(s=kt[yt].encoding),!s&&o.codePages&&(s=o.codePages[0]),"string"==typeof s&&(s=o[s]),s)){for(l=!1,a=[],n=0,i=t.length;n<i;n++)(c=s[t.charCodeAt(n)])?a.push(String.fromCharCode(c)):a.push(t[n]),a[n].charCodeAt(0)>>8&&(l=!0);t=a.join("")}for(n=t.length;void 0===l&&0!==n;)t.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return t;for(a=e.noBOM?[]:[254,255],n=0,i=t.length;n<i;n++){if((h=(c=t.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");a.push(h),a.push(c-(h<<8))}return String.fromCharCode.apply(void 0,a)},Pe=f.__private__.pdfEscape=f.pdfEscape=function(t,e){return Ne(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Te=f.__private__.beginPage=function(t){Y[++Ft]=[],Bt[Ft]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(t[0]),topRightY:Number(t[1])}},De(Ft),Z(Y[z])},Ie=function(t,e){var i,r,s;switch(n=e||n,"string"==typeof t&&(i=y(t.toLowerCase()),Array.isArray(i)&&(r=i[0],s=i[1])),Array.isArray(t)&&(r=t[0]*bt,s=t[1]*bt),isNaN(r)&&(r=o[0],s=o[1]),(r>14400||s>14400)&&(nt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),r=Math.min(14400,r),s=Math.min(14400,s)),o=[r,s],n.substr(0,1)){case"l":s>r&&(o=[s,r]);break;case"p":r>s&&(o=[s,r])}Te(o),mn(pn),Q(kn),0!==Mn&&Q(Mn+" J"),0!==Nn&&Q(Nn+" j"),zt.publish("addPage",{pageNumber:Ft})},Oe=function(t){t>0&&t<=Ft&&(Y.splice(t,1),Bt.splice(t,1),Ft--,z>Ft&&(z=Ft),this.setPage(z))},De=function(t){t>0&&t<=Ft&&(z=t)},je=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Y.length-1},Re=function(t,e,n){var i,r=void 0;return n=n||{},t=void 0!==t?t:kt[yt].fontName,e=void 0!==e?e:kt[yt].fontStyle,i=t.toLowerCase(),void 0!==_t[i]&&void 0!==_t[i][e]?r=_t[i][e]:void 0!==_t[t]&&void 0!==_t[t][e]?r=_t[t][e]:!1===n.disableWarning&&nt.warn("Unable to look up font label for font '"+t+"', '"+e+"'. Refer to getFontList() for available fonts."),r||n.noFallback||null==(r=_t.times[e])&&(r=_t.times.normal),r},Fe=f.__private__.putInfo=function(){var t=Jt(),e=function(t){return t};for(var n in null!==u&&(e=Ve.encryptor(t,0)),Q("<<"),Q("/Producer ("+Pe(e("jsPDF "+It.version))+")"),vt)vt.hasOwnProperty(n)&&vt[n]&&Q("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+Pe(e(vt[n]))+")");Q("/CreationDate ("+Pe(e(T))+")"),Q(">>"),Q("endobj")},Be=f.__private__.putCatalog=function(t){var e=(t=t||{}).rootDictionaryObjId||Qt;switch(Jt(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+e+" 0 R"),st||(st="fullwidth"),st){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+st;"%"===n.substr(n.length-1)&&(st=parseInt(st)/100),"number"==typeof st&&Q("/OpenAction [3 0 R /XYZ null null "+C(st)+"]")}switch(ft||(ft="continuous"),ft){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}dt&&Q("/PageMode /"+dt),zt.publish("putCatalog"),Q(">>"),Q("endobj")},ze=f.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(U+1)),Q("/Root "+U+" 0 R"),Q("/Info "+(U-1)+" 0 R"),null!==u&&Q("/Encrypt "+Ve.oid+" 0 R"),Q("/ID [ <"+I+"> <"+I+"> ]"),Q(">>")},$e=f.__private__.putHeader=function(){Q("%PDF-"+m),Q("%ºß¬à")},qe=f.__private__.putXRef=function(){var t="0000000000";Q("xref"),Q("0 "+(U+1)),Q("0000000000 65535 f ");for(var e=1;e<=U;e++)"function"==typeof G[e]?Q((t+G[e]()).slice(-10)+" 00000 n "):void 0!==G[e]?Q((t+G[e]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},Ue=f.__private__.buildDocument=function(){K(),Z(H),zt.publish("buildDocument"),$e(),se(),Ee(),_e(),null!==u&&ye(),Fe(),Be();var t=W;return qe(),ze(),Q("startxref"),Q(""+t),Q("%%EOF"),Z(Y[z]),H.join("\n")},Ge=f.__private__.getBlob=function(t){return new Blob([it(t)],{type:"application/pdf"})},He=f.output=f.__private__.output=Me((function(t,e){switch("string"==typeof(e=e||{})?e={filename:e}:e.filename=e.filename||"generated.pdf",t){case void 0:return Ue();case"save":f.save(e.filename);break;case"arraybuffer":return it(Ue());case"blob":return Ge(Ue());case"bloburi":case"bloburl":if(void 0!==tt.URL&&"function"==typeof tt.URL.createObjectURL)return tt.URL&&tt.URL.createObjectURL(Ge(Ue()))||void 0;nt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",i=Ue();try{n=at(i)}catch(t){n=at(unescape(encodeURIComponent(i)))}return"data:application/pdf;filename="+e.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(tt)){var r="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",o=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';e.pdfObjectUrl&&(r=e.pdfObjectUrl,o="");var s='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+r+'"'+o+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(e)+");<\/script></body></html>",a=tt.open();return null!==a&&a.document.write(s),a}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(tt)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(e.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+e.filename+'" width="500px" height="400px" /></body></html>',c=tt.open();if(null!==c){c.document.write(l);var h=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=e.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(h.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(tt))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var u='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",e)+'"></iframe></body></html>',d=tt.open();if(null!==d&&(d.document.write(u),d.document.title=e.filename),d||"undefined"==typeof safari)return d;break;case"datauri":case"dataurl":return tt.document.location.href=this.output("datauristring",e);default:return null}})),We=function(t){return!0===Array.isArray($t)&&$t.indexOf(t)>-1};switch(r){case"pt":bt=1;break;case"mm":bt=72/25.4;break;case"cm":bt=72/2.54;break;case"in":bt=72;break;case"px":bt=1==We("px_scaling")?.75:96/72;break;case"pc":case"em":bt=12;break;case"ex":bt=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);bt=r}var Ve=null;F(),D();var Ye=function(t){return null!==u?Ve.encryptor(t,0):function(t){return t}},Je=f.__private__.getPageInfo=f.getPageInfo=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Bt[t].objId,pageNumber:t,pageContext:Bt[t]}},Xe=f.__private__.getPageInfoByObjId=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var e in Bt)if(Bt[e].objId===t)break;return Je(e)},Ke=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Bt[z].objId,pageNumber:z,pageContext:Bt[z]}};f.addPage=function(){return Ie.apply(this,arguments),this},f.setPage=function(){return De.apply(this,arguments),Z.call(this,Y[z]),this},f.insertPage=function(t){return this.addPage(),this.movePage(z,t),this},f.movePage=function(t,e){var n,i;if(t>e){n=Y[t],i=Bt[t];for(var r=t;r>e;r--)Y[r]=Y[r-1],Bt[r]=Bt[r-1];Y[e]=n,Bt[e]=i,this.setPage(e)}else if(t<e){n=Y[t],i=Bt[t];for(var o=t;o<e;o++)Y[o]=Y[o+1],Bt[o]=Bt[o+1];Y[e]=n,Bt[e]=i,this.setPage(e)}return this},f.deletePage=function(){return Oe.apply(this,arguments),this},f.__private__.text=f.text=function(t,e,n,r,o){var s,a,l,c,h,u,d,f,m,g=(r=r||{}).scope||this;if("number"==typeof t&&"number"==typeof e&&("string"==typeof n||Array.isArray(n))){var v=n;n=e,e=t,t=v}if(arguments[3]instanceof Ht==0?(l=arguments[4],c=arguments[5],"object"===i(d=arguments[3])&&null!==d||("string"==typeof l&&(c=l,l=null),"string"==typeof d&&(c=d,d=null),"number"==typeof d&&(l=d,d=null),r={flags:d,angle:l,align:c})):(E("The transform parameter of text() with a Matrix value"),m=o),isNaN(e)||isNaN(n)||null==t)throw new Error("Invalid arguments passed to jsPDF.text");if(0===t.length)return g;var y="",x=!1,S="number"==typeof r.lineHeightFactor?r.lineHeightFactor:dn,k=g.internal.scaleFactor;function L(t){return t=t.split("\t").join(Array(r.TabLen||9).join(" ")),Pe(t,d)}function C(t){for(var e,n=t.concat(),i=[],r=n.length;r--;)"string"==typeof(e=n.shift())?i.push(e):Array.isArray(t)&&(1===e.length||void 0===e[1]&&void 0===e[2])?i.push(e[0]):i.push([e[0],e[1],e[2]]);return i}function A(t,e){var n;if("string"==typeof t)n=e(t)[0];else if(Array.isArray(t)){for(var i,r,o=t.concat(),s=[],a=o.length;a--;)"string"==typeof(i=o.shift())?s.push(e(i)[0]):Array.isArray(i)&&"string"==typeof i[0]&&(r=e(i[0],i[1],i[2]),s.push([r[0],r[1],r[2]]));n=s}return n}var N=!1,P=!0;if("string"==typeof t)N=!0;else if(Array.isArray(t)){var T=t.concat();a=[];for(var I,O=T.length;O--;)("string"!=typeof(I=T.shift())||Array.isArray(I)&&"string"!=typeof I[0])&&(P=!1);N=P}if(!1===N)throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');"string"==typeof t&&(t=t.match(/[\r?\n]/)?t.split(/\r\n|\r|\n/g):[t]);var D=ot/g.internal.scaleFactor,j=D*(S-1);switch(r.baseline){case"bottom":n-=j;break;case"top":n+=D-j;break;case"hanging":n+=D-2*j;break;case"middle":n+=D/2-j}if((u=r.maxWidth||0)>0&&("string"==typeof t?t=g.splitTextToSize(t,u):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(g.splitTextToSize(e,u))}),[]))),s={text:t,x:e,y:n,options:r,mutex:{pdfEscape:Pe,activeFontKey:yt,fonts:kt,activeFontSize:ot}},zt.publish("preProcessText",s),t=s.text,l=(r=s.options).angle,m instanceof Ht==0&&l&&"number"==typeof l){l*=Math.PI/180,0===r.rotationDirection&&(l=-l),w===b.ADVANCED&&(l=-l);var R=Math.cos(l),F=Math.sin(l);m=new Ht(R,F,-F,R,0,0)}else l&&l instanceof Ht&&(m=l);w!==b.ADVANCED||m||(m=Vt),void 0!==(h=r.charSpace||Cn)&&(y+=_(M(h))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(f=r.horizontalScale)&&(y+=_(100*f)+" Tz\n"),r.lang;var B=-1,z=void 0!==r.renderingMode?r.renderingMode:r.stroke,$=g.internal.getCurrentPageInfo().pageContext;switch(z){case 0:case!1:case"fill":B=0;break;case 1:case!0:case"stroke":B=1;break;case 2:case"fillThenStroke":B=2;break;case 3:case"invisible":B=3;break;case 4:case"fillAndAddForClipping":B=4;break;case 5:case"strokeAndAddPathForClipping":B=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":B=6;break;case 7:case"addToPathForClipping":B=7}var q=void 0!==$.usedRenderingMode?$.usedRenderingMode:-1;-1!==B?y+=B+" Tr\n":-1!==q&&(y+="0 Tr\n"),-1!==B&&($.usedRenderingMode=B),c=r.align||"left";var U,G=ot*S,H=g.internal.pageSize.getWidth(),W=kt[yt];h=r.charSpace||Cn,u=r.maxWidth||0,d=Object.assign({autoencode:!0,noBOM:!0},r.flags);var V=[],Y=function(t){return g.getStringUnitWidth(t,{font:W,charSpace:h,fontSize:ot,doKerning:!1})*ot/k};if("[object Array]"===Object.prototype.toString.call(t)){var J;a=C(t),"left"!==c&&(U=a.map(Y));var X,K=0;if("right"===c){e-=U[0],t=[],O=a.length;for(var Z=0;Z<O;Z++)0===Z?(X=bn(e),J=wn(n)):(X=M(K-U[Z]),J=-G),t.push([a[Z],X,J]),K=U[Z]}else if("center"===c){e-=U[0]/2,t=[],O=a.length;for(var tt=0;tt<O;tt++)0===tt?(X=bn(e),J=wn(n)):(X=M((K-U[tt])/2),J=-G),t.push([a[tt],X,J]),K=U[tt]}else if("left"===c){t=[],O=a.length;for(var et=0;et<O;et++)t.push(a[et])}else if("justify"===c&&"Identity-H"===W.encoding){t=[],O=a.length,u=0!==u?u:H;for(var nt=0,it=0;it<O;it++)if(J=0===it?wn(n):-G,X=0===it?bn(e):nt,it<O-1){var rt=M((u-U[it])/(a[it].split(" ").length-1)),st=a[it].split(" ");t.push([st[0]+" ",X,J]),nt=0;for(var at=1;at<st.length;at++){var lt=(Y(st[at-1]+" "+st[at])-Y(st[at]))*k+rt;at==st.length-1?t.push([st[at],lt,0]):t.push([st[at]+" ",lt,0]),nt-=lt}}else t.push([a[it],X,J]);t.push(["",nt,0])}else{if("justify"!==c)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(t=[],O=a.length,u=0!==u?u:H,it=0;it<O;it++)J=0===it?wn(n):-G,X=0===it?bn(e):0,it<O-1?V.push(_(M((u-U[it])/(a[it].split(" ").length-1)))):V.push(0),t.push([a[it],X,J])}}var ct="boolean"==typeof r.R2L?r.R2L:ut;!0===ct&&(t=A(t,(function(t,e,n){return[t.split("").reverse().join(""),e,n]}))),s={text:t,x:e,y:n,options:r,mutex:{pdfEscape:Pe,activeFontKey:yt,fonts:kt,activeFontSize:ot}},zt.publish("postProcessText",s),t=s.text,x=s.mutex.isHex||!1;var ht=kt[yt].encoding;"WinAnsiEncoding"!==ht&&"StandardEncoding"!==ht||(t=A(t,(function(t,e,n){return[L(t),e,n]}))),a=C(t),t=[];for(var dt,pt,ft,mt=0,gt=1,vt=Array.isArray(a[0])?gt:mt,bt="",wt=function(t,e,n){var i="";return n instanceof Ht?(n="number"==typeof r.angle?Wt(n,new Ht(1,0,0,1,t,e)):Wt(new Ht(1,0,0,1,t,e),n),w===b.ADVANCED&&(n=Wt(new Ht(1,0,0,-1,0,0),n)),i=n.join(" ")+" Tm\n"):i=_(t)+" "+_(e)+" Td\n",i},xt=0;xt<a.length;xt++){switch(bt="",vt){case gt:ft=(x?"<":"(")+a[xt][0]+(x?">":")"),dt=parseFloat(a[xt][1]),pt=parseFloat(a[xt][2]);break;case mt:ft=(x?"<":"(")+a[xt]+(x?">":")"),dt=bn(e),pt=wn(n)}void 0!==V&&void 0!==V[xt]&&(bt=V[xt]+" Tw\n"),0===xt?t.push(bt+wt(dt,pt,m)+ft):vt===mt?t.push(bt+ft):vt===gt&&t.push(bt+wt(dt,pt,m)+ft)}t=vt===mt?t.join(" Tj\nT* "):t.join(" Tj\n"),t+=" Tj\n";var St="BT\n/";return St+=yt+" "+ot+" Tf\n",St+=_(ot*S)+" TL\n",St+=En+"\n",St+=y,St+=t,Q(St+="ET"),p[yt]=!0,g};var Ze=f.__private__.clip=f.clip=function(t){return Q("evenodd"===t?"W*":"W"),this};f.clipEvenOdd=function(){return Ze("evenodd")},f.__private__.discardPath=f.discardPath=function(){return Q("n"),this};var Qe=f.__private__.isValidStyle=function(t){var e=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(t)&&(e=!0),e};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(t){return Qe(t)&&(h=t),this};var tn=f.__private__.getStyle=f.getStyle=function(t){var e=h;switch(t){case"D":case"S":e="S";break;case"F":e="f";break;case"FD":case"DF":e="B";break;case"f":case"f*":case"B":case"B*":e=t}return e},en=f.close=function(){return Q("h"),this};f.stroke=function(){return Q("S"),this},f.fill=function(t){return nn("f",t),this},f.fillEvenOdd=function(t){return nn("f*",t),this},f.fillStroke=function(t){return nn("B",t),this},f.fillStrokeEvenOdd=function(t){return nn("B*",t),this};var nn=function(t,e){"object"===i(e)?sn(e,t):Q(t)},rn=function(t){null===t||w===b.ADVANCED&&void 0===t||(t=tn(t),Q(t))};function on(t,e,n,i,r){var o=new Tt(e||this.boundingBox,n||this.xStep,i||this.yStep,this.gState,r||this.matrix);o.stream=this.stream;var s=t+"$$"+this.cloneIndex+++"$$";return Yt(s,o),o}var sn=function(t,e){var n=Ot[t.key],i=Nt[n];if(i instanceof Pt)Q("q"),Q(an(e)),i.gState&&f.setGState(i.gState),Q(t.matrix.toString()+" cm"),Q("/"+n+" sh"),Q("Q");else if(i instanceof Tt){var r=new Ht(1,0,0,-1,0,zn());t.matrix&&(r=r.multiply(t.matrix||Vt),n=on.call(i,t.key,t.boundingBox,t.xStep,t.yStep,r).id),Q("q"),Q("/Pattern cs"),Q("/"+n+" scn"),i.gState&&f.setGState(i.gState),Q(e),Q("Q")}},an=function(t){switch(t){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ln=f.moveTo=function(t,e){return Q(_(M(t))+" "+_(P(e))+" m"),this},cn=f.lineTo=function(t,e){return Q(_(M(t))+" "+_(P(e))+" l"),this},hn=f.curveTo=function(t,e,n,i,r,o){return Q([_(M(t)),_(P(e)),_(M(n)),_(P(i)),_(M(r)),_(P(o)),"c"].join(" ")),this};f.__private__.line=f.line=function(t,e,n,i,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||!Qe(r))throw new Error("Invalid arguments passed to jsPDF.line");return w===b.COMPAT?this.lines([[n-t,i-e]],t,e,[1,1],r||"S"):this.lines([[n-t,i-e]],t,e,[1,1]).stroke()},f.__private__.lines=f.lines=function(t,e,n,i,r,o){var s,a,l,c,h,u,d,p,f,m,g,v;if("number"==typeof t&&(v=n,n=e,e=t,t=v),i=i||[1,1],o=o||!1,isNaN(e)||isNaN(n)||!Array.isArray(t)||!Array.isArray(i)||!Qe(r)||"boolean"!=typeof o)throw new Error("Invalid arguments passed to jsPDF.lines");for(ln(e,n),s=i[0],a=i[1],c=t.length,m=e,g=n,l=0;l<c;l++)2===(h=t[l]).length?(m=h[0]*s+m,g=h[1]*a+g,cn(m,g)):(u=h[0]*s+m,d=h[1]*a+g,p=h[2]*s+m,f=h[3]*a+g,m=h[4]*s+m,g=h[5]*a+g,hn(u,d,p,f,m,g));return o&&en(),rn(r),this},f.path=function(t){for(var e=0;e<t.length;e++){var n=t[e],i=n.c;switch(n.op){case"m":ln(i[0],i[1]);break;case"l":cn(i[0],i[1]);break;case"c":hn.apply(this,i);break;case"h":en()}}return this},f.__private__.rect=f.rect=function(t,e,n,i,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||!Qe(r))throw new Error("Invalid arguments passed to jsPDF.rect");return w===b.COMPAT&&(i=-i),Q([_(M(t)),_(P(e)),_(M(n)),_(M(i)),"re"].join(" ")),rn(r),this},f.__private__.triangle=f.triangle=function(t,e,n,i,r,o,s){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(o)||!Qe(s))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-t,i-e],[r-n,o-i],[t-r,e-o]],t,e,[1,1],s,!0),this},f.__private__.roundedRect=f.roundedRect=function(t,e,n,i,r,o,s){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(o)||!Qe(s))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var a=4/3*(Math.SQRT2-1);return r=Math.min(r,.5*n),o=Math.min(o,.5*i),this.lines([[n-2*r,0],[r*a,0,r,o-o*a,r,o],[0,i-2*o],[0,o*a,-r*a,o,-r,o],[2*r-n,0],[-r*a,0,-r,-o*a,-r,-o],[0,2*o-i],[0,-o*a,r*a,-o,r,-o]],t+r,e,[1,1],s,!0),this},f.__private__.ellipse=f.ellipse=function(t,e,n,i,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||!Qe(r))throw new Error("Invalid arguments passed to jsPDF.ellipse");var o=4/3*(Math.SQRT2-1)*n,s=4/3*(Math.SQRT2-1)*i;return ln(t+n,e),hn(t+n,e-s,t+o,e-i,t,e-i),hn(t-o,e-i,t-n,e-s,t-n,e),hn(t-n,e+s,t-o,e+i,t,e+i),hn(t+o,e+i,t+n,e+s,t+n,e),rn(r),this},f.__private__.circle=f.circle=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||!Qe(i))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(t,e,n,n,i)},f.setFont=function(t,e,n){return n&&(e=k(e,n)),yt=Re(t,e,{disableWarning:!1}),this};var un=f.__private__.getFont=f.getFont=function(){return kt[Re.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var t,e,n={};for(t in _t)if(_t.hasOwnProperty(t))for(e in n[t]=[],_t[t])_t[t].hasOwnProperty(e)&&n[t].push(e);return n},f.addFont=function(t,e,n,i,r){var o=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==o.indexOf(arguments[3])?r=arguments[3]:arguments[3]&&-1==o.indexOf(arguments[3])&&(n=k(n,i)),r=r||"Identity-H",Ce.call(this,t,e,n,r)};var dn,pn=t.lineWidth||.200025,fn=f.__private__.getLineWidth=f.getLineWidth=function(){return pn},mn=f.__private__.setLineWidth=f.setLineWidth=function(t){return pn=t,Q(_(M(t))+" w"),this};f.__private__.setLineDash=It.API.setLineDash=It.API.setLineDashPattern=function(t,e){if(t=t||[],e=e||0,isNaN(e)||!Array.isArray(t))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return t=t.map((function(t){return _(M(t))})).join(" "),e=_(M(e)),Q("["+t+"] "+e+" d"),this};var gn=f.__private__.getLineHeight=f.getLineHeight=function(){return ot*dn};f.__private__.getLineHeight=f.getLineHeight=function(){return ot*dn};var vn=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(t){return"number"==typeof(t=t||1.15)&&(dn=t),this},yn=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return dn};vn(t.lineHeight);var bn=f.__private__.getHorizontalCoordinate=function(t){return M(t)},wn=f.__private__.getVerticalCoordinate=function(t){return w===b.ADVANCED?t:Bt[z].mediaBox.topRightY-Bt[z].mediaBox.bottomLeftY-M(t)},xn=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(t){return _(bn(t))},Sn=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(t){return _(wn(t))},kn=t.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return ee(kn)},f.__private__.setStrokeColor=f.setDrawColor=function(t,e,n,i){return kn=ne({ch1:t,ch2:e,ch3:n,ch4:i,pdfColorType:"draw",precision:2}),Q(kn),this};var _n=t.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return ee(_n)},f.__private__.setFillColor=f.setFillColor=function(t,e,n,i){return _n=ne({ch1:t,ch2:e,ch3:n,ch4:i,pdfColorType:"fill",precision:2}),Q(_n),this};var En=t.textColor||"0 g",Ln=f.__private__.getTextColor=f.getTextColor=function(){return ee(En)};f.__private__.setTextColor=f.setTextColor=function(t,e,n,i){return En=ne({ch1:t,ch2:e,ch3:n,ch4:i,pdfColorType:"text",precision:3}),this};var Cn=t.charSpace,An=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Cn||0)};f.__private__.setCharSpace=f.setCharSpace=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Cn=t,this};var Mn=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(t){var e=f.CapJoinStyles[t];if(void 0===e)throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Mn=e,Q(e+" J"),this};var Nn=0;f.__private__.setLineJoin=f.setLineJoin=function(t){var e=f.CapJoinStyles[t];if(void 0===e)throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nn=e,Q(e+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(t){if(t=t||0,isNaN(t))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(_(M(t))+" M"),this},f.GState=Mt,f.setGState=function(t){(t="string"==typeof t?Dt[jt[t]]:Pn(null,t)).equals(Rt)||(Q("/"+t.id+" gs"),Rt=t)};var Pn=function(t,e){if(!t||!jt[t]){var n=!1;for(var i in Dt)if(Dt.hasOwnProperty(i)&&Dt[i].equals(e)){n=!0;break}if(n)e=Dt[i];else{var r="GS"+(Object.keys(Dt).length+1).toString(10);Dt[r]=e,e.id=r}return t&&(jt[t]=e.id),zt.publish("addGState",e),e}};f.addGState=function(t,e){return Pn(t,e),this},f.saveGraphicsState=function(){return Q("q"),Et.push({key:yt,size:ot,color:En}),this},f.restoreGraphicsState=function(){Q("Q");var t=Et.pop();return yt=t.key,ot=t.size,En=t.color,Rt=null,this},f.setCurrentTransformationMatrix=function(t){return Q(t.toString()+" cm"),this},f.comment=function(t){return Q("#"+t),this};var Tn=function(t,e){var n=t||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(t){isNaN(t)||(n=parseFloat(t))}});var i=e||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return i},set:function(t){isNaN(t)||(i=parseFloat(t))}});var r="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return r},set:function(t){r=t.toString()}}),this},In=function(t,e,n,i){Tn.call(this,t,e),this.type="rect";var r=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return r},set:function(t){isNaN(t)||(r=parseFloat(t))}});var o=i||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return o},set:function(t){isNaN(t)||(o=parseFloat(t))}}),this},On=function(){this.page=Ft,this.currentPage=z,this.pages=Y.slice(0),this.pagesContext=Bt.slice(0),this.x=wt,this.y=xt,this.matrix=St,this.width=Fn(z),this.height=zn(z),this.outputDestination=X,this.id="",this.objectNumber=-1};On.prototype.restore=function(){Ft=this.page,z=this.currentPage,Bt=this.pagesContext,Y=this.pages,wt=this.x,xt=this.y,St=this.matrix,Bn(z,this.width),$n(z,this.height),X=this.outputDestination};var Dn=function(t,e,n,i,r){Gt.push(new On),Ft=z=0,Y=[],wt=t,xt=e,St=r,Te([n,i])},jn=function(t){if(Ut[t])Gt.pop().restore();else{var e=new On,n="Xo"+(Object.keys(qt).length+1).toString(10);e.id=n,Ut[t]=n,qt[n]=e,zt.publish("addFormObject",e),Gt.pop().restore()}};for(var Rn in f.beginFormObject=function(t,e,n,i,r){return Dn(t,e,n,i,r),this},f.endFormObject=function(t){return jn(t),this},f.doFormObject=function(t,e){var n=qt[Ut[t]];return Q("q"),Q(e.toString()+" cm"),Q("/"+n.id+" Do"),Q("Q"),this},f.getFormObject=function(t){var e=qt[Ut[t]];return{x:e.x,y:e.y,width:e.width,height:e.height,matrix:e.matrix}},f.save=function(t,e){return t=t||"generated.pdf",(e=e||{}).returnPromise=e.returnPromise||!1,!1===e.returnPromise?(lt(Ge(Ue()),t),"function"==typeof lt.unload&&tt.setTimeout&&setTimeout(lt.unload,911),this):new Promise((function(e,n){try{var i=lt(Ge(Ue()),t);"function"==typeof lt.unload&&tt.setTimeout&&setTimeout(lt.unload,911),e(i)}catch(t){n(t.message)}}))},It.API)It.API.hasOwnProperty(Rn)&&("events"===Rn&&It.API.events.length?function(t,e){var n,i,r;for(r=e.length-1;-1!==r;r--)n=e[r][0],i=e[r][1],t.subscribe.apply(t,[n].concat("function"==typeof i?[i]:i))}(zt,It.API.events):f[Rn]=It.API[Rn]);var Fn=f.getPageWidth=function(t){return(Bt[t=t||z].mediaBox.topRightX-Bt[t].mediaBox.bottomLeftX)/bt},Bn=f.setPageWidth=function(t,e){Bt[t].mediaBox.topRightX=e*bt+Bt[t].mediaBox.bottomLeftX},zn=f.getPageHeight=function(t){return(Bt[t=t||z].mediaBox.topRightY-Bt[t].mediaBox.bottomLeftY)/bt},$n=f.setPageHeight=function(t,e){Bt[t].mediaBox.topRightY=e*bt+Bt[t].mediaBox.bottomLeftY};return f.internal={pdfEscape:Pe,getStyle:tn,getFont:un,getFontSize:ht,getCharSpace:An,getTextColor:Ln,getLineHeight:gn,getLineHeightFactor:yn,getLineWidth:fn,write:et,getHorizontalCoordinate:bn,getVerticalCoordinate:wn,getCoordinateString:xn,getVerticalCoordinateString:Sn,collections:{},newObject:Jt,newAdditionalObject:Zt,newObjectDeferred:Xt,newObjectDeferredBegin:Kt,getFilters:ie,putStream:re,events:zt,scaleFactor:bt,pageSize:{getWidth:function(){return Fn(z)},setWidth:function(t){Bn(z,t)},getHeight:function(){return zn(z)},setHeight:function(t){$n(z,t)}},encryptionOptions:u,encryption:Ve,getEncryptor:Ye,output:He,getNumberOfPages:je,pages:Y,out:Q,f2:C,f3:A,getPageInfo:Je,getPageInfoByObjId:Xe,getCurrentPageInfo:Ke,getPDFVersion:g,Point:Tn,Rectangle:In,Matrix:Ht,hasHotfix:We},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return Fn(z)},set:function(t){Bn(z,t)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return zn(z)},set:function(t){$n(z,t)},enumerable:!0,configurable:!0}),Ae.call(f,rt),yt="F1",Ie(o,n),zt.publish("initialized"),f}Lt.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},Lt.prototype.toHexString=function(t){return t.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Lt.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},Lt.prototype.processOwnerPassword=function(t,e){return _t(xt(e).substr(0,5),t)},Lt.prototype.encryptor=function(t,e){var n=xt(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(t){return _t(n,t)}},Mt.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||i(t)!==i(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e))return!1;if(this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return 0===r},It.API={events:[]},It.version="2.5.2";var Ot=It.API,Dt=1,jt=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Rt=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ft=function(t){return t.toFixed(2)},Bt=function(t){return t.toFixed(5)};Ot.__acroform__={};var zt=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},$t=function(t){return t*Dt},qt=function(t){var e=new se,n=we.internal.getHeight(t)||0,i=we.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Ft(i)),Number(Ft(n))],e},Ut=Ot.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},Gt=Ot.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},Ht=Ot.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(t&1<<e)?0:1},Wt=Ot.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Ht(t,e-1)},Vt=Ot.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Ut(t,e-1)},Yt=Ot.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Gt(t,e-1)},Jt=Ot.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,r=t[0],o=t[1],s=t[2],a=t[3],l={};return l.lowerLeft_X=n(r)||0,l.lowerLeft_Y=i(o+a)||0,l.upperRight_X=n(r+s)||0,l.upperRight_Y=i(o)||0,[Number(Ft(l.lowerLeft_X)),Number(Ft(l.lowerLeft_Y)),Number(Ft(l.upperRight_X)),Number(Ft(l.upperRight_Y))]},Xt=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,i=Kt(t,n),r=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+r+" "+Ft(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=qt(t);return o.scope=t.scope,o.stream=e.join("\n"),o}},Kt=function(t,e){var n=0===t.fontSize?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},r=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" ");r=t.multiline?r.map((function(t){return t.split("\n")})):r.map((function(t){return[t]}));var o=n,s=we.internal.getHeight(t)||0;s=s<0?-s:s;var a=we.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(e,n,i){if(e+1<r.length){var o=n+" "+r[e+1][0];return Zt(o,t,i).width<=a-4}return!1};o++;t:for(;o>0;){e="",o--;var c,h,u=Zt("3",t,o).height,d=t.multiline?s-o:(s-u)/2,p=d+=2,f=0,m=0,g=0;if(o<=0){e="(...) Tj\n",e+="% Width of Text: "+Zt(e,t,o=12).width+", FieldWidth:"+a+"\n";break}for(var v="",y=0,b=0;b<r.length;b++)if(r.hasOwnProperty(b)){var w=!1;if(1!==r[b].length&&g!==r[b].length-1){if((u+2)*(y+2)+2>s)continue t;v+=r[b][g],w=!0,m=b,b--}else{v=" "==(v+=r[b][g]+" ").substr(v.length-1)?v.substr(0,v.length-1):v;var x=parseInt(b),S=l(x,v,o),k=b>=r.length-1;if(S&&!k){v+=" ",g=0;continue}if(S||k){if(k)m=x;else if(t.multiline&&(u+2)*(y+2)+2>s)continue t}else{if(!t.multiline)continue t;if((u+2)*(y+2)+2>s)continue t;m=x}}for(var _="",E=f;E<=m;E++){var L=r[E];if(t.multiline){if(E===m){_+=L[g]+" ",g=(g+1)%L.length;continue}if(E===f){_+=L[L.length-1]+" ";continue}}_+=L[0]+" "}switch(_=" "==_.substr(_.length-1)?_.substr(0,_.length-1):_,h=Zt(_,t,o).width,t.textAlign){case"right":c=a-h-2;break;case"center":c=(a-h)/2;break;case"left":default:c=2}e+=Ft(c)+" "+Ft(p)+" Td\n",e+="("+jt(_)+") Tj\n",e+=-Ft(c)+" 0 Td\n",p=-(o+2),h=0,f=w?m:m+1,y++,v=""}break}return i.text=e,i.fontSize=o,i},Zt=function(t,e,n){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:r}},Qt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},te=function(t,e){var n={type:"reference",object:t};void 0===e.internal.getPageInfo(t.page).pageContext.annotations.find((function(t){return t.type===n.type&&t.object===n.object}))&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},ee=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,o=t[n];e.internal.newObjectDeferredBegin(o.objId,!0),"object"===i(o)&&"function"==typeof o.putStream&&o.putStream(),delete t[r]}},ne=function(t,e){if(e.scope=t,void 0!==t.internal&&(void 0===t.internal.acroformPlugin||!1===t.internal.acroformPlugin.isInitialized)){if(le.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Qt)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Dt=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new ae,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){!function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}(t)})),t.internal.events.subscribe("buildDocument",(function(){!function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var e=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];i.objId=void 0,i.hasAnnotation&&te(i,t)}}(t)})),t.internal.events.subscribe("putCatalog",(function(){!function(t){if(void 0===t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(t)})),t.internal.events.subscribe("postPutPages",(function(e){!function(t,e){var n=!t;for(var r in t||(e.internal.newObjectDeferredBegin(e.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),e.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),t=t||e.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(t.hasOwnProperty(r)){var o=t[r],s=[],a=o.Rect;if(o.Rect&&(o.Rect=Jt(o.Rect,e)),e.internal.newObjectDeferredBegin(o.objId,!0),o.DA=we.createDefaultAppearanceStream(o),"object"===i(o)&&"function"==typeof o.getKeyValueListForStream&&(s=o.getKeyValueListForStream()),o.Rect=a,o.hasAppearanceStream&&!o.appearanceStreamContent){var l=Xt(o);s.push({key:"AP",value:"<</N "+l+">>"}),e.internal.acroformPlugin.xForms.push(l)}if(o.appearanceStreamContent){var c="";for(var h in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(h)){var u=o.appearanceStreamContent[h];if(c+="/"+h+" ",c+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var r in u)if(u.hasOwnProperty(r)){var d=u[r];"function"==typeof d&&(d=d.call(e,o)),c+="/"+r+" "+d+" ",e.internal.acroformPlugin.xForms.indexOf(d)>=0||e.internal.acroformPlugin.xForms.push(d)}}else"function"==typeof(d=u)&&(d=d.call(e,o)),c+="/"+r+" "+d,e.internal.acroformPlugin.xForms.indexOf(d)>=0||e.internal.acroformPlugin.xForms.push(d);c+=">>"}s.push({key:"AP",value:"<<\n"+c+">>"})}e.internal.putStream({additionalKeyValues:s,objectId:o.objId}),e.internal.out("endobj")}n&&ee(e.internal.acroformPlugin.xForms,e)}(e,t)})),t.internal.acroformPlugin.isInitialized=!0}},ie=Ot.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(t){return t};if(Array.isArray(t)){for(var o="[",s=0;s<t.length;s++)switch(0!==s&&(o+=" "),i(t[s])){case"boolean":case"number":case"object":o+=t[s].toString();break;case"string":"/"!==t[s].substr(0,1)?(void 0!==e&&n&&(r=n.internal.getEncryptor(e)),o+="("+jt(r(t[s].toString()))+")"):o+=t[s].toString()}return o+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},re=function(t,e,n){var i=function(t){return t};return void 0!==e&&n&&(i=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+jt(i(t))+")"},oe=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};oe.prototype.toString=function(){return this.objId+" 0 R"},oe.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},oe.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(t){return"content"!=t&&"appearanceStreamContent"!=t&&"scope"!=t&&"objId"!=t&&"_"!=t.substring(0,1)}));for(var n in e)if(!1===Object.getOwnPropertyDescriptor(this,e[n]).configurable){var i=e[n],r=this[i];r&&(Array.isArray(r)?t.push({key:i,value:ie(r,this.objId,this.scope)}):r instanceof oe?(r.scope=this.scope,t.push({key:i,value:r.objId+" 0 R"})):"function"!=typeof r&&t.push({key:i,value:r}))}return t};var se=function(){oe.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){t=e.trim()},get:function(){return t||null}})};zt(se,oe);var ae=function(){oe.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+jt(e(t))+")"}},set:function(e){t=e}})};zt(ae,oe);var le=function t(){oe.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute F supplied.');e=t}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(e,3))},set:function(t){!0===Boolean(t)?this.F=Vt(e,3):this.F=Yt(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute Ff supplied.');n=t}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==i.length)return i},set:function(t){i=void 0!==t?t:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(t){i[0]=t}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(t){i[1]=t}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(t){i[2]=t}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(t){i[3]=t}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){switch(t){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=t;break;default:throw new Error('Invalid value "'+t+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof ge)return;o="FieldObject"+t.FieldNum++}var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+jt(e(o))+")"},set:function(t){o=t.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(t){o=t}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){s=t}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(t){a=t}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(t){l=t}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/Dt:c},set:function(t){c=t}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(t){h=t}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof ge||this instanceof ye))return re(u,this.objId,this.scope)},set:function(t){t=t.toString(),u=t}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof pe==0?re(d,this.objId,this.scope):d},set:function(t){t=t.toString(),d=this instanceof pe==0?"("===t.substr(0,1)?Rt(t.substr(1,t.length-2)):Rt(t):t}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof pe==1?Rt(d.substr(1,d.length-1)):d},set:function(t){t=t.toString(),d=this instanceof pe==1?"/"+t:t}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(t){this.V=t}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof pe==0?re(p,this.objId,this.scope):p},set:function(t){t=t.toString(),p=this instanceof pe==0?"("===t.substr(0,1)?Rt(t.substr(1,t.length-2)):Rt(t):t}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof pe==1?Rt(p.substr(1,p.length-1)):p},set:function(t){t=t.toString(),p=this instanceof pe==1?"/"+t:t}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var f,m=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return m},set:function(t){t=Boolean(t),m=t}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(f)return f},set:function(t){f=t}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,1))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,1):this.Ff=Yt(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,2))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,2):this.Ff=Yt(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,3))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,3):this.Ff=Yt(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(t){if(-1===[0,1,2].indexOf(t))throw new Error('Invalid value "'+t+'" for attribute Q supplied.');g=t}}),Object.defineProperty(this,"textAlign",{get:function(){var t;switch(g){case 0:default:t="left";break;case 1:t="center";break;case 2:t="right"}return t},configurable:!0,enumerable:!0,set:function(t){switch(t){case"right":case 2:g=2;break;case"center":case 1:g=1;break;case"left":case 0:default:g=0}}})};zt(le,oe);var ce=function(){le.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){t=e}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ie(e,this.objId,this.scope)},set:function(t){var n,i;i=[],"string"==typeof(n=t)&&(i=function(t,e,n){n||(n=1);for(var i,r=[];i=e.exec(t);)r.push(i[n]);return r}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();-1!==e.indexOf(t)&&(e.splice(e.indexOf(t),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,18))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,18):this.Ff=Yt(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,19))},set:function(t){!0===this.combo&&(!0===Boolean(t)?this.Ff=Vt(this.Ff,19):this.Ff=Yt(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,20))},set:function(t){!0===Boolean(t)?(this.Ff=Vt(this.Ff,20),e.sort()):this.Ff=Yt(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,22))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,22):this.Ff=Yt(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,23):this.Ff=Yt(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,27))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,27):this.Ff=Yt(this.Ff,27)}}),this.hasAppearanceStream=!1};zt(ce,le);var he=function(){ce.call(this),this.fontName="helvetica",this.combo=!1};zt(he,ce);var ue=function(){he.call(this),this.combo=!0};zt(ue,he);var de=function(){ue.call(this),this.edit=!0};zt(de,ue);var pe=function(){le.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,15))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,15):this.Ff=Yt(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,16))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,16):this.Ff=Yt(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,17))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,17):this.Ff=Yt(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,26):this.Ff=Yt(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(e).length){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+jt(t(e[n]))+")");return i.push(">>"),i.join("\n")}},set:function(t){"object"===i(t)&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){"string"==typeof t&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(e){t="/"+e}})};zt(pe,le);var fe=function(){pe.call(this),this.pushButton=!0};zt(fe,pe);var me=function(){pe.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=void 0!==e?e:[]}})};zt(me,pe);var ge=function(){var t,e;le.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(t){e=t}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};this.scope&&(t=this.scope.internal.getEncryptor(this.objId));var e,n=[];for(e in n.push("<<"),r)n.push("/"+e+" ("+jt(t(r[e]))+")");return n.push(">>"),n.join("\n")},set:function(t){"object"===i(t)&&(r=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(t){"string"==typeof t&&(r.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=we.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};zt(ge,le),me.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},me.prototype.createOption=function(t){var e=new ge;return e.Parent=this,e.optionName=t,this.Kids.push(e),xe.call(this.scope,e),e};var ve=function(){pe.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=we.CheckBox.createAppearanceStream()};zt(ve,pe);var ye=function(){le.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,13))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,13):this.Ff=Yt(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,21))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,21):this.Ff=Yt(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,23):this.Ff=Yt(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,24))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,24):this.Ff=Yt(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,25))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,25):this.Ff=Yt(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,26):this.Ff=Yt(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};zt(ye,le);var be=function(){ye.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wt(this.Ff,14))},set:function(t){!0===Boolean(t)?this.Ff=Vt(this.Ff,14):this.Ff=Yt(this.Ff,14)}}),this.password=!0};zt(be,ye);var we={CheckBox:{createAppearanceStream:function(){return{N:{On:we.CheckBox.YesNormal},D:{On:we.CheckBox.YesPushDown,Off:we.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=qt(t);e.scope=t.scope;var n=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),o=Kt(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Ft(we.internal.getWidth(t))+" "+Ft(we.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+Ft(o.fontSize)+" Tf "+r),n.push("BT"),n.push(o.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join("\n"),e},YesNormal:function(t){var e=qt(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),r=[],o=we.internal.getHeight(t),s=we.internal.getWidth(t),a=Kt(t,t.caption);return r.push("1 g"),r.push("0 0 "+Ft(s)+" "+Ft(o)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+Ft(s-1)+" "+Ft(o-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+n+" "+Ft(a.fontSize)+" Tf "+i),r.push(a.text),r.push("ET"),r.push("Q"),e.stream=r.join("\n"),e},OffPushDown:function(t){var e=qt(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ft(we.internal.getWidth(t))+" "+Ft(we.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:we.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=we.RadioButton.Circle.YesNormal,e.D[t]=we.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=qt(t);e.scope=t.scope;var n=[],i=we.internal.getWidth(t)<=we.internal.getHeight(t)?we.internal.getWidth(t)/4:we.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=we.internal.Bezier_C,o=Number((i*r).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Bt(we.internal.getWidth(t)/2)+" "+Bt(we.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=qt(t);e.scope=t.scope;var n=[],i=we.internal.getWidth(t)<=we.internal.getHeight(t)?we.internal.getWidth(t)/4:we.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),o=Number((r*we.internal.Bezier_C).toFixed(5)),s=Number((i*we.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Bt(we.internal.getWidth(t)/2)+" "+Bt(we.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Bt(we.internal.getWidth(t)/2)+" "+Bt(we.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},OffPushDown:function(t){var e=qt(t);e.scope=t.scope;var n=[],i=we.internal.getWidth(t)<=we.internal.getHeight(t)?we.internal.getWidth(t)/4:we.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),o=Number((r*we.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Bt(we.internal.getWidth(t)/2)+" "+Bt(we.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:we.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=we.RadioButton.Cross.YesNormal,e.D[t]=we.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=qt(t);e.scope=t.scope;var n=[],i=we.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Ft(we.internal.getWidth(t)-2)+" "+Ft(we.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Ft(i.x1.x)+" "+Ft(i.x1.y)+" m"),n.push(Ft(i.x2.x)+" "+Ft(i.x2.y)+" l"),n.push(Ft(i.x4.x)+" "+Ft(i.x4.y)+" m"),n.push(Ft(i.x3.x)+" "+Ft(i.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=qt(t);e.scope=t.scope;var n=we.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+Ft(we.internal.getWidth(t))+" "+Ft(we.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Ft(we.internal.getWidth(t)-2)+" "+Ft(we.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(Ft(n.x1.x)+" "+Ft(n.x1.y)+" m"),i.push(Ft(n.x2.x)+" "+Ft(n.x2.y)+" l"),i.push(Ft(n.x4.x)+" "+Ft(n.x4.y)+" m"),i.push(Ft(n.x3.x)+" "+Ft(n.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join("\n"),e},OffPushDown:function(t){var e=qt(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Ft(we.internal.getWidth(t))+" "+Ft(we.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};we.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=we.internal.getWidth(t),n=we.internal.getHeight(t),i=Math.min(e,n);return{x1:{x:(e-i)/2,y:(n-i)/2+i},x2:{x:(e-i)/2+i,y:(n-i)/2},x3:{x:(e-i)/2,y:(n-i)/2},x4:{x:(e-i)/2+i,y:(n-i)/2+i}}}},we.internal.getWidth=function(t){var e=0;return"object"===i(t)&&(e=$t(t.Rect[2])),e},we.internal.getHeight=function(t){var e=0;return"object"===i(t)&&(e=$t(t.Rect[3])),e};var xe=Ot.addField=function(t){if(ne(this,t),!(t instanceof le))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Ot.AcroFormChoiceField=ce,Ot.AcroFormListBox=he,Ot.AcroFormComboBox=ue,Ot.AcroFormEditBox=de,Ot.AcroFormButton=pe,Ot.AcroFormPushButton=fe,Ot.AcroFormRadioButton=me,Ot.AcroFormCheckBox=ve,Ot.AcroFormTextField=ye,Ot.AcroFormPasswordField=be,Ot.AcroFormAppearance=we,Ot.AcroForm={ChoiceField:ce,ListBox:he,ComboBox:ue,EditBox:de,Button:pe,PushButton:fe,RadioButton:me,CheckBox:ve,TextField:ye,PasswordField:be,Appearance:we},It.AcroForm={ChoiceField:ce,ListBox:he,ComboBox:ue,EditBox:de,Button:pe,PushButton:fe,RadioButton:me,CheckBox:ve,TextField:ye,PasswordField:be,Appearance:we};It.AcroForm;function Se(t){return t.reduce((function(t,e,n){return t[e]=n,t}),{})}!function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(t,i){var r,o,s,a,l,c=e;if("RGBA"===(i=i||e)||void 0!==t.data&&t.data instanceof Uint8ClampedArray&&"height"in t&&"width"in t)return"RGBA";if(k(t))for(l in n)for(s=n[l],r=0;r<s.length;r+=1){for(a=!0,o=0;o<s[r].length;o+=1)if(void 0!==s[r][o]&&s[r][o]!==t[o]){a=!1;break}if(!0===a){c=l;break}}else for(l in n)for(s=n[l],r=0;r<s.length;r+=1){for(a=!0,o=0;o<s[r].length;o+=1)if(void 0!==s[r][o]&&s[r][o]!==t.charCodeAt(o)){a=!1;break}if(!0===a){c=l;break}}return c===e&&i!==e&&(c=i),c},o=function t(e){for(var n=this.internal.write,i=this.internal.putStream,r=(0,this.internal.getFilters)();-1!==r.indexOf("FlateEncode");)r.splice(r.indexOf("FlateEncode"),1);e.objectId=this.internal.newObject();var o=[];if(o.push({key:"Type",value:"/XObject"}),o.push({key:"Subtype",value:"/Image"}),o.push({key:"Width",value:e.width}),o.push({key:"Height",value:e.height}),e.colorSpace===v.INDEXED?o.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(e.palette.length/3-1)+" "+("sMask"in e&&void 0!==e.sMask?e.objectId+2:e.objectId+1)+" 0 R]"}):(o.push({key:"ColorSpace",value:"/"+e.colorSpace}),e.colorSpace===v.DEVICE_CMYK&&o.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),o.push({key:"BitsPerComponent",value:e.bitsPerComponent}),"decodeParameters"in e&&void 0!==e.decodeParameters&&o.push({key:"DecodeParms",value:"<<"+e.decodeParameters+">>"}),"transparency"in e&&Array.isArray(e.transparency)){for(var s="",a=0,l=e.transparency.length;a<l;a++)s+=e.transparency[a]+" "+e.transparency[a]+" ";o.push({key:"Mask",value:"["+s+"]"})}void 0!==e.sMask&&o.push({key:"SMask",value:e.objectId+1+" 0 R"});var c=void 0!==e.filter?["/"+e.filter]:void 0;if(i({data:e.data,additionalKeyValues:o,alreadyAppliedFilters:c,objectId:e.objectId}),n("endobj"),"sMask"in e&&void 0!==e.sMask){var h="/Predictor "+e.predictor+" /Colors 1 /BitsPerComponent "+e.bitsPerComponent+" /Columns "+e.width,u={width:e.width,height:e.height,colorSpace:"DeviceGray",bitsPerComponent:e.bitsPerComponent,decodeParameters:h,data:e.sMask};"filter"in e&&(u.filter=e.filter),t.call(this,u)}if(e.colorSpace===v.INDEXED){var d=this.internal.newObject();i({data:E(new Uint8Array(e.palette)),objectId:d}),n("endobj")}},s=function(){var t=this.internal.collections.addImage_images;for(var e in t)o.call(this,t[e])},a=function(){var t,e=this.internal.collections.addImage_images,n=this.internal.write;for(var i in e)n("/I"+(t=e[i]).index,t.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var t=this.internal.collections.addImage_images;return l.call(this),t},h=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(e){return"function"==typeof t["process"+e.toUpperCase()]},d=function(t){return"object"===i(t)&&1===t.nodeType},p=function(e,n){if("IMG"===e.nodeName&&e.hasAttribute("src")){var i=""+e.getAttribute("src");if(0===i.indexOf("data:image/"))return st(unescape(i).split("base64,").pop());var r=t.loadFile(i,!0);if(void 0!==r)return r}if("CANVAS"===e.nodeName){if(0===e.width||0===e.height)throw new Error("Given canvas must have data. Canvas width: "+e.width+", height: "+e.height);var o;switch(n){case"PNG":o="image/png";break;case"WEBP":o="image/webp";break;case"JPEG":case"JPG":default:o="image/jpeg"}return st(e.toDataURL(o,1).split("base64,").pop())}},f=function(t){var e=this.internal.collections.addImage_images;if(e)for(var n in e)if(t===e[n].alias)return e[n]},m=function(t,e,n){return t||e||(t=-96,e=-96),t<0&&(t=-1*n.width*72/t/this.internal.scaleFactor),e<0&&(e=-1*n.height*72/e/this.internal.scaleFactor),0===t&&(t=e*n.width/n.height),0===e&&(e=t*n.height/n.width),[t,e]},g=function(t,e,n,i,r,o){var s=m.call(this,n,i,r),a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,h=c.call(this);if(n=s[0],i=s[1],h[r.index]=r,o){o*=Math.PI/180;var u=Math.cos(o),d=Math.sin(o),p=function(t){return t.toFixed(4)},f=[p(u),p(d),p(-1*d),p(u),0,0,"cm"]}this.internal.write("q"),o?(this.internal.write([1,"0","0",1,a(t),l(e+i),"cm"].join(" ")),this.internal.write(f.join(" ")),this.internal.write([a(n),"0","0",a(i),"0","0","cm"].join(" "))):this.internal.write([a(n),"0","0",a(i),a(t),l(e+i),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+r.index+" Do"),this.internal.write("Q")},v=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=t.__addimage__.sHashCode=function(t){var e,n,i=0;if("string"==typeof t)for(n=t.length,e=0;e<n;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;else if(k(t))for(n=t.byteLength/2,e=0;e<n;e++)i=(i<<5)-i+t[e],i|=0;return i},w=t.__addimage__.validateStringAsBase64=function(t){(t=t||"").toString().trim();var e=!0;return 0===t.length&&(e=!1),t.length%4!=0&&(e=!1),!1===/^[A-Za-z0-9+/]+$/.test(t.substr(0,t.length-2))&&(e=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(t.substr(-2))&&(e=!1),e},x=t.__addimage__.extractImageFromDataUrl=function(t){var e=(t=t||"").split("base64,"),n=null;if(2===e.length){var i=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(e[0]);Array.isArray(i)&&(n={mimeType:i[1],charset:i[2],data:e[1]})}return n},S=t.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};t.__addimage__.isArrayBuffer=function(t){return S()&&t instanceof ArrayBuffer};var k=t.__addimage__.isArrayBufferView=function(t){return S()&&"undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)},_=t.__addimage__.binaryStringToUint8Array=function(t){for(var e=t.length,n=new Uint8Array(e),i=0;i<e;i++)n[i]=t.charCodeAt(i);return n},E=t.__addimage__.arrayBufferToBinaryString=function(t){for(var e="",n=k(t)?t:new Uint8Array(t),i=0;i<n.length;i+=8192)e+=String.fromCharCode.apply(null,n.subarray(i,i+8192));return e};t.addImage=function(){var t,n,r,o,s,a,c,h,u;if("number"==typeof arguments[1]?(n=e,r=arguments[1],o=arguments[2],s=arguments[3],a=arguments[4],c=arguments[5],h=arguments[6],u=arguments[7]):(n=arguments[1],r=arguments[2],o=arguments[3],s=arguments[4],a=arguments[5],c=arguments[6],h=arguments[7],u=arguments[8]),"object"===i(t=arguments[0])&&!d(t)&&"imageData"in t){var p=t;t=p.imageData,n=p.format||n||e,r=p.x||r||0,o=p.y||o||0,s=p.w||p.width||s,a=p.h||p.height||a,c=p.alias||c,h=p.compression||h,u=p.rotation||p.angle||u}var f=this.internal.getFilters();if(void 0===h&&-1!==f.indexOf("FlateEncode")&&(h="SLOW"),isNaN(r)||isNaN(o))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var m=L.call(this,t,n,c,h);return g.call(this,r,o,s,a,m,u),this};var L=function(n,i,o,s){var a,l,c;if("string"==typeof n&&r(n)===e){n=unescape(n);var m=C(n,!1);(""!==m||void 0!==(m=t.loadFile(n,!0)))&&(n=m)}if(d(n)&&(n=p(n,i)),i=r(n,i),!u(i))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if((null==(c=o)||0===c.length)&&(o=function(t){return"string"==typeof t||k(t)?b(t):k(t.data)?b(t.data):null}(n)),(a=f.call(this,o))||(S()&&(n instanceof Uint8Array||"RGBA"===i||(l=n,n=_(n))),a=this["process"+i.toUpperCase()](n,h.call(this),o,function(e){return e&&"string"==typeof e&&(e=e.toUpperCase()),e in t.image_compression?e:y.NONE}(s),l)),!a)throw new Error("An unknown error occurred whilst processing the image.");return a},C=t.__addimage__.convertBase64ToBinaryString=function(t,e){var n;e="boolean"!=typeof e||e;var i,r="";if("string"==typeof t){i=null!==(n=x(t))?n.data:t;try{r=st(i)}catch(t){if(e)throw w(i)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+t.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return r};t.getImageProperties=function(n){var i,o,s="";if(d(n)&&(n=p(n)),"string"==typeof n&&r(n)===e&&(""===(s=C(n,!1))&&(s=t.loadFile(n)||""),n=s),o=r(n),!u(o))throw new Error("addImage does not support files of type '"+o+"', please ensure that a plugin for '"+o+"' support is added.");if(!S()||n instanceof Uint8Array||(n=_(n)),!(i=this["process"+o.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return i.fileType=o,i}}(It.API),
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(t){if(void 0!==t&&""!=t)return!0};It.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(t){for(var n,i,r,o=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,a=this.internal.getPageInfoByObjId(t.objId),l=t.pageContext.annotations,c=!1,h=0;h<l.length&&!c;h++)switch((n=l[h]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var u=0;u<l.length;u++){n=l[u];var d=this.internal.pdfEscape,p=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var f=this.internal.newAdditionalObject(),m=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(f.objId),v=n.title||"Note";r="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y)+"] ")+"/Contents ("+d(g(n.contents))+")",r+=" /Popup "+m.objId+" 0 R",r+=" /P "+a.objId+" 0 R",r+=" /T ("+d(g(v))+") >>",f.content=r;var y=f.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(n.bounds.x+30)+" "+s(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+s(n.bounds.y)+"] ")+" /Parent "+y,n.open&&(r+=" /Open true"),r+=" >>",m.content=r,this.internal.write(f.objId,"0 R",m.objId,"0 R");break;case"freetext":i="/Rect ["+o(n.bounds.x)+" "+s(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+s(n.bounds.y+n.bounds.h)+"] ";var b=n.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+d(p(n.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+b+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(n.options.name){var w=this.annotations._nameMap[n.options.name];n.options.pageNumber=w.page,n.options.top=w.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",r="",n.options.url)r="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+d(p(n.options.url))+") >>";else if(n.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,r+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var x=s(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),r+=" /XYZ "+n.options.left+" "+x+" "+n.options.zoom+"]"}""!=r&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),t.createAnnotation=function(t){var e=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":e.pageContext.annotations.push(t)}},t.link=function(t,e,n,i,r){var o=this.internal.getCurrentPageInfo(),s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:s(t),y:a(e),w:s(t+n),h:a(e+i)},options:r,type:"link"})},t.textWithLink=function(t,e,n,i){var r,o,s=this.getTextWidth(t),a=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==i.maxWidth){o=i.maxWidth;var l=this.splitTextToSize(t,o).length;r=Math.ceil(a*l)}else o=s,r=a;return this.text(t,e,n,i),n+=.2*a,"center"===i.align&&(e-=s/2),"right"===i.align&&(e-=s),this.link(e,n-a,o,r,i),s},t.getTextWidth=function(t){var e=this.internal.getFontSize();return this.getStringUnitWidth(t)*e/this.internal.scaleFactor}}(It.API),
/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];t.__arabicParser__={};var o=t.__arabicParser__.isInArabicSubstitutionA=function(t){return void 0!==e[t.charCodeAt(0)]},s=t.__arabicParser__.isArabicLetter=function(t){return"string"==typeof t&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(t)},a=t.__arabicParser__.isArabicEndLetter=function(t){return s(t)&&o(t)&&e[t.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(t){return s(t)&&r.indexOf(t.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(t){return s(t)&&o(t)&&e[t.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(t){return s(t)&&o(t)&&e[t.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(t){return s(t)&&o(t)&&e[t.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(t){return s(t)&&o(t)&&4==e[t.charCodeAt(0)].length},u=t.__arabicParser__.resolveLigatures=function(t){var e=0,i=n,r="",o=0;for(e=0;e<t.length;e+=1)void 0!==i[t.charCodeAt(e)]?(o++,"number"==typeof(i=i[t.charCodeAt(e)])&&(r+=String.fromCharCode(i),i=n,o=0),e===t.length-1&&(i=n,r+=t.charAt(e-(o-1)),e-=o-1,o=0)):(i=n,r+=t.charAt(e-o),e-=o,o=0);return r};t.__arabicParser__.isArabicDiacritic=function(t){return void 0!==t&&void 0!==i[t.charCodeAt(0)]};var d=t.__arabicParser__.getCorrectForm=function(t,e,n){return s(t)?!1===o(t)?-1:!c(t)||!s(e)&&!s(n)||!s(n)&&a(e)||a(t)&&!s(e)||a(t)&&l(e)||a(t)&&a(e)?0:h(t)&&s(e)&&!a(e)&&s(n)&&c(n)?3:a(t)||!s(n)?1:2:-1},p=function(t){var n=0,i=0,r=0,o="",a="",l="",c=(t=t||"").split("\\s+"),h=[];for(n=0;n<c.length;n+=1){for(h.push(""),i=0;i<c[n].length;i+=1)o=c[n][i],a=c[n][i-1],l=c[n][i+1],s(o)?(r=d(o,a,l),h[n]+=-1!==r?String.fromCharCode(e[o.charCodeAt(0)][r]):o):h[n]+=o;h[n]=u(h[n])}return h.join(" ")},f=t.__arabicParser__.processArabic=t.processArabic=function(){var t,e="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(e)){var i=0;for(n=[],i=0;i<e.length;i+=1)Array.isArray(e[i])?n.push([p(e[i][0]),e[i][1],e[i][2]]):n.push([p(e[i])]);t=n}else t=p(e);return"string"==typeof arguments[0]?t:(arguments[0].text=t,arguments[0])};t.events.push(["preProcessText",f])}(It.API),It.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(e){t=e}});var e=150;Object.defineProperty(this,"width",{get:function(){return e},set:function(t){e=isNaN(t)||!1===Number.isInteger(t)||t<0?150:t,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=e+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(t){n=isNaN(t)||!1===Number.isInteger(t)||t<0?300:t,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(t){i=t}});var r={};Object.defineProperty(this,"style",{get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,e){var n;if("2d"!==(t=t||"2d"))return null;for(n in e)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=e[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(It.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var t=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var e=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(t){n=t}});var i=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return i},set:function(t){i=t}});var r=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return r},set:function(t){r=t}});var o=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return o},set:function(t){o=t}});var s=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return s},set:function(t){s=t}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(t){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof t?t:void 0,this},t.getTextDimensions=function(t,e){r.call(this);var n=(e=e||{}).fontSize||this.getFontSize(),i=e.font||this.getFont(),o=e.scaleFactor||this.internal.scaleFactor,s=0,a=0,l=0,c=this;if(!Array.isArray(t)&&"string"!=typeof t){if("number"!=typeof t)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");t=String(t)}var h=e.maxWidth;h>0?"string"==typeof t?t=this.splitTextToSize(t,h):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(c.splitTextToSize(e,h))}),[])):t=Array.isArray(t)?t:[t];for(var u=0;u<t.length;u++)s<(l=this.getStringUnitWidth(t[u],{font:i})*n)&&(s=l);return 0!==s&&(a=t.length),{w:s/=o,h:Math.max((a*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/o,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var t=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(t.left,t.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var t;t=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var i=this.internal.__cell__.lastCell,o=this.internal.__cell__.padding,a=this.internal.__cell__.margins||e,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==i.lineNumber&&(i.lineNumber===t.lineNumber?(t.x=(i.x||0)+(i.width||0),t.y=i.y||0):i.y+i.height+t.height+a.bottom>this.getPageHeight()?(this.cellAddPage(),t.y=a.top,c&&l&&(this.printHeaderRow(t.lineNumber,!0),t.y+=l[0].height)):t.y=i.y+i.height||t.y),void 0!==t.text[0]&&(this.rect(t.x,t.y,t.width,t.height,!0===n?"FD":void 0),"right"===t.align?this.text(t.text,t.x+t.width-o,t.y+o,{align:"right",baseline:"top"}):"center"===t.align?this.text(t.text,t.x+t.width/2,t.y+o,{align:"center",baseline:"top",maxWidth:t.width-o-o}):this.text(t.text,t.x+o,t.y+o,{align:"left",baseline:"top",maxWidth:t.width-o-o})),this.internal.__cell__.lastCell=t,this};t.table=function(t,n,c,h,u){if(r.call(this),!c)throw new Error("No data for PDF table.");var d,p,f,m,g=[],v=[],y=[],b={},w={},x=[],S=[],k=(u=u||{}).autoSize||!1,_=!1!==u.printHeaders,E=u.css&&void 0!==u.css["font-size"]?16*u.css["font-size"]:u.fontSize||12,L=u.margins||Object.assign({width:this.getPageWidth()},e),C="number"==typeof u.padding?u.padding:3,A=u.headerBackgroundColor||"#c8c8c8",M=u.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=_,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=E,this.internal.__cell__.padding=C,this.internal.__cell__.headerBackgroundColor=A,this.internal.__cell__.headerTextColor=M,this.setFontSize(E),null==h)v=g=Object.keys(c[0]),y=g.map((function(){return"left"}));else if(Array.isArray(h)&&"object"===i(h[0]))for(g=h.map((function(t){return t.name})),v=h.map((function(t){return t.prompt||t.name||""})),y=h.map((function(t){return t.align||"left"})),d=0;d<h.length;d+=1)w[h[d].name]=h[d].width*(19.049976/25.4);else Array.isArray(h)&&"string"==typeof h[0]&&(v=g=h,y=g.map((function(){return"left"})));if(k||Array.isArray(h)&&"string"==typeof h[0])for(d=0;d<g.length;d+=1){for(b[m=g[d]]=c.map((function(t){return t[m]})),this.setFont(void 0,"bold"),x.push(this.getTextDimensions(v[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),p=b[m],this.setFont(void 0,"normal"),f=0;f<p.length;f+=1)x.push(this.getTextDimensions(p[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);w[m]=Math.max.apply(null,x)+C+C,x=[]}if(_){var N={};for(d=0;d<g.length;d+=1)N[g[d]]={},N[g[d]].text=v[d],N[g[d]].align=y[d];var P=l.call(this,N,w);S=g.map((function(e){return new s(t,n,w[e],P,N[e].text,void 0,N[e].align)})),this.setTableHeaderRow(S),this.printHeaderRow(1,!1)}var T=h.reduce((function(t,e){return t[e.name]=e.align,t}),{});for(d=0;d<c.length;d+=1){"rowStart"in u&&u.rowStart instanceof Function&&u.rowStart({row:d,data:c[d]},this);var I=l.call(this,c[d],w);for(f=0;f<g.length;f+=1){var O=c[d][g[f]];"cellStart"in u&&u.cellStart instanceof Function&&u.cellStart({row:d,col:f,data:O},this),a.call(this,new s(t,n,w[g[f]],I,O,d+2,T[g[f]]))}}return this.internal.__cell__.table_x=t,this.internal.__cell__.table_y=n,this};var l=function(t,e){var n=this.internal.__cell__.padding,i=this.internal.__cell__.table_font_size,r=this.internal.scaleFactor;return Object.keys(t).map((function(i){var r=t[i];return this.splitTextToSize(r.hasOwnProperty("text")?r.text:r,e[i]-n-n)}),this).map((function(t){return this.getLineHeightFactor()*t.length*i/r+n+n}),this).reduce((function(t,e){return Math.max(t,e)}),0)};t.setTableHeaderRow=function(t){r.call(this),this.internal.__cell__.tableHeaderRow=t},t.printHeaderRow=function(t,e){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var i;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var o=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(o[0],o[1],o[2],o[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){i=this.internal.__cell__.tableHeaderRow[c].clone(),e&&(i.y=this.internal.__cell__.margins.top||0,l.push(i)),i.lineNumber=t;var h=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,i),this.setTextColor(h)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(It.API);var ke={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},_e=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ee=Se(_e),Le=[100,200,300,400,500,600,700,800,900],Ce=Se(Le);function Ae(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(t){return ke[t=t||"normal"]?t:"normal"}(t.style),i=function(t){if(!t)return 400;if("number"==typeof t)return t>=100&&t<=900&&t%100==0?t:400;if(/^\d00$/.test(t))return parseInt(t);switch(t){case"bold":return 700;case"normal":default:return 400}}(t.weight),r=function(t){return"number"==typeof Ee[t=t||"normal"]?t:"normal"}(t.stretch);return{family:e,style:n,weight:i,stretch:r,src:t.src||[],ref:t.ref||{name:e,style:[r,n,i].join(" ")}}}function Me(t,e,n,i){var r;for(r=n;r>=0&&r<e.length;r+=i)if(t[e[r]])return t[e[r]];for(r=n;r>=0&&r<e.length;r-=i)if(t[e[r]])return t[e[r]]}var Ne={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Pe={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Te(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Ie(t,e,n){for(var i=(n=n||{}).defaultFontFamily||"times",r=Object.assign({},Ne,n.genericFontFamilies||{}),o=null,s=null,a=0;a<e.length;++a)if(r[(o=Ae(e[a])).family]&&(o.family=r[o.family]),t.hasOwnProperty(o.family)){s=t[o.family];break}if(!(s=s||t[i]))throw new Error("Could not find a font-family for the rule '"+Te(o)+"' and default family '"+i+"'.");if(s=function(t,e){if(e[t])return e[t];var n=Ee[t],i=n<=Ee.normal?-1:1,r=Me(e,_e,n,i);if(!r)throw new Error("Could not find a matching font-stretch value for "+t);return r}(o.stretch,s),s=function(t,e){if(e[t])return e[t];for(var n=ke[t],i=0;i<n.length;++i)if(e[n[i]])return e[n[i]];throw new Error("Could not find a matching font-style for "+t)}(o.style,s),!(s=function(t,e){if(e[t])return e[t];if(400===t&&e[500])return e[500];if(500===t&&e[400])return e[400];var n=Ce[t],i=Me(e,Le,n,t<400?-1:1);if(!i)throw new Error("Could not find a matching font-weight for value "+t);return i}(o.weight,s)))throw new Error("Failed to resolve a font for the rule '"+Te(o)+"'.");return s}function Oe(t){return t.trimLeft()}function De(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function je(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===e?null:[e[0],t.substring(e[0].length)]}var Re,Fe,Be,ze=["times"];!function(t){var e,n,r,o,s,a,l,c,h,u=function(t){return t=t||{},this.isStrokeTransparent=t.isStrokeTransparent||!1,this.strokeOpacity=t.strokeOpacity||1,this.strokeStyle=t.strokeStyle||"#000000",this.fillStyle=t.fillStyle||"#000000",this.isFillTransparent=t.isFillTransparent||!1,this.fillOpacity=t.fillOpacity||1,this.font=t.font||"10px sans-serif",this.textBaseline=t.textBaseline||"alphabetic",this.textAlign=t.textAlign||"left",this.lineWidth=t.lineWidth||1,this.lineJoin=t.lineJoin||"miter",this.lineCap=t.lineCap||"butt",this.path=t.path||[],this.transform=void 0!==t.transform?t.transform.clone():new c,this.globalCompositeOperation=t.globalCompositeOperation||"normal",this.globalAlpha=t.globalAlpha||1,this.clip_path=t.clip_path||[],this.currentPoint=t.currentPoint||new a,this.miterLimit=t.miterLimit||10,this.lastPoint=t.lastPoint||new a,this.lineDashOffset=t.lineDashOffset||0,this.lineDash=t.lineDash||[],this.margin=t.margin||[0,0,0,0],this.prevPageLastElemOffset=t.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof t.ignoreClearRect||t.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,h=new u}]);var d=function(t){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var e=t;Object.defineProperty(this,"pdf",{get:function(){return e}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(t){n=Boolean(t)}});var i=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return i},set:function(t){i=Boolean(t)}});var r=0;Object.defineProperty(this,"posX",{get:function(){return r},set:function(t){isNaN(t)||(r=t)}});var o=0;Object.defineProperty(this,"posY",{get:function(){return o},set:function(t){isNaN(t)||(o=t)}}),Object.defineProperty(this,"margin",{get:function(){return h.margin},set:function(t){var e;"number"==typeof t?e=[t,t,t,t]:((e=new Array(4))[0]=t[0],e[1]=t.length>=2?t[1]:e[0],e[2]=t.length>=3?t[2]:e[0],e[3]=t.length>=4?t[3]:e[1]),h.margin=e}});var s=!1;Object.defineProperty(this,"autoPaging",{get:function(){return s},set:function(t){s=t}});var a=0;Object.defineProperty(this,"lastBreak",{get:function(){return a},set:function(t){a=t}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(t){l=t}}),Object.defineProperty(this,"ctx",{get:function(){return h},set:function(t){t instanceof u&&(h=t)}}),Object.defineProperty(this,"path",{get:function(){return h.path},set:function(t){h.path=t}});var c=[];Object.defineProperty(this,"ctxStack",{get:function(){return c},set:function(t){c=t}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(t){var e;e=p(t),this.ctx.fillStyle=e.style,this.ctx.isFillTransparent=0===e.a,this.ctx.fillOpacity=e.a,this.pdf.setFillColor(e.r,e.g,e.b,{a:e.a}),this.pdf.setTextColor(e.r,e.g,e.b,{a:e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(t){var e=p(t);this.ctx.strokeStyle=e.style,this.ctx.isStrokeTransparent=0===e.a,this.ctx.strokeOpacity=e.a,0===e.a?this.pdf.setDrawColor(255,255,255):(e.a,this.pdf.setDrawColor(e.r,e.g,e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(t){-1!==["butt","round","square"].indexOf(t)&&(this.ctx.lineCap=t,this.pdf.setLineCap(t))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(t){isNaN(t)||(this.ctx.lineWidth=t,this.pdf.setLineWidth(t))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(t){-1!==["bevel","round","miter"].indexOf(t)&&(this.ctx.lineJoin=t,this.pdf.setLineJoin(t))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(t){isNaN(t)||(this.ctx.miterLimit=t,this.pdf.setMiterLimit(t))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(t){this.ctx.textBaseline=t}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(t){-1!==["right","end","center","left","start"].indexOf(t)&&(this.ctx.textAlign=t)}});var d=null;function f(t,e){if(null===d){var n=function(t){var e=[];return Object.keys(t).forEach((function(n){t[n].forEach((function(t){var i=null;switch(t){case"bold":i={family:n,weight:"bold"};break;case"italic":i={family:n,style:"italic"};break;case"bolditalic":i={family:n,weight:"bold",style:"italic"};break;case"":case"normal":i={family:n}}null!==i&&(i.ref={name:n,style:t},e.push(i))}))})),e}(t.getFontList());d=function(t){for(var e={},n=0;n<t.length;++n){var i=Ae(t[n]),r=i.family,o=i.stretch,s=i.style,a=i.weight;e[r]=e[r]||{},e[r][o]=e[r][o]||{},e[r][o][s]=e[r][o][s]||{},e[r][o][s][a]=i}return e}(n.concat(e))}return d}var m=null;Object.defineProperty(this,"fontFaces",{get:function(){return m},set:function(t){d=null,m=t}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(t){var e;if(this.ctx.font=t,null!==(e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(t))){var n=e[1],i=(e[2],e[3]),r=e[4],o=(e[5],e[6]),s=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(r)[2];r="px"===s?Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor):"em"===s?Math.floor(parseFloat(r)*this.pdf.getFontSize()):Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(r);var a=function(t){var e,n,i=[],r=t.trim();if(""===r)return ze;if(r in Pe)return[Pe[r]];for(;""!==r;){switch(n=null,e=(r=Oe(r)).charAt(0)){case'"':case"'":n=De(r.substring(1),e);break;default:n=je(r)}if(null===n)return ze;if(i.push(n[0]),""!==(r=Oe(n[1]))&&","!==r.charAt(0))return ze;r=r.replace(/^,/,"")}return i}(o);if(this.fontFaces){var l=Ie(f(this.pdf,this.fontFaces),a.map((function(t){return{family:t,stretch:"normal",weight:i,style:n}})));this.pdf.setFont(l.ref.name,l.ref.style)}else{var c="";("bold"===i||parseInt(i,10)>=700||"bold"===n)&&(c="bold"),"italic"===n&&(c+="italic"),0===c.length&&(c="normal");for(var h="",u={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},d=0;d<a.length;d++){if(void 0!==this.pdf.internal.getFont(a[d],c,{noFallback:!0,disableWarning:!0})){h=a[d];break}if("bolditalic"===c&&void 0!==this.pdf.internal.getFont(a[d],"bold",{noFallback:!0,disableWarning:!0}))h=a[d],c="bold";else if(void 0!==this.pdf.internal.getFont(a[d],"normal",{noFallback:!0,disableWarning:!0})){h=a[d],c="normal";break}}if(""===h)for(var p=0;p<a.length;p++)if(u[a[p]]){h=u[a[p]];break}h=""===h?"Times":h,this.pdf.setFont(h,c)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(t){this.ctx.globalCompositeOperation=t}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(t){this.ctx.globalAlpha=t}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(t){this.ctx.lineDashOffset=t,F.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(t){this.ctx.lineDash=t,F.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(t){this.ctx.ignoreClearRect=Boolean(t)}})};d.prototype.setLineDash=function(t){this.lineDash=t},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){x.call(this,"fill",!1)},d.prototype.stroke=function(){x.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(t,e){if(isNaN(t)||isNaN(e))throw nt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new a(t,e));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(t,e)},d.prototype.closePath=function(){var t=new a(0,0),e=0;for(e=this.path.length-1;-1!==e;e--)if("begin"===this.path[e].type&&"object"===i(this.path[e+1])&&"number"==typeof this.path[e+1].x){t=new a(this.path[e+1].x,this.path[e+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(t.x,t.y)},d.prototype.lineTo=function(t,e){if(isNaN(t)||isNaN(e))throw nt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new a(t,e));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new a(n.x,n.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),x.call(this,null,!0)},d.prototype.quadraticCurveTo=function(t,e,n,i){if(isNaN(n)||isNaN(i)||isNaN(t)||isNaN(e))throw nt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var r=this.ctx.transform.applyToPoint(new a(n,i)),o=this.ctx.transform.applyToPoint(new a(t,e));this.path.push({type:"qct",x1:o.x,y1:o.y,x:r.x,y:r.y}),this.ctx.lastPoint=new a(r.x,r.y)},d.prototype.bezierCurveTo=function(t,e,n,i,r,o){if(isNaN(r)||isNaN(o)||isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw nt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var s=this.ctx.transform.applyToPoint(new a(r,o)),l=this.ctx.transform.applyToPoint(new a(t,e)),c=this.ctx.transform.applyToPoint(new a(n,i));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:s.x,y:s.y}),this.ctx.lastPoint=new a(s.x,s.y)},d.prototype.arc=function(t,e,n,i,r,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r))throw nt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(o=Boolean(o),!this.ctx.transform.isIdentity){var s=this.ctx.transform.applyToPoint(new a(t,e));t=s.x,e=s.y;var l=this.ctx.transform.applyToPoint(new a(0,n)),c=this.ctx.transform.applyToPoint(new a(0,0));n=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(r-i)>=2*Math.PI&&(i=0,r=2*Math.PI),this.path.push({type:"arc",x:t,y:e,radius:n,startAngle:i,endAngle:r,counterclockwise:o})},d.prototype.arcTo=function(t,e,n,i,r){throw new Error("arcTo not implemented.")},d.prototype.rect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw nt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+i),this.lineTo(t,e+i),this.lineTo(t,e),this.lineTo(t+n,e),this.lineTo(t,e)},d.prototype.fillRect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw nt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var r={};"butt"!==this.lineCap&&(r.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(r.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(t,e,n,i),this.fill(),r.hasOwnProperty("lineCap")&&(this.lineCap=r.lineCap),r.hasOwnProperty("lineJoin")&&(this.lineJoin=r.lineJoin)}},d.prototype.strokeRect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw nt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(t,e,n,i),this.stroke())},d.prototype.clearRect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw nt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(t,e,n,i))},d.prototype.save=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(e),t){this.ctx.fontSize=this.pdf.internal.getFontSize();var i=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=i}},d.prototype.restore=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(e),t&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(t){var e,n,i,r;if(!0===t.isCanvasGradient&&(t=t.getColor()),!t)return{r:0,g:0,b:0,a:0,style:t};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(t))e=0,n=0,i=0,r=0;else{var o=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(t);if(null!==o)e=parseInt(o[1]),n=parseInt(o[2]),i=parseInt(o[3]),r=1;else if(null!==(o=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(t)))e=parseInt(o[1]),n=parseInt(o[2]),i=parseInt(o[3]),r=parseFloat(o[4]);else{if(r=1,"string"==typeof t&&"#"!==t.charAt(0)){var s=new ct(t);t=s.ok?s.toHex():"#000000"}4===t.length?(e=t.substring(1,2),e+=e,n=t.substring(2,3),n+=n,i=t.substring(3,4),i+=i):(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7)),e=parseInt(e,16),n=parseInt(n,16),i=parseInt(i,16)}}return{r:e,g:n,b:i,a:r,style:t}},f=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},m=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};d.prototype.fillText=function(t,e,n,i){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw nt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(i=isNaN(i)?void 0:i,!f.call(this)){var r=D(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;M.call(this,{text:t,x:e,y:n,scale:o,angle:r,align:this.textAlign,maxWidth:i})}},d.prototype.strokeText=function(t,e,n,i){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw nt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){i=isNaN(i)?void 0:i;var r=D(this.ctx.transform.rotation),o=this.ctx.transform.scaleX;M.call(this,{text:t,x:e,y:n,scale:o,renderingMode:"stroke",angle:r,align:this.textAlign,maxWidth:i})}},d.prototype.measureText=function(t){if("string"!=typeof t)throw nt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var e=this.pdf,n=this.pdf.internal.scaleFactor,i=e.internal.getFontSize(),r=e.getStringUnitWidth(t)*i/e.internal.scaleFactor,o=function(t){var e=(t=t||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return e}}),this};return new o({width:r*=Math.round(96*n/72*1e4)/1e4})},d.prototype.scale=function(t,e){if(isNaN(t)||isNaN(e))throw nt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new c(t,0,0,e,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},d.prototype.rotate=function(t){if(isNaN(t))throw nt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var e=new c(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0);this.ctx.transform=this.ctx.transform.multiply(e)},d.prototype.translate=function(t,e){if(isNaN(t)||isNaN(e))throw nt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new c(1,0,0,1,t,e);this.ctx.transform=this.ctx.transform.multiply(n)},d.prototype.transform=function(t,e,n,i,r,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(o))throw nt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var s=new c(t,e,n,i,r,o);this.ctx.transform=this.ctx.transform.multiply(s)},d.prototype.setTransform=function(t,e,n,i,r,o){t=isNaN(t)?1:t,e=isNaN(e)?0:e,n=isNaN(n)?0:n,i=isNaN(i)?1:i,r=isNaN(r)?0:r,o=isNaN(o)?0:o,this.ctx.transform=new c(t,e,n,i,r,o)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(t,e,n,i,r,o,s,a,h){var u=this.pdf.getImageProperties(t),d=1,p=1,f=1,m=1;void 0!==i&&void 0!==a&&(f=a/i,m=h/r,d=u.width/i*a/i,p=u.height/r*h/r),void 0===o&&(o=e,s=n,e=0,n=0),void 0!==i&&void 0===a&&(a=i,h=r),void 0===i&&void 0===a&&(a=u.width,h=u.height);for(var y,x=this.ctx.transform.decompose(),k=D(x.rotate.shx),_=new c,E=(_=(_=(_=_.multiply(x.translate)).multiply(x.skew)).multiply(x.scale)).applyToRectangle(new l(o-e*f,s-n*m,i*d,r*p)),L=v.call(this,E),C=[],A=0;A<L.length;A+=1)-1===C.indexOf(L[A])&&C.push(L[A]);if(w(C),this.autoPaging)for(var M=C[0],N=C[C.length-1],P=M;P<N+1;P++){this.pdf.setPage(P);var T=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],I=1===P?this.posY+this.margin[0]:this.margin[0],O=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],j=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],R=1===P?0:O+(P-2)*j;if(0!==this.ctx.clip_path.length){var F=this.path;y=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(y,this.posX+this.margin[3],-R+I+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=F}var B=JSON.parse(JSON.stringify(E));B=b([B],this.posX+this.margin[3],-R+I+this.ctx.prevPageLastElemOffset)[0];var z=(P>M||P<N)&&g.call(this);z&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],T,j,null).clip().discardPath()),this.pdf.addImage(t,"JPEG",B.x,B.y,B.w,B.h,null,null,k),z&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(t,"JPEG",E.x,E.y,E.w,E.h,null,null,k)};var v=function(t,e,n){var i=[];e=e||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var r=this.posY+this.ctx.prevPageLastElemOffset;switch(t.type){default:case"mt":case"lt":i.push(Math.floor((t.y+r)/n)+1);break;case"arc":i.push(Math.floor((t.y+r-t.radius)/n)+1),i.push(Math.floor((t.y+r+t.radius)/n)+1);break;case"qct":var o=j(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x,t.y);i.push(Math.floor((o.y+r)/n)+1),i.push(Math.floor((o.y+o.h+r)/n)+1);break;case"bct":var s=R(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x2,t.y2,t.x,t.y);i.push(Math.floor((s.y+r)/n)+1),i.push(Math.floor((s.y+s.h+r)/n)+1);break;case"rect":i.push(Math.floor((t.y+r)/n)+1),i.push(Math.floor((t.y+t.h+r)/n)+1)}for(var a=0;a<i.length;a+=1)for(;this.pdf.internal.getNumberOfPages()<i[a];)y.call(this);return i},y=function(){var t=this.fillStyle,e=this.strokeStyle,n=this.font,i=this.lineCap,r=this.lineWidth,o=this.lineJoin;this.pdf.addPage(),this.fillStyle=t,this.strokeStyle=e,this.font=n,this.lineCap=i,this.lineWidth=r,this.lineJoin=o},b=function(t,e,n){for(var i=0;i<t.length;i++)switch(t[i].type){case"bct":t[i].x2+=e,t[i].y2+=n;case"qct":t[i].x1+=e,t[i].y1+=n;case"mt":case"lt":case"arc":default:t[i].x+=e,t[i].y+=n}return t},w=function(t){return t.sort((function(t,e){return t-e}))},x=function(t,e){for(var n,i,r=this.fillStyle,o=this.strokeStyle,s=this.lineCap,a=this.lineWidth,l=Math.abs(a*this.ctx.transform.scaleX),c=this.lineJoin,h=JSON.parse(JSON.stringify(this.path)),u=JSON.parse(JSON.stringify(this.path)),d=[],p=0;p<u.length;p++)if(void 0!==u[p].x)for(var f=v.call(this,u[p]),m=0;m<f.length;m+=1)-1===d.indexOf(f[m])&&d.push(f[m]);for(var x=0;x<d.length;x++)for(;this.pdf.internal.getNumberOfPages()<d[x];)y.call(this);if(w(d),this.autoPaging)for(var k=d[0],_=d[d.length-1],E=k;E<_+1;E++){this.pdf.setPage(E),this.fillStyle=r,this.strokeStyle=o,this.lineCap=s,this.lineWidth=l,this.lineJoin=c;var L=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],C=1===E?this.posY+this.margin[0]:this.margin[0],A=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],M=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],N=1===E?0:A+(E-2)*M;if(0!==this.ctx.clip_path.length){var P=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(n,this.posX+this.margin[3],-N+C+this.ctx.prevPageLastElemOffset),S.call(this,t,!0),this.path=P}if(i=JSON.parse(JSON.stringify(h)),this.path=b(i,this.posX+this.margin[3],-N+C+this.ctx.prevPageLastElemOffset),!1===e||0===E){var T=(E>k||E<_)&&g.call(this);T&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],L,M,null).clip().discardPath()),S.call(this,t,e),T&&this.pdf.restoreGraphicsState()}this.lineWidth=a}else this.lineWidth=l,S.call(this,t,e),this.lineWidth=a;this.path=h},S=function(t,e){if(("stroke"!==t||e||!m.call(this))&&("stroke"===t||e||!f.call(this))){for(var n,i,r=[],o=this.path,s=0;s<o.length;s++){var a=o[s];switch(a.type){case"begin":r.push({begin:!0});break;case"close":r.push({close:!0});break;case"mt":r.push({start:a,deltas:[],abs:[]});break;case"lt":var l=r.length;if(o[s-1]&&!isNaN(o[s-1].x)&&(n=[a.x-o[s-1].x,a.y-o[s-1].y],l>0))for(;l>=0;l--)if(!0!==r[l-1].close&&!0!==r[l-1].begin){r[l-1].deltas.push(n),r[l-1].abs.push(a);break}break;case"bct":n=[a.x1-o[s-1].x,a.y1-o[s-1].y,a.x2-o[s-1].x,a.y2-o[s-1].y,a.x-o[s-1].x,a.y-o[s-1].y],r[r.length-1].deltas.push(n);break;case"qct":var c=o[s-1].x+2/3*(a.x1-o[s-1].x),h=o[s-1].y+2/3*(a.y1-o[s-1].y),u=a.x+2/3*(a.x1-a.x),d=a.y+2/3*(a.y1-a.y),p=a.x,g=a.y;n=[c-o[s-1].x,h-o[s-1].y,u-o[s-1].x,d-o[s-1].y,p-o[s-1].x,g-o[s-1].y],r[r.length-1].deltas.push(n);break;case"arc":r.push({deltas:[],abs:[],arc:!0}),Array.isArray(r[r.length-1].abs)&&r[r.length-1].abs.push(a)}}i=e?null:"stroke"===t?"stroke":"fill";for(var v=!1,y=0;y<r.length;y++)if(r[y].arc)for(var b=r[y].abs,w=0;w<b.length;w++){var x=b[w];"arc"===x.type?E.call(this,x.x,x.y,x.radius,x.startAngle,x.endAngle,x.counterclockwise,void 0,e,!v):N.call(this,x.x,x.y),v=!0}else if(!0===r[y].close)this.pdf.internal.out("h"),v=!1;else if(!0!==r[y].begin){var S=r[y].start.x,k=r[y].start.y;P.call(this,r[y].deltas,S,k),v=!0}i&&L.call(this,i),e&&C.call(this)}},k=function(t){var e=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=e*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return t-n;case"top":return t+e-n;case"hanging":return t+e-2*n;case"middle":return t+e/2-n;case"ideographic":return t;case"alphabetic":default:return t}},_=function(t){return t+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var t=function(){};return t.colorStops=[],t.addColorStop=function(t,e){this.colorStops.push([t,e])},t.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},t.isCanvasGradient=!0,t},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(t,e,n,i,r,o,s,a,l){for(var c=I.call(this,n,i,r,o),h=0;h<c.length;h++){var u=c[h];0===h&&(l?A.call(this,u.x1+t,u.y1+e):N.call(this,u.x1+t,u.y1+e)),T.call(this,t,e,u.x2,u.y2,u.x3,u.y3,u.x4,u.y4)}a?C.call(this):L.call(this,s)},L=function(t){switch(t){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},C=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(t,e){this.pdf.internal.out(n(t)+" "+r(e)+" m")},M=function(t){var e;switch(t.align){case"right":case"end":e="right";break;case"center":e="center";break;case"left":case"start":default:e="left"}var n=this.pdf.getTextDimensions(t.text),i=k.call(this,t.y),r=_.call(this,i)-n.h,o=this.ctx.transform.applyToPoint(new a(t.x,i)),s=this.ctx.transform.decompose(),h=new c;h=(h=(h=h.multiply(s.translate)).multiply(s.skew)).multiply(s.scale);for(var u,d,p,f=this.ctx.transform.applyToRectangle(new l(t.x,i,n.w,n.h)),m=h.applyToRectangle(new l(t.x,r,n.w,n.h)),y=v.call(this,m),x=[],E=0;E<y.length;E+=1)-1===x.indexOf(y[E])&&x.push(y[E]);if(w(x),this.autoPaging)for(var L=x[0],C=x[x.length-1],A=L;A<C+1;A++){this.pdf.setPage(A);var M=1===A?this.posY+this.margin[0]:this.margin[0],N=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],P=this.pdf.internal.pageSize.height-this.margin[2],T=P-this.margin[0],I=this.pdf.internal.pageSize.width-this.margin[1],O=I-this.margin[3],D=1===A?0:N+(A-2)*T;if(0!==this.ctx.clip_path.length){var j=this.path;u=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(u,this.posX+this.margin[3],-1*D+M),S.call(this,"fill",!0),this.path=j}var R=b([JSON.parse(JSON.stringify(m))],this.posX+this.margin[3],-D+M+this.ctx.prevPageLastElemOffset)[0];t.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*t.scale),p=this.lineWidth,this.lineWidth=p*t.scale);var F="text"!==this.autoPaging;if(F||R.y+R.h<=P){if(F||R.y>=M&&R.x<=I){var B=F?t.text:this.pdf.splitTextToSize(t.text,t.maxWidth||I-R.x)[0],z=b([JSON.parse(JSON.stringify(f))],this.posX+this.margin[3],-D+M+this.ctx.prevPageLastElemOffset)[0],$=F&&(A>L||A<C)&&g.call(this);$&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],O,T,null).clip().discardPath()),this.pdf.text(B,z.x,z.y,{angle:t.angle,align:e,renderingMode:t.renderingMode}),$&&this.pdf.restoreGraphicsState()}}else R.y<P&&(this.ctx.prevPageLastElemOffset+=P-R.y);t.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=p)}else t.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*t.scale),p=this.lineWidth,this.lineWidth=p*t.scale),this.pdf.text(t.text,o.x+this.posX,o.y+this.posY,{angle:t.angle,align:e,renderingMode:t.renderingMode,maxWidth:t.maxWidth}),t.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=p)},N=function(t,e,i,o){i=i||0,o=o||0,this.pdf.internal.out(n(t+i)+" "+r(e+o)+" l")},P=function(t,e,n){return this.pdf.lines(t,e,n,null,null)},T=function(t,n,i,r,a,l,c,h){this.pdf.internal.out([e(o(i+t)),e(s(r+n)),e(o(a+t)),e(s(l+n)),e(o(c+t)),e(s(h+n)),"c"].join(" "))},I=function(t,e,n,i){for(var r=2*Math.PI,o=Math.PI/2;e>n;)e-=r;var s=Math.abs(n-e);s<r&&i&&(s=r-s);for(var a=[],l=i?-1:1,c=e;s>1e-5;){var h=c+l*Math.min(s,o);a.push(O.call(this,t,c,h)),s-=Math.abs(h-c),c=h}return a},O=function(t,e,n){var i=(n-e)/2,r=t*Math.cos(i),o=t*Math.sin(i),s=r,a=-o,l=s*s+a*a,c=l+s*r+a*o,h=4/3*(Math.sqrt(2*l*c)-c)/(s*o-a*r),u=s-h*a,d=a+h*s,p=u,f=-d,m=i+e,g=Math.cos(m),v=Math.sin(m);return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:u*g-d*v,y2:u*v+d*g,x3:p*g-f*v,y3:p*v+f*g,x4:t*Math.cos(n),y4:t*Math.sin(n)}},D=function(t){return 180*t/Math.PI},j=function(t,e,n,i,r,o){var s=t+.5*(n-t),a=e+.5*(i-e),c=r+.5*(n-r),h=o+.5*(i-o),u=Math.min(t,r,s,c),d=Math.max(t,r,s,c),p=Math.min(e,o,a,h),f=Math.max(e,o,a,h);return new l(u,p,d-u,f-p)},R=function(t,e,n,i,r,o,s,a){var c,h,u,d,p,f,m,g,v,y,b,w,x,S,k=n-t,_=i-e,E=r-n,L=o-i,C=s-r,A=a-o;for(h=0;h<41;h++)v=(m=(u=t+(c=h/40)*k)+c*((p=n+c*E)-u))+c*(p+c*(r+c*C-p)-m),y=(g=(d=e+c*_)+c*((f=i+c*L)-d))+c*(f+c*(o+c*A-f)-g),0==h?(b=v,w=y,x=v,S=y):(b=Math.min(b,v),w=Math.min(w,y),x=Math.max(x,v),S=Math.max(S,y));return new l(Math.round(b),Math.round(w),Math.round(x-b),Math.round(S-w))},F=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var t,e,n=(t=this.ctx.lineDash,e=this.ctx.lineDashOffset,JSON.stringify({lineDash:t,lineDashOffset:e}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(It.API),
/**
 * @license
 * jsPDF filters PlugIn
 * Copyright (c) 2014 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(t){var e,n,i,r,o,s,a,l,c,h;for(/[^\x00-\xFF]/.test(t),n=[],i=0,r=(t+=e="\0\0\0\0".slice(t.length%4||4)).length;r>i;i+=4)0!==(o=(t.charCodeAt(i)<<24)+(t.charCodeAt(i+1)<<16)+(t.charCodeAt(i+2)<<8)+t.charCodeAt(i+3))?(s=(o=((o=((o=((o=(o-(h=o%85))/85)-(c=o%85))/85)-(l=o%85))/85)-(a=o%85))/85)%85,n.push(s+33,a+33,l+33,c+33,h+33)):n.push(122);return function(t,e){for(var n=e;n>0;n--)t.pop()}(n,e.length),String.fromCharCode.apply(String,n)+"~>"},n=function(t){var e,n,i,r,o,s=String,a="length",l=255,c="charCodeAt",h="slice",u="replace";for(t[h](-2),t=t[h](0,-2)[u](/\s/g,"")[u]("z","!!!!!"),i=[],r=0,o=(t+=e="uuuuu"[h](t[a]%5||5))[a];o>r;r+=5)n=52200625*(t[c](r)-33)+614125*(t[c](r+1)-33)+7225*(t[c](r+2)-33)+85*(t[c](r+3)-33)+(t[c](r+4)-33),i.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(t,e){for(var n=e;n>0;n--)t.pop()}(i,e[a]),s.fromCharCode.apply(s,i)},i=function(t){var e=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(t=t.replace(/\s/g,"")).indexOf(">")&&(t=t.substr(0,t.indexOf(">"))),t.length%2&&(t+="0"),!1===e.test(t))return"";for(var n="",i=0;i<t.length;i+=2)n+=String.fromCharCode("0x"+(t[i]+t[i+1]));return n},r=function(t){for(var e=new Uint8Array(t.length),n=t.length;n--;)e[n]=t.charCodeAt(n);return(e=K(e)).reduce((function(t,e){return t+String.fromCharCode(e)}),"")};t.processDataByFilters=function(t,o){var s=0,a=t||"",l=[];for("string"==typeof(o=o||[])&&(o=[o]),s=0;s<o.length;s+=1)switch(o[s]){case"ASCII85Decode":case"/ASCII85Decode":a=n(a),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":a=e(a),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":a=i(a),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":a=a.split("").map((function(t){return("0"+t.charCodeAt().toString(16)).slice(-2)})).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":a=r(a),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[s]+'" is not implemented')}return{data:a,reverseChain:l.reverse().join(" ")}}}(It.API),
/**
 * @license
 * jsPDF fileloading PlugIn
 * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){t.loadFile=function(t,e,n){return function(t,e,n){e=!1!==e,n="function"==typeof n?n:function(){};var i=void 0;try{i=function(t,e,n){var i=new XMLHttpRequest,r=0,o=function(t){var e=t.length,n=[],i=String.fromCharCode;for(r=0;r<e;r+=1)n.push(i(255&t.charCodeAt(r)));return n.join("")};if(i.open("GET",t,!e),i.overrideMimeType("text/plain; charset=x-user-defined"),!1===e&&(i.onload=function(){200===i.status?n(o(this.responseText)):n(void 0)}),i.send(null),e&&200===i.status)return o(i.responseText)}(t,e,n)}catch(t){}return i}(t,e,n)},t.loadImageFile=t.loadFile}(It.API),function(t){function e(){return(tt.html2canvas?Promise.resolve(tt.html2canvas):n.e(269).then(n.t.bind(n,2269,23))).catch((function(t){return Promise.reject(new Error("Could not load html2canvas: "+t))})).then((function(t){return t.default?t.default:t}))}function r(){return(tt.DOMPurify?Promise.resolve(tt.DOMPurify):n.e(617).then(n.t.bind(n,3617,23))).catch((function(t){return Promise.reject(new Error("Could not load dompurify: "+t))})).then((function(t){return t.default?t.default:t}))}var o=function(t){var e=i(t);return"undefined"===e?"undefined":"string"===e||t instanceof String?"string":"number"===e||t instanceof Number?"number":"function"===e||t instanceof Function?"function":t&&t.constructor===Array?"array":t&&1===t.nodeType?"element":"object"===e?"object":"unknown"},s=function(t,e){var n=document.createElement(t);for(var i in e.className&&(n.className=e.className),e.innerHTML&&e.dompurify&&(n.innerHTML=e.dompurify.sanitize(e.innerHTML)),e.style)n.style[i]=e.style[i];return n},a=function t(e){var n=Object.assign(t.convert(Promise.resolve()),JSON.parse(JSON.stringify(t.template))),i=t.convert(Promise.resolve(),n);return(i=i.setProgress(1,t,1,[t])).set(e)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(t,e){return t.__proto__=e||a.prototype,t},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(t,e){return this.then((function(){switch(e=e||function(t){switch(o(t)){case"string":return"string";case"element":return"canvas"===t.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(t)){case"string":return this.then(r).then((function(e){return this.set({src:s("div",{innerHTML:t,dompurify:e})})}));case"element":return this.set({src:t});case"canvas":return this.set({canvas:t});case"img":return this.set({img:t});default:return this.error("Unknown source type.")}}))},a.prototype.to=function(t){switch(t){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var t={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},e=function t(e,n){for(var i=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),r=e.firstChild;r;r=r.nextSibling)!0!==n&&1===r.nodeType&&"SCRIPT"===r.nodeName||i.appendChild(t(r,n));return 1===e.nodeType&&("CANVAS"===e.nodeName?(i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(e,0,0)):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(i.value=e.value),i.addEventListener("load",(function(){i.scrollTop=e.scrollTop,i.scrollLeft=e.scrollLeft}),!0)),i}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===e.tagName&&(t.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:t}),this.prop.container.appendChild(e),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},a.prototype.toCanvas=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=Object.assign({},this.opt.html2canvas);return delete e.onrendered,t(this.prop.container,e)})).then((function(t){(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},a.prototype.toContext2d=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=this.opt.jsPDF,n=this.opt.fontFaces,i="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,r=Object.assign({async:!0,allowTaint:!0,scale:i,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete r.onrendered,e.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,e.context2d.posX=this.opt.x,e.context2d.posY=this.opt.y,e.context2d.margin=this.opt.margin,e.context2d.fontFaces=n,n)for(var o=0;o<n.length;++o){var s=n[o],a=s.src.find((function(t){return"truetype"===t.format}));a&&e.addFont(a.url,s.ref.name,s.ref.style)}return r.windowHeight=r.windowHeight||0,r.windowHeight=0==r.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):r.windowHeight,e.context2d.save(!0),t(this.prop.container,r)})).then((function(t){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var t=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=t}))},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},a.prototype.output=function(t,e,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(t,e):this.outputPdf(t,e)},a.prototype.outputPdf=function(t,e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(t,e)}))},a.prototype.outputImg=function(t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(t){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+t+'" is not supported.'}}))},a.prototype.save=function(t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(t?{filename:t}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},a.prototype.set=function(t){if("object"!==o(t))return this;var e=Object.keys(t||{}).map((function(e){if(e in a.template.prop)return function(){this.prop[e]=t[e]};switch(e){case"margin":return this.setMargin.bind(this,t.margin);case"jsPDF":return function(){return this.opt.jsPDF=t.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,t.pageSize);default:return function(){this.opt[e]=t[e]}}}),this);return this.then((function(){return this.thenList(e)}))},a.prototype.get=function(t,e){return this.then((function(){var n=t in a.template.prop?this.prop[t]:this.opt[t];return e?e(n):n}))},a.prototype.setMargin=function(t){return this.then((function(){switch(o(t)){case"number":t=[t,t,t,t];case"array":if(2===t.length&&(t=[t[0],t[1],t[0],t[1]]),4===t.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=t})).then(this.setPageSize)},a.prototype.setPageSize=function(t){function e(t,e){return Math.floor(t*e/72*96)}return this.then((function(){(t=t||It.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(t.inner={width:t.width-this.opt.margin[1]-this.opt.margin[3],height:t.height-this.opt.margin[0]-this.opt.margin[2]},t.inner.px={width:e(t.inner.width,t.k),height:e(t.inner.height,t.k)},t.inner.ratio=t.inner.height/t.inner.width),this.prop.pageSize=t}))},a.prototype.setProgress=function(t,e,n,i){return null!=t&&(this.progress.val=t),null!=e&&(this.progress.state=e),null!=n&&(this.progress.n=n),null!=i&&(this.progress.stack=i),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(t,e,n,i){return this.setProgress(t?this.progress.val+t:null,e||null,n?this.progress.n+n:null,i?this.progress.stack.concat(i):null)},a.prototype.then=function(t,e){var n=this;return this.thenCore(t,e,(function(t,e){return n.updateProgress(null,null,1,[t]),Promise.prototype.then.call(this,(function(e){return n.updateProgress(null,t),e})).then(t,e).then((function(t){return n.updateProgress(1),t}))}))},a.prototype.thenCore=function(t,e,n){n=n||Promise.prototype.then,t&&(t=t.bind(this)),e&&(e=e.bind(this));var i=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:a.convert(Object.assign({},this),Promise.prototype),r=n.call(i,t,e);return a.convert(r,this.__proto__)},a.prototype.thenExternal=function(t,e){return Promise.prototype.then.call(this,t,e)},a.prototype.thenList=function(t){var e=this;return t.forEach((function(t){e=e.thenCore(t)})),e},a.prototype.catch=function(t){t&&(t=t.bind(this));var e=Promise.prototype.catch.call(this,t);return a.convert(e,this)},a.prototype.catchExternal=function(t){return Promise.prototype.catch.call(this,t)},a.prototype.error=function(t){return this.then((function(){throw new Error(t)}))},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,It.getPageSize=function(t,e,n){if("object"===i(t)){var r=t;t=r.orientation,e=r.unit||e,n=r.format||n}e=e||"mm",n=n||"a4",t=(""+(t||"P")).toLowerCase();var o,s=(""+n).toLowerCase(),a={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(e){case"pt":o=1;break;case"mm":o=72/25.4;break;case"cm":o=72/2.54;break;case"in":o=72;break;case"px":o=.75;break;case"pc":case"em":o=12;break;case"ex":o=6;break;default:throw"Invalid unit: "+e}var l,c=0,h=0;if(a.hasOwnProperty(s))c=a[s][1]/o,h=a[s][0]/o;else try{c=n[1],h=n[0]}catch(u){throw new Error("Invalid format: "+n)}if("p"===t||"portrait"===t)t="p",h>c&&(l=h,h=c,c=l);else{if("l"!==t&&"landscape"!==t)throw"Invalid orientation: "+t;t="l",c>h&&(l=h,h=c,c=l)}return{width:h,height:c,unit:e,k:o,orientation:t}},t.html=function(t,e){(e=e||{}).callback=e.callback||function(){},e.html2canvas=e.html2canvas||{},e.html2canvas.canvas=e.html2canvas.canvas||this.canvas,e.jsPDF=e.jsPDF||this,e.fontFaces=e.fontFaces?e.fontFaces.map(Ae):null;var n=new a(e);return e.worker?n:n.from(t).doCallback()}}(It.API),It.API.addJS=function(t){return Be=t,this.internal.events.subscribe("postPutResources",(function(){Re=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Re+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Fe=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Be+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==Re&&void 0!==Fe&&this.internal.out("/Names <</JavaScript "+Re+" 0 R>>")})),this},
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e;t.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),r=0;r<i.length;r++){var o=i[r],s=n.exec(o);if(null!=s){var a=s[1];t.internal.newObjectDeferredBegin(a,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(r=0;r<l;r++){var h=t.internal.newObject();c.push(h);var u=t.internal.getPageInfo(r+1);t.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var d=t.internal.newObject();for(t.internal.write("<< /Names [ "),r=0;r<c.length;r++)t.internal.write("(page_"+(r+1)+")"+c[r]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+d+" 0 R"),t.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(t,e,n){var i={title:e,options:n,children:[]};return null==t&&(t=this.root),t.children.push(i),i},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(e){e.id=t.internal.newObjectDeferred();for(var n=0;n<e.children.length;n++)this.genIds_r(e.children[n])},t.outline.renderRoot=function(t){this.objStart(t),this.line("/Type /Outlines"),t.children.length>0&&(this.line("/First "+this.makeRef(t.children[0])),this.line("/Last "+this.makeRef(t.children[t.children.length-1]))),this.line("/Count "+this.count_r({count:0},t)),this.objEnd()},t.outline.renderItems=function(e){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<e.children.length;i++){var r=e.children[i];this.objStart(r),this.line("/Title "+this.makeString(r.title)),this.line("/Parent "+this.makeRef(e)),i>0&&this.line("/Prev "+this.makeRef(e.children[i-1])),i<e.children.length-1&&this.line("/Next "+this.makeRef(e.children[i+1])),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1])));var o=this.count=this.count_r({count:0},r);if(o>0&&this.line("/Count "+o),r.options&&r.options.pageNumber){var s=t.internal.getPageInfo(r.options.pageNumber);this.line("/Dest ["+s.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var a=0;a<e.children.length;a++)this.renderItems(e.children[a])},t.outline.line=function(t){this.ctx.val+=t+"\r\n"},t.outline.makeRef=function(t){return t.id+" 0 R"},t.outline.makeString=function(e){return"("+t.internal.pdfEscape(e)+")"},t.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(t,e){for(var n=0;n<e.children.length;n++)t.count++,this.count_r(t,e.children[n]);return t.count}}])}(It.API),
/**
 * @license
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(t,n,i,r,o,s){var a,l=this.decode.DCT_DECODE,c=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(a=function(t){for(var n,i=256*t.charCodeAt(4)+t.charCodeAt(5),r=t.length,o={width:0,height:0,numcomponents:1},s=4;s<r;s+=2){if(s+=i,-1!==e.indexOf(t.charCodeAt(s+1))){n=256*t.charCodeAt(s+5)+t.charCodeAt(s+6),o={width:256*t.charCodeAt(s+7)+t.charCodeAt(s+8),height:n,numcomponents:t.charCodeAt(s+9)};break}i=256*t.charCodeAt(s+2)+t.charCodeAt(s+3)}return o}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:s=this.color_spaces.DEVICE_GRAY;break;case 4:s=this.color_spaces.DEVICE_CMYK;break;case 3:s=this.color_spaces.DEVICE_RGB}c={data:t,width:a.width,height:a.height,colorSpace:s,bitsPerComponent:8,filter:l,index:n,alias:i}}return c}}(It.API);var $e,qe,Ue,Ge,He,We=function(){var t,e,n;function i(t){var e,n,i,r,o,s,a,l,c,h,u,d,p,f;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},s=null;;){switch(e=this.readUInt32(),c=function(){var t,e;for(e=[],t=0;t<4;++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":s&&this.animation.frames.push(s),this.pos+=4,s={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},o=this.readUInt16(),r=this.readUInt16()||100,s.delay=1e3*o/r,s.disposeOp=this.data[this.pos++],s.blendOp=this.data[this.pos++],s.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,e-=4),t=(null!=s?s.data:void 0)||this.imgData,d=0;0<=e?d<e:d>e;0<=e?++d:--d)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(i=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>i)throw new Error("More transparent colors than palette size");if((h=i-this.transparency.indexed.length)>0)for(p=0;0<=h?p<h:p>h;0<=h?++p:--p)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":a=(u=this.read(e)).indexOf(0),l=String.fromCharCode.apply(String,u.slice(0,a)),this.text[l]=String.fromCharCode.apply(String,u.slice(a+1));break;case"IEND":return s&&this.animation.frames.push(s),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(f=this.colorType)||6===f,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;0<=t?++e:--e)n.push(this.data[this.pos++]);return n},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(t){var e=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*e),i=0,r=this;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);function o(o,s,a,l){var c,h,u,d,p,f,m,g,v,y,b,w,x,S,k,_,E,L,C,A,M,N=Math.ceil((r.width-o)/a),P=Math.ceil((r.height-s)/l),T=r.width==N&&r.height==P;for(S=e*N,w=T?n:new Uint8Array(S*P),f=t.length,x=0,h=0;x<P&&i<f;){switch(t[i++]){case 0:for(d=E=0;E<S;d=E+=1)w[h++]=t[i++];break;case 1:for(d=L=0;L<S;d=L+=1)c=t[i++],p=d<e?0:w[h-e],w[h++]=(c+p)%256;break;case 2:for(d=C=0;C<S;d=C+=1)c=t[i++],u=(d-d%e)/e,k=x&&w[(x-1)*S+u*e+d%e],w[h++]=(k+c)%256;break;case 3:for(d=A=0;A<S;d=A+=1)c=t[i++],u=(d-d%e)/e,p=d<e?0:w[h-e],k=x&&w[(x-1)*S+u*e+d%e],w[h++]=(c+Math.floor((p+k)/2))%256;break;case 4:for(d=M=0;M<S;d=M+=1)c=t[i++],u=(d-d%e)/e,p=d<e?0:w[h-e],0===x?k=_=0:(k=w[(x-1)*S+u*e+d%e],_=u&&w[(x-1)*S+(u-1)*e+d%e]),m=p+k-_,g=Math.abs(m-p),y=Math.abs(m-k),b=Math.abs(m-_),v=g<=y&&g<=b?p:y<=b?k:_,w[h++]=(c+v)%256;break;default:throw new Error("Invalid filter algorithm: "+t[i-1])}if(!T){var I=((s+x*l)*r.width+o)*e,O=x*S;for(d=0;d<N;d+=1){for(var D=0;D<e;D+=1)n[I++]=w[O++];I+=(a-1)*e}}x++}}return t=Z(t),1==r.interlaceMethod?(o(0,0,8,8),o(4,0,8,8),o(0,4,4,8),o(2,0,4,4),o(0,2,2,4),o(1,0,2,2),o(0,1,1,2)):o(0,0,1,1),n},i.prototype.decodePalette=function(){var t,e,n,i,r,o,s,a,l;for(n=this.palette,o=this.transparency.indexed||[],r=new Uint8Array((o.length||0)+n.length),i=0,t=0,e=s=0,a=n.length;s<a;e=s+=3)r[i++]=n[e],r[i++]=n[e+1],r[i++]=n[e+2],r[i++]=null!=(l=o[t++])?l:255;return r},i.prototype.copyToImageData=function(t,e){var n,i,r,o,s,a,l,c,h,u,d;if(i=this.colors,h=null,n=this.hasAlphaChannel,this.palette.length&&(h=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),i=4,n=!0),c=(r=t.data||t).length,s=h||e,o=a=0,1===i)for(;o<c;)l=h?4*e[o/4]:a,u=s[l++],r[o++]=u,r[o++]=u,r[o++]=u,r[o++]=n?s[l++]:255,a=l;else for(;o<c;)l=h?4*e[o/4]:a,r[o++]=s[l++],r[o++]=s[l++],r[o++]=s[l++],r[o++]=n?s[l++]:255,a=l},i.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};var r=function(){if("[object Window]"===Object.prototype.toString.call(tt)){try{e=tt.document.createElement("canvas"),n=e.getContext("2d")}catch(t){return!1}return!0}return!1};return r(),t=function(t){var i;if(!0===r())return n.width=t.width,n.height=t.height,n.clearRect(0,0,t.width,t.height),n.putImageData(t,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(e){var n,i,r,o,s,a,l,c;if(this.animation){for(c=[],i=s=0,a=(l=this.animation.frames).length;s<a;i=++s)n=l[i],r=e.createImageData(n.width,n.height),o=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(r,o),n.imageData=r,c.push(n.image=t(r));return c}},i.prototype.renderFrame=function(t,e){var n,i,r;return n=(i=this.animation.frames)[e],r=i[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=r?r.disposeOp:void 0)?t.clearRect(r.xOffset,r.yOffset,r.width,r.height):2===(null!=r?r.disposeOp:void 0)&&t.putImageData(r.imageData,r.xOffset,r.yOffset),0===n.blendOp&&t.clearRect(n.xOffset,n.yOffset,n.width,n.height),t.drawImage(n.image,n.xOffset,n.yOffset)},i.prototype.animate=function(t){var e,n,i,r,o,s,a=this;return n=0,s=this.animation,r=s.numFrames,i=s.frames,o=s.numPlays,(e=function(){var s,l;if(s=n++%r,l=i[s],a.renderFrame(t,s),r>1&&n/r<o)return a.animation._timeout=setTimeout(e,l.delay)})()},i.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},i.prototype.render=function(t){var e,n;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(n=e.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),e.putImageData(n,0,0))},i}();
/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
/**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Ve(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,r=t[e++],o=r>>7,s=1<<1+(7&r);t[e++],t[e++];var a=null,l=null;o&&(a=e,l=s,e+=3*s);var c=!0,h=[],u=0,d=null,p=0,f=null;for(this.width=n,this.height=i;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,f=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(0===C)break;e+=C}break;case 249:if(4!==t[e++]||0!==t[e+4])throw new Error("Invalid graphics extension block.");var m=t[e++];u=t[e++]|t[e++]<<8,d=t[e++],0==(1&m)&&(d=null),p=m>>2&7,e++;break;case 254:for(;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(0===C)break;e+=C}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,b=t[e++]|t[e++]<<8,w=t[e++],x=w>>6&1,S=1<<1+(7&w),k=a,_=l,E=!1;w>>7&&(E=!0,k=e,_=S,e+=3*S);var L=e;for(e++;;){var C;if(!((C=t[e++])>=0))throw Error("Invalid block size");if(0===C)break;e+=C}h.push({x:g,y:v,width:y,height:b,has_local_palette:E,palette_offset:k,palette_size:_,data_offset:L,data_length:e-L,transparent_index:d,interlaced:!!x,delay:u,disposal:p});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return f},this.frameInfo=function(t){if(t<0||t>=h.length)throw new Error("Frame index out of range.");return h[t]},this.decodeAndBlitFrameBGRA=function(e,i){var r=this.frameInfo(e),o=r.width*r.height,s=new Uint8Array(o);Ye(t,r.data_offset,s,o);var a=r.palette_offset,l=r.transparent_index;null===l&&(l=256);var c=r.width,h=n-c,u=c,d=4*(r.y*n+r.x),p=4*((r.y+r.height)*n+r.x),f=d,m=4*h;!0===r.interlaced&&(m+=4*n*7);for(var g=8,v=0,y=s.length;v<y;++v){var b=s[v];if(0===u&&(u=c,(f+=m)>=p&&(m=4*h+4*n*(g-1),f=d+(c+h)*(g<<1),g>>=1)),b===l)f+=4;else{var w=t[a+3*b],x=t[a+3*b+1],S=t[a+3*b+2];i[f++]=S,i[f++]=x,i[f++]=w,i[f++]=255}--u}},this.decodeAndBlitFrameRGBA=function(e,i){var r=this.frameInfo(e),o=r.width*r.height,s=new Uint8Array(o);Ye(t,r.data_offset,s,o);var a=r.palette_offset,l=r.transparent_index;null===l&&(l=256);var c=r.width,h=n-c,u=c,d=4*(r.y*n+r.x),p=4*((r.y+r.height)*n+r.x),f=d,m=4*h;!0===r.interlaced&&(m+=4*n*7);for(var g=8,v=0,y=s.length;v<y;++v){var b=s[v];if(0===u&&(u=c,(f+=m)>=p&&(m=4*h+4*n*(g-1),f=d+(c+h)*(g<<1),g>>=1)),b===l)f+=4;else{var w=t[a+3*b],x=t[a+3*b+1],S=t[a+3*b+2];i[f++]=w,i[f++]=x,i[f++]=S,i[f++]=255}--u}}}function Ye(t,e,n,i){for(var r=t[e++],o=1<<r,s=o+1,a=s+1,l=r+1,c=(1<<l)-1,h=0,u=0,d=0,p=t[e++],f=new Int32Array(4096),m=null;;){for(;h<16&&0!==p;)u|=t[e++]<<h,h+=8,1===p?p=t[e++]:--p;if(h<l)break;var g=u&c;if(u>>=l,h-=l,g!==o){if(g===s)break;for(var v=g<a?g:m,y=0,b=v;b>o;)b=f[b]>>8,++y;var w=b;if(d+y+(v!==g?1:0)>i)return void nt.log("Warning, gif stream longer than expected.");n[d++]=w;var x=d+=y;for(v!==g&&(n[d++]=w),b=v;y--;)b=f[b],n[--x]=255&b,b>>=8;null!==m&&a<4096&&(f[a++]=m<<8|w,a>=c+1&&l<12&&(++l,c=c<<1|1)),m=g}else a=s+1,c=(1<<(l=r+1))-1,m=null}return d!==i&&nt.log("Warning, gif stream shorter than expected."),n
/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/}function Je(t){var e,n,i,r,o,s=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),h=new Array(64),u=new Array(65535),d=new Array(65535),p=new Array(64),f=new Array(64),m=[],g=0,v=7,y=new Array(64),b=new Array(64),w=new Array(64),x=new Array(256),S=new Array(2048),k=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],N=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],P=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function T(t,e){for(var n=0,i=0,r=new Array,o=1;o<=16;o++){for(var s=1;s<=t[o];s++)r[e[i]]=[],r[e[i]][0]=n,r[e[i]][1]=o,i++,n++;n*=2}return r}function I(t){for(var e=t[0],n=t[1]-1;n>=0;)e&1<<n&&(g|=1<<v),n--,--v<0&&(255==g?(O(255),O(0)):O(g),v=7,g=0)}function O(t){m.push(t)}function D(t){O(t>>8&255),O(255&t)}function j(t,e,n,i,r){for(var o,s=r[0],a=r[240],l=function(t,e){var n,i,r,o,s,a,l,c,h,u,d=0;for(h=0;h<8;++h){n=t[d],i=t[d+1],r=t[d+2],o=t[d+3],s=t[d+4],a=t[d+5],l=t[d+6];var f=n+(c=t[d+7]),m=n-c,g=i+l,v=i-l,y=r+a,b=r-a,w=o+s,x=o-s,S=f+w,k=f-w,_=g+y,E=g-y;t[d]=S+_,t[d+4]=S-_;var L=.707106781*(E+k);t[d+2]=k+L,t[d+6]=k-L;var C=.382683433*((S=x+b)-(E=v+m)),A=.5411961*S+C,M=1.306562965*E+C,N=.707106781*(_=b+v),P=m+N,T=m-N;t[d+5]=T+A,t[d+3]=T-A,t[d+1]=P+M,t[d+7]=P-M,d+=8}for(d=0,h=0;h<8;++h){n=t[d],i=t[d+8],r=t[d+16],o=t[d+24],s=t[d+32],a=t[d+40],l=t[d+48];var I=n+(c=t[d+56]),O=n-c,D=i+l,j=i-l,R=r+a,F=r-a,B=o+s,z=o-s,$=I+B,q=I-B,U=D+R,G=D-R;t[d]=$+U,t[d+32]=$-U;var H=.707106781*(G+q);t[d+16]=q+H,t[d+48]=q-H;var W=.382683433*(($=z+F)-(G=j+O)),V=.5411961*$+W,Y=1.306562965*G+W,J=.707106781*(U=F+j),X=O+J,K=O-J;t[d+40]=K+V,t[d+24]=K-V,t[d+8]=X+Y,t[d+56]=X-Y,d++}for(h=0;h<64;++h)u=t[h]*e[h],p[h]=u>0?u+.5|0:u-.5|0;return p}(t,e),c=0;c<64;++c)f[k[c]]=l[c];var h=f[0]-n;n=f[0],0==h?I(i[0]):(I(i[d[o=32767+h]]),I(u[o]));for(var m=63;m>0&&0==f[m];)m--;if(0==m)return I(s),n;for(var g,v=1;v<=m;){for(var y=v;0==f[v]&&v<=m;)++v;var b=v-y;if(b>=16){g=b>>4;for(var w=1;w<=g;++w)I(a);b&=15}o=32767+f[v],I(r[(b<<4)+d[o]]),I(u[o]),v++}return 63!=m&&I(s),n}function R(t){t=Math.min(Math.max(t,1),100),o!=t&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var i=s((e[n]*t+50)/100);i=Math.min(Math.max(i,1),255),a[k[n]]=i}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],o=0;o<64;o++){var u=s((r[o]*t+50)/100);u=Math.min(Math.max(u,1),255),l[k[o]]=u}for(var d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],p=0,f=0;f<8;f++)for(var m=0;m<8;m++)c[p]=1/(a[k[p]]*d[f]*d[m]*8),h[p]=1/(l[k[p]]*d[f]*d[m]*8),p++}(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),o=t)}this.encode=function(t,o){o&&R(o),m=new Array,g=0,v=7,D(65496),D(65504),D(16),O(74),O(70),O(73),O(70),O(0),O(1),O(1),O(0),D(1),D(1),O(0),O(0),function(){D(65499),D(132),O(0);for(var t=0;t<64;t++)O(a[t]);O(1);for(var e=0;e<64;e++)O(l[e])}(),function(t,e){D(65472),D(17),O(8),D(e),D(t),O(3),O(1),O(17),O(0),O(2),O(17),O(1),O(3),O(17),O(1)}(t.width,t.height),function(){D(65476),D(418),O(0);for(var t=0;t<16;t++)O(_[t+1]);for(var e=0;e<=11;e++)O(E[e]);O(16);for(var n=0;n<16;n++)O(L[n+1]);for(var i=0;i<=161;i++)O(C[i]);O(1);for(var r=0;r<16;r++)O(A[r+1]);for(var o=0;o<=11;o++)O(M[o]);O(17);for(var s=0;s<16;s++)O(N[s+1]);for(var a=0;a<=161;a++)O(P[a])}(),D(65498),D(12),O(3),O(1),O(0),O(2),O(17),O(3),O(17),O(0),O(63),O(0);var s=0,u=0,d=0;g=0,v=7,this.encode.displayName="_encode_";for(var p,f,x,k,T,F,B,z,$,q=t.data,U=t.width,G=t.height,H=4*U,W=0;W<G;){for(p=0;p<H;){for(T=H*W+p,B=-1,z=0,$=0;$<64;$++)F=T+(z=$>>3)*H+(B=4*(7&$)),W+z>=G&&(F-=H*(W+1+z-G)),p+B>=H&&(F-=p+B-H+4),f=q[F++],x=q[F++],k=q[F++],y[$]=(S[f]+S[x+256>>0]+S[k+512>>0]>>16)-128,b[$]=(S[f+768>>0]+S[x+1024>>0]+S[k+1280>>0]>>16)-128,w[$]=(S[f+1280>>0]+S[x+1536>>0]+S[k+1792>>0]>>16)-128;s=j(y,c,s,e,i),u=j(b,h,u,n,r),d=j(w,h,d,n,r),p+=32}W+=8}if(v>=0){var V=[];V[1]=v+1,V[0]=(1<<v+1)-1,I(V)}return D(65497),new Uint8Array(m)},t=t||50,function(){for(var t=String.fromCharCode,e=0;e<256;e++)x[e]=t(e)}(),e=T(_,E),n=T(A,M),i=T(L,C),r=T(N,P),function(){for(var t=1,e=2,n=1;n<=15;n++){for(var i=t;i<e;i++)d[32767+i]=n,u[32767+i]=[],u[32767+i][1]=n,u[32767+i][0]=i;for(var r=-(e-1);r<=-t;r++)d[32767+r]=n,u[32767+r]=[],u[32767+r][1]=n,u[32767+r][0]=e-1+r;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)S[t]=19595*t,S[t+256>>0]=38470*t,S[t+512>>0]=7471*t+32768,S[t+768>>0]=-11059*t,S[t+1024>>0]=-21709*t,S[t+1280>>0]=32768*t+8421375,S[t+1536>>0]=-27439*t,S[t+1792>>0]=-5329*t}(),R(t)}
/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Xe(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ke(t){function e(t){if(!t)throw Error("assert :P")}function n(t,e,n){for(var i=0;4>i;i++)if(t[e+i]!=n.charCodeAt(i))return!0;return!1}function i(t,e,n,i,r){for(var o=0;o<r;o++)t[e+o]=n[i+o]}function r(t,e,n,i){for(var r=0;r<i;r++)t[e+r]=n}function o(t){return new Int32Array(t)}function s(t,e){for(var n=[],i=0;i<t;i++)n.push(new e);return n}function a(t,e){var n=[];return function t(n,i,r){for(var o=r[i],s=0;s<o&&(n.push(r.length>i+1?[]:new e),!(r.length<i+1));s++)t(n[s],i+1,r)}(n,0,t),n}var l=function(){var t=this;function l(t,e){for(var n=1<<e-1>>>0;t&n;)n>>>=1;return n?(t&n-1)+n:t}function c(t,n,i,r,o){e(!(r%i));do{t[n+(r-=i)]=o}while(0<r)}function h(t,n,i,r,s){if(e(2328>=s),512>=s)var a=o(512);else if(null==(a=o(s)))return 0;return function(t,n,i,r,s,a){var h,d,p=n,f=1<<i,m=o(16),g=o(16);for(e(0!=s),e(null!=r),e(null!=t),e(0<i),d=0;d<s;++d){if(15<r[d])return 0;++m[r[d]]}if(m[0]==s)return 0;for(g[1]=0,h=1;15>h;++h){if(m[h]>1<<h)return 0;g[h+1]=g[h]+m[h]}for(d=0;d<s;++d)h=r[d],0<r[d]&&(a[g[h]++]=d);if(1==g[15])return(r=new u).g=0,r.value=a[0],c(t,p,1,f,r),f;var v,y=-1,b=f-1,w=0,x=1,S=1,k=1<<i;for(d=0,h=1,s=2;h<=i;++h,s<<=1){if(x+=S<<=1,0>(S-=m[h]))return 0;for(;0<m[h];--m[h])(r=new u).g=h,r.value=a[d++],c(t,p+w,s,k,r),w=l(w,h)}for(h=i+1,s=2;15>=h;++h,s<<=1){if(x+=S<<=1,0>(S-=m[h]))return 0;for(;0<m[h];--m[h]){if(r=new u,(w&b)!=y){for(p+=k,v=1<<(y=h)-i;15>y&&!(0>=(v-=m[y]));)++y,v<<=1;f+=k=1<<(v=y-i),t[n+(y=w&b)].g=v+i,t[n+y].value=p-n-y}r.g=h-i,r.value=a[d++],c(t,p+(w>>i),s,k,r),w=l(w,h)}}return x!=2*g[15]-1?0:f}(t,n,i,r,s,a)}function u(){this.value=this.g=0}function d(){this.value=this.g=0}function p(){this.G=s(5,u),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Bn,d)}function f(t,n,i,r){e(null!=t),e(null!=n),e(2147483648>r),t.Ca=254,t.I=0,t.b=-8,t.Ka=0,t.oa=n,t.pa=i,t.Jd=n,t.Yc=i+r,t.Zc=4<=r?i+r-4+1:i,L(t)}function m(t,e){for(var n=0;0<e--;)n|=A(t,128)<<e;return n}function g(t,e){var n=m(t,e);return C(t)?-n:n}function v(t,n,i,r){var o,s=0;for(e(null!=t),e(null!=n),e(4294967288>r),t.Sb=r,t.Ra=0,t.u=0,t.h=0,4<r&&(r=4),o=0;o<r;++o)s+=n[i+o]<<8*o;t.Ra=s,t.bb=r,t.oa=n,t.pa=i}function y(t){for(;8<=t.u&&t.bb<t.Sb;)t.Ra>>>=8,t.Ra+=t.oa[t.pa+t.bb]<<qn-8>>>0,++t.bb,t.u-=8;k(t)&&(t.h=1,t.u=0)}function b(t,n){if(e(0<=n),!t.h&&n<=$n){var i=S(t)&zn[n];return t.u+=n,y(t),i}return t.h=1,t.u=0}function w(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function x(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function S(t){return t.Ra>>>(t.u&qn-1)>>>0}function k(t){return e(t.bb<=t.Sb),t.h||t.bb==t.Sb&&t.u>qn}function _(t,e){t.u=e,t.h=k(t)}function E(t){t.u>=Un&&(e(t.u>=Un),y(t))}function L(t){e(null!=t&&null!=t.oa),t.pa<t.Zc?(t.I=(t.oa[t.pa++]|t.I<<8)>>>0,t.b+=8):(e(null!=t&&null!=t.oa),t.pa<t.Yc?(t.b+=8,t.I=t.oa[t.pa++]|t.I<<8):t.Ka?t.b=0:(t.I<<=8,t.b+=8,t.Ka=1))}function C(t){return m(t,1)}function A(t,e){var n=t.Ca;0>t.b&&L(t);var i=t.b,r=n*e>>>8,o=(t.I>>>i>r)+0;for(o?(n-=r,t.I-=r+1<<i>>>0):n=r+1,i=n,r=0;256<=i;)r+=8,i>>=8;return i=7^r+Gn[i],t.b-=i,t.Ca=(n<<i)-1,o}function M(t,e,n){t[e+0]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n>>0&255}function N(t,e){return t[e+0]<<0|t[e+1]<<8}function P(t,e){return N(t,e)|t[e+2]<<16}function T(t,e){return N(t,e)|N(t,e+2)<<16}function I(t,n){var i=1<<n;return e(null!=t),e(0<n),t.X=o(i),null==t.X?0:(t.Mb=32-n,t.Xa=n,1)}function O(t,n){e(null!=t),e(null!=n),e(t.Xa==n.Xa),i(n.X,0,t.X,0,1<<n.Xa)}function D(){this.X=[],this.Xa=this.Mb=0}function j(t,n,i,r){e(null!=i),e(null!=r);var o=i[0],s=r[0];return 0==o&&(o=(t*s+n/2)/n),0==s&&(s=(n*o+t/2)/t),0>=o||0>=s?0:(i[0]=o,r[0]=s,1)}function R(t,e){return t+(1<<e)-1>>>e}function F(t,e){return((4278255360&t)+(4278255360&e)>>>0&4278255360)+((16711935&t)+(16711935&e)>>>0&16711935)>>>0}function B(e,n){t[n]=function(n,i,r,o,s,a,l){var c;for(c=0;c<s;++c){var h=t[e](a[l+c-1],r,o+c);a[l+c]=F(n[i+c],h)}}}function z(){this.ud=this.hd=this.jd=0}function $(t,e){return((4278124286&(t^e))>>>1)+(t&e)>>>0}function q(t){return 0<=t&&256>t?t:0>t?0:255<t?255:void 0}function U(t,e){return q(t+(t-e+.5>>1))}function G(t,e,n){return Math.abs(e-n)-Math.abs(t-n)}function H(t,e,n,i,r,o,s){for(i=o[s-1],n=0;n<r;++n)o[s+n]=i=F(t[e+n],i)}function W(t,e,n,i,r){var o;for(o=0;o<n;++o){var s=t[e+o],a=s>>8&255,l=16711935&(l=(l=16711935&s)+((a<<16)+a));i[r+o]=(4278255360&s)+l>>>0}}function V(t,e){e.jd=t>>0&255,e.hd=t>>8&255,e.ud=t>>16&255}function Y(t,e,n,i,r,o){var s;for(s=0;s<i;++s){var a=e[n+s],l=a>>>8,c=a,h=255&(h=(h=a>>>16)+((t.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(t.hd<<24>>24)*(l<<24>>24)>>>5)+((t.ud<<24>>24)*(h<<24>>24)>>>5)),r[o+s]=(4278255360&a)+(h<<16)+c}}function J(e,n,i,r,o){t[n]=function(t,e,n,i,s,a,l,c,h){for(i=l;i<c;++i)for(l=0;l<h;++l)s[a++]=o(n[r(t[e++])])},t[e]=function(e,n,s,a,l,c,h){var u=8>>e.b,d=e.Ea,p=e.K[0],f=e.w;if(8>u)for(e=(1<<e.b)-1,f=(1<<u)-1;n<s;++n){var m,g=0;for(m=0;m<d;++m)m&e||(g=r(a[l++])),c[h++]=o(p[g&f]),g>>=u}else t["VP8LMapColor"+i](a,l,p,f,c,h,n,s,d)}}function X(t,e,n,i,r){for(n=e+n;e<n;){var o=t[e++];i[r++]=o>>16&255,i[r++]=o>>8&255,i[r++]=o>>0&255}}function K(t,e,n,i,r){for(n=e+n;e<n;){var o=t[e++];i[r++]=o>>16&255,i[r++]=o>>8&255,i[r++]=o>>0&255,i[r++]=o>>24&255}}function Z(t,e,n,i,r){for(n=e+n;e<n;){var o=(s=t[e++])>>16&240|s>>12&15,s=s>>0&240|s>>28&15;i[r++]=o,i[r++]=s}}function Q(t,e,n,i,r){for(n=e+n;e<n;){var o=(s=t[e++])>>16&248|s>>13&7,s=s>>5&224|s>>3&31;i[r++]=o,i[r++]=s}}function tt(t,e,n,i,r){for(n=e+n;e<n;){var o=t[e++];i[r++]=o>>0&255,i[r++]=o>>8&255,i[r++]=o>>16&255}}function et(t,e,n,r,o,s){if(0==s)for(n=e+n;e<n;)M(r,((s=t[e++])[0]>>24|s[1]>>8&65280|s[2]<<8&16711680|s[3]<<24)>>>0),o+=32;else i(r,o,t,e,n)}function nt(e,n){t[n][0]=t[e+"0"],t[n][1]=t[e+"1"],t[n][2]=t[e+"2"],t[n][3]=t[e+"3"],t[n][4]=t[e+"4"],t[n][5]=t[e+"5"],t[n][6]=t[e+"6"],t[n][7]=t[e+"7"],t[n][8]=t[e+"8"],t[n][9]=t[e+"9"],t[n][10]=t[e+"10"],t[n][11]=t[e+"11"],t[n][12]=t[e+"12"],t[n][13]=t[e+"13"],t[n][14]=t[e+"0"],t[n][15]=t[e+"0"]}function it(t){return t==Ui||t==Gi||t==Hi||t==Wi}function rt(){this.eb=[],this.size=this.A=this.fb=0}function ot(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function st(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new rt,this.f.kb=new ot,this.sd=null}function at(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ct(t){return alert("todo:WebPSamplerProcessPlane"),t.T}function ht(t,e){var n=t.T,r=e.ba.f.RGBA,o=r.eb,s=r.fb+t.ka*r.A,a=vr[e.ba.S],l=t.y,c=t.O,h=t.f,u=t.N,d=t.ea,p=t.W,f=e.cc,m=e.dc,g=e.Mc,v=e.Nc,y=t.ka,b=t.ka+t.T,w=t.U,x=w+1>>1;for(0==y?a(l,c,null,null,h,u,d,p,h,u,d,p,o,s,null,null,w):(a(e.ec,e.fc,l,c,f,m,g,v,h,u,d,p,o,s-r.A,o,s,w),++n);y+2<b;y+=2)f=h,m=u,g=d,v=p,u+=t.Rc,p+=t.Rc,s+=2*r.A,a(l,(c+=2*t.fa)-t.fa,l,c,f,m,g,v,h,u,d,p,o,s-r.A,o,s,w);return c+=t.fa,t.j+b<t.o?(i(e.ec,e.fc,l,c,w),i(e.cc,e.dc,h,u,x),i(e.Mc,e.Nc,d,p,x),n--):1&b||a(l,c,null,null,h,u,d,p,h,u,d,p,o,s+r.A,null,null,w),n}function ut(t,n,i){var r=t.F,o=[t.J];if(null!=r){var s=t.U,a=n.ba.S,l=a==zi||a==Hi;n=n.ba.f.RGBA;var c=[0],h=t.ka;c[0]=t.T,t.Kb&&(0==h?--c[0]:(--h,o[0]-=t.width),t.j+t.ka+t.T==t.o&&(c[0]=t.o-t.j-h));var u=n.eb;h=n.fb+h*n.A,t=Ei(r,o[0],t.width,s,c,u,h+(l?0:3),n.A),e(i==c),t&&it(a)&&ki(u,h,l,s,c,n.A)}return 0}function dt(t){var e=t.ma,n=e.ba.S,i=11>n,r=n==Ri||n==Bi||n==zi||n==$i||12==n||it(n);if(e.memory=null,e.Ib=null,e.Jb=null,e.Nd=null,!jn(e.Oa,t,r?11:12))return 0;if(r&&it(n)&&bn(),t.da)alert("todo:use_scaling");else{if(i){if(e.Ib=ct,t.Kb){if(n=t.U+1>>1,e.memory=o(t.U+2*n),null==e.memory)return 0;e.ec=e.memory,e.fc=0,e.cc=e.ec,e.dc=e.fc+t.U,e.Mc=e.cc,e.Nc=e.dc+n,e.Ib=ht,bn()}}else alert("todo:EmitYUV");r&&(e.Jb=ut,i&&vn())}if(i&&!Pr){for(t=0;256>t;++t)Tr[t]=89858*(t-128)+Lr>>Er,Dr[t]=-22014*(t-128)+Lr,Or[t]=-45773*(t-128),Ir[t]=113618*(t-128)+Lr>>Er;for(t=Cr;t<Ar;++t)e=76283*(t-16)+Lr>>Er,jr[t-Cr]=Ht(e,255),Rr[t-Cr]=Ht(e+8>>4,15);Pr=1}return 1}function pt(t){var n=t.ma,i=t.U,r=t.T;return e(!(1&t.ka)),0>=i||0>=r?0:(i=n.Ib(t,n),null!=n.Jb&&n.Jb(t,n,i),n.Dc+=i,1)}function ft(t){t.ma.memory=null}function mt(t,e,n,i){return 47!=b(t,8)?0:(e[0]=b(t,14)+1,n[0]=b(t,14)+1,i[0]=b(t,1),0!=b(t,3)?0:!t.h)}function gt(t,e){if(4>t)return t+1;var n=t-2>>1;return(2+(1&t)<<n)+b(e,n)+1}function vt(t,e){return 120<e?e-120:1<=(n=((n=Zi[e-1])>>4)*t+(8-(15&n)))?n:1;var n}function yt(t,e,n){var i=S(n),r=t[e+=255&i].g-8;return 0<r&&(_(n,n.u+8),i=S(n),e+=t[e].value,e+=i&(1<<r)-1),_(n,n.u+t[e].g),t[e].value}function bt(t,n,i){return i.g+=t.g,i.value+=t.value<<n>>>0,e(8>=i.g),t.g}function wt(t,n,i){var r=t.xc;return e((n=0==r?0:t.vc[t.md*(i>>r)+(n>>r)])<t.Wb),t.Ya[n]}function xt(t,n,r,o){var s=t.ab,a=t.c*n,l=t.C;n=l+n;var c=r,h=o;for(o=t.Ta,r=t.Ua;0<s--;){var u=t.gc[s],d=l,p=n,f=c,m=h,g=(h=o,c=r,u.Ea);switch(e(d<p),e(p<=u.nc),u.hc){case 2:Vn(f,m,(p-d)*g,h,c);break;case 0:var v=d,y=p,b=h,w=c,x=(L=u).Ea;0==v&&(Hn(f,m,null,null,1,b,w),H(f,m+1,0,0,x-1,b,w+1),m+=x,w+=x,++v);for(var S=1<<L.b,k=S-1,_=R(x,L.b),E=L.K,L=L.w+(v>>L.b)*_;v<y;){var C=E,A=L,M=1;for(Wn(f,m,b,w-x,1,b,w);M<x;){var N=(M&~k)+S;N>x&&(N=x),(0,Zn[C[A++]>>8&15])(f,m+ +M,b,w+M-x,N-M,b,w+M),M=N}m+=x,w+=x,++v&k||(L+=_)}p!=u.nc&&i(h,c-g,h,c+(p-d-1)*g,g);break;case 1:for(g=f,y=m,x=(f=u.Ea)-(w=f&~(b=(m=1<<u.b)-1)),v=R(f,u.b),S=u.K,u=u.w+(d>>u.b)*v;d<p;){for(k=S,_=u,E=new z,L=y+w,C=y+f;y<L;)V(k[_++],E),Qn(E,g,y,m,h,c),y+=m,c+=m;y<C&&(V(k[_++],E),Qn(E,g,y,x,h,c),y+=x,c+=x),++d&b||(u+=v)}break;case 3:if(f==h&&m==c&&0<u.b){for(y=h,f=g=c+(p-d)*g-(w=(p-d)*R(u.Ea,u.b)),m=h,b=c,v=[],w=(x=w)-1;0<=w;--w)v[w]=m[b+w];for(w=x-1;0<=w;--w)y[f+w]=v[w];Yn(u,d,p,h,g,h,c)}else Yn(u,d,p,f,m,h,c)}c=o,h=r}h!=r&&i(o,r,c,h,a)}function St(t,n){var i=t.V,r=t.Ba+t.c*t.C,o=n-t.C;if(e(n<=t.l.o),e(16>=o),0<o){var s=t.l,a=t.Ta,l=t.Ua,c=s.width;if(xt(t,o,i,r),o=l=[l],e((i=t.C)<(r=n)),e(s.v<s.va),r>s.o&&(r=s.o),i<s.j){var h=s.j-i;i=s.j,o[0]+=h*c}if(i>=r?i=0:(o[0]+=4*s.v,s.ka=i-s.j,s.U=s.va-s.v,s.T=r-i,i=1),i){if(l=l[0],11>(i=t.ca).S){var u=i.f.RGBA,d=(r=i.S,o=s.U,s=s.T,h=u.eb,u.A),p=s;for(u=u.fb+t.Ma*u.A;0<p--;){var f=a,m=l,g=o,v=h,y=u;switch(r){case ji:ti(f,m,g,v,y);break;case Ri:ei(f,m,g,v,y);break;case Ui:ei(f,m,g,v,y),ki(v,y,0,g,1,0);break;case Fi:ri(f,m,g,v,y);break;case Bi:et(f,m,g,v,y,1);break;case Gi:et(f,m,g,v,y,1),ki(v,y,0,g,1,0);break;case zi:et(f,m,g,v,y,0);break;case Hi:et(f,m,g,v,y,0),ki(v,y,1,g,1,0);break;case $i:ni(f,m,g,v,y);break;case Wi:ni(f,m,g,v,y),_i(v,y,g,1,0);break;case qi:ii(f,m,g,v,y);break;default:e(0)}l+=c,u+=d}t.Ma+=s}else alert("todo:EmitRescaledRowsYUVA");e(t.Ma<=i.height)}}t.C=n,e(t.C<=t.i)}function kt(t){var e;if(0<t.ua)return 0;for(e=0;e<t.Wb;++e){var n=t.Ya[e].G,i=t.Ya[e].H;if(0<n[1][i[1]+0].g||0<n[2][i[2]+0].g||0<n[3][i[3]+0].g)return 0}return 1}function _t(t,n,i,r,o,s){if(0!=t.Z){var a=t.qd,l=t.rd;for(e(null!=gr[t.Z]);n<i;++n)gr[t.Z](a,l,r,o,r,o,s),a=r,l=o,o+=s;t.qd=a,t.rd=l}}function Et(t,n){var i=t.l.ma,r=0==i.Z||1==i.Z?t.l.j:t.C;if(r=t.C<r?r:t.C,e(n<=t.l.o),n>r){var o=t.l.width,s=i.ca,a=i.tb+o*r,l=t.V,c=t.Ba+t.c*r,h=t.gc;e(1==t.ab),e(3==h[0].hc),Xn(h[0],r,n,l,c,s,a),_t(i,r,n,s,a,o)}t.C=t.Ma=n}function Lt(t,n,i,r,o,s,a){var l=t.$/r,c=t.$%r,h=t.m,u=t.s,d=i+t.$,p=d;o=i+r*o;var f=i+r*s,m=280+u.ua,g=t.Pb?l:16777216,v=0<u.ua?u.Wa:null,y=u.wc,b=d<f?wt(u,c,l):null;e(t.C<s),e(f<=o);var w=!1;t:for(;;){for(;w||d<f;){var x=0;if(l>=g){var L=d-i;e((g=t).Pb),g.wd=g.m,g.xd=L,0<g.s.ua&&O(g.s.Wa,g.s.vb),g=l+tr}if(c&y||(b=wt(u,c,l)),e(null!=b),b.Qb&&(n[d]=b.qb,w=!0),!w)if(E(h),b.jc){x=h,L=n;var C=d,A=b.pd[S(x)&Bn-1];e(b.jc),256>A.g?(_(x,x.u+A.g),L[C]=A.value,x=0):(_(x,x.u+A.g-256),e(256<=A.value),x=A.value),0==x&&(w=!0)}else x=yt(b.G[0],b.H[0],h);if(h.h)break;if(w||256>x){if(!w)if(b.nd)n[d]=(b.qb|x<<8)>>>0;else{if(E(h),w=yt(b.G[1],b.H[1],h),E(h),L=yt(b.G[2],b.H[2],h),C=yt(b.G[3],b.H[3],h),h.h)break;n[d]=(C<<24|w<<16|x<<8|L)>>>0}if(w=!1,++d,++c>=r&&(c=0,++l,null!=a&&l<=s&&!(l%16)&&a(t,l),null!=v))for(;p<d;)x=n[p++],v.X[(506832829*x&4294967295)>>>v.Mb]=x}else if(280>x){if(x=gt(x-256,h),L=yt(b.G[4],b.H[4],h),E(h),L=vt(r,L=gt(L,h)),h.h)break;if(d-i<L||o-d<x)break t;for(C=0;C<x;++C)n[d+C]=n[d+C-L];for(d+=x,c+=x;c>=r;)c-=r,++l,null!=a&&l<=s&&!(l%16)&&a(t,l);if(e(d<=o),c&y&&(b=wt(u,c,l)),null!=v)for(;p<d;)x=n[p++],v.X[(506832829*x&4294967295)>>>v.Mb]=x}else{if(!(x<m))break t;for(w=x-280,e(null!=v);p<d;)x=n[p++],v.X[(506832829*x&4294967295)>>>v.Mb]=x;x=d,e(!(w>>>(L=v).Xa)),n[x]=L.X[w],w=!0}w||e(h.h==k(h))}if(t.Pb&&h.h&&d<o)e(t.m.h),t.a=5,t.m=t.wd,t.$=t.xd,0<t.s.ua&&O(t.s.vb,t.s.Wa);else{if(h.h)break t;null!=a&&a(t,l>s?s:l),t.a=0,t.$=d-i}return 1}return t.a=3,0}function Ct(t){e(null!=t),t.vc=null,t.yc=null,t.Ya=null;var n=t.Wa;null!=n&&(n.X=null),t.vb=null,e(null!=t)}function At(){var e=new an;return null==e?null:(e.a=0,e.xb=mr,nt("Predictor","VP8LPredictors"),nt("Predictor","VP8LPredictors_C"),nt("PredictorAdd","VP8LPredictorsAdd"),nt("PredictorAdd","VP8LPredictorsAdd_C"),Vn=W,Qn=Y,ti=X,ei=K,ni=Z,ii=Q,ri=tt,t.VP8LMapColor32b=Jn,t.VP8LMapColor8b=Kn,e)}function Mt(t,n,i,a,l){var c=1,d=[t],f=[n],m=a.m,g=a.s,v=null,y=0;t:for(;;){if(i)for(;c&&b(m,1);){var w=d,x=f,k=a,L=1,C=k.m,A=k.gc[k.ab],M=b(C,2);if(k.Oc&1<<M)c=0;else{switch(k.Oc|=1<<M,A.hc=M,A.Ea=w[0],A.nc=x[0],A.K=[null],++k.ab,e(4>=k.ab),M){case 0:case 1:A.b=b(C,3)+2,L=Mt(R(A.Ea,A.b),R(A.nc,A.b),0,k,A.K),A.K=A.K[0];break;case 3:var N,P=b(C,8)+1,T=16<P?0:4<P?1:2<P?2:3;if(w[0]=R(A.Ea,T),A.b=T,N=L=Mt(P,1,0,k,A.K)){var O,D=P,j=A,B=1<<(8>>j.b),z=o(B);if(null==z)N=0;else{var $=j.K[0],q=j.w;for(z[0]=j.K[0][0],O=1;O<1*D;++O)z[O]=F($[q+O],z[O-1]);for(;O<4*B;++O)z[O]=0;j.K[0]=null,j.K[0]=z,N=1}}L=N;break;case 2:break;default:e(0)}c=L}}if(d=d[0],f=f[0],c&&b(m,1)&&!(c=1<=(y=b(m,4))&&11>=y)){a.a=3;break t}var U;if(U=c)e:{var G,H,W,V=a,Y=d,J=f,X=y,K=i,Z=V.m,Q=V.s,tt=[null],et=1,nt=0,it=Qi[X];n:for(;;){if(K&&b(Z,1)){var rt=b(Z,3)+2,ot=R(Y,rt),st=R(J,rt),at=ot*st;if(!Mt(ot,st,0,V,tt))break n;for(tt=tt[0],Q.xc=rt,G=0;G<at;++G){var lt=tt[G]>>8&65535;tt[G]=lt,lt>=et&&(et=lt+1)}}if(Z.h)break n;for(H=0;5>H;++H){var ct=Ji[H];!H&&0<X&&(ct+=1<<X),nt<ct&&(nt=ct)}var ht=s(et*it,u),ut=et,dt=s(ut,p);if(null==dt)var pt=null;else e(65536>=ut),pt=dt;var ft=o(nt);if(null==pt||null==ft||null==ht){V.a=1;break n}var mt=ht;for(G=W=0;G<et;++G){var gt=pt[G],vt=gt.G,yt=gt.H,wt=0,xt=1,St=0;for(H=0;5>H;++H){ct=Ji[H],vt[H]=mt,yt[H]=W,!H&&0<X&&(ct+=1<<X);i:{var kt,_t=ct,Et=V,At=ft,Nt=mt,Pt=W,Tt=0,It=Et.m,Ot=b(It,1);if(r(At,0,0,_t),Ot){var Dt=b(It,1)+1,jt=b(It,1),Rt=b(It,0==jt?1:8);At[Rt]=1,2==Dt&&(At[Rt=b(It,8)]=1);var Ft=1}else{var Bt=o(19),zt=b(It,4)+4;if(19<zt){Et.a=3;var $t=0;break i}for(kt=0;kt<zt;++kt)Bt[Ki[kt]]=b(It,3);var qt=void 0,Ut=void 0,Gt=Et,Ht=Bt,Wt=_t,Vt=At,Yt=0,Jt=Gt.m,Xt=8,Kt=s(128,u);r:for(;h(Kt,0,7,Ht,19);){if(b(Jt,1)){var Zt=2+2*b(Jt,3);if((qt=2+b(Jt,Zt))>Wt)break r}else qt=Wt;for(Ut=0;Ut<Wt&&qt--;){E(Jt);var Qt=Kt[0+(127&S(Jt))];_(Jt,Jt.u+Qt.g);var te=Qt.value;if(16>te)Vt[Ut++]=te,0!=te&&(Xt=te);else{var ee=16==te,ne=te-16,ie=Yi[ne],re=b(Jt,Vi[ne])+ie;if(Ut+re>Wt)break r;for(var oe=ee?Xt:0;0<re--;)Vt[Ut++]=oe}}Yt=1;break r}Yt||(Gt.a=3),Ft=Yt}(Ft=Ft&&!It.h)&&(Tt=h(Nt,Pt,8,At,_t)),Ft&&0!=Tt?$t=Tt:(Et.a=3,$t=0)}if(0==$t)break n;if(xt&&1==Xi[H]&&(xt=0==mt[W].g),wt+=mt[W].g,W+=$t,3>=H){var se,ae=ft[0];for(se=1;se<ct;++se)ft[se]>ae&&(ae=ft[se]);St+=ae}}if(gt.nd=xt,gt.Qb=0,xt&&(gt.qb=(vt[3][yt[3]+0].value<<24|vt[1][yt[1]+0].value<<16|vt[2][yt[2]+0].value)>>>0,0==wt&&256>vt[0][yt[0]+0].value&&(gt.Qb=1,gt.qb+=vt[0][yt[0]+0].value<<8)),gt.jc=!gt.Qb&&6>St,gt.jc){var le,ce=gt;for(le=0;le<Bn;++le){var he=le,ue=ce.pd[he],de=ce.G[0][ce.H[0]+he];256<=de.value?(ue.g=de.g+256,ue.value=de.value):(ue.g=0,ue.value=0,he>>=bt(de,8,ue),he>>=bt(ce.G[1][ce.H[1]+he],16,ue),he>>=bt(ce.G[2][ce.H[2]+he],0,ue),bt(ce.G[3][ce.H[3]+he],24,ue))}}}Q.vc=tt,Q.Wb=et,Q.Ya=pt,Q.yc=ht,U=1;break e}U=0}if(!(c=U)){a.a=3;break t}if(0<y){if(g.ua=1<<y,!I(g.Wa,y)){a.a=1,c=0;break t}}else g.ua=0;var pe=a,fe=d,me=f,ge=pe.s,ve=ge.xc;if(pe.c=fe,pe.i=me,ge.md=R(fe,ve),ge.wc=0==ve?-1:(1<<ve)-1,i){a.xb=fr;break t}if(null==(v=o(d*f))){a.a=1,c=0;break t}c=(c=Lt(a,v,0,d,f,f,null))&&!m.h;break t}return c?(null!=l?l[0]=v:(e(null==v),e(i)),a.$=0,i||Ct(g)):Ct(g),c}function Nt(t,n){var i=t.c*t.i,r=i+n+16*n;return e(t.c<=n),t.V=o(r),null==t.V?(t.Ta=null,t.Ua=0,t.a=1,0):(t.Ta=t.V,t.Ua=t.Ba+i+n,1)}function Pt(t,n){var i=t.C,r=n-i,o=t.V,s=t.Ba+t.c*i;for(e(n<=t.l.o);0<r;){var a=16<r?16:r,l=t.l.ma,c=t.l.width,h=c*a,u=l.ca,d=l.tb+c*i,p=t.Ta,f=t.Ua;xt(t,a,o,s),Li(p,f,u,d,h),_t(l,i,i+a,u,d,c),r-=a,o+=a*t.c,i+=a}e(i==n),t.C=t.Ma=n}function Tt(){this.ub=this.yd=this.td=this.Rb=0}function It(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ot(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function Dt(){this.Yb=function(){var t=[];return function t(e,n,i){for(var r=i[n],o=0;o<r&&(e.push(i.length>n+1?[]:0),!(i.length<n+1));o++)t(e[o],n+1,i)}(t,0,[3,11]),t}()}function jt(){this.jb=o(3),this.Wc=a([4,8],Dt),this.Xc=a([4,17],Dt)}function Rt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Ft(){this.ld=this.La=this.dd=this.tc=0}function Bt(){this.Na=this.la=0}function zt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function $t(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function qt(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ft),this.Y=0,this.ya=Array(new $t),this.aa=0,this.l=new Wt}function Ut(){this.y=o(16),this.f=o(8),this.ea=o(8)}function Gt(){this.cb=this.a=0,this.sc="",this.m=new w,this.Od=new Tt,this.Kc=new It,this.ed=new Rt,this.Qa=new Ot,this.Ic=this.$c=this.Aa=0,this.D=new qt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,w),this.ia=0,this.pb=s(4,zt),this.Pa=new jt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ut),this.Hd=0,this.rb=Array(new Bt),this.sb=0,this.wa=Array(new Ft),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new $t),this.L=this.aa=0,this.gd=a([4,2],Ft),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ht(t,e){return 0>t?0:t>e?e:t}function Wt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Vt(){var t=new Gt;return null!=t&&(t.a=0,t.sc="OK",t.cb=0,t.Xb=0,ir||(ir=Kt)),t}function Yt(t,e,n){return 0==t.a&&(t.a=e,t.sc=n,t.cb=0),0}function Jt(t,e,n){return 3<=n&&157==t[e+0]&&1==t[e+1]&&42==t[e+2]}function Xt(t,n){if(null==t)return 0;if(t.a=0,t.sc="OK",null==n)return Yt(t,2,"null VP8Io passed to VP8GetHeaders()");var i=n.data,o=n.w,s=n.ha;if(4>s)return Yt(t,7,"Truncated header.");var a=i[o+0]|i[o+1]<<8|i[o+2]<<16,l=t.Od;if(l.Rb=!(1&a),l.td=a>>1&7,l.yd=a>>4&1,l.ub=a>>5,3<l.td)return Yt(t,3,"Incorrect keyframe parameters.");if(!l.yd)return Yt(t,4,"Frame not displayable.");o+=3,s-=3;var c=t.Kc;if(l.Rb){if(7>s)return Yt(t,7,"cannot parse picture header");if(!Jt(i,o,s))return Yt(t,3,"Bad code word");c.c=16383&(i[o+4]<<8|i[o+3]),c.Td=i[o+4]>>6,c.i=16383&(i[o+6]<<8|i[o+5]),c.Ud=i[o+6]>>6,o+=7,s-=7,t.za=c.c+15>>4,t.Ub=c.i+15>>4,n.width=c.c,n.height=c.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,r((a=t.Pa).jb,0,255,a.jb.length),e(null!=(a=t.Qa)),a.Cb=0,a.Bb=0,a.Fb=1,r(a.Zb,0,0,a.Zb.length),r(a.Lb,0,0,a.Lb)}if(l.ub>s)return Yt(t,7,"bad partition length");f(a=t.m,i,o,l.ub),o+=l.ub,s-=l.ub,l.Rb&&(c.Ld=C(a),c.Kd=C(a)),c=t.Qa;var h,u=t.Pa;if(e(null!=a),e(null!=c),c.Cb=C(a),c.Cb){if(c.Bb=C(a),C(a)){for(c.Fb=C(a),h=0;4>h;++h)c.Zb[h]=C(a)?g(a,7):0;for(h=0;4>h;++h)c.Lb[h]=C(a)?g(a,6):0}if(c.Bb)for(h=0;3>h;++h)u.jb[h]=C(a)?m(a,8):255}else c.Bb=0;if(a.Ka)return Yt(t,3,"cannot parse segment header");if((c=t.ed).zd=C(a),c.Tb=m(a,6),c.wb=m(a,3),c.Pc=C(a),c.Pc&&C(a)){for(u=0;4>u;++u)C(a)&&(c.vd[u]=g(a,6));for(u=0;4>u;++u)C(a)&&(c.od[u]=g(a,6))}if(t.L=0==c.Tb?0:c.zd?1:2,a.Ka)return Yt(t,3,"cannot parse filter header");var d=s;if(s=h=o,o=h+d,c=d,t.Xb=(1<<m(t.m,2))-1,d<3*(u=t.Xb))i=7;else{for(h+=3*u,c-=3*u,d=0;d<u;++d){var p=i[s+0]|i[s+1]<<8|i[s+2]<<16;p>c&&(p=c),f(t.Jc[+d],i,h,p),h+=p,c-=p,s+=3}f(t.Jc[+u],i,h,c),i=h<o?0:5}if(0!=i)return Yt(t,i,"cannot parse partitions");for(i=m(h=t.m,7),s=C(h)?g(h,4):0,o=C(h)?g(h,4):0,c=C(h)?g(h,4):0,u=C(h)?g(h,4):0,h=C(h)?g(h,4):0,d=t.Qa,p=0;4>p;++p){if(d.Cb){var v=d.Zb[p];d.Fb||(v+=i)}else{if(0<p){t.pb[p]=t.pb[0];continue}v=i}var y=t.pb[p];y.Sc[0]=er[Ht(v+s,127)],y.Sc[1]=nr[Ht(v+0,127)],y.Eb[0]=2*er[Ht(v+o,127)],y.Eb[1]=101581*nr[Ht(v+c,127)]>>16,8>y.Eb[1]&&(y.Eb[1]=8),y.Qc[0]=er[Ht(v+u,117)],y.Qc[1]=nr[Ht(v+h,127)],y.lc=v+h}if(!l.Rb)return Yt(t,4,"Not a key frame.");for(C(a),l=t.Pa,i=0;4>i;++i){for(s=0;8>s;++s)for(o=0;3>o;++o)for(c=0;11>c;++c)u=A(a,cr[i][s][o][c])?m(a,8):ar[i][s][o][c],l.Wc[i][s].Yb[o][c]=u;for(s=0;17>s;++s)l.Xc[i][s]=l.Wc[i][hr[s]]}return t.kc=C(a),t.kc&&(t.Bd=m(a,8)),t.cb=1}function Kt(t,e,n,i,r,o,s){var a=e[r].Yb[n];for(n=0;16>r;++r){if(!A(t,a[n+0]))return r;for(;!A(t,a[n+1]);)if(a=e[++r].Yb[0],n=0,16==r)return 16;var l=e[r+1].Yb;if(A(t,a[n+2])){var c=t,h=0;if(A(c,(d=a)[(u=n)+3]))if(A(c,d[u+6])){for(a=0,u=2*(h=A(c,d[u+8]))+(d=A(c,d[u+9+h])),h=0,d=rr[u];d[a];++a)h+=h+A(c,d[a]);h+=3+(8<<u)}else A(c,d[u+7])?(h=7+2*A(c,165),h+=A(c,145)):h=5+A(c,159);else h=A(c,d[u+4])?3+A(c,d[u+5]):2;a=l[2]}else h=1,a=l[1];l=s+or[r],0>(c=t).b&&L(c);var u,d=c.b,p=(u=c.Ca>>1)-(c.I>>d)>>31;--c.b,c.Ca+=p,c.Ca|=1,c.I-=(u+1&p)<<d,o[l]=((h^p)-p)*i[(0<r)+0]}return 16}function Zt(t){var e=t.rb[t.sb-1];e.la=0,e.Na=0,r(t.zc,0,0,t.zc.length),t.ja=0}function Qt(t,n){if(null==t)return 0;if(null==n)return Yt(t,2,"NULL VP8Io parameter in VP8Decode().");if(!t.cb&&!Xt(t,n))return 0;if(e(t.cb),null==n.ac||n.ac(n)){n.ob&&(t.L=0);var a=Br[t.L];if(2==t.L?(t.yb=0,t.zb=0):(t.yb=n.v-a>>4,t.zb=n.j-a>>4,0>t.yb&&(t.yb=0),0>t.zb&&(t.zb=0)),t.Va=n.o+15+a>>4,t.Hb=n.va+15+a>>4,t.Hb>t.za&&(t.Hb=t.za),t.Va>t.Ub&&(t.Va=t.Ub),0<t.L){var l=t.ed;for(a=0;4>a;++a){var c;if(t.Qa.Cb){var h=t.Qa.Lb[a];t.Qa.Fb||(h+=l.Tb)}else h=l.Tb;for(c=0;1>=c;++c){var u=t.gd[a][c],d=h;if(l.Pc&&(d+=l.vd[0],c&&(d+=l.od[0])),0<(d=0>d?0:63<d?63:d)){var p=d;0<l.wb&&(p=4<l.wb?p>>2:p>>1)>9-l.wb&&(p=9-l.wb),1>p&&(p=1),u.dd=p,u.tc=2*d+p,u.ld=40<=d?2:15<=d?1:0}else u.tc=0;u.La=c}}}a=0}else Yt(t,6,"Frame setup failed"),a=t.a;if(a=0==a){if(a){t.$c=0,0<t.Aa||(t.Ic=$r);t:{a=t.Ic,l=4*(p=t.za);var f=32*p,m=p+1,g=0<t.L?p*(0<t.Aa?2:1):0,v=(2==t.Aa?2:1)*p;if((u=l+832+(c=3*(16*a+Br[t.L])/2*f)+(h=null!=t.Fa&&0<t.Fa.length?t.Kc.c*t.Kc.i:0))!=u)a=0;else{if(u>t.Vb){if(t.Vb=0,t.Ec=o(u),t.Fc=0,null==t.Ec){a=Yt(t,1,"no memory during frame initialization.");break t}t.Vb=u}u=t.Ec,d=t.Fc,t.Ac=u,t.Bc=d,d+=l,t.Gd=s(f,Ut),t.Hd=0,t.rb=s(m+1,Bt),t.sb=1,t.wa=g?s(g,Ft):null,t.Y=0,t.D.Nb=0,t.D.wa=t.wa,t.D.Y=t.Y,0<t.Aa&&(t.D.Y+=p),e(!0),t.oc=u,t.pc=d,d+=832,t.ya=s(v,$t),t.aa=0,t.D.ya=t.ya,t.D.aa=t.aa,2==t.Aa&&(t.D.aa+=p),t.R=16*p,t.B=8*p,p=(f=Br[t.L])*t.R,f=f/2*t.B,t.sa=u,t.ta=d+p,t.qa=t.sa,t.ra=t.ta+16*a*t.R+f,t.Ha=t.qa,t.Ia=t.ra+8*a*t.B+f,t.$c=0,d+=c,t.mb=h?u:null,t.nb=h?d:null,e(d+h<=t.Fc+t.Vb),Zt(t),r(t.Ac,t.Bc,0,l),a=1}}if(a){if(n.ka=0,n.y=t.sa,n.O=t.ta,n.f=t.qa,n.N=t.ra,n.ea=t.Ha,n.Vd=t.Ia,n.fa=t.R,n.Rc=t.B,n.F=null,n.J=0,!Pi){for(a=-255;255>=a;++a)Ci[255+a]=0>a?-a:a;for(a=-1020;1020>=a;++a)Ai[1020+a]=-128>a?-128:127<a?127:a;for(a=-112;112>=a;++a)Mi[112+a]=-16>a?-16:15<a?15:a;for(a=-255;510>=a;++a)Ni[255+a]=0>a?0:255<a?255:a;Pi=1}oi=ce,si=oe,li=se,ci=ae,hi=le,ai=re,ui=Ye,di=Je,pi=Ze,fi=Qe,mi=Xe,gi=Ke,vi=tn,yi=en,bi=qe,wi=Ue,xi=Ge,Si=He,dr[0]=_e,dr[1]=ue,dr[2]=Se,dr[3]=ke,dr[4]=Ee,dr[5]=Ce,dr[6]=Le,dr[7]=Ae,dr[8]=Ne,dr[9]=Me,ur[0]=ve,ur[1]=pe,ur[2]=fe,ur[3]=me,ur[4]=ye,ur[5]=be,ur[6]=we,pr[0]=Oe,pr[1]=de,pr[2]=Pe,pr[3]=Te,pr[4]=je,pr[5]=De,pr[6]=Re,a=1}else a=0}a&&(a=function(t,n){for(t.M=0;t.M<t.Va;++t.M){var s,a=t.Jc[t.M&t.Xb],l=t.m,c=t;for(s=0;s<c.za;++s){var h=l,u=c,d=u.Ac,p=u.Bc+4*s,f=u.zc,m=u.ya[u.aa+s];if(u.Qa.Bb?m.$b=A(h,u.Pa.jb[0])?2+A(h,u.Pa.jb[2]):A(h,u.Pa.jb[1]):m.$b=0,u.kc&&(m.Ad=A(h,u.Bd)),m.Za=!A(h,145)+0,m.Za){var g=m.Ob,v=0;for(u=0;4>u;++u){var y,b=f[0+u];for(y=0;4>y;++y){b=lr[d[p+y]][b];for(var w=sr[A(h,b[0])];0<w;)w=sr[2*w+A(h,b[w])];b=-w,d[p+y]=b}i(g,v,d,p,4),v+=4,f[0+u]=b}}else b=A(h,156)?A(h,128)?1:3:A(h,163)?2:0,m.Ob[0]=b,r(d,p,b,4),r(f,0,b,4);m.Dd=A(h,142)?A(h,114)?A(h,183)?1:3:2:0}if(c.m.Ka)return Yt(t,7,"Premature end-of-partition0 encountered.");for(;t.ja<t.za;++t.ja){if(c=a,h=(l=t).rb[l.sb-1],d=l.rb[l.sb+l.ja],s=l.ya[l.aa+l.ja],p=l.kc?s.Ad:0)h.la=d.la=0,s.Za||(h.Na=d.Na=0),s.Hc=0,s.Gc=0,s.ia=0;else{var x,S;if(h=d,d=c,p=l.Pa.Xc,f=l.ya[l.aa+l.ja],m=l.pb[f.$b],u=f.ad,g=0,v=l.rb[l.sb-1],b=y=0,r(u,g,0,384),f.Za)var k=0,_=p[3];else{w=o(16);var E=h.Na+v.Na;if(E=ir(d,p[1],E,m.Eb,0,w,0),h.Na=v.Na=(0<E)+0,1<E)oi(w,0,u,g);else{var L=w[0]+3>>3;for(w=0;256>w;w+=16)u[g+w]=L}k=1,_=p[0]}var C=15&h.la,M=15&v.la;for(w=0;4>w;++w){var N=1&M;for(L=S=0;4>L;++L)C=C>>1|(N=(E=ir(d,_,E=N+(1&C),m.Sc,k,u,g))>k)<<7,S=S<<2|(3<E?3:1<E?2:0!=u[g+0]),g+=16;C>>=4,M=M>>1|N<<7,y=(y<<8|S)>>>0}for(_=C,k=M>>4,x=0;4>x;x+=2){for(S=0,C=h.la>>4+x,M=v.la>>4+x,w=0;2>w;++w){for(N=1&M,L=0;2>L;++L)E=N+(1&C),C=C>>1|(N=0<(E=ir(d,p[2],E,m.Qc,0,u,g)))<<3,S=S<<2|(3<E?3:1<E?2:0!=u[g+0]),g+=16;C>>=2,M=M>>1|N<<5}b|=S<<4*x,_|=C<<4<<x,k|=(240&M)<<x}h.la=_,v.la=k,f.Hc=y,f.Gc=b,f.ia=43690&b?0:m.ia,p=!(y|b)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[s.$b][s.Za],l.wa[l.Y+l.ja].La|=!p),c.Ka)return Yt(t,7,"Premature end-of-file encountered.")}if(Zt(t),l=n,c=1,s=(a=t).D,h=0<a.L&&a.M>=a.zb&&a.M<=a.Va,0==a.Aa)t:{if(s.M=a.M,s.uc=h,On(a,s),c=1,s=(S=a.D).Nb,h=(b=Br[a.L])*a.R,d=b/2*a.B,w=16*s*a.R,L=8*s*a.B,p=a.sa,f=a.ta-h+w,m=a.qa,u=a.ra-d+L,g=a.Ha,v=a.Ia-d+L,M=0==(C=S.M),y=C>=a.Va-1,2==a.Aa&&On(a,S),S.uc)for(N=(E=a).D.M,e(E.D.uc),S=E.yb;S<E.Hb;++S){k=S,_=N;var P=(T=($=E).D).Nb;x=$.R;var T=T.wa[T.Y+k],I=$.sa,O=$.ta+16*P*x+16*k,D=T.dd,j=T.tc;if(0!=j)if(e(3<=j),1==$.L)0<k&&wi(I,O,x,j+4),T.La&&Si(I,O,x,j),0<_&&bi(I,O,x,j+4),T.La&&xi(I,O,x,j);else{var R=$.B,F=$.qa,B=$.ra+8*P*R+8*k,z=$.Ha,$=$.Ia+8*P*R+8*k;P=T.ld,0<k&&(di(I,O,x,j+4,D,P),fi(F,B,z,$,R,j+4,D,P)),T.La&&(gi(I,O,x,j,D,P),yi(F,B,z,$,R,j,D,P)),0<_&&(ui(I,O,x,j+4,D,P),pi(F,B,z,$,R,j+4,D,P)),T.La&&(mi(I,O,x,j,D,P),vi(F,B,z,$,R,j,D,P))}}if(a.ia&&alert("todo:DitherRow"),null!=l.put){if(S=16*C,C=16*(C+1),M?(l.y=a.sa,l.O=a.ta+w,l.f=a.qa,l.N=a.ra+L,l.ea=a.Ha,l.W=a.Ia+L):(S-=b,l.y=p,l.O=f,l.f=m,l.N=u,l.ea=g,l.W=v),y||(C-=b),C>l.o&&(C=l.o),l.F=null,l.J=null,null!=a.Fa&&0<a.Fa.length&&S<C&&(l.J=dn(a,l,S,C-S),l.F=a.mb,null==l.F&&0==l.F.length)){c=Yt(a,3,"Could not decode alpha data.");break t}S<l.j&&(b=l.j-S,S=l.j,e(!(1&b)),l.O+=a.R*b,l.N+=a.B*(b>>1),l.W+=a.B*(b>>1),null!=l.F&&(l.J+=l.width*b)),S<C&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=S-l.j,l.U=l.va-l.v,l.T=C-S,c=l.put(l))}s+1!=a.Ic||y||(i(a.sa,a.ta-h,p,f+16*a.R,h),i(a.qa,a.ra-d,m,u+8*a.B,d),i(a.Ha,a.Ia-d,g,v+8*a.B,d))}if(!c)return Yt(t,6,"Output aborted.")}return 1}(t,n)),null!=n.bc&&n.bc(n),a&=1}return a?(t.cb=0,a):0}function te(t,e,n,i,r){r=t[e+n+32*i]+(r>>3),t[e+n+32*i]=-256&r?0>r?0:255:r}function ee(t,e,n,i,r,o){te(t,e,0,n,i+r),te(t,e,1,n,i+o),te(t,e,2,n,i-o),te(t,e,3,n,i-r)}function ne(t){return(20091*t>>16)+t}function ie(t,e,n,i){var r,s=0,a=o(16);for(r=0;4>r;++r){var l=t[e+0]+t[e+8],c=t[e+0]-t[e+8],h=(35468*t[e+4]>>16)-ne(t[e+12]),u=ne(t[e+4])+(35468*t[e+12]>>16);a[s+0]=l+u,a[s+1]=c+h,a[s+2]=c-h,a[s+3]=l-u,s+=4,e++}for(r=s=0;4>r;++r)l=(t=a[s+0]+4)+a[s+8],c=t-a[s+8],h=(35468*a[s+4]>>16)-ne(a[s+12]),te(n,i,0,0,l+(u=ne(a[s+4])+(35468*a[s+12]>>16))),te(n,i,1,0,c+h),te(n,i,2,0,c-h),te(n,i,3,0,l-u),s++,i+=32}function re(t,e,n,i){var r=t[e+0]+4,o=35468*t[e+4]>>16,s=ne(t[e+4]),a=35468*t[e+1]>>16;ee(n,i,0,r+s,t=ne(t[e+1]),a),ee(n,i,1,r+o,t,a),ee(n,i,2,r-o,t,a),ee(n,i,3,r-s,t,a)}function oe(t,e,n,i,r){ie(t,e,n,i),r&&ie(t,e+16,n,i+4)}function se(t,e,n,i){si(t,e+0,n,i,1),si(t,e+32,n,i+128,1)}function ae(t,e,n,i){var r;for(t=t[e+0]+4,r=0;4>r;++r)for(e=0;4>e;++e)te(n,i,e,r,t)}function le(t,e,n,i){t[e+0]&&ci(t,e+0,n,i),t[e+16]&&ci(t,e+16,n,i+4),t[e+32]&&ci(t,e+32,n,i+128),t[e+48]&&ci(t,e+48,n,i+128+4)}function ce(t,e,n,i){var r,s=o(16);for(r=0;4>r;++r){var a=t[e+0+r]+t[e+12+r],l=t[e+4+r]+t[e+8+r],c=t[e+4+r]-t[e+8+r],h=t[e+0+r]-t[e+12+r];s[0+r]=a+l,s[8+r]=a-l,s[4+r]=h+c,s[12+r]=h-c}for(r=0;4>r;++r)a=(t=s[0+4*r]+3)+s[3+4*r],l=s[1+4*r]+s[2+4*r],c=s[1+4*r]-s[2+4*r],h=t-s[3+4*r],n[i+0]=a+l>>3,n[i+16]=h+c>>3,n[i+32]=a-l>>3,n[i+48]=h-c>>3,i+=64}function he(t,e,n){var i,r=e-32,o=Oi,s=255-t[r-1];for(i=0;i<n;++i){var a,l=o,c=s+t[e-1];for(a=0;a<n;++a)t[e+a]=l[c+t[r+a]];e+=32}}function ue(t,e){he(t,e,4)}function de(t,e){he(t,e,8)}function pe(t,e){he(t,e,16)}function fe(t,e){var n;for(n=0;16>n;++n)i(t,e+32*n,t,e-32,16)}function me(t,e){var n;for(n=16;0<n;--n)r(t,e,t[e-1],16),e+=32}function ge(t,e,n){var i;for(i=0;16>i;++i)r(e,n+32*i,t,16)}function ve(t,e){var n,i=16;for(n=0;16>n;++n)i+=t[e-1+32*n]+t[e+n-32];ge(i>>5,t,e)}function ye(t,e){var n,i=8;for(n=0;16>n;++n)i+=t[e-1+32*n];ge(i>>4,t,e)}function be(t,e){var n,i=8;for(n=0;16>n;++n)i+=t[e+n-32];ge(i>>4,t,e)}function we(t,e){ge(128,t,e)}function xe(t,e,n){return t+2*e+n+2>>2}function Se(t,e){var n,r=e-32;for(r=new Uint8Array([xe(t[r-1],t[r+0],t[r+1]),xe(t[r+0],t[r+1],t[r+2]),xe(t[r+1],t[r+2],t[r+3]),xe(t[r+2],t[r+3],t[r+4])]),n=0;4>n;++n)i(t,e+32*n,r,0,r.length)}function ke(t,e){var n=t[e-1],i=t[e-1+32],r=t[e-1+64],o=t[e-1+96];M(t,e+0,16843009*xe(t[e-1-32],n,i)),M(t,e+32,16843009*xe(n,i,r)),M(t,e+64,16843009*xe(i,r,o)),M(t,e+96,16843009*xe(r,o,o))}function _e(t,e){var n,i=4;for(n=0;4>n;++n)i+=t[e+n-32]+t[e-1+32*n];for(i>>=3,n=0;4>n;++n)r(t,e+32*n,i,4)}function Ee(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],o=t[e-1-32],s=t[e+0-32],a=t[e+1-32],l=t[e+2-32],c=t[e+3-32];t[e+0+96]=xe(i,r,t[e-1+96]),t[e+1+96]=t[e+0+64]=xe(n,i,r),t[e+2+96]=t[e+1+64]=t[e+0+32]=xe(o,n,i),t[e+3+96]=t[e+2+64]=t[e+1+32]=t[e+0+0]=xe(s,o,n),t[e+3+64]=t[e+2+32]=t[e+1+0]=xe(a,s,o),t[e+3+32]=t[e+2+0]=xe(l,a,s),t[e+3+0]=xe(c,l,a)}function Le(t,e){var n=t[e+1-32],i=t[e+2-32],r=t[e+3-32],o=t[e+4-32],s=t[e+5-32],a=t[e+6-32],l=t[e+7-32];t[e+0+0]=xe(t[e+0-32],n,i),t[e+1+0]=t[e+0+32]=xe(n,i,r),t[e+2+0]=t[e+1+32]=t[e+0+64]=xe(i,r,o),t[e+3+0]=t[e+2+32]=t[e+1+64]=t[e+0+96]=xe(r,o,s),t[e+3+32]=t[e+2+64]=t[e+1+96]=xe(o,s,a),t[e+3+64]=t[e+2+96]=xe(s,a,l),t[e+3+96]=xe(a,l,l)}function Ce(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],o=t[e-1-32],s=t[e+0-32],a=t[e+1-32],l=t[e+2-32],c=t[e+3-32];t[e+0+0]=t[e+1+64]=o+s+1>>1,t[e+1+0]=t[e+2+64]=s+a+1>>1,t[e+2+0]=t[e+3+64]=a+l+1>>1,t[e+3+0]=l+c+1>>1,t[e+0+96]=xe(r,i,n),t[e+0+64]=xe(i,n,o),t[e+0+32]=t[e+1+96]=xe(n,o,s),t[e+1+32]=t[e+2+96]=xe(o,s,a),t[e+2+32]=t[e+3+96]=xe(s,a,l),t[e+3+32]=xe(a,l,c)}function Ae(t,e){var n=t[e+0-32],i=t[e+1-32],r=t[e+2-32],o=t[e+3-32],s=t[e+4-32],a=t[e+5-32],l=t[e+6-32],c=t[e+7-32];t[e+0+0]=n+i+1>>1,t[e+1+0]=t[e+0+64]=i+r+1>>1,t[e+2+0]=t[e+1+64]=r+o+1>>1,t[e+3+0]=t[e+2+64]=o+s+1>>1,t[e+0+32]=xe(n,i,r),t[e+1+32]=t[e+0+96]=xe(i,r,o),t[e+2+32]=t[e+1+96]=xe(r,o,s),t[e+3+32]=t[e+2+96]=xe(o,s,a),t[e+3+64]=xe(s,a,l),t[e+3+96]=xe(a,l,c)}function Me(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],o=t[e-1+96];t[e+0+0]=n+i+1>>1,t[e+2+0]=t[e+0+32]=i+r+1>>1,t[e+2+32]=t[e+0+64]=r+o+1>>1,t[e+1+0]=xe(n,i,r),t[e+3+0]=t[e+1+32]=xe(i,r,o),t[e+3+32]=t[e+1+64]=xe(r,o,o),t[e+3+64]=t[e+2+64]=t[e+0+96]=t[e+1+96]=t[e+2+96]=t[e+3+96]=o}function Ne(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],o=t[e-1+96],s=t[e-1-32],a=t[e+0-32],l=t[e+1-32],c=t[e+2-32];t[e+0+0]=t[e+2+32]=n+s+1>>1,t[e+0+32]=t[e+2+64]=i+n+1>>1,t[e+0+64]=t[e+2+96]=r+i+1>>1,t[e+0+96]=o+r+1>>1,t[e+3+0]=xe(a,l,c),t[e+2+0]=xe(s,a,l),t[e+1+0]=t[e+3+32]=xe(n,s,a),t[e+1+32]=t[e+3+64]=xe(i,n,s),t[e+1+64]=t[e+3+96]=xe(r,i,n),t[e+1+96]=xe(o,r,i)}function Pe(t,e){var n;for(n=0;8>n;++n)i(t,e+32*n,t,e-32,8)}function Te(t,e){var n;for(n=0;8>n;++n)r(t,e,t[e-1],8),e+=32}function Ie(t,e,n){var i;for(i=0;8>i;++i)r(e,n+32*i,t,8)}function Oe(t,e){var n,i=8;for(n=0;8>n;++n)i+=t[e+n-32]+t[e-1+32*n];Ie(i>>4,t,e)}function De(t,e){var n,i=4;for(n=0;8>n;++n)i+=t[e+n-32];Ie(i>>3,t,e)}function je(t,e){var n,i=4;for(n=0;8>n;++n)i+=t[e-1+32*n];Ie(i>>3,t,e)}function Re(t,e){Ie(128,t,e)}function Fe(t,e,n){var i=t[e-n],r=t[e+0],o=3*(r-i)+Ti[1020+t[e-2*n]-t[e+n]],s=Ii[112+(o+4>>3)];t[e-n]=Oi[255+i+Ii[112+(o+3>>3)]],t[e+0]=Oi[255+r-s]}function Be(t,e,n,i){var r=t[e+0],o=t[e+n];return Di[255+t[e-2*n]-t[e-n]]>i||Di[255+o-r]>i}function ze(t,e,n,i){return 4*Di[255+t[e-n]-t[e+0]]+Di[255+t[e-2*n]-t[e+n]]<=i}function $e(t,e,n,i,r){var o=t[e-3*n],s=t[e-2*n],a=t[e-n],l=t[e+0],c=t[e+n],h=t[e+2*n],u=t[e+3*n];return 4*Di[255+a-l]+Di[255+s-c]>i?0:Di[255+t[e-4*n]-o]<=r&&Di[255+o-s]<=r&&Di[255+s-a]<=r&&Di[255+u-h]<=r&&Di[255+h-c]<=r&&Di[255+c-l]<=r}function qe(t,e,n,i){var r=2*i+1;for(i=0;16>i;++i)ze(t,e+i,n,r)&&Fe(t,e+i,n)}function Ue(t,e,n,i){var r=2*i+1;for(i=0;16>i;++i)ze(t,e+i*n,1,r)&&Fe(t,e+i*n,1)}function Ge(t,e,n,i){var r;for(r=3;0<r;--r)qe(t,e+=4*n,n,i)}function He(t,e,n,i){var r;for(r=3;0<r;--r)Ue(t,e+=4,n,i)}function We(t,e,n,i,r,o,s,a){for(o=2*o+1;0<r--;){if($e(t,e,n,o,s))if(Be(t,e,n,a))Fe(t,e,n);else{var l=t,c=e,h=n,u=l[c-2*h],d=l[c-h],p=l[c+0],f=l[c+h],m=l[c+2*h],g=27*(y=Ti[1020+3*(p-d)+Ti[1020+u-f]])+63>>7,v=18*y+63>>7,y=9*y+63>>7;l[c-3*h]=Oi[255+l[c-3*h]+y],l[c-2*h]=Oi[255+u+v],l[c-h]=Oi[255+d+g],l[c+0]=Oi[255+p-g],l[c+h]=Oi[255+f-v],l[c+2*h]=Oi[255+m-y]}e+=i}}function Ve(t,e,n,i,r,o,s,a){for(o=2*o+1;0<r--;){if($e(t,e,n,o,s))if(Be(t,e,n,a))Fe(t,e,n);else{var l=t,c=e,h=n,u=l[c-h],d=l[c+0],p=l[c+h],f=Ii[112+(4+(m=3*(d-u))>>3)],m=Ii[112+(m+3>>3)],g=f+1>>1;l[c-2*h]=Oi[255+l[c-2*h]+g],l[c-h]=Oi[255+u+m],l[c+0]=Oi[255+d-f],l[c+h]=Oi[255+p-g]}e+=i}}function Ye(t,e,n,i,r,o){We(t,e,n,1,16,i,r,o)}function Je(t,e,n,i,r,o){We(t,e,1,n,16,i,r,o)}function Xe(t,e,n,i,r,o){var s;for(s=3;0<s;--s)Ve(t,e+=4*n,n,1,16,i,r,o)}function Ke(t,e,n,i,r,o){var s;for(s=3;0<s;--s)Ve(t,e+=4,1,n,16,i,r,o)}function Ze(t,e,n,i,r,o,s,a){We(t,e,r,1,8,o,s,a),We(n,i,r,1,8,o,s,a)}function Qe(t,e,n,i,r,o,s,a){We(t,e,1,r,8,o,s,a),We(n,i,1,r,8,o,s,a)}function tn(t,e,n,i,r,o,s,a){Ve(t,e+4*r,r,1,8,o,s,a),Ve(n,i+4*r,r,1,8,o,s,a)}function en(t,e,n,i,r,o,s,a){Ve(t,e+4,1,r,8,o,s,a),Ve(n,i+4,1,r,8,o,s,a)}function nn(){this.ba=new st,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function on(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function sn(){this.ua=0,this.Wa=new D,this.vb=new D,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new p,this.yc=new u}function an(){this.xb=this.a=0,this.l=new Wt,this.ca=new st,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new x,this.Pb=0,this.wd=new x,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new sn,this.ab=0,this.gc=s(4,on),this.Oc=0}function ln(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Wt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function cn(t,e,n,i,r,o,s){for(t=null==t?0:t[e+0],e=0;e<s;++e)r[o+e]=t+n[i+e]&255,t=r[o+e]}function hn(t,e,n,i,r,o,s){var a;if(null==t)cn(null,null,n,i,r,o,s);else for(a=0;a<s;++a)r[o+a]=t[e+a]+n[i+a]&255}function un(t,e,n,i,r,o,s){if(null==t)cn(null,null,n,i,r,o,s);else{var a,l=t[e+0],c=l,h=l;for(a=0;a<s;++a)c=h+(l=t[e+a])-c,h=n[i+a]+(-256&c?0>c?0:255:c)&255,c=l,r[o+a]=h}}function dn(t,n,r,s){var a=n.width,l=n.o;if(e(null!=t&&null!=n),0>r||0>=s||r+s>l)return null;if(!t.Cc){if(null==t.ga){var c;if(t.ga=new ln,(c=null==t.ga)||(c=n.width*n.o,e(0==t.Gb.length),t.Gb=o(c),t.Uc=0,null==t.Gb?c=0:(t.mb=t.Gb,t.nb=t.Uc,t.rc=null,c=1),c=!c),!c){c=t.ga;var h=t.Fa,u=t.P,d=t.qc,p=t.mb,f=t.nb,m=u+1,g=d-1,y=c.l;if(e(null!=h&&null!=p&&null!=n),gr[0]=null,gr[1]=cn,gr[2]=hn,gr[3]=un,c.ca=p,c.tb=f,c.c=n.width,c.i=n.height,e(0<c.c&&0<c.i),1>=d)n=0;else if(c.$a=h[u+0]>>0&3,c.Z=h[u+0]>>2&3,c.Lc=h[u+0]>>4&3,u=h[u+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||u)n=0;else if(y.put=pt,y.ac=dt,y.bc=ft,y.ma=c,y.width=n.width,y.height=n.height,y.Da=n.Da,y.v=n.v,y.va=n.va,y.j=n.j,y.o=n.o,c.$a)t:{e(1==c.$a),n=At();e:for(;;){if(null==n){n=0;break t}if(e(null!=c),c.mc=n,n.c=c.c,n.i=c.i,n.l=c.l,n.l.ma=c,n.l.width=c.c,n.l.height=c.i,n.a=0,v(n.m,h,m,g),!Mt(c.c,c.i,1,n,null))break e;if(1==n.ab&&3==n.gc[0].hc&&kt(n.s)?(c.ic=1,h=n.c*n.i,n.Ta=null,n.Ua=0,n.V=o(h),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(c.ic=0,n=Nt(n,c.c)),!n)break e;n=1;break t}c.mc=null,n=0}else n=g>=c.c*c.i;c=!n}if(c)return null;1!=t.ga.Lc?t.Ga=0:s=l-r}e(null!=t.ga),e(r+s<=l);t:{if(n=(h=t.ga).c,l=h.l.o,0==h.$a){if(m=t.rc,g=t.Vc,y=t.Fa,u=t.P+1+r*n,d=t.mb,p=t.nb+r*n,e(u<=t.P+t.qc),0!=h.Z)for(e(null!=gr[h.Z]),c=0;c<s;++c)gr[h.Z](m,g,y,u,d,p,n),m=d,g=p,p+=n,u+=n;else for(c=0;c<s;++c)i(d,p,y,u,n),m=d,g=p,p+=n,u+=n;t.rc=m,t.Vc=g}else{if(e(null!=h.mc),n=r+s,e(null!=(c=h.mc)),e(n<=c.i),c.C>=n)n=1;else if(h.ic||vn(),h.ic){h=c.V,m=c.Ba,g=c.c;var b=c.i,w=(y=1,u=c.$/g,d=c.$%g,p=c.m,f=c.s,c.$),x=g*b,S=g*n,_=f.wc,L=w<S?wt(f,d,u):null;e(w<=x),e(n<=b),e(kt(f));e:for(;;){for(;!p.h&&w<S;){if(d&_||(L=wt(f,d,u)),e(null!=L),E(p),256>(b=yt(L.G[0],L.H[0],p)))h[m+w]=b,++w,++d>=g&&(d=0,++u<=n&&!(u%16)&&Et(c,u));else{if(!(280>b)){y=0;break e}b=gt(b-256,p);var C,A=yt(L.G[4],L.H[4],p);if(E(p),!(w>=(A=vt(g,A=gt(A,p)))&&x-w>=b)){y=0;break e}for(C=0;C<b;++C)h[m+w+C]=h[m+w+C-A];for(w+=b,d+=b;d>=g;)d-=g,++u<=n&&!(u%16)&&Et(c,u);w<S&&d&_&&(L=wt(f,d,u))}e(p.h==k(p))}Et(c,u>n?n:u);break e}!y||p.h&&w<x?(y=0,c.a=p.h?5:3):c.$=w,n=y}else n=Lt(c,c.V,c.Ba,c.c,c.i,n,Pt);if(!n){s=0;break t}}r+s>=l&&(t.Cc=1),s=1}if(!s)return null;if(t.Cc&&(null!=(s=t.ga)&&(s.mc=null),t.ga=null,0<t.Ga))return alert("todo:WebPDequantizeLevels"),null}return t.nb+r*a}function pn(t,e,n,i,r,o){for(;0<r--;){var s,a=t,l=e+(n?1:0),c=t,h=e+(n?0:3);for(s=0;s<i;++s){var u=c[h+4*s];255!=u&&(u*=32897,a[l+4*s+0]=a[l+4*s+0]*u>>23,a[l+4*s+1]=a[l+4*s+1]*u>>23,a[l+4*s+2]=a[l+4*s+2]*u>>23)}e+=o}}function fn(t,e,n,i,r){for(;0<i--;){var o;for(o=0;o<n;++o){var s=t[e+2*o+0],a=15&(c=t[e+2*o+1]),l=4369*a,c=(240&c|c>>4)*l>>16;t[e+2*o+0]=(240&s|s>>4)*l>>16&240|(15&s|s<<4)*l>>16>>4&15,t[e+2*o+1]=240&c|a}e+=r}}function mn(t,e,n,i,r,o,s,a){var l,c,h=255;for(c=0;c<r;++c){for(l=0;l<i;++l){var u=t[e+l];o[s+4*l]=u,h&=u}e+=n,s+=a}return 255!=h}function gn(t,e,n,i,r){var o;for(o=0;o<r;++o)n[i+o]=t[e+o]>>8}function vn(){ki=pn,_i=fn,Ei=mn,Li=gn}function yn(n,i,r){t[n]=function(t,n,o,s,a,l,c,h,u,d,p,f,m,g,v,y,b){var w,x=b-1>>1,S=a[l+0]|c[h+0]<<16,k=u[d+0]|p[f+0]<<16;e(null!=t);var _=3*S+k+131074>>2;for(i(t[n+0],255&_,_>>16,m,g),null!=o&&(_=3*k+S+131074>>2,i(o[s+0],255&_,_>>16,v,y)),w=1;w<=x;++w){var E=a[l+w]|c[h+w]<<16,L=u[d+w]|p[f+w]<<16,C=S+E+k+L+524296,A=C+2*(E+k)>>3;_=A+S>>1,S=(C=C+2*(S+L)>>3)+E>>1,i(t[n+2*w-1],255&_,_>>16,m,g+(2*w-1)*r),i(t[n+2*w-0],255&S,S>>16,m,g+(2*w-0)*r),null!=o&&(_=C+k>>1,S=A+L>>1,i(o[s+2*w-1],255&_,_>>16,v,y+(2*w-1)*r),i(o[s+2*w+0],255&S,S>>16,v,y+(2*w+0)*r)),S=E,k=L}1&b||(_=3*S+k+131074>>2,i(t[n+b-1],255&_,_>>16,m,g+(b-1)*r),null!=o&&(_=3*k+S+131074>>2,i(o[s+b-1],255&_,_>>16,v,y+(b-1)*r)))}}function bn(){vr[ji]=yr,vr[Ri]=wr,vr[Fi]=br,vr[Bi]=xr,vr[zi]=Sr,vr[$i]=kr,vr[qi]=_r,vr[Ui]=wr,vr[Gi]=xr,vr[Hi]=Sr,vr[Wi]=kr}function wn(t){return t&~Nr?0>t?0:255:t>>Mr}function xn(t,e){return wn((19077*t>>8)+(26149*e>>8)-14234)}function Sn(t,e,n){return wn((19077*t>>8)-(6419*e>>8)-(13320*n>>8)+8708)}function kn(t,e){return wn((19077*t>>8)+(33050*e>>8)-17685)}function _n(t,e,n,i,r){i[r+0]=xn(t,n),i[r+1]=Sn(t,e,n),i[r+2]=kn(t,e)}function En(t,e,n,i,r){i[r+0]=kn(t,e),i[r+1]=Sn(t,e,n),i[r+2]=xn(t,n)}function Ln(t,e,n,i,r){var o=Sn(t,e,n);e=o<<3&224|kn(t,e)>>3,i[r+0]=248&xn(t,n)|o>>5,i[r+1]=e}function Cn(t,e,n,i,r){var o=240&kn(t,e)|15;i[r+0]=240&xn(t,n)|Sn(t,e,n)>>4,i[r+1]=o}function An(t,e,n,i,r){i[r+0]=255,_n(t,e,n,i,r+1)}function Mn(t,e,n,i,r){En(t,e,n,i,r),i[r+3]=255}function Nn(t,e,n,i,r){_n(t,e,n,i,r),i[r+3]=255}function Ht(t,e){return 0>t?0:t>e?e:t}function Pn(e,n,i){t[e]=function(t,e,r,o,s,a,l,c,h){for(var u=c+(-2&h)*i;c!=u;)n(t[e+0],r[o+0],s[a+0],l,c),n(t[e+1],r[o+0],s[a+0],l,c+i),e+=2,++o,++a,c+=2*i;1&h&&n(t[e+0],r[o+0],s[a+0],l,c)}}function Tn(t,e,n){return 0==n?0==t?0==e?6:5:0==e?4:0:n}function In(t,e,n,i,r){switch(t>>>30){case 3:si(e,n,i,r,0);break;case 2:ai(e,n,i,r);break;case 1:ci(e,n,i,r)}}function On(t,e){var n,o,s=e.M,a=e.Nb,l=t.oc,c=t.pc+40,h=t.oc,u=t.pc+584,d=t.oc,p=t.pc+600;for(n=0;16>n;++n)l[c+32*n-1]=129;for(n=0;8>n;++n)h[u+32*n-1]=129,d[p+32*n-1]=129;for(0<s?l[c-1-32]=h[u-1-32]=d[p-1-32]=129:(r(l,c-32-1,127,21),r(h,u-32-1,127,9),r(d,p-32-1,127,9)),o=0;o<t.za;++o){var f=e.ya[e.aa+o];if(0<o){for(n=-1;16>n;++n)i(l,c+32*n-4,l,c+32*n+12,4);for(n=-1;8>n;++n)i(h,u+32*n-4,h,u+32*n+4,4),i(d,p+32*n-4,d,p+32*n+4,4)}var m=t.Gd,g=t.Hd+o,v=f.ad,y=f.Hc;if(0<s&&(i(l,c-32,m[g].y,0,16),i(h,u-32,m[g].f,0,8),i(d,p-32,m[g].ea,0,8)),f.Za){var b=l,w=c-32+16;for(0<s&&(o>=t.za-1?r(b,w,m[g].y[15],4):i(b,w,m[g+1].y,0,4)),n=0;4>n;n++)b[w+128+n]=b[w+256+n]=b[w+384+n]=b[w+0+n];for(n=0;16>n;++n,y<<=2)b=l,w=c+Fr[n],dr[f.Ob[n]](b,w),In(y,v,16*+n,b,w)}else if(b=Tn(o,s,f.Ob[0]),ur[b](l,c),0!=y)for(n=0;16>n;++n,y<<=2)In(y,v,16*+n,l,c+Fr[n]);for(n=f.Gc,b=Tn(o,s,f.Dd),pr[b](h,u),pr[b](d,p),y=v,b=h,w=u,255&(f=n>>0)&&(170&f?li(y,256,b,w):hi(y,256,b,w)),f=d,y=p,255&(n>>=8)&&(170&n?li(v,320,f,y):hi(v,320,f,y)),s<t.Ub-1&&(i(m[g].y,0,l,c+480,16),i(m[g].f,0,h,u+224,8),i(m[g].ea,0,d,p+224,8)),n=8*a*t.B,m=t.sa,g=t.ta+16*o+16*a*t.R,v=t.qa,f=t.ra+8*o+n,y=t.Ha,b=t.Ia+8*o+n,n=0;16>n;++n)i(m,g+n*t.R,l,c+32*n,16);for(n=0;8>n;++n)i(v,f+n*t.B,h,u+32*n,8),i(y,b+n*t.B,d,p+32*n,8)}}function Dn(t,i,r,o,s,a,l,c,h){var u=[0],d=[0],p=0,f=null!=h?h.kd:0,m=null!=h?h:new rn;if(null==t||12>r)return 7;m.data=t,m.w=i,m.ha=r,i=[i],r=[r],m.gb=[m.gb];t:{var g=i,y=r,b=m.gb;if(e(null!=t),e(null!=y),e(null!=b),b[0]=0,12<=y[0]&&!n(t,g[0],"RIFF")){if(n(t,g[0]+8,"WEBP")){b=3;break t}var w=T(t,g[0]+4);if(12>w||4294967286<w){b=3;break t}if(f&&w>y[0]-8){b=7;break t}b[0]=w,g[0]+=12,y[0]-=12}b=0}if(0!=b)return b;for(w=0<m.gb[0],r=r[0];;){t:{var S=t;y=i,b=r;var k=u,_=d,E=g=[0];if((A=p=[p])[0]=0,8>b[0])b=7;else{if(!n(S,y[0],"VP8X")){if(10!=T(S,y[0]+4)){b=3;break t}if(18>b[0]){b=7;break t}var L=T(S,y[0]+8),C=1+P(S,y[0]+12);if(2147483648<=C*(S=1+P(S,y[0]+15))){b=3;break t}null!=E&&(E[0]=L),null!=k&&(k[0]=C),null!=_&&(_[0]=S),y[0]+=18,b[0]-=18,A[0]=1}b=0}}if(p=p[0],g=g[0],0!=b)return b;if(y=!!(2&g),!w&&p)return 3;if(null!=a&&(a[0]=!!(16&g)),null!=l&&(l[0]=y),null!=c&&(c[0]=0),l=u[0],g=d[0],p&&y&&null==h){b=0;break}if(4>r){b=7;break}if(w&&p||!w&&!p&&!n(t,i[0],"ALPH")){r=[r],m.na=[m.na],m.P=[m.P],m.Sa=[m.Sa];t:{L=t,b=i,w=r;var A=m.gb;k=m.na,_=m.P,E=m.Sa,C=22,e(null!=L),e(null!=w),S=b[0];var M=w[0];for(e(null!=k),e(null!=E),k[0]=null,_[0]=null,E[0]=0;;){if(b[0]=S,w[0]=M,8>M){b=7;break t}var N=T(L,S+4);if(4294967286<N){b=3;break t}var I=8+N+1&-2;if(C+=I,0<A&&C>A){b=3;break t}if(!n(L,S,"VP8 ")||!n(L,S,"VP8L")){b=0;break t}if(M[0]<I){b=7;break t}n(L,S,"ALPH")||(k[0]=L,_[0]=S+8,E[0]=N),S+=I,M-=I}}if(r=r[0],m.na=m.na[0],m.P=m.P[0],m.Sa=m.Sa[0],0!=b)break}r=[r],m.Ja=[m.Ja],m.xa=[m.xa];t:if(A=t,b=i,w=r,k=m.gb[0],_=m.Ja,E=m.xa,L=b[0],S=!n(A,L,"VP8 "),C=!n(A,L,"VP8L"),e(null!=A),e(null!=w),e(null!=_),e(null!=E),8>w[0])b=7;else{if(S||C){if(A=T(A,L+4),12<=k&&A>k-12){b=3;break t}if(f&&A>w[0]-8){b=7;break t}_[0]=A,b[0]+=8,w[0]-=8,E[0]=C}else E[0]=5<=w[0]&&47==A[L+0]&&!(A[L+4]>>5),_[0]=w[0];b=0}if(r=r[0],m.Ja=m.Ja[0],m.xa=m.xa[0],i=i[0],0!=b)break;if(4294967286<m.Ja)return 3;if(null==c||y||(c[0]=m.xa?2:1),l=[l],g=[g],m.xa){if(5>r){b=7;break}c=l,f=g,y=a,null==t||5>r?t=0:5<=r&&47==t[i+0]&&!(t[i+4]>>5)?(w=[0],A=[0],k=[0],v(_=new x,t,i,r),mt(_,w,A,k)?(null!=c&&(c[0]=w[0]),null!=f&&(f[0]=A[0]),null!=y&&(y[0]=k[0]),t=1):t=0):t=0}else{if(10>r){b=7;break}c=g,null==t||10>r||!Jt(t,i+3,r-3)?t=0:(f=t[i+0]|t[i+1]<<8|t[i+2]<<16,y=16383&(t[i+7]<<8|t[i+6]),t=16383&(t[i+9]<<8|t[i+8]),1&f||3<(f>>1&7)||!(f>>4&1)||f>>5>=m.Ja||!y||!t?t=0:(l&&(l[0]=y),c&&(c[0]=t),t=1))}if(!t)return 3;if(l=l[0],g=g[0],p&&(u[0]!=l||d[0]!=g))return 3;null!=h&&(h[0]=m,h.offset=i-h.w,e(4294967286>i-h.w),e(h.offset==h.ha-r));break}return 0==b||7==b&&p&&null==h?(null!=a&&(a[0]|=null!=m.na&&0<m.na.length),null!=o&&(o[0]=l),null!=s&&(s[0]=g),0):b}function jn(t,e,n){var i=e.width,r=e.height,o=0,s=0,a=i,l=r;if(e.Da=null!=t&&0<t.Da,e.Da&&(a=t.cd,l=t.bd,o=t.v,s=t.j,11>n||(o&=-2,s&=-2),0>o||0>s||0>=a||0>=l||o+a>i||s+l>r))return 0;if(e.v=o,e.j=s,e.va=o+a,e.o=s+l,e.U=a,e.T=l,e.da=null!=t&&0<t.da,e.da){if(!j(a,l,n=[t.ib],o=[t.hb]))return 0;e.ib=n[0],e.hb=o[0]}return e.ob=null!=t&&t.ob,e.Kb=null==t||!t.Sd,e.da&&(e.ob=e.ib<3*i/4&&e.hb<3*r/4,e.Kb=0),1}function Rn(t){if(null==t)return 2;if(11>t.S){var e=t.f.RGBA;e.fb+=(t.height-1)*e.A,e.A=-e.A}else e=t.f.kb,t=t.height,e.O+=(t-1)*e.fa,e.fa=-e.fa,e.N+=(t-1>>1)*e.Ab,e.Ab=-e.Ab,e.W+=(t-1>>1)*e.Db,e.Db=-e.Db,null!=e.F&&(e.J+=(t-1)*e.lb,e.lb=-e.lb);return 0}function Fn(t,e,n,i){if(null==i||0>=t||0>=e)return 2;if(null!=n){if(n.Da){var r=n.cd,s=n.bd,a=-2&n.v,l=-2&n.j;if(0>a||0>l||0>=r||0>=s||a+r>t||l+s>e)return 2;t=r,e=s}if(n.da){if(!j(t,e,r=[n.ib],s=[n.hb]))return 2;t=r[0],e=s[0]}}i.width=t,i.height=e;t:{var c=i.width,h=i.height;if(t=i.S,0>=c||0>=h||!(t>=ji&&13>t))t=2;else{if(0>=i.Rd&&null==i.sd){a=s=r=e=0;var u=(l=c*qr[t])*h;if(11>t||(s=(h+1)/2*(e=(c+1)/2),12==t&&(a=(r=c)*h)),null==(h=o(u+2*s+a))){t=1;break t}i.sd=h,11>t?((c=i.f.RGBA).eb=h,c.fb=0,c.A=l,c.size=u):((c=i.f.kb).y=h,c.O=0,c.fa=l,c.Fd=u,c.f=h,c.N=0+u,c.Ab=e,c.Cd=s,c.ea=h,c.W=0+u+s,c.Db=e,c.Ed=s,12==t&&(c.F=h,c.J=0+u+2*s),c.Tc=a,c.lb=r)}if(e=1,r=i.S,s=i.width,a=i.height,r>=ji&&13>r)if(11>r)t=i.f.RGBA,e&=(l=Math.abs(t.A))*(a-1)+s<=t.size,e&=l>=s*qr[r],e&=null!=t.eb;else{t=i.f.kb,l=(s+1)/2,u=(a+1)/2,c=Math.abs(t.fa),h=Math.abs(t.Ab);var d=Math.abs(t.Db),p=Math.abs(t.lb),f=p*(a-1)+s;e&=c*(a-1)+s<=t.Fd,e&=h*(u-1)+l<=t.Cd,e=(e&=d*(u-1)+l<=t.Ed)&c>=s&h>=l&d>=l,e&=null!=t.y,e&=null!=t.f,e&=null!=t.ea,12==r&&(e&=p>=s,e&=f<=t.Tc,e&=null!=t.F)}else e=0;t=e?0:2}}return 0!=t||null!=n&&n.fd&&(t=Rn(i)),t}var Bn=64,zn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],$n=24,qn=32,Un=8,Gn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];B("Predictor0","PredictorAdd0"),t.Predictor0=function(){return 4278190080},t.Predictor1=function(t){return t},t.Predictor2=function(t,e,n){return e[n+0]},t.Predictor3=function(t,e,n){return e[n+1]},t.Predictor4=function(t,e,n){return e[n-1]},t.Predictor5=function(t,e,n){return $($(t,e[n+1]),e[n+0])},t.Predictor6=function(t,e,n){return $(t,e[n-1])},t.Predictor7=function(t,e,n){return $(t,e[n+0])},t.Predictor8=function(t,e,n){return $(e[n-1],e[n+0])},t.Predictor9=function(t,e,n){return $(e[n+0],e[n+1])},t.Predictor10=function(t,e,n){return $($(t,e[n-1]),$(e[n+0],e[n+1]))},t.Predictor11=function(t,e,n){var i=e[n+0];return 0>=G(i>>24&255,t>>24&255,(e=e[n-1])>>24&255)+G(i>>16&255,t>>16&255,e>>16&255)+G(i>>8&255,t>>8&255,e>>8&255)+G(255&i,255&t,255&e)?i:t},t.Predictor12=function(t,e,n){var i=e[n+0];return(q((t>>24&255)+(i>>24&255)-((e=e[n-1])>>24&255))<<24|q((t>>16&255)+(i>>16&255)-(e>>16&255))<<16|q((t>>8&255)+(i>>8&255)-(e>>8&255))<<8|q((255&t)+(255&i)-(255&e)))>>>0},t.Predictor13=function(t,e,n){var i=e[n-1];return(U((t=$(t,e[n+0]))>>24&255,i>>24&255)<<24|U(t>>16&255,i>>16&255)<<16|U(t>>8&255,i>>8&255)<<8|U(t>>0&255,i>>0&255))>>>0};var Hn=t.PredictorAdd0;t.PredictorAdd1=H,B("Predictor2","PredictorAdd2"),B("Predictor3","PredictorAdd3"),B("Predictor4","PredictorAdd4"),B("Predictor5","PredictorAdd5"),B("Predictor6","PredictorAdd6"),B("Predictor7","PredictorAdd7"),B("Predictor8","PredictorAdd8"),B("Predictor9","PredictorAdd9"),B("Predictor10","PredictorAdd10"),B("Predictor11","PredictorAdd11"),B("Predictor12","PredictorAdd12"),B("Predictor13","PredictorAdd13");var Wn=t.PredictorAdd2;J("ColorIndexInverseTransform","MapARGB","32b",(function(t){return t>>8&255}),(function(t){return t})),J("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(t){return t}),(function(t){return t>>8&255}));var Vn,Yn=t.ColorIndexInverseTransform,Jn=t.MapARGB,Xn=t.VP8LColorIndexInverseTransformAlpha,Kn=t.MapAlpha,Zn=t.VP8LPredictorsAdd=[];Zn.length=16,(t.VP8LPredictors=[]).length=16,(t.VP8LPredictorsAdd_C=[]).length=16,(t.VP8LPredictors_C=[]).length=16;var Qn,ti,ei,ni,ii,ri,oi,si,ai,li,ci,hi,ui,di,pi,fi,mi,gi,vi,yi,bi,wi,xi,Si,ki,_i,Ei,Li,Ci=o(511),Ai=o(2041),Mi=o(225),Ni=o(767),Pi=0,Ti=Ai,Ii=Mi,Oi=Ni,Di=Ci,ji=0,Ri=1,Fi=2,Bi=3,zi=4,$i=5,qi=6,Ui=7,Gi=8,Hi=9,Wi=10,Vi=[2,3,7],Yi=[3,3,11],Ji=[280,256,256,256,40],Xi=[0,1,1,1,0],Ki=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Zi=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Qi=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],tr=8,er=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],nr=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ir=null,rr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],or=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],sr=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ar=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],lr=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],cr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],hr=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ur=[],dr=[],pr=[],fr=1,mr=2,gr=[],vr=[];yn("UpsampleRgbLinePair",_n,3),yn("UpsampleBgrLinePair",En,3),yn("UpsampleRgbaLinePair",Nn,4),yn("UpsampleBgraLinePair",Mn,4),yn("UpsampleArgbLinePair",An,4),yn("UpsampleRgba4444LinePair",Cn,2),yn("UpsampleRgb565LinePair",Ln,2);var yr=t.UpsampleRgbLinePair,br=t.UpsampleBgrLinePair,wr=t.UpsampleRgbaLinePair,xr=t.UpsampleBgraLinePair,Sr=t.UpsampleArgbLinePair,kr=t.UpsampleRgba4444LinePair,_r=t.UpsampleRgb565LinePair,Er=16,Lr=1<<Er-1,Cr=-227,Ar=482,Mr=6,Nr=(256<<Mr)-1,Pr=0,Tr=o(256),Ir=o(256),Or=o(256),Dr=o(256),jr=o(Ar-Cr),Rr=o(Ar-Cr);Pn("YuvToRgbRow",_n,3),Pn("YuvToBgrRow",En,3),Pn("YuvToRgbaRow",Nn,4),Pn("YuvToBgraRow",Mn,4),Pn("YuvToArgbRow",An,4),Pn("YuvToRgba4444Row",Cn,2),Pn("YuvToRgb565Row",Ln,2);var Fr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Br=[0,2,8],zr=[8,7,6,4,4,2,2,2,1,1,1,1],$r=1;this.WebPDecodeRGBA=function(t,n,i,r,o){var s=Ri,a=new nn,l=new st;a.ba=l,l.S=s,l.width=[l.width],l.height=[l.height];var c=l.width,h=l.height,u=new at;if(null==u||null==t)var d=2;else e(null!=u),d=Dn(t,n,i,u.width,u.height,u.Pd,u.Qd,u.format,null);if(0!=d?c=0:(null!=c&&(c[0]=u.width[0]),null!=h&&(h[0]=u.height[0]),c=1),c){l.width=l.width[0],l.height=l.height[0],null!=r&&(r[0]=l.width),null!=o&&(o[0]=l.height);t:{if(r=new Wt,(o=new rn).data=t,o.w=n,o.ha=i,o.kd=1,n=[0],e(null!=o),(0==(t=Dn(o.data,o.w,o.ha,null,null,null,n,null,o))||7==t)&&n[0]&&(t=4),0==(n=t)){if(e(null!=a),r.data=o.data,r.w=o.w+o.offset,r.ha=o.ha-o.offset,r.put=pt,r.ac=dt,r.bc=ft,r.ma=a,o.xa){if(null==(t=At())){a=1;break t}if(function(t,n){var i=[0],r=[0],o=[0];e:for(;;){if(null==t)return 0;if(null==n)return t.a=2,0;if(t.l=n,t.a=0,v(t.m,n.data,n.w,n.ha),!mt(t.m,i,r,o)){t.a=3;break e}if(t.xb=mr,n.width=i[0],n.height=r[0],!Mt(i[0],r[0],1,t,null))break e;return 1}return e(0!=t.a),0}(t,r)){if(r=0==(n=Fn(r.width,r.height,a.Oa,a.ba))){e:{r=t;n:for(;;){if(null==r){r=0;break e}if(e(null!=r.s.yc),e(null!=r.s.Ya),e(0<r.s.Wb),e(null!=(i=r.l)),e(null!=(o=i.ma)),0!=r.xb){if(r.ca=o.ba,r.tb=o.tb,e(null!=r.ca),!jn(o.Oa,i,Bi)){r.a=2;break n}if(!Nt(r,i.width))break n;if(i.da)break n;if((i.da||it(r.ca.S))&&vn(),11>r.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=r.ca.f.kb.F&&vn()),r.Pb&&0<r.s.ua&&null==r.s.vb.X&&!I(r.s.vb,r.s.Wa.Xa)){r.a=1;break n}r.xb=0}if(!Lt(r,r.V,r.Ba,r.c,r.i,i.o,St))break n;o.Dc=r.Ma,r=1;break e}e(0!=r.a),r=0}r=!r}r&&(n=t.a)}else n=t.a}else{if(null==(t=new Vt)){a=1;break t}if(t.Fa=o.na,t.P=o.P,t.qc=o.Sa,Xt(t,r)){if(0==(n=Fn(r.width,r.height,a.Oa,a.ba))){if(t.Aa=0,i=a.Oa,e(null!=(o=t)),null!=i){if(0<(c=0>(c=i.Md)?0:100<c?255:255*c/100)){for(h=u=0;4>h;++h)12>(d=o.pb[h]).lc&&(d.ia=c*zr[0>d.lc?0:d.lc]>>3),u|=d.ia;u&&(alert("todo:VP8InitRandom"),o.ia=1)}o.Ga=i.Id,100<o.Ga?o.Ga=100:0>o.Ga&&(o.Ga=0)}Qt(t,r)||(n=t.a)}}else n=t.a}0==n&&null!=a.Oa&&a.Oa.fd&&(n=Rn(a.ba))}a=n}s=0!=a?null:11>s?l.f.RGBA.eb:l.f.kb.y}else s=null;return s};var qr=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(t,e){for(var n="",i=0;i<4;i++)n+=String.fromCharCode(t[e++]);return n}function h(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16)>>>0}function u(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}new l;var d=[0],p=[0],f=[],m=new l,g=t,v=function(t,e){var n={},i=0,r=!1,o=0,s=0;if(n.frames=[],!
/** @license
         * Copyright (c) 2017 Dominik Homberger
        Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
        The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
        THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
        https://webpjs.appspot.com
        WebPRiffParser dominikhlbg@gmail.com
        */
function(t,e,n,i){for(var r=0;r<i;r++)if(t[e+r]!=n.charCodeAt(r))return!0;return!1}(t,e,"RIFF",4)){var a,l;for(u(t,e+=4),e+=8;e<t.length;){var d=c(t,e),p=u(t,e+=4);e+=4;var f=p+(1&p);switch(d){case"VP8 ":case"VP8L":void 0===n.frames[i]&&(n.frames[i]={}),(v=n.frames[i]).src_off=r?s:e-8,v.src_size=o+p+8,i++,r&&(r=!1,o=0,s=0);break;case"VP8X":(v=n.header={}).feature_flags=t[e];var m=e+4;v.canvas_width=1+h(t,m),m+=3,v.canvas_height=1+h(t,m),m+=3;break;case"ALPH":r=!0,o=f+8,s=e-8;break;case"ANIM":(v=n.header).bgcolor=u(t,e),m=e+4,v.loop_count=(a=t)[(l=m)+0]<<0|a[l+1]<<8,m+=2;break;case"ANMF":var g,v;(v=n.frames[i]={}).offset_x=2*h(t,e),e+=3,v.offset_y=2*h(t,e),e+=3,v.width=1+h(t,e),e+=3,v.height=1+h(t,e),e+=3,v.duration=h(t,e),e+=3,g=t[e++],v.dispose=1&g,v.blend=g>>1&1}"ANMF"!=d&&(e+=f)}return n}}(g,0);v.response=g,v.rgbaoutput=!0,v.dataurl=!1;var y=v.header?v.header:null,b=v.frames?v.frames:null;if(y){y.loop_counter=y.loop_count,d=[y.canvas_height],p=[y.canvas_width];for(var w=0;w<b.length&&0!=b[w].blend;w++);}var x=b[0],S=m.WebPDecodeRGBA(g,x.src_off,x.src_size,p,d);x.rgba=S,x.imgwidth=p[0],x.imgheight=d[0];for(var k=0;k<p[0]*d[0]*4;k++)f[k]=S[k];return this.width=p,this.height=d,this.data=f,this}!function(t){var e=function(){return"function"==typeof K},n=function(e,n,r,c){var h=4,u=s;switch(c){case t.image_compression.FAST:h=1,u=o;break;case t.image_compression.MEDIUM:h=6,u=a;break;case t.image_compression.SLOW:h=9,u=l}e=i(e,n,r,u);var d=K(e,{level:h});return t.__addimage__.arrayBufferToBinaryString(d)},i=function(t,e,n,i){for(var r,o,s,a=t.length/e,l=new Uint8Array(t.length+a),c=h(),d=0;d<a;d+=1){if(s=d*e,r=t.subarray(s,s+e),i)l.set(i(r,n,o),s+d);else{for(var p,f=c.length,m=[];p<f;p+=1)m[p]=c[p](r,n,o);var g=u(m.concat());l.set(m[g],s+d)}o=r}return l},r=function(t){var e=Array.apply([],t);return e.unshift(0),e},o=function(t,e){var n,i=[],r=t.length;i[0]=1;for(var o=0;o<r;o+=1)n=t[o-e]||0,i[o+1]=t[o]-n+256&255;return i},s=function(t,e,n){var i,r=[],o=t.length;r[0]=2;for(var s=0;s<o;s+=1)i=n&&n[s]||0,r[s+1]=t[s]-i+256&255;return r},a=function(t,e,n){var i,r,o=[],s=t.length;o[0]=3;for(var a=0;a<s;a+=1)i=t[a-e]||0,r=n&&n[a]||0,o[a+1]=t[a]+256-(i+r>>>1)&255;return o},l=function(t,e,n){var i,r,o,s,a=[],l=t.length;a[0]=4;for(var h=0;h<l;h+=1)i=t[h-e]||0,r=n&&n[h]||0,o=n&&n[h-e]||0,s=c(i,r,o),a[h+1]=t[h]-s+256&255;return a},c=function(t,e,n){if(t===e&&e===n)return t;var i=Math.abs(e-n),r=Math.abs(t-n),o=Math.abs(t+e-n-n);return i<=r&&i<=o?t:r<=o?e:n},h=function(){return[r,o,s,a,l]},u=function(t){var e=t.map((function(t){return t.reduce((function(t,e){return t+Math.abs(e)}),0)}));return e.indexOf(Math.min.apply(null,e))};t.processPNG=function(i,r,o,s){var a,l,c,h,u,d,p,f,m,g,v,y,b,w,x,S=this.decode.FLATE_DECODE,k="";if(this.__addimage__.isArrayBuffer(i)&&(i=new Uint8Array(i)),this.__addimage__.isArrayBufferView(i)){if(i=(c=new We(i)).imgData,l=c.bits,a=c.colorSpace,u=c.colors,-1!==[4,6].indexOf(c.colorType)){if(8===c.bits){m=(f=32==c.pixelBitlength?new Uint32Array(c.decodePixels().buffer):16==c.pixelBitlength?new Uint16Array(c.decodePixels().buffer):new Uint8Array(c.decodePixels().buffer)).length,v=new Uint8Array(m*c.colors),g=new Uint8Array(m);var _,E=c.pixelBitlength-c.bits;for(w=0,x=0;w<m;w++){for(b=f[w],_=0;_<E;)v[x++]=b>>>_&255,_+=c.bits;g[w]=b>>>_&255}}if(16===c.bits){m=(f=new Uint32Array(c.decodePixels().buffer)).length,v=new Uint8Array(m*(32/c.pixelBitlength)*c.colors),g=new Uint8Array(m*(32/c.pixelBitlength)),y=c.colors>1,w=0,x=0;for(var L=0;w<m;)b=f[w++],v[x++]=b>>>0&255,y&&(v[x++]=b>>>16&255,b=f[w++],v[x++]=b>>>0&255),g[L++]=b>>>16&255;l=8}s!==t.image_compression.NONE&&e()?(i=n(v,c.width*c.colors,c.colors,s),p=n(g,c.width,1,s)):(i=v,p=g,S=void 0)}if(3===c.colorType&&(a=this.color_spaces.INDEXED,d=c.palette,c.transparency.indexed)){var C=c.transparency.indexed,A=0;for(w=0,m=C.length;w<m;++w)A+=C[w];if((A/=255)===m-1&&-1!==C.indexOf(0))h=[C.indexOf(0)];else if(A!==m){for(f=c.decodePixels(),g=new Uint8Array(f.length),w=0,m=f.length;w<m;w++)g[w]=C[f[w]];p=n(g,c.width,1)}}var M=function(e){var n;switch(e){case t.image_compression.FAST:n=11;break;case t.image_compression.MEDIUM:n=13;break;case t.image_compression.SLOW:n=14;break;default:n=12}return n}(s);return S===this.decode.FLATE_DECODE&&(k="/Predictor "+M+" "),k+="/Colors "+u+" /BitsPerComponent "+l+" /Columns "+c.width,(this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i))&&(i=this.__addimage__.arrayBufferToBinaryString(i)),(p&&this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),{alias:o,data:i,index:r,filter:S,decodeParameters:k,transparency:h,palette:d,sMask:p,predictor:M,width:c.width,height:c.height,bitsPerComponent:l,colorSpace:a}}}}(It.API),function(t){t.processGIF89A=function(e,n,i,r){var o=new Ve(e),s=o.width,a=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:s,height:a},h=new Je(100).encode(c,100);return t.processJPEG.call(this,h,n,i,r)},t.processGIF87A=t.processGIF89A}(It.API),Xe.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:i,blue:n,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Xe.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(t){nt.log("bit decode error:"+t)}},Xe.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,r=0;r<e;r++)for(var o=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+8*r*4,a=0;a<8&&8*r+a<this.width;a++){var l=this.palette[o>>7-a&1];this.data[s+4*a]=l.blue,this.data[s+4*a+1]=l.green,this.data[s+4*a+2]=l.red,this.data[s+4*a+3]=255}0!==n&&(this.pos+=4-n)}},Xe.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<t;r++){var o=this.datav.getUint8(this.pos++,!0),s=i*this.width*4+2*r*4,a=o>>4,l=15&o,c=this.palette[a];if(this.data[s]=c.blue,this.data[s+1]=c.green,this.data[s+2]=c.red,this.data[s+3]=255,2*r+1>=this.width)break;c=this.palette[l],this.data[s+4]=c.blue,this.data[s+4+1]=c.green,this.data[s+4+2]=c.red,this.data[s+4+3]=255}0!==e&&(this.pos+=4-e)}},Xe.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*i;if(r<this.palette.length){var s=this.palette[r];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}0!==t&&(this.pos+=4-t)}},Xe.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,l=(o>>10&e)/e*255|0,c=o>>15?255:0,h=i*this.width*4+4*r;this.data[h]=l,this.data[h+1]=a,this.data[h+2]=s,this.data[h+3]=c}this.pos+=t}},Xe.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,l=(s>>5&n)/n*255|0,c=(s>>11)/e*255|0,h=r*this.width*4+4*o;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=a,this.data[h+3]=255}this.pos+=t}},Xe.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*n;this.data[s]=o,this.data[s+1]=r,this.data[s+2]=i,this.data[s+3]=255}this.pos+=this.width%4}},Xe.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=o,this.data[a+1]=r,this.data[a+2]=i,this.data[a+3]=s}},Xe.prototype.getData=function(){return this.data},
/**
 * @license
 * Copyright (c) 2018 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){t.processBMP=function(e,n,i,r){var o=new Xe(e,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new Je(100).encode(l,100);return t.processJPEG.call(this,c,n,i,r)}}(It.API),Ke.prototype.getData=function(){return this.data},
/**
 * @license
 * Copyright (c) 2019 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){t.processWEBP=function(e,n,i,r){var o=new Ke(e,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},c=new Je(100).encode(l,100);return t.processJPEG.call(this,c,n,i,r)}}(It.API),It.API.processRGBA=function(t,e,n){for(var i=t.data,r=i.length,o=new Uint8Array(r/4*3),s=new Uint8Array(r/4),a=0,l=0,c=0;c<r;c+=4){var h=i[c],u=i[c+1],d=i[c+2],p=i[c+3];o[a++]=h,o[a++]=u,o[a++]=d,s[l++]=p}var f=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:f,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},It.API.setLanguage=function(t){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]&&(this.internal.languageSettings.languageCode=t,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},$e=It.API,qe=$e.getCharWidthsArray=function(t,e){var n,r,o=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:o.metadata.Unicode.widths,c=l.fof?l.fof:1,h=e.kerning?e.kerning:o.metadata.Unicode.kerning,u=h.fof?h.fof:1,d=!1!==e.doKerning,p=0,f=t.length,m=0,g=l[0]||c,v=[];for(n=0;n<f;n++)r=t.charCodeAt(n),"function"==typeof o.metadata.widthOfString?v.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(p=d&&"object"===i(h[r])&&!isNaN(parseInt(h[r][m],10))?h[r][m]/u:0,v.push((l[r]||g)/c+p)),m=r;return v},Ue=$e.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return $e.processArabic&&(t=$e.processArabic(t)),"function"==typeof i.metadata.widthOfString?i.metadata.widthOfString(t,n,r)/n:qe.apply(this,arguments).reduce((function(t,e){return t+e}),0)},Ge=function(t,e,n,i){for(var r=[],o=0,s=t.length,a=0;o!==s&&a+e[o]<n;)a+=e[o],o++;r.push(t.slice(0,o));var l=o;for(a=0;o!==s;)a+e[o]>i&&(r.push(t.slice(l,o)),a=0,l=o),a+=e[o],o++;return l!==o&&r.push(t.slice(l,o)),r},He=function(t,e,n){n||(n={});var i,r,o,s,a,l,c,h=[],u=[h],d=n.textIndent||0,p=0,f=0,m=t.split(" "),g=qe.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?m[0].length+2:n.lineIndent||0){var v=Array(l).join(" "),y=[];m.map((function(t){(t=t.split(/\s*\n/)).length>1?y=y.concat(t.map((function(t,e){return(e&&t.length?"\n":"")+t}))):y.push(t[0])})),m=y,l=Ue.apply(this,[v,n])}for(o=0,s=m.length;o<s;o++){var b=0;if(i=m[o],l&&"\n"==i[0]&&(i=i.substr(1),b=1),d+p+(f=(r=qe.apply(this,[i,n])).reduce((function(t,e){return t+e}),0))>e||b){if(f>e){for(a=Ge.apply(this,[i,r,e-(d+p),e]),h.push(a.shift()),h=[a.pop()];a.length;)u.push([a.shift()]);f=r.slice(i.length-(h[0]?h[0].length:0)).reduce((function(t,e){return t+e}),0)}else h=[i];u.push(h),d=f+l,p=g}else h.push(i),d+=p+f,p=g}return c=l?function(t,e){return(e?v:"")+t.join(" ")}:function(t){return t.join(" ")},u.map(c)},$e.splitTextToSize=function(t,e,n){var i,r=(n=n||{}).fontSize||this.internal.getFontSize(),o=function(t){if(t.widths&&t.kerning)return{widths:t.widths,kerning:t.kerning};var e=this.internal.getFont(t.fontName,t.fontStyle);return e.metadata.Unicode?{widths:e.metadata.Unicode.widths||{0:1},kerning:e.metadata.Unicode.kerning||{}}:{font:e.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/r;o.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/r:0,o.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=i.length;a<l;a++)c=c.concat(He.apply(this,[i[a],s,o]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},o=0;o<e.length;o++)n[e[o]]="0123456789abcdef"[o],r["0123456789abcdef"[o]]=e[o];var s=function(t){return"0x"+parseInt(t,10).toString(16)},a=t.__fontmetrics__.compress=function(t){var e,n,o,l,c=["{"];for(var h in t){if(e=t[h],isNaN(parseInt(h,10))?n="'"+h+"'":(h=parseInt(h,10),n=(n=s(h).slice(2)).slice(0,-1)+r[n.slice(-1)]),"number"==typeof e)e<0?(o=s(e).slice(3),l="-"):(o=s(e).slice(2),l=""),o=l+o.slice(0,-1)+r[o.slice(-1)];else{if("object"!==i(e))throw new Error("Don't know what to do with value type "+i(e)+".");o=a(e)}c.push(n+o)}return c.push("}"),c.join("")},l=t.__fontmetrics__.uncompress=function(t){if("string"!=typeof t)throw new Error("Invalid argument passed to uncompress.");for(var e,i,r,o,s={},a=1,l=s,c=[],h="",u="",d=t.length-1,p=1;p<d;p+=1)"'"==(o=t[p])?e?(r=e.join(""),e=void 0):e=[]:e?e.push(o):"{"==o?(c.push([l,r]),l={},r=void 0):"}"==o?((i=c.pop())[0][i[1]]=l,r=void 0,l=i[0]):"-"==o?a=-1:void 0===r?n.hasOwnProperty(o)?(h+=n[o],r=parseInt(h,16)*a,a=1,h=""):h+=o:n.hasOwnProperty(o)?(u+=n[o],l[r]=parseInt(u,16)*a,a=1,r=void 0,u=""):u+=o;return s},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(t){var e=t.font,n=u.Unicode[e.postScriptName];n&&(e.metadata.Unicode={},e.metadata.Unicode.widths=n.widths,e.metadata.Unicode.kerning=n.kerning);var i=h.Unicode[e.postScriptName];i&&(e.metadata.Unicode.encoding=i,e.encoding=i.codePages[0])}])}(It.API),
/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(t){for(var e=t.length,n=new Uint8Array(e),i=0;i<e;i++)n[i]=t.charCodeAt(i);return n};t.API.events.push(["addFont",function(n){var i=void 0,r=n.font,o=n.instance;if(!r.isStandardFont){if(void 0===o)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if("string"!=typeof(i=!1===o.existsFileInVFS(r.postScriptName)?o.loadFile(r.postScriptName):o.getFileFromVFS(r.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");!function(n,i){i=/^\x00\x01\x00\x00/.test(i)?e(i):e(st(i)),n.metadata=t.API.TTFFont.open(i),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(r,i)}}])}(It),
/** @license
 * Copyright (c) 2012 Willow Systems Corporation, https://github.com/willowsystems
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
function(t){function e(){return(tt.canvg?Promise.resolve(tt.canvg):n.e(869).then(n.bind(n,8869))).catch((function(t){return Promise.reject(new Error("Could not load canvg: "+t))})).then((function(t){return t.default?t.default:t}))}It.API.addSvgAsImage=function(t,n,i,r,o,s,a,l){if(isNaN(n)||isNaN(i))throw nt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(o))throw nt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=o;var h=c.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return e().then((function(e){return e.fromString(h,t,u)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(t){return t.render(u)})).then((function(){d.addImage(c.toDataURL("image/jpeg",1),n,i,r,o,a,l)}))}}(),It.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(e,n);return this},It.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,o,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(a),c=[],h=0,u=0,d=0;function p(t,e){var n,i=!1;for(n=0;n<t.length;n+=1)t[n]===e&&(i=!0);return i}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===t||!0===e){var f=l.length;for(d=0;d<f;d+=1)n[l[d]].value=n[l[d]].defaultValue,n[l[d]].explicitSet=!1}if("object"===i(t))for(o in t)if(s=t[o],p(l,o)&&void 0!==s){if("boolean"===n[o].type&&"boolean"==typeof s)n[o].value=s;else if("name"===n[o].type&&p(n[o].valueSet,s))n[o].value=s;else if("integer"===n[o].type&&Number.isInteger(s))n[o].value=s;else if("array"===n[o].type){for(h=0;h<s.length;h+=1)if(r=!0,1===s[h].length&&"number"==typeof s[h][0])c.push(String(s[h]-1));else if(s[h].length>1){for(u=0;u<s[h].length;u+=1)"number"!=typeof s[h][u]&&(r=!1);!0===r&&c.push([s[h][0]-1,s[h][1]-1].join(" "))}n[o].value="["+c.join(" ")+"]"}else n[o].value=n[o].defaultValue;n[o].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var t,e=[];for(t in n)!0===n[t].explicitSet&&("name"===n[t].type?e.push("/"+t+" /"+n[t].value):e.push("/"+t+" "+n[t].value));0!==e.length&&this.internal.write("/ViewerPreferences\n<<\n"+e.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},
/** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
function(t){var e=function(){var t='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(t)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),r=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),o=unescape(encodeURIComponent("</x:xmpmeta>")),s=n.length+i.length+r.length+e.length+o.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+s+" >>"),this.internal.write("stream"),this.internal.write(e+n+i+r+o),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(t,i){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:t,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(It.API),function(t){var e=t.API,n=e.pdfEscape16=function(t,e){for(var n,i=e.metadata.Unicode.widths,r=["","0","00","000","0000"],o=[""],s=0,a=t.length;s<a;++s){if(n=e.metadata.characterToGlyph(t.charCodeAt(s)),e.metadata.glyIdsUsed.push(n),e.metadata.toUnicode[n]=t.charCodeAt(s),-1==i.indexOf(n)&&(i.push(n),i.push([parseInt(e.metadata.widthOfGlyph(n),10)])),"0"==n)return o.join("");n=n.toString(16),o.push(r[4-n.length],n)}return o.join("")},i=function(t){var e,n,i,r,o,s,a;for(o="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",i=[],s=0,a=(n=Object.keys(t).sort((function(t,e){return t-e}))).length;s<a;s++)e=n[s],i.length>=100&&(o+="\n"+i.length+" beginbfchar\n"+i.join("\n")+"\nendbfchar",i=[]),void 0!==t[e]&&null!==t[e]&&"function"==typeof t[e].toString&&(r=("0000"+t[e].toString(16)).slice(-4),e=("0000"+(+e).toString(16)).slice(-4),i.push("<"+e+"><"+r+">"));return i.length&&(o+="\n"+i.length+" beginbfchar\n"+i.join("\n")+"\nendbfchar\n"),o+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};e.events.push(["putFont",function(e){!function(e){var n=e.font,r=e.out,o=e.newObject,s=e.putStream;if(n.metadata instanceof t.API.TTFFont&&"Identity-H"===n.encoding){for(var a=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),c="",h=0;h<l.length;h++)c+=String.fromCharCode(l[h]);var u=o();s({data:c,addLength1:!0,objectId:u}),r("endobj");var d=o();s({data:i(n.metadata.toUnicode),addLength1:!0,objectId:d}),r("endobj");var p=o();r("<<"),r("/Type /FontDescriptor"),r("/FontName /"+Ct(n.fontName)),r("/FontFile2 "+u+" 0 R"),r("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),r("/Flags "+n.metadata.flags),r("/StemV "+n.metadata.stemV),r("/ItalicAngle "+n.metadata.italicAngle),r("/Ascent "+n.metadata.ascender),r("/Descent "+n.metadata.decender),r("/CapHeight "+n.metadata.capHeight),r(">>"),r("endobj");var f=o();r("<<"),r("/Type /Font"),r("/BaseFont /"+Ct(n.fontName)),r("/FontDescriptor "+p+" 0 R"),r("/W "+t.API.PDFObject.convert(a)),r("/CIDToGIDMap /Identity"),r("/DW 1000"),r("/Subtype /CIDFontType2"),r("/CIDSystemInfo"),r("<<"),r("/Supplement 0"),r("/Registry (Adobe)"),r("/Ordering ("+n.encoding+")"),r(">>"),r(">>"),r("endobj"),n.objectNumber=o(),r("<<"),r("/Type /Font"),r("/Subtype /Type0"),r("/ToUnicode "+d+" 0 R"),r("/BaseFont /"+Ct(n.fontName)),r("/Encoding /"+n.encoding),r("/DescendantFonts ["+f+" 0 R]"),r(">>"),r("endobj"),n.isAlreadyPutted=!0}}(e)}]),e.events.push(["putFont",function(e){!function(e){var n=e.font,r=e.out,o=e.newObject,s=e.putStream;if(n.metadata instanceof t.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var a=n.metadata.rawData,l="",c=0;c<a.length;c++)l+=String.fromCharCode(a[c]);var h=o();s({data:l,addLength1:!0,objectId:h}),r("endobj");var u=o();s({data:i(n.metadata.toUnicode),addLength1:!0,objectId:u}),r("endobj");var d=o();r("<<"),r("/Descent "+n.metadata.decender),r("/CapHeight "+n.metadata.capHeight),r("/StemV "+n.metadata.stemV),r("/Type /FontDescriptor"),r("/FontFile2 "+h+" 0 R"),r("/Flags 96"),r("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),r("/FontName /"+Ct(n.fontName)),r("/ItalicAngle "+n.metadata.italicAngle),r("/Ascent "+n.metadata.ascender),r(">>"),r("endobj"),n.objectNumber=o();for(var p=0;p<n.metadata.hmtx.widths.length;p++)n.metadata.hmtx.widths[p]=parseInt(n.metadata.hmtx.widths[p]*(1e3/n.metadata.head.unitsPerEm));r("<</Subtype/TrueType/Type/Font/ToUnicode "+u+" 0 R/BaseFont/"+Ct(n.fontName)+"/FontDescriptor "+d+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),r("endobj"),n.isAlreadyPutted=!0}}(e)}]);var r=function(t){var e,i=t.text||"",r=t.x,o=t.y,s=t.options||{},a=t.mutex||{},l=a.pdfEscape,c=a.activeFontKey,h=a.fonts,u=c,d="",p=0,f="",m=h[u].encoding;if("Identity-H"!==h[u].encoding)return{text:i,x:r,y:o,options:s,mutex:a};for(f=i,u=c,Array.isArray(i)&&(f=i[0]),p=0;p<f.length;p+=1)h[u].metadata.hasOwnProperty("cmap")&&(e=h[u].metadata.cmap.unicode.codeMap[f[p].charCodeAt(0)]),e||f[p].charCodeAt(0)<256&&h[u].metadata.hasOwnProperty("Unicode")?d+=f[p]:d+="";var g="";return parseInt(u.slice(1))<14||"WinAnsiEncoding"===m?g=l(d,u).split("").map((function(t){return t.charCodeAt(0).toString(16)})).join(""):"Identity-H"===m&&(g=n(d,h[u])),a.isHex=!0,{text:g,x:r,y:o,options:s,mutex:a}};e.events.push(["postProcessText",function(t){var e=t.text||"",n=[],i={text:e,x:t.x,y:t.y,options:t.options,mutex:t.mutex};if(Array.isArray(e)){var o=0;for(o=0;o<e.length;o+=1)Array.isArray(e[o])&&3===e[o].length?n.push([r(Object.assign({},i,{text:e[o][0]})).text,e[o][1],e[o][2]]):n.push(r(Object.assign({},i,{text:e[o]})).text);t.text=n}else t.text=r(Object.assign({},i,{text:e})).text}])}(It),
/**
 * @license
 * jsPDF virtual FileSystem functionality
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]},t.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},t.getFileFromVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null}}(It.API),
/**
 * @license
 * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
 * MIT License
 */
function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(t){var n,i,r,o,s,a,l,c=e,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},p={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},f=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],m=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,v=0;this.__bidiEngine__={};var y=function(t){var e=t.charCodeAt(),n=e>>8,i=p[n];return void 0!==i?c[256*i+(255&e)]:252===n||253===n?"AL":m.test(n)?"L":8===n?"R":"N"},b=function(t){for(var e,n=0;n<t.length;n++){if("L"===(e=y(t.charAt(n))))return!1;if("R"===e)return!0}return!1},w=function(t,e,s,a){var l,c,h,u,d=e[a];switch(d){case"L":case"R":g=!1;break;case"N":case"AN":break;case"EN":g&&(d="AN");break;case"AL":g=!0,d="R";break;case"WS":d="N";break;case"CS":a<1||a+1>=e.length||"EN"!==(l=s[a-1])&&"AN"!==l||"EN"!==(c=e[a+1])&&"AN"!==c?d="N":g&&(c="AN"),d=c===l?c:"N";break;case"ES":d="EN"===(l=a>0?s[a-1]:"B")&&a+1<e.length&&"EN"===e[a+1]?"EN":"N";break;case"ET":if(a>0&&"EN"===s[a-1]){d="EN";break}if(g){d="N";break}for(h=a+1,u=e.length;h<u&&"ET"===e[h];)h++;d=h<u&&"EN"===e[h]?"EN":"N";break;case"NSM":if(r&&!o){for(u=e.length,h=a+1;h<u&&"NSM"===e[h];)h++;if(h<u){var p=t[a],f=p>=1425&&p<=2303||64286===p;if(l=e[h],f&&("R"===l||"AL"===l)){d="R";break}}}d=a<1||"B"===(l=e[a-1])?"N":s[a-1];break;case"B":g=!1,n=!0,d=v;break;case"S":i=!0,d="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"BN":d="N"}return d},x=function(t,e,n){var i=t.split("");return n&&S(i,n,{hiLevel:v}),i.reverse(),e&&e.reverse(),i.join("")},S=function(t,e,r){var o,s,a,l,c,p=-1,f=t.length,m=0,b=[],x=v?u:h,S=[];for(g=!1,n=!1,i=!1,s=0;s<f;s++)S[s]=y(t[s]);for(a=0;a<f;a++){if(c=m,b[a]=w(t,S,b,a),o=240&(m=x[c][d[b[a]]]),m&=15,e[a]=l=x[m][5],o>0)if(16===o){for(s=p;s<a;s++)e[s]=1;p=-1}else p=-1;if(x[m][6])-1===p&&(p=a);else if(p>-1){for(s=p;s<a;s++)e[s]=l;p=-1}"B"===S[a]&&(e[a]=0),r.hiLevel|=l}i&&function(t,e,n){for(var i=0;i<n;i++)if("S"===t[i]){e[i]=v;for(var r=i-1;r>=0&&"WS"===t[r];r--)e[r]=v}}(S,e,f)},k=function(t,e,i,r,o){if(!(o.hiLevel<t)){if(1===t&&1===v&&!n)return e.reverse(),void(i&&i.reverse());for(var s,a,l,c,h=e.length,u=0;u<h;){if(r[u]>=t){for(l=u+1;l<h&&r[l]>=t;)l++;for(c=u,a=l-1;c<a;c++,a--)s=e[c],e[c]=e[a],e[a]=s,i&&(s=i[c],i[c]=i[a],i[a]=s);u=l}u++}}},_=function(t,e,n){var i=t.split(""),r={hiLevel:v};return n||(n=[]),S(i,n,r),function(t,e,n){if(0!==n.hiLevel&&l)for(var i,r=0;r<t.length;r++)1===e[r]&&(i=f.indexOf(t[r]))>=0&&(t[r]=f[i+1])}(i,n,r),k(2,i,e,n,r),k(1,i,e,n,r),i.join("")};return this.__bidiEngine__.doBidiReorder=function(t,e,n){if(function(t,e){if(e)for(var n=0;n<t.length;n++)e[n]=n;void 0===o&&(o=b(t)),void 0===a&&(a=b(t))}(t,e),r||!s||a)if(r&&s&&o^a)v=o?1:0,t=x(t,e,n);else if(!r&&s&&a)v=o?1:0,t=_(t,e,n),t=x(t,e);else if(!r||o||s||a){if(r&&!s&&o^a)t=x(t,e),o?(v=0,t=_(t,e,n)):(v=1,t=_(t,e,n),t=x(t,e));else if(r&&o&&!s&&a)v=1,t=_(t,e,n),t=x(t,e);else if(!r&&!s&&o^a){var i=l;o?(v=1,t=_(t,e,n),v=0,l=!1,t=_(t,e,n),l=i):(v=0,t=_(t,e,n),t=x(t,e),v=1,l=!1,t=_(t,e,n),l=i,t=x(t,e))}}else v=0,t=_(t,e,n);else v=o?1:0,t=_(t,e,n);return t},this.__bidiEngine__.setOptions=function(t){t&&(r=t.isInputVisual,s=t.isOutputVisual,o=t.isInputRtl,a=t.isOutputRtl,l=t.isSymmetricSwapping)},this.__bidiEngine__.setOptions(t),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(t){var e=t.text,i=(t.x,t.y,t.options||{}),r=(t.mutex,i.lang,[]);if(i.isInputVisual="boolean"!=typeof i.isInputVisual||i.isInputVisual,n.setOptions(i),"[object Array]"===Object.prototype.toString.call(e)){var o=0;for(r=[],o=0;o<e.length;o+=1)"[object Array]"===Object.prototype.toString.call(e[o])?r.push([n.doBidiReorder(e[o][0]),e[o][1],e[o][2]]):r.push([n.doBidiReorder(e[o])]);t.text=r}else t.text=n.doBidiReorder(e);n.setOptions({isInputVisual:!0})}])}(It),It.API.TTFFont=function(){function t(t){var e;if(this.rawData=t,e=this.contents=new Qe(t),this.contents.pos=4,"ttcf"===e.readString(4))throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new bn(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new tn(this.contents),this.head=new rn(this),this.name=new un(this),this.cmap=new sn(this),this.toUnicode={},this.hhea=new an(this),this.maxp=new dn(this),this.hmtx=new pn(this),this.post=new cn(this),this.os2=new ln(this),this.loca=new yn(this),this.glyf=new mn(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var t,e,n,i,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var e,n,i,r;for(r=[],e=0,n=(i=this.bbox).length;e<n;e++)t=i[e],r.push(Math.round(t*this.scaleFactor));return r}.call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),0!=(32768&(e=i>>16))&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(r=this.familyClass)||2===r||3===r||4===r||5===r||7===r,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(t){var e;return(null!=(e=this.cmap.unicode)?e.codeMap[t]:void 0)||0},t.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},t.prototype.widthOfString=function(t,e,n){var i,r,o,s;for(o=0,r=0,s=(t=""+t).length;0<=s?r<s:r>s;r=0<=s?++r:--r)i=t.charCodeAt(r),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/e)||0;return o*(e/1e3)},t.prototype.lineHeight=function(t,e){var n;return null==e&&(e=!1),n=e?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},t}();var Ze,Qe=function(){function t(t){this.data=null!=t?t:[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(t){return this.data[this.pos++]=t},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},t.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},t.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},t.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(t){var e,n,i;for(i=[],e=0,n=t.length;0<=n?e<n:e>n;e=0<=n?++e:--e)i.push(this.writeByte(t.charCodeAt(e)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(t){return this.writeInt16(t)},t.prototype.readLongLong=function(){var t,e,n,i,r,o,s,a;return t=this.readByte(),e=this.readByte(),n=this.readByte(),i=this.readByte(),r=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^r)+65536*(255^o)+256*(255^s)+(255^a)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*i+16777216*r+65536*o+256*s+a},t.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(t){return this.writeInt32(t)},t.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)e.push(this.readByte());return e},t.prototype.write=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],r.push(this.writeByte(e));return r},t}(),tn=function(){var t;function e(t){var e,n,i;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:n>i;n=0<=i?++n:--n)e={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[e.tag]=e}return e.prototype.encode=function(e){var n,i,r,o,s,a,l,c,h,u,d,p,f;for(f in d=Object.keys(e).length,a=Math.log(2),h=16*Math.floor(Math.log(d)/a),o=Math.floor(h/a),c=16*d-h,(i=new Qe).writeInt(this.scalarType),i.writeShort(d),i.writeShort(h),i.writeShort(o),i.writeShort(c),r=16*d,l=i.pos+r,s=null,p=[],e)for(u=e[f],i.writeString(f),i.writeInt(t(u)),i.writeInt(l),i.writeInt(u.length),p=p.concat(u),"head"===f&&(s=l),l+=u.length;l%4;)p.push(0),l++;return i.write(p),n=2981146554-t(i.data),i.pos=s+8,i.writeUInt32(n),i.data},t=function(t){var e,n,i,r;for(t=fn.call(t);t.length%4;)t.push(0);for(i=new Qe(t),n=0,e=0,r=t.length;e<r;e=e+=4)n+=i.readUInt32();return 4294967295&n},e}(),en={}.hasOwnProperty,nn=function(t,e){for(var n in e)en.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Ze=function(){function t(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var rn=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Ze),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var e;return(e=new Qe).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},e}(),on=function(){function t(t,e){var n,i,r,o,s,a,l,c,h,u,d,p,f,m,g,v,y;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(a=0;a<256;++a)this.codeMap[a]=t.readByte();break;case 4:for(d=t.readUInt16(),u=d/2,t.pos+=6,r=function(){var e,n;for(n=[],a=e=0;0<=u?e<u:e>u;a=0<=u?++e:--e)n.push(t.readUInt16());return n}(),t.pos+=2,f=function(){var e,n;for(n=[],a=e=0;0<=u?e<u:e>u;a=0<=u?++e:--e)n.push(t.readUInt16());return n}(),l=function(){var e,n;for(n=[],a=e=0;0<=u?e<u:e>u;a=0<=u?++e:--e)n.push(t.readUInt16());return n}(),c=function(){var e,n;for(n=[],a=e=0;0<=u?e<u:e>u;a=0<=u?++e:--e)n.push(t.readUInt16());return n}(),i=(this.length-t.pos+this.offset)/2,s=function(){var e,n;for(n=[],a=e=0;0<=i?e<i:e>i;a=0<=i?++e:--e)n.push(t.readUInt16());return n}(),a=g=0,y=r.length;g<y;a=++g)for(m=r[a],n=v=p=f[a];p<=m?v<=m:v>=m;n=p<=m?++v:--v)0===c[a]?o=n+l[a]:0!==(o=s[c[a]/2+(n-p)-(u-a)]||0)&&(o+=l[a]),this.codeMap[n]=65535&o}t.pos=h}return t.encode=function(t,e){var n,i,r,o,s,a,l,c,h,u,d,p,f,m,g,v,y,b,w,x,S,k,_,E,L,C,A,M,N,P,T,I,O,D,j,R,F,B,z,$,q,U,G,H,W,V;switch(M=new Qe,o=Object.keys(t).sort((function(t,e){return t-e})),e){case"macroman":for(f=0,m=function(){var t=[];for(p=0;p<256;++p)t.push(0);return t}(),v={0:0},r={},N=0,O=o.length;N<O;N++)null==v[G=t[i=o[N]]]&&(v[G]=++f),r[i]={old:t[i],new:v[t[i]]},m[i]=v[t[i]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(m),{charMap:r,subtable:M.data,maxGlyphID:f+1};case"unicode":for(C=[],h=[],y=0,v={},n={},g=l=null,P=0,D=o.length;P<D;P++)null==v[w=t[i=o[P]]]&&(v[w]=++y),n[i]={old:w,new:v[w]},s=v[w]-i,null!=g&&s===l||(g&&h.push(g),C.push(i),l=s),g=i;for(g&&h.push(g),h.push(65535),C.push(65535),E=2*(_=C.length),k=2*Math.pow(Math.log(_)/Math.LN2,2),u=Math.log(k/2)/Math.LN2,S=2*_-k,a=[],x=[],d=[],p=T=0,j=C.length;T<j;p=++T){if(L=C[p],c=h[p],65535===L){a.push(0),x.push(0);break}if(L-(A=n[L].new)>=32768)for(a.push(0),x.push(2*(d.length+_-p)),i=I=L;L<=c?I<=c:I>=c;i=L<=c?++I:--I)d.push(n[i].new);else a.push(A-L),x.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*_+2*d.length),M.writeUInt16(0),M.writeUInt16(E),M.writeUInt16(k),M.writeUInt16(u),M.writeUInt16(S),q=0,R=h.length;q<R;q++)i=h[q],M.writeUInt16(i);for(M.writeUInt16(0),U=0,F=C.length;U<F;U++)i=C[U],M.writeUInt16(i);for(H=0,B=a.length;H<B;H++)s=a[H],M.writeUInt16(s);for(W=0,z=x.length;W<z;W++)b=x[W],M.writeUInt16(b);for(V=0,$=d.length;V<$;V++)f=d[V],M.writeUInt16(f);return{charMap:n,subtable:M.data,maxGlyphID:y+1}}},t}(),sn=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Ze),e.prototype.tag="cmap",e.prototype.parse=function(t){var e,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)e=new on(t,this.offset),this.tables.push(e),e.isUnicode&&null==this.unicode&&(this.unicode=e);return!0},e.encode=function(t,e){var n,i;return null==e&&(e="macroman"),n=on.encode(t,e),(i=new Qe).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},e}(),an=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Ze),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),ln=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Ze),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,n;for(n=[],e=0;e<10;++e)n.push(t.readByte());return n}(),this.charRange=function(){var e,n;for(n=[],e=0;e<4;++e)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,n;for(n=[],e=0;e<2;e=++e)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),cn=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Ze),e.prototype.tag="post",e.prototype.parse=function(t){var e,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var r;for(n=t.readUInt16(),this.glyphNameIndex=[],r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)e=t.readByte(),i.push(this.names.push(t.readString(e)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 196608:break;case 262144:return this.map=function(){var e,n,i;for(i=[],r=e=0,n=this.file.maxp.numGlyphs;0<=n?e<n:e>n;r=0<=n?++e:--e)i.push(t.readUInt32());return i}.call(this)}},e}(),hn=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},un=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Ze),e.prototype.tag="name",e.prototype.parse=function(t){var e,n,i,r,o,s,a,l,c,h,u;for(t.pos=this.offset,t.readShort(),e=t.readShort(),s=t.readShort(),n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+s+t.readShort()});for(a={},r=c=0,h=n.length;c<h;r=++c)i=n[r],t.pos=i.offset,l=t.readString(i.length),o=new hn(l,i),null==a[u=i.nameID]&&(a[u]=[]),a[i.nameID].push(o);this.strings=a,this.copyright=a[0],this.fontFamily=a[1],this.fontSubfamily=a[2],this.uniqueSubfamily=a[3],this.fontName=a[4],this.version=a[5];try{this.postscriptName=a[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(t){this.postscriptName=a[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=a[7],this.manufacturer=a[8],this.designer=a[9],this.description=a[10],this.vendorUrl=a[11],this.designerUrl=a[12],this.license=a[13],this.licenseUrl=a[14],this.preferredFamily=a[15],this.preferredSubfamily=a[17],this.compatibleFull=a[18],this.sampleText=a[19]},e}(),dn=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Ze),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),pn=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Ze),e.prototype.tag="hmtx",e.prototype.parse=function(t){var e,n,i,r,o,s,a;for(t.pos=this.offset,this.metrics=[],e=0,s=this.file.hhea.numberOfMetrics;0<=s?e<s:e>s;e=0<=s?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,r;for(r=[],e=n=0;0<=i?n<i:n>i;e=0<=i?++n:--n)r.push(t.readInt16());return r}(),this.widths=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.metrics).length;t<e;t++)r=n[t],i.push(r.advance);return i}.call(this),n=this.widths[this.widths.length-1],a=[],e=o=0;0<=i?o<i:o>i;e=0<=i?++o:--o)a.push(this.widths.push(n));return a},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),fn=[].slice,mn=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Ze),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var e,n,i,r,o,s,a,l,c,h;return t in this.cache?this.cache[t]:(r=this.file.loca,e=this.file.contents,n=r.indexOf(t),0===(i=r.lengthOf(t))?this.cache[t]=null:(e.pos=this.offset+n,o=(s=new Qe(e.read(i))).readShort(),l=s.readShort(),h=s.readShort(),a=s.readShort(),c=s.readShort(),this.cache[t]=-1===o?new vn(s,l,h,a,c):new gn(s,o,l,h,a,c),this.cache[t]))},e.prototype.encode=function(t,e,n){var i,r,o,s,a;for(o=[],r=[],s=0,a=e.length;s<a;s++)i=t[e[s]],r.push(o.length),i&&(o=o.concat(i.encode(n)));return r.push(o.length),{table:o,offsets:r}},e}(),gn=function(){function t(t,e,n,i,r,o){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=i,this.xMax=r,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),vn=function(){function t(t,e,n,i,r){var o,s;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=i,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;s=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&s;)o.pos+=1&s?4:2,128&s?o.pos+=8:64&s?o.pos+=4:8&s&&(o.pos+=2)}return t.prototype.encode=function(){var t,e,n;for(e=new Qe(fn.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)e.pos=this.glyphOffsets[t];return e.data},t}(),yn=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Ze),e.prototype.tag="loca",e.prototype.parse=function(t){var e,n;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=0===e?function(){var e,i;for(i=[],n=0,e=this.length;n<e;n+=2)i.push(2*t.readUInt16());return i}.call(this):function(){var e,i;for(i=[],n=0,e=this.length;n<e;n+=4)i.push(t.readUInt32());return i}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,e){for(var n=new Uint32Array(this.offsets.length),i=0,r=0,o=0;o<n.length;++o)if(n[o]=i,r<e.length&&e[r]==o){++r,n[o]=i;var s=this.offsets[o],a=this.offsets[o+1]-s;a>0&&(i+=a)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},e}(),bn=function(){function t(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var t,e,n,i,r;for(e in i=this.font.cmap.tables[0].codeMap,t={},r=this.subset)n=r[e],t[e]=i[n];return t},t.prototype.glyphsFor=function(t){var e,n,i,r,o,s,a;for(i={},o=0,s=t.length;o<s;o++)i[r=t[o]]=this.font.glyf.glyphFor(r);for(r in e=[],i)(null!=(n=i[r])?n.compound:void 0)&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(r in a=this.glyphsFor(e))n=a[r],i[r]=n;return i},t.prototype.encode=function(t,e){var n,i,r,o,s,a,l,c,h,u,d,p,f,m,g;for(i in n=sn.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),d={0:0},g=n.charMap)d[(a=g[i]).old]=a.new;for(p in u=n.maxGlyphID,o)p in d||(d[p]=u++);return c=function(t){var e,n;for(e in n={},t)n[t[e]]=e;return n}(d),h=Object.keys(c).sort((function(t,e){return t-e})),f=function(){var t,e,n;for(n=[],t=0,e=h.length;t<e;t++)s=h[t],n.push(c[s]);return n}(),r=this.font.glyf.encode(o,f,d),l=this.font.loca.encode(r.offsets,f),m={cmap:this.font.cmap.raw(),glyf:r.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(m["OS/2"]=this.font.os2.raw()),this.font.directory.encode(m)},t}();It.API.PDFObject=function(){var t;function e(){}return t=function(t,e){return(Array(e+1).join("0")+t).slice(-e)},e.convert=function(n){var i,r,o,s;if(Array.isArray(n))return"["+function(){var t,r,o;for(o=[],t=0,r=n.length;t<r;t++)i=n[t],o.push(e.convert(i));return o}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(r in o=["<<"],n)s=n[r],o.push("/"+r+" "+e.convert(s));return o.push(">>"),o.join("\n")}return""+n},e}()},89:function(t,e){"use strict";e.Z=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n}},65:function(t,e,n){"use strict";n.d(e,{MT:function(){return tt}});n(7658);var i=n(3396),r=n(4870);function o(){return s().__VUE_DEVTOOLS_GLOBAL_HOOK__}function s(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{}}const a="function"===typeof Proxy,l="devtools-plugin:setup",c="plugin:settings:set";let h,u;function d(){var t;return void 0!==h||("undefined"!==typeof window&&window.performance?(h=!0,u=window.performance):"undefined"!==typeof n.g&&(null===(t=n.g.perf_hooks)||void 0===t?void 0:t.performance)?(h=!0,u=n.g.perf_hooks.performance):h=!1),h}function p(){return d()?u.now():Date.now()}class f{constructor(t,e){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=e;const n={};if(t.settings)for(const s in t.settings){const e=t.settings[s];n[s]=e.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let r=Object.assign({},n);try{const t=localStorage.getItem(i),e=JSON.parse(t);Object.assign(r,e)}catch(o){}this.fallbacks={getSettings(){return r},setSettings(t){try{localStorage.setItem(i,JSON.stringify(t))}catch(o){}r=t},now(){return p()}},e&&e.on(c,((t,e)=>{t===this.plugin.id&&this.fallbacks.setSettings(e)})),this.proxiedOn=new Proxy({},{get:(t,e)=>this.target?this.target.on[e]:(...t)=>{this.onQueue.push({method:e,args:t})}}),this.proxiedTarget=new Proxy({},{get:(t,e)=>this.target?this.target[e]:"on"===e?this.proxiedOn:Object.keys(this.fallbacks).includes(e)?(...t)=>(this.targetQueue.push({method:e,args:t,resolve:()=>{}}),this.fallbacks[e](...t)):(...t)=>new Promise((n=>{this.targetQueue.push({method:e,args:t,resolve:n})}))})}async setRealTarget(t){this.target=t;for(const e of this.onQueue)this.target.on[e.method](...e.args);for(const e of this.targetQueue)e.resolve(await this.target[e.method](...e.args))}}function m(t,e){const n=t,i=s(),r=o(),c=a&&n.enableEarlyProxy;if(!r||!i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&c){const t=c?new f(n,r):null,o=i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[];o.push({pluginDescriptor:n,setupFn:e,proxy:t}),t&&e(t.proxiedTarget)}else r.emit(l,t,e)}
/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */
var g="store";function v(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}function y(t){return null!==t&&"object"===typeof t}function b(t){return t&&"function"===typeof t.then}function w(t,e){return function(){return t(e)}}function x(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function S(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;_(t,n,[],t._modules.root,!0),k(t,n,e)}function k(t,e,n){var o=t._state,s=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var a=t._wrappedGetters,l={},c={},h=(0,r.B)(!0);h.run((function(){v(a,(function(e,n){l[n]=w(e,t),c[n]=(0,i.Fl)((function(){return l[n]()})),Object.defineProperty(t.getters,n,{get:function(){return c[n].value},enumerable:!0})}))})),t._state=(0,r.qj)({data:e}),t._scope=h,t.strict&&N(t),o&&n&&t._withCommit((function(){o.data=null})),s&&s.stop()}function _(t,e,n,i,r){var o=!n.length,s=t._modules.getNamespace(n);if(i.namespaced&&(t._modulesNamespaceMap[s],t._modulesNamespaceMap[s]=i),!o&&!r){var a=P(e,n.slice(0,-1)),l=n[n.length-1];t._withCommit((function(){a[l]=i.state}))}var c=i.context=E(t,s,n);i.forEachMutation((function(e,n){var i=s+n;C(t,i,e,c)})),i.forEachAction((function(e,n){var i=e.root?n:s+n,r=e.handler||e;A(t,i,r,c)})),i.forEachGetter((function(e,n){var i=s+n;M(t,i,e,c)})),i.forEachChild((function(i,o){_(t,e,n.concat(o),i,r)}))}function E(t,e,n){var i=""===e,r={dispatch:i?t.dispatch:function(n,i,r){var o=T(n,i,r),s=o.payload,a=o.options,l=o.type;return a&&a.root||(l=e+l),t.dispatch(l,s)},commit:i?t.commit:function(n,i,r){var o=T(n,i,r),s=o.payload,a=o.options,l=o.type;a&&a.root||(l=e+l),t.commit(l,s,a)}};return Object.defineProperties(r,{getters:{get:i?function(){return t.getters}:function(){return L(t,e)}},state:{get:function(){return P(t.state,n)}}}),r}function L(t,e){if(!t._makeLocalGettersCache[e]){var n={},i=e.length;Object.keys(t.getters).forEach((function(r){if(r.slice(0,i)===e){var o=r.slice(i);Object.defineProperty(n,o,{get:function(){return t.getters[r]},enumerable:!0})}})),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function C(t,e,n,i){var r=t._mutations[e]||(t._mutations[e]=[]);r.push((function(e){n.call(t,i.state,e)}))}function A(t,e,n,i){var r=t._actions[e]||(t._actions[e]=[]);r.push((function(e){var r=n.call(t,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:t.getters,rootState:t.state},e);return b(r)||(r=Promise.resolve(r)),t._devtoolHook?r.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):r}))}function M(t,e,n,i){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(t){return n(i.state,i.getters,t.state,t.getters)})}function N(t){(0,i.YP)((function(){return t._state.data}),(function(){0}),{deep:!0,flush:"sync"})}function P(t,e){return e.reduce((function(t,e){return t[e]}),t)}function T(t,e,n){return y(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var I="vuex bindings",O="vuex:mutations",D="vuex:actions",j="vuex",R=0;function F(t,e){m({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[I]},(function(n){n.addTimelineLayer({id:O,label:"Vuex Mutations",color:B}),n.addTimelineLayer({id:D,label:"Vuex Actions",color:B}),n.addInspector({id:j,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===t&&n.inspectorId===j)if(n.filter){var i=[];H(i,e._modules.root,n.filter,""),n.rootNodes=i}else n.rootNodes=[G(e._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===t&&n.inspectorId===j){var i=n.nodeId;L(e,i),n.state=W(Y(e._modules,i),"root"===i?e.getters:e._makeLocalGettersCache,i)}})),n.on.editInspectorState((function(n){if(n.app===t&&n.inspectorId===j){var i=n.nodeId,r=n.path;"root"!==i&&(r=i.split("/").filter(Boolean).concat(r)),e._withCommit((function(){n.set(e._state.data,r,n.state.value)}))}})),e.subscribe((function(t,e){var i={};t.payload&&(i.payload=t.payload),i.state=e,n.notifyComponentUpdate(),n.sendInspectorTree(j),n.sendInspectorState(j),n.addTimelineEvent({layerId:O,event:{time:Date.now(),title:t.type,data:i}})})),e.subscribeAction({before:function(t,e){var i={};t.payload&&(i.payload=t.payload),t._id=R++,t._time=Date.now(),i.state=e,n.addTimelineEvent({layerId:D,event:{time:t._time,title:t.type,groupId:t._id,subtitle:"start",data:i}})},after:function(t,e){var i={},r=Date.now()-t._time;i.duration={_custom:{type:"duration",display:r+"ms",tooltip:"Action duration",value:r}},t.payload&&(i.payload=t.payload),i.state=e,n.addTimelineEvent({layerId:D,event:{time:Date.now(),title:t.type,groupId:t._id,subtitle:"end",data:i}})}})}))}var B=8702998,z=6710886,$=16777215,q={label:"namespaced",textColor:$,backgroundColor:z};function U(t){return t&&"root"!==t?t.split("/").slice(-2,-1)[0]:"Root"}function G(t,e){return{id:e||"root",label:U(e),tags:t.namespaced?[q]:[],children:Object.keys(t._children).map((function(n){return G(t._children[n],e+n+"/")}))}}function H(t,e,n,i){i.includes(n)&&t.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:e.namespaced?[q]:[]}),Object.keys(e._children).forEach((function(r){H(t,e._children[r],n,i+r+"/")}))}function W(t,e,n){e="root"===n?e:e[n];var i=Object.keys(e),r={state:Object.keys(t.state).map((function(e){return{key:e,editable:!0,value:t.state[e]}}))};if(i.length){var o=V(e);r.getters=Object.keys(o).map((function(t){return{key:t.endsWith("/")?U(t):t,editable:!1,value:J((function(){return o[t]}))}}))}return r}function V(t){var e={};return Object.keys(t).forEach((function(n){var i=n.split("/");if(i.length>1){var r=e,o=i.pop();i.forEach((function(t){r[t]||(r[t]={_custom:{value:{},display:t,tooltip:"Module",abstract:!0}}),r=r[t]._custom.value})),r[o]=J((function(){return t[n]}))}else e[n]=J((function(){return t[n]}))})),e}function Y(t,e){var n=e.split("/").filter((function(t){return t}));return n.reduce((function(t,i,r){var o=t[i];if(!o)throw new Error('Missing module "'+i+'" for path "'+e+'".');return r===n.length-1?o:o._children}),"root"===e?t:t.root._children)}function J(t){try{return t()}catch(e){return e}}var X=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"===typeof n?n():n)||{}},K={namespaced:{configurable:!0}};K.namespaced.get=function(){return!!this._rawModule.namespaced},X.prototype.addChild=function(t,e){this._children[t]=e},X.prototype.removeChild=function(t){delete this._children[t]},X.prototype.getChild=function(t){return this._children[t]},X.prototype.hasChild=function(t){return t in this._children},X.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},X.prototype.forEachChild=function(t){v(this._children,t)},X.prototype.forEachGetter=function(t){this._rawModule.getters&&v(this._rawModule.getters,t)},X.prototype.forEachAction=function(t){this._rawModule.actions&&v(this._rawModule.actions,t)},X.prototype.forEachMutation=function(t){this._rawModule.mutations&&v(this._rawModule.mutations,t)},Object.defineProperties(X.prototype,K);var Z=function(t){this.register([],t,!1)};function Q(t,e,n){if(e.update(n),n.modules)for(var i in n.modules){if(!e.getChild(i))return void 0;Q(t.concat(i),e.getChild(i),n.modules[i])}}Z.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},Z.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return e=e.getChild(n),t+(e.namespaced?n+"/":"")}),"")},Z.prototype.update=function(t){Q([],this.root,t)},Z.prototype.register=function(t,e,n){var i=this;void 0===n&&(n=!0);var r=new X(e,n);if(0===t.length)this.root=r;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],r)}e.modules&&v(e.modules,(function(e,r){i.register(t.concat(r),e,n)}))},Z.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1],i=e.getChild(n);i&&i.runtime&&e.removeChild(n)},Z.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];return!!e&&e.hasChild(n)};function tt(t){return new et(t)}var et=function(t){var e=this;void 0===t&&(t={});var n=t.plugins;void 0===n&&(n=[]);var i=t.strict;void 0===i&&(i=!1);var r=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Z(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=r;var o=this,s=this,a=s.dispatch,l=s.commit;this.dispatch=function(t,e){return a.call(o,t,e)},this.commit=function(t,e,n){return l.call(o,t,e,n)},this.strict=i;var c=this._modules.root.state;_(this,c,[],this._modules.root),k(this,c),n.forEach((function(t){return t(e)}))},nt={state:{configurable:!0}};et.prototype.install=function(t,e){t.provide(e||g,this),t.config.globalProperties.$store=this;var n=void 0!==this._devtools&&this._devtools;n&&F(t,this)},nt.state.get=function(){return this._state.data},nt.state.set=function(t){0},et.prototype.commit=function(t,e,n){var i=this,r=T(t,e,n),o=r.type,s=r.payload,a=(r.options,{type:o,payload:s}),l=this._mutations[o];l&&(this._withCommit((function(){l.forEach((function(t){t(s)}))})),this._subscribers.slice().forEach((function(t){return t(a,i.state)})))},et.prototype.dispatch=function(t,e){var n=this,i=T(t,e),r=i.type,o=i.payload,s={type:r,payload:o},a=this._actions[r];if(a){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(s,n.state)}))}catch(c){0}var l=a.length>1?Promise.all(a.map((function(t){return t(o)}))):a[0](o);return new Promise((function(t,e){l.then((function(e){try{n._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(s,n.state)}))}catch(c){0}t(e)}),(function(t){try{n._actionSubscribers.filter((function(t){return t.error})).forEach((function(e){return e.error(s,n.state,t)}))}catch(c){0}e(t)}))}))}},et.prototype.subscribe=function(t,e){return x(t,this._subscribers,e)},et.prototype.subscribeAction=function(t,e){var n="function"===typeof t?{before:t}:t;return x(n,this._actionSubscribers,e)},et.prototype.watch=function(t,e,n){var r=this;return(0,i.YP)((function(){return t(r.state,r.getters)}),e,Object.assign({},n))},et.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._state.data=t}))},et.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"===typeof t&&(t=[t]),this._modules.register(t,e),_(this,this.state,t,this._modules.get(t),n.preserveState),k(this,this.state)},et.prototype.unregisterModule=function(t){var e=this;"string"===typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){var n=P(e.state,t.slice(0,-1));delete n[t[t.length-1]]})),S(this)},et.prototype.hasModule=function(t){return"string"===typeof t&&(t=[t]),this._modules.isRegistered(t)},et.prototype.hotUpdate=function(t){this._modules.update(t),S(this,!0)},et.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(et.prototype,nt);ot((function(t,e){var n={};return it(e).forEach((function(e){var i=e.key,r=e.val;n[i]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var i=st(this.$store,"mapState",t);if(!i)return;e=i.context.state,n=i.context.getters}return"function"===typeof r?r.call(this,e,n):e[r]},n[i].vuex=!0})),n})),ot((function(t,e){var n={};return it(e).forEach((function(e){var i=e.key,r=e.val;n[i]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var i=this.$store.commit;if(t){var o=st(this.$store,"mapMutations",t);if(!o)return;i=o.context.commit}return"function"===typeof r?r.apply(this,[i].concat(e)):i.apply(this.$store,[r].concat(e))}})),n})),ot((function(t,e){var n={};return it(e).forEach((function(e){var i=e.key,r=e.val;r=t+r,n[i]=function(){if(!t||st(this.$store,"mapGetters",t))return this.$store.getters[r]},n[i].vuex=!0})),n})),ot((function(t,e){var n={};return it(e).forEach((function(e){var i=e.key,r=e.val;n[i]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var i=this.$store.dispatch;if(t){var o=st(this.$store,"mapActions",t);if(!o)return;i=o.context.dispatch}return"function"===typeof r?r.apply(this,[i].concat(e)):i.apply(this.$store,[r].concat(e))}})),n}));function it(t){return rt(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function rt(t){return Array.isArray(t)||y(t)}function ot(t){return function(e,n){return"string"!==typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function st(t,e,n){var i=t._modulesNamespaceMap[n];return i}},936:function(t,e,n){"use strict";var i=n(1908),r=n(2212),o=TypeError;t.exports=function(t){if(i(t))return t;throw new o(r(t)+" is not a function")}},7679:function(t,e,n){"use strict";var i=n(251),r=String,o=TypeError;t.exports=function(t){if(i(t))return t;throw new o("Can't set "+r(t)+" as a prototype")}},1208:function(t,e,n){"use strict";var i=n(7751),r=String,o=TypeError;t.exports=function(t){if(i(t))return t;throw new o(r(t)+" is not an object")}},2816:function(t){"use strict";t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},1733:function(t,e,n){"use strict";var i,r,o,s=n(2816),a=n(6333),l=n(1044),c=n(1908),h=n(7751),u=n(1607),d=n(2343),p=n(2212),f=n(1118),m=n(4647),g=n(5386),v=n(8883),y=n(7301),b=n(3282),w=n(7830),x=n(6216),S=n(985),k=S.enforce,_=S.get,E=l.Int8Array,L=E&&E.prototype,C=l.Uint8ClampedArray,A=C&&C.prototype,M=E&&y(E),N=L&&y(L),P=Object.prototype,T=l.TypeError,I=w("toStringTag"),O=x("TYPED_ARRAY_TAG"),D="TypedArrayConstructor",j=s&&!!b&&"Opera"!==d(l.opera),R=!1,F={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},z=function(t){if(!h(t))return!1;var e=d(t);return"DataView"===e||u(F,e)||u(B,e)},$=function(t){var e=y(t);if(h(e)){var n=_(e);return n&&u(n,D)?n[D]:$(e)}},q=function(t){if(!h(t))return!1;var e=d(t);return u(F,e)||u(B,e)},U=function(t){if(q(t))return t;throw new T("Target is not a typed array")},G=function(t){if(c(t)&&(!b||v(M,t)))return t;throw new T(p(t)+" is not a typed array constructor")},H=function(t,e,n,i){if(a){if(n)for(var r in F){var o=l[r];if(o&&u(o.prototype,t))try{delete o.prototype[t]}catch(s){try{o.prototype[t]=e}catch(c){}}}N[t]&&!n||m(N,t,n?e:j&&L[t]||e,i)}},W=function(t,e,n){var i,r;if(a){if(b){if(n)for(i in F)if(r=l[i],r&&u(r,t))try{delete r[t]}catch(o){}if(M[t]&&!n)return;try{return m(M,t,n?e:j&&M[t]||e)}catch(o){}}for(i in F)r=l[i],!r||r[t]&&!n||m(r,t,e)}};for(i in F)r=l[i],o=r&&r.prototype,o?k(o)[D]=r:j=!1;for(i in B)r=l[i],o=r&&r.prototype,o&&(k(o)[D]=r);if((!j||!c(M)||M===Function.prototype)&&(M=function(){throw new T("Incorrect invocation")},j))for(i in F)l[i]&&b(l[i],M);if((!j||!N||N===P)&&(N=M.prototype,j))for(i in F)l[i]&&b(l[i].prototype,N);if(j&&y(A)!==N&&b(A,N),a&&!u(N,I))for(i in R=!0,g(N,I,{configurable:!0,get:function(){return h(this)?this[O]:void 0}}),F)l[i]&&f(l[i],O,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:j,TYPED_ARRAY_TAG:R&&O,aTypedArray:U,aTypedArrayConstructor:G,exportTypedArrayMethod:H,exportTypedArrayStaticMethod:W,getTypedArrayConstructor:$,isView:z,isTypedArray:q,TypedArray:M,TypedArrayPrototype:N}},7471:function(t,e,n){"use strict";var i=n(5840);t.exports=function(t,e,n){var r=0,o=arguments.length>2?n:i(e),s=new t(o);while(o>r)s[r]=e[r++];return s}},2321:function(t,e,n){"use strict";var i=n(1244),r=n(6527),o=n(5840),s=function(t){return function(e,n,s){var a=i(e),l=o(a);if(0===l)return!t&&-1;var c,h=r(s,l);if(t&&n!==n){while(l>h)if(c=a[h++],c!==c)return!0}else for(;l>h;h++)if((t||h in a)&&a[h]===n)return t||h||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},2538:function(t,e,n){"use strict";var i=n(6333),r=n(7162),o=TypeError,s=Object.getOwnPropertyDescriptor,a=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(r(t)&&!s(t,"length").writable)throw new o("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},7418:function(t,e,n){"use strict";var i=n(5840);t.exports=function(t,e){for(var n=i(t),r=new e(n),o=0;o<n;o++)r[o]=t[n-o-1];return r}},5780:function(t,e,n){"use strict";var i=n(5840),r=n(2413),o=RangeError;t.exports=function(t,e,n,s){var a=i(t),l=r(n),c=l<0?a+l:l;if(c>=a||c<0)throw new o("Incorrect index");for(var h=new e(a),u=0;u<a;u++)h[u]=u===c?s:t[u];return h}},7179:function(t,e,n){"use strict";var i=n(3263),r=i({}.toString),o=i("".slice);t.exports=function(t){return o(r(t),8,-1)}},2343:function(t,e,n){"use strict";var i=n(4895),r=n(1908),o=n(7179),s=n(7830),a=s("toStringTag"),l=Object,c="Arguments"===o(function(){return arguments}()),h=function(t,e){try{return t[e]}catch(n){}};t.exports=i?o:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=h(e=l(t),a))?n:c?o(e):"Object"===(i=o(e))&&r(e.callee)?"Arguments":i}},2962:function(t,e,n){"use strict";var i=n(1607),r=n(9772),o=n(7953),s=n(2285);t.exports=function(t,e,n){for(var a=r(e),l=s.f,c=o.f,h=0;h<a.length;h++){var u=a[h];i(t,u)||n&&i(n,u)||l(t,u,c(e,u))}}},8245:function(t,e,n){"use strict";var i=n(9934);t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},1118:function(t,e,n){"use strict";var i=n(6333),r=n(2285),o=n(1682);t.exports=i?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},1682:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},5386:function(t,e,n){"use strict";var i=n(3973),r=n(2285);t.exports=function(t,e,n){return n.get&&i(n.get,e,{getter:!0}),n.set&&i(n.set,e,{setter:!0}),r.f(t,e,n)}},4647:function(t,e,n){"use strict";var i=n(1908),r=n(2285),o=n(3973),s=n(9323);t.exports=function(t,e,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:e;if(i(n)&&o(n,c,a),a.global)l?t[e]=n:s(e,n);else{try{a.unsafe?t[e]&&(l=!0):delete t[e]}catch(h){}l?t[e]=n:r.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},9323:function(t,e,n){"use strict";var i=n(1044),r=Object.defineProperty;t.exports=function(t,e){try{r(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},6333:function(t,e,n){"use strict";var i=n(9934);t.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},1168:function(t,e,n){"use strict";var i=n(1044),r=n(7751),o=i.document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},5328:function(t){"use strict";var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},1520:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6238:function(t,e,n){"use strict";var i=n(1044),r=i.navigator,o=r&&r.userAgent;t.exports=o?String(o):""},4960:function(t,e,n){"use strict";var i,r,o=n(1044),s=n(6238),a=o.process,l=o.Deno,c=a&&a.versions||l&&l.version,h=c&&c.v8;h&&(i=h.split("."),r=i[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&s&&(i=s.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=s.match(/Chrome\/(\d+)/),i&&(r=+i[1]))),t.exports=r},9462:function(t,e,n){"use strict";var i=n(1044),r=n(7953).f,o=n(1118),s=n(4647),a=n(9323),l=n(2962),c=n(2838);t.exports=function(t,e){var n,h,u,d,p,f,m=t.target,g=t.global,v=t.stat;if(h=g?i:v?i[m]||a(m,{}):i[m]&&i[m].prototype,h)for(u in e){if(p=e[u],t.dontCallGetSet?(f=r(h,u),d=f&&f.value):d=h[u],n=c(g?u:m+(v?".":"#")+u,t.forced),!n&&void 0!==d){if(typeof p==typeof d)continue;l(p,d)}(t.sham||d&&d.sham)&&o(p,"sham",!0),s(h,u,p,t)}}},9934:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(e){return!0}}},979:function(t,e,n){"use strict";var i=n(9934);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},300:function(t,e,n){"use strict";var i=n(979),r=Function.prototype.call;t.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},2041:function(t,e,n){"use strict";var i=n(6333),r=n(1607),o=Function.prototype,s=i&&Object.getOwnPropertyDescriptor,a=r(o,"name"),l=a&&"something"===function(){}.name,c=a&&(!i||i&&s(o,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},1452:function(t,e,n){"use strict";var i=n(3263),r=n(936);t.exports=function(t,e,n){try{return i(r(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(o){}}},3263:function(t,e,n){"use strict";var i=n(979),r=Function.prototype,o=r.call,s=i&&r.bind.bind(o,o);t.exports=i?s:function(t){return function(){return o.apply(t,arguments)}}},2652:function(t,e,n){"use strict";var i=n(1044),r=n(1908),o=function(t){return r(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?o(i[t]):i[t]&&i[t][e]}},7298:function(t,e,n){"use strict";var i=n(936),r=n(424);t.exports=function(t,e){var n=t[e];return r(n)?void 0:i(n)}},1044:function(t,e,n){"use strict";var i=function(t){return t&&t.Math===Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||i("object"==typeof this&&this)||function(){return this}()||Function("return this")()},1607:function(t,e,n){"use strict";var i=n(3263),r=n(1127),o=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(r(t),e)}},1031:function(t){"use strict";t.exports={}},9976:function(t,e,n){"use strict";var i=n(6333),r=n(9934),o=n(1168);t.exports=!i&&!r((function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},381:function(t,e,n){"use strict";var i=n(3263),r=n(9934),o=n(7179),s=Object,a=i("".split);t.exports=r((function(){return!s("z").propertyIsEnumerable(0)}))?function(t){return"String"===o(t)?a(t,""):s(t)}:s},2437:function(t,e,n){"use strict";var i=n(3263),r=n(1908),o=n(5596),s=i(Function.toString);r(o.inspectSource)||(o.inspectSource=function(t){return s(t)}),t.exports=o.inspectSource},985:function(t,e,n){"use strict";var i,r,o,s=n(7430),a=n(1044),l=n(7751),c=n(1118),h=n(1607),u=n(5596),d=n(6942),p=n(1031),f="Object already initialized",m=a.TypeError,g=a.WeakMap,v=function(t){return o(t)?r(t):i(t,{})},y=function(t){return function(e){var n;if(!l(e)||(n=r(e)).type!==t)throw new m("Incompatible receiver, "+t+" required");return n}};if(s||u.state){var b=u.state||(u.state=new g);b.get=b.get,b.has=b.has,b.set=b.set,i=function(t,e){if(b.has(t))throw new m(f);return e.facade=t,b.set(t,e),e},r=function(t){return b.get(t)||{}},o=function(t){return b.has(t)}}else{var w=d("state");p[w]=!0,i=function(t,e){if(h(t,w))throw new m(f);return e.facade=t,c(t,w,e),e},r=function(t){return h(t,w)?t[w]:{}},o=function(t){return h(t,w)}}t.exports={set:i,get:r,has:o,enforce:v,getterFor:y}},7162:function(t,e,n){"use strict";var i=n(7179);t.exports=Array.isArray||function(t){return"Array"===i(t)}},1869:function(t,e,n){"use strict";var i=n(2343);t.exports=function(t){var e=i(t);return"BigInt64Array"===e||"BigUint64Array"===e}},1908:function(t){"use strict";var e="object"==typeof document&&document.all;t.exports="undefined"==typeof e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},2838:function(t,e,n){"use strict";var i=n(9934),r=n(1908),o=/#|\.prototype\./,s=function(t,e){var n=l[a(t)];return n===h||n!==c&&(r(e)?i(e):!!e)},a=s.normalize=function(t){return String(t).replace(o,".").toLowerCase()},l=s.data={},c=s.NATIVE="N",h=s.POLYFILL="P";t.exports=s},424:function(t){"use strict";t.exports=function(t){return null===t||void 0===t}},7751:function(t,e,n){"use strict";var i=n(1908);t.exports=function(t){return"object"==typeof t?null!==t:i(t)}},251:function(t,e,n){"use strict";var i=n(7751);t.exports=function(t){return i(t)||null===t}},7058:function(t){"use strict";t.exports=!1},2951:function(t,e,n){"use strict";var i=n(2652),r=n(1908),o=n(8883),s=n(6931),a=Object;t.exports=s?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return r(e)&&o(e.prototype,a(t))}},5840:function(t,e,n){"use strict";var i=n(3890);t.exports=function(t){return i(t.length)}},3973:function(t,e,n){"use strict";var i=n(3263),r=n(9934),o=n(1908),s=n(1607),a=n(6333),l=n(2041).CONFIGURABLE,c=n(2437),h=n(985),u=h.enforce,d=h.get,p=String,f=Object.defineProperty,m=i("".slice),g=i("".replace),v=i([].join),y=a&&!r((function(){return 8!==f((function(){}),"length",{value:8}).length})),b=String(String).split("String"),w=t.exports=function(t,e,n){"Symbol("===m(p(e),0,7)&&(e="["+g(p(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!s(t,"name")||l&&t.name!==e)&&(a?f(t,"name",{value:e,configurable:!0}):t.name=e),y&&n&&s(n,"arity")&&t.length!==n.arity&&f(t,"length",{value:n.arity});try{n&&s(n,"constructor")&&n.constructor?a&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(r){}var i=u(t);return s(i,"source")||(i.source=v(b,"string"==typeof e?e:"")),t};Function.prototype.toString=w((function(){return o(this)&&d(this).source||c(this)}),"toString")},9715:function(t){"use strict";var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?n:e)(i)}},2285:function(t,e,n){"use strict";var i=n(6333),r=n(9976),o=n(4689),s=n(1208),a=n(6410),l=TypeError,c=Object.defineProperty,h=Object.getOwnPropertyDescriptor,u="enumerable",d="configurable",p="writable";e.f=i?o?function(t,e,n){if(s(t),e=a(e),s(n),"function"===typeof t&&"prototype"===e&&"value"in n&&p in n&&!n[p]){var i=h(t,e);i&&i[p]&&(t[e]=n.value,n={configurable:d in n?n[d]:i[d],enumerable:u in n?n[u]:i[u],writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(s(t),e=a(e),s(n),r)try{return c(t,e,n)}catch(i){}if("get"in n||"set"in n)throw new l("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},7953:function(t,e,n){"use strict";var i=n(6333),r=n(300),o=n(8344),s=n(1682),a=n(1244),l=n(6410),c=n(1607),h=n(9976),u=Object.getOwnPropertyDescriptor;e.f=i?u:function(t,e){if(t=a(t),e=l(e),h)try{return u(t,e)}catch(n){}if(c(t,e))return s(!r(o.f,t,e),t[e])}},3964:function(t,e,n){"use strict";var i=n(8393),r=n(1520),o=r.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,o)}},9357:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},7301:function(t,e,n){"use strict";var i=n(1607),r=n(1908),o=n(1127),s=n(6942),a=n(8245),l=s("IE_PROTO"),c=Object,h=c.prototype;t.exports=a?c.getPrototypeOf:function(t){var e=o(t);if(i(e,l))return e[l];var n=e.constructor;return r(n)&&e instanceof n?n.prototype:e instanceof c?h:null}},8883:function(t,e,n){"use strict";var i=n(3263);t.exports=i({}.isPrototypeOf)},8393:function(t,e,n){"use strict";var i=n(3263),r=n(1607),o=n(1244),s=n(2321).indexOf,a=n(1031),l=i([].push);t.exports=function(t,e){var n,i=o(t),c=0,h=[];for(n in i)!r(a,n)&&r(i,n)&&l(h,n);while(e.length>c)r(i,n=e[c++])&&(~s(h,n)||l(h,n));return h}},8344:function(t,e){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);e.f=r?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},3282:function(t,e,n){"use strict";var i=n(1452),r=n(7751),o=n(704),s=n(7679);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=i(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(a){}return function(n,i){return o(n),s(i),r(n)?(e?t(n,i):n.__proto__=i,n):n}}():void 0)},3227:function(t,e,n){"use strict";var i=n(300),r=n(1908),o=n(7751),s=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&r(n=t.toString)&&!o(a=i(n,t)))return a;if(r(n=t.valueOf)&&!o(a=i(n,t)))return a;if("string"!==e&&r(n=t.toString)&&!o(a=i(n,t)))return a;throw new s("Can't convert object to primitive value")}},9772:function(t,e,n){"use strict";var i=n(2652),r=n(3263),o=n(3964),s=n(9357),a=n(1208),l=r([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=o.f(a(t)),n=s.f;return n?l(e,n(t)):e}},2131:function(t,e,n){"use strict";var i=n(1208);t.exports=function(){var t=i(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},704:function(t,e,n){"use strict";var i=n(424),r=TypeError;t.exports=function(t){if(i(t))throw new r("Can't call method on "+t);return t}},6942:function(t,e,n){"use strict";var i=n(9881),r=n(6216),o=i("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},5596:function(t,e,n){"use strict";var i=n(7058),r=n(1044),o=n(9323),s="__core-js_shared__",a=t.exports=r[s]||o(s,{});(a.versions||(a.versions=[])).push({version:"3.39.0",mode:i?"pure":"global",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})},9881:function(t,e,n){"use strict";var i=n(5596);t.exports=function(t,e){return i[t]||(i[t]=e||{})}},9183:function(t,e,n){"use strict";var i=n(4960),r=n(9934),o=n(1044),s=o.String;t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol("symbol detection");return!s(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},6527:function(t,e,n){"use strict";var i=n(2413),r=Math.max,o=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):o(n,e)}},7119:function(t,e,n){"use strict";var i=n(8334),r=TypeError;t.exports=function(t){var e=i(t,"number");if("number"==typeof e)throw new r("Can't convert number to bigint");return BigInt(e)}},1244:function(t,e,n){"use strict";var i=n(381),r=n(704);t.exports=function(t){return i(r(t))}},2413:function(t,e,n){"use strict";var i=n(9715);t.exports=function(t){var e=+t;return e!==e||0===e?0:i(e)}},3890:function(t,e,n){"use strict";var i=n(2413),r=Math.min;t.exports=function(t){var e=i(t);return e>0?r(e,9007199254740991):0}},1127:function(t,e,n){"use strict";var i=n(704),r=Object;t.exports=function(t){return r(i(t))}},8334:function(t,e,n){"use strict";var i=n(300),r=n(7751),o=n(2951),s=n(7298),a=n(3227),l=n(7830),c=TypeError,h=l("toPrimitive");t.exports=function(t,e){if(!r(t)||o(t))return t;var n,l=s(t,h);if(l){if(void 0===e&&(e="default"),n=i(l,t,e),!r(n)||o(n))return n;throw new c("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},6410:function(t,e,n){"use strict";var i=n(8334),r=n(2951);t.exports=function(t){var e=i(t,"string");return r(e)?e:e+""}},4895:function(t,e,n){"use strict";var i=n(7830),r=i("toStringTag"),o={};o[r]="z",t.exports="[object z]"===String(o)},2212:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(n){return"Object"}}},6216:function(t,e,n){"use strict";var i=n(3263),r=0,o=Math.random(),s=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+s(++r+o,36)}},6931:function(t,e,n){"use strict";var i=n(9183);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},4689:function(t,e,n){"use strict";var i=n(6333),r=n(9934);t.exports=i&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},7430:function(t,e,n){"use strict";var i=n(1044),r=n(1908),o=i.WeakMap;t.exports=r(o)&&/native code/.test(String(o))},7830:function(t,e,n){"use strict";var i=n(1044),r=n(9881),o=n(1607),s=n(6216),a=n(9183),l=n(6931),c=i.Symbol,h=r("wks"),u=l?c["for"]||c:c&&c.withoutSetter||s;t.exports=function(t){return o(h,t)||(h[t]=a&&o(c,t)?c[t]:u("Symbol."+t)),h[t]}},1487:function(t,e,n){"use strict";var i=n(9462),r=n(1127),o=n(5840),s=n(2538),a=n(5328),l=n(9934),c=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),h=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},u=c||!h();i({target:"Array",proto:!0,arity:1,forced:u},{push:function(t){var e=r(this),n=o(e),i=arguments.length;a(n+i);for(var l=0;l<i;l++)e[n]=arguments[l],n++;return s(e,n),n}})},9801:function(t,e,n){"use strict";var i=n(1044),r=n(6333),o=n(5386),s=n(2131),a=n(9934),l=i.RegExp,c=l.prototype,h=r&&a((function(){var t=!0;try{l(".","d")}catch(h){t=!1}var e={},n="",i=t?"dgimsy":"gimsy",r=function(t,i){Object.defineProperty(e,t,{get:function(){return n+=i,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var s in t&&(o.hasIndices="d"),o)r(s,o[s]);var a=Object.getOwnPropertyDescriptor(c,"flags").get.call(e);return a!==i||n!==i}));h&&o(c,"flags",{configurable:!0,get:s})},1596:function(t,e,n){"use strict";var i=n(7418),r=n(1733),o=r.aTypedArray,s=r.exportTypedArrayMethod,a=r.getTypedArrayConstructor;s("toReversed",(function(){return i(o(this),a(this))}))},8441:function(t,e,n){"use strict";var i=n(1733),r=n(3263),o=n(936),s=n(7471),a=i.aTypedArray,l=i.getTypedArrayConstructor,c=i.exportTypedArrayMethod,h=r(i.TypedArrayPrototype.sort);c("toSorted",(function(t){void 0!==t&&o(t);var e=a(this),n=s(l(e),e);return h(n,t)}))},9643:function(t,e,n){"use strict";var i=n(5780),r=n(1733),o=n(1869),s=n(2413),a=n(7119),l=r.aTypedArray,c=r.getTypedArrayConstructor,h=r.exportTypedArrayMethod,u=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();h("with",{with:function(t,e){var n=l(this),r=s(t),h=o(n)?a(e):+e;return i(n,c(n),r,h)}}["with"],!u)},7782:function(t,e,n){"use strict";n(1596)},4345:function(t,e,n){"use strict";n(8441)},102:function(t,e,n){"use strict";n(9643)},5777:function(t,e,n){"use strict";n.d(e,{ML:function(){return Yr}});var i,r,o,s;n(7658),n(3767),n(8585),n(8696),n(2801),n(1295);!function(t){t.Write="write",t.Erase="erase",t.Select="select",t.Move="move"}(i||(i={})),function(t){t.Pencil="pencil",t.Rectangle="rectangle",t.Rhombus="rhombus",t.Circle="circle",t.Ellipse="ellipse",t.Triangle="triangle",t.Parallelogram="parallelogram",t.Line="line",t.Arrow="arrow",t.DoubleArrow="double-arrow"}(r||(r={})),function(t){t.Guide="guide",t.InteractElementsGroup="interact-elements-group",t.Translate="translate",t.Resize="resize",t.Rotate="rotate"}(o||(o={})),function(t){t.North="n-resize",t.East="e-resize",t.South="s-resize",t.West="w-resize",t.NorthEast="ne-resize",t.NorthWest="nw-resize",t.SouthEast="se-resize",t.SouthWest="sw-resize"}(s||(s={}));const a=10;function l(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){t.done?r(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(s,a)}l((i=i.apply(t,e||[])).next())}))}function c(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)}function h(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n}var u,d,p,f;"function"==typeof SuppressedError&&SuppressedError,function(t){t.DEBUG="1",t.INFO="2",t.WARN="3",t.ERROR="4"}(u||(u={})),function(t){t.EDITOR="EDITOR",t.RECOGNIZER="RECOGNIZER",t.GRABBER="GRABBER",t.BEHAVIORS="BEHAVIORS",t.GESTURE="GESTURE",t.CONFIGURATION="CONFIGURATION",t.PUBLIC_EVENT="PUBLIC_EVENT",t.MODEL="MODEL",t.RENDERER="RENDERER",t.SMARTGUIDE="SMARTGUIDE",t.STYLE="STYLE",t.HISTORY="HISTORY",t.SYMBOL="SYMBOL",t.INTERNAL_EVENT="INTERNAL_EVENT",t.WRITE="WRITE",t.TRANSFORMER="TRANSFORMER",t.CONVERTER="CONVERTER",t.SELECTION="SELECTION",t.SVGDEBUG="SVGDEBUG",t.MENU="MENU"}(d||(d={}));class m{constructor(t,e){this.instanceName=t,this.level=e}debug(t,...e){if(u.DEBUG>=this.level){const n={from:`${this.instanceName}.${t}`,message:e};console.debug(n)}}info(t,...e){if(u.INFO>=this.level){const n={from:`${this.instanceName}.${t}`,message:e};console.info(n)}}warn(t,...e){if(u.WARN>=this.level){const n={from:`${this.instanceName}.${t}`,message:e};console.warn(n)}}error(t,...e){const n={from:`${this.instanceName}.${t}`,error:e};console.error(n)}}class g{static getLogger(t){return c(this,p,"f",f).has(t)||c(this,p,"f",f).set(t,new m(t,u.ERROR)),c(this,p,"f",f).get(t)}static setLoggerLevel(t){Object.keys(t).forEach((e=>{p.getLogger(e).level=t[e]}))}}p=g,f={value:new Map};class v{constructor(){this.isFullFilled=!1,this.isPending=!0,this.promise=new Promise(((t,e)=>{this.reject=t=>l(this,void 0,void 0,(function*(){return this.isFullFilled=!0,this.isPending=!1,e(t)})),this.resolve=e=>l(this,void 0,void 0,(function*(){return this.isFullFilled=!0,this.isPending=!1,t(e)}))}))}}function y(t){return null!=t&&!isNaN(parseFloat(t.toString()))&&isFinite(+t)}function b(t,e,n){return t>=e&&t<=n}function w(t){return t.reduce(((t,e)=>t+e),0)/(t.length||1)}function x(t,e){const n=Math.hypot(e.y-t.y,e.x-t.x);return isNaN(n)?0:n}function S(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}function k(t){return+(t%(2*Math.PI)/Math.PI*180).toFixed(4)}function _(t){return+(t%360/180*Math.PI).toFixed(4)}function E(t,e,n){const i=t.x-e.x,r=t.y-e.y,o=Math.cos(n),s=Math.sin(n);return{x:+(e.x+o*i-s*r).toFixed(3),y:+(e.y+s*i+o*r).toFixed(3)}}function L(t,e,n,i,r){const o=Math.cos(i),s=Math.sin(i),a=Math.abs(e)*Math.cos(r),l=Math.abs(n)*Math.sin(r);return{x:+(t.x+o*a-s*l).toFixed(3),y:+(t.y+s*a+o*l).toFixed(3)}}function C(t,e){if(t.p1.x===e.p1.x&&t.p1.y===e.p1.y)return t.p1;if(t.p1.x===e.p2.x&&t.p1.y===e.p2.y)return t.p1;if(t.p2.x===e.p1.x&&t.p2.y===e.p1.y)return t.p2;if(t.p2.x===e.p2.x&&t.p2.y===e.p2.y)return t.p2;const n=t.p2.x-t.p1.x,i=t.p2.y-t.p1.y,r=e.p2.x-e.p1.x,o=e.p2.y-e.p1.y,s=t.p1.x-e.p1.x,a=t.p1.y-e.p1.y,l=r*a-o*s,c=n*a-i*s,h=o*n-r*i;if(0===l||0===c||0===h)return;const u=l/h,d=c/h;return b(u,0,1)&&b(d,0,1)?{x:t.p1.x+u*n,y:t.p1.y+u*i}:void 0}function A(t,e,n){const i=[],r=Math.pow(t.p2.x-t.p1.x,2)+Math.pow(t.p2.y-t.p1.y,2),o=2*((t.p2.x-t.p1.x)*(t.p1.x-e.x)+(t.p2.y-t.p1.y)*(t.p1.y-e.y)),s=Math.pow(e.x,2)+Math.pow(e.y,2)+Math.pow(t.p1.x,2)+Math.pow(t.p1.y,2)-2*(e.x*t.p1.x+e.y*t.p1.y)-Math.pow(n,2),a=Math.pow(o,2)-4*r*s;if(a<=0)return[];const l=Math.sqrt(a),c=(-o+l)/(2*r),h=(-o-l)/(2*r);return(c<0||c>1)&&(h<0||h>1)||(b(c,0,1)&&i.push({x:(t.p2.x-t.p1.x)*c+t.p1.x,y:(t.p2.y-t.p1.y)*c+t.p1.y}),b(h,0,1)&&i.push({x:(t.p2.x-t.p1.x)*h+t.p1.x,y:(t.p2.y-t.p1.y)*h+t.p1.y})),i}function M(t,e,n){const i=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),r=Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2)),o=Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2));return Math.acos((r*r+i*i-o*o)/(2*r*i))}function N(t,e){let n=t[0],i=e[0],r=Number.MAX_SAFE_INTEGER;return t.forEach((t=>{e.forEach((e=>{const o=x(t,e);r>o&&(r=o,n=t,i=e)}))})),{p1:n,p2:i}}function P(t,e){let n,i=Number.MAX_SAFE_INTEGER,r=-1;return t.forEach(((t,o)=>{const s=x(t,e);i>s&&(i=s,n=t,r=o)})),{point:n,index:r}}function T(t,e){let n=!1;for(let i=0,r=e.length-1;i<e.length;r=i++){const o=e[i],s=e[r];o.y>t.y!=s.y>t.y&&t.x<(s.x-o.x)*(t.y-o.y)/(s.y-o.y)+o.x&&(n=!n)}return n}const I=(t,e)=>{const n=t.split("."),i=e.split(".");for(let r=0;r<i.length;r++){const t=Number(i[r]),e=Number(n[r]);if(t>e)return!1;if(t<e)return!0}return!0};function O(t,e,n){return l(this,void 0,void 0,(function*(){const i=new TextEncoder,r=i.encode(t),o=i.encode(e+n),s=yield crypto.subtle.importKey("raw",o,{name:"HMAC",hash:{name:"SHA-512"}},!1,["sign"]),a=yield crypto.subtle.sign("HMAC",s,r),l=new Uint8Array(a);return Array.prototype.map.call(l,(t=>t.toString(16).padStart(2,"0"))).join("")}))}function D(t){return+(96*t/25.4).toFixed(3)}function j(t){return t?{x:D(t.x),y:D(t.y),width:D(t.width),height:D(t.height)}:{height:0,width:0,x:0,y:0}}function R(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}))}const F=(t,...e)=>{const n=t=>t&&"object"==typeof t&&!Array.isArray(t);if(!e.length)return t;const i=e.shift();if(n(t)&&n(i))for(const r in i)n(i[r])?(t[r]||Object.assign(t,{[r]:{}}),F(t[r],i[r])):Array.isArray(t[r])&&Array.isArray(i[r])?t[r].concat(i[r]):Object.assign(t,{[r]:i[r]});else Array.isArray(t)&&Array.isArray(i)?t=t.concat(i):i&&(t=i);return F(t,...e)};function B(t){var e,n;return l(this,void 0,void 0,(function*(){if((null===(e=null==t?void 0:t.server)||void 0===e?void 0:e.scheme)&&(null===(n=null==t?void 0:t.server)||void 0===n?void 0:n.host)){const e=t.server;return(yield fetch(`${e.scheme}://${e.host}/api/v4.0/iink/availableLanguageList`)).json()}return Promise.reject("Failed to get languages: configuration.server.scheme & configuration.server.host are required!")}))}function z(t,e,n){const i=t.p*n;return[{x:+(t.x-Math.sin(e)*i).toFixed(3),y:+(t.y+Math.cos(e)*i).toFixed(3)},{x:+(t.x+Math.sin(e)*i).toFixed(3),y:+(t.y-Math.cos(e)*i).toFixed(3)}]}function $(t,e){return{x:+((e.x+t.x)/2).toFixed(3),y:+((e.y+t.y)/2).toFixed(3),p:+((e.p+t.p)/2).toFixed(3),t:+((e.t+t.t)/2).toFixed(3)}}const q={capture:!1,passive:!0},U={listenerOptions:q,xyFloatPrecision:0,timestampFloatPrecision:0,delayLongTouch:500},G={enable:!0,style:{enable:!0},intention:{enable:!0},action:{enable:!0},context:{enable:!0}},H={"erase-precisely":!1},W={types:["text","shape"],"match-text-size":!0},V={convert:W,eraser:H,mimeTypes:["application/vnd.myscript.jiix"]},Y={"bounding-box":!1,strokes:!1,ids:!1,"full-stroke-ids":!1,text:{chars:!1,words:!0}},J={"image-resolution":300,jiix:Y},X={top:20,left:10,right:10,bottom:10},K={enable:!0,"fractional-part-digits":3,"decimal-separator":".","rounding-mode":"half up","angle-unit":"deg"},Z={mode:"stroke"},Q={solver:K,margin:X,eraser:H,"undo-redo":Z,mimeTypes:["application/vnd.myscript.jiix"]},tt={recognition:{types:["text","shape"]},eraser:H,gestures:["underline","scratch-out","join","insert","strike-through","surround"]},et={"draw-text-boxes":!1,"draw-image-boxes":!1},nt={debug:et},it={enable:!0},rt={guides:it,eraser:H,margin:X,mimeTypes:["application/vnd.myscript.jiix"]},ot={force:{"on-stylesheet-change":!1}},st={diagram:V,export:J,math:Q,"raw-content":tt,renderer:nt,text:rt,type:"TEXT",alwaysConnected:!0,lang:"en_US",gesture:{enable:!0,ignoreGestureStrokes:!1},convert:ot},at={enable:!0,gap:50,type:"point"},lt={enable:!0},ct={guides:at,smartGuide:lt,minHeight:100,minWidth:100},ht={protocol:"WEBSOCKET",scheme:"https",host:"cloud.myscript.com",applicationKey:"",hmacKey:"",version:"2.3.0",useWindowLocation:!1,websocket:{pingEnabled:!0,pingDelay:15e3,maxPingLostCount:20,autoReconnect:!0,maxRetryCount:2,fileChunkSize:3e5}},ut={exportContent:"POINTER_UP",exportContentDelay:1e3,resizeTriggerDelay:100},dt={maxStackSize:100};var pt;const ft={offscreen:!1,server:ht,recognition:st,grabber:U,rendering:ct,triggers:ut,"undo-redo":dt,menu:G};class mt{constructor(t){pt.set(this,g.getLogger(d.CONFIGURATION)),c(this,pt,"f").info("constructor",{configuration:t}),this.offscreen=ft.offscreen,this.grabber=structuredClone(ft.grabber),this.recognition=structuredClone(ft.recognition),this.rendering=structuredClone(ft.rendering),this.server=structuredClone(ft.server),this["undo-redo"]=structuredClone(ft["undo-redo"]),this.triggers=structuredClone(ft.triggers),this.menu=structuredClone(ft.menu),this.overrideDefaultConfiguration(t)}overrideDefaultConfiguration(t){var e,n,i,r,o,s,a,l,h,u,d,p,f,m,g;c(this,pt,"f").info("overrideDefaultConfiguration",{configuration:t});const v=structuredClone(ft);this.offscreen=Boolean(null==t?void 0:t.offscreen),this.grabber=F({},v.grabber,null==t?void 0:t.grabber),this.recognition=F({},v.recognition,null==t?void 0:t.recognition),this.rendering=F({},v.rendering,null==t?void 0:t.rendering),this.server=F({},v.server,null==t?void 0:t.server),this.triggers=F({},v.triggers,null==t?void 0:t.triggers),this["undo-redo"]=F({},v["undo-redo"],null==t?void 0:t["undo-redo"]),this.menu=F({},v.menu,null==t?void 0:t.menu),(null===(n=null===(e=null==t?void 0:t.recognition)||void 0===e?void 0:e.text)||void 0===n?void 0:n.mimeTypes)&&(this.recognition.text.mimeTypes=t.recognition.text.mimeTypes),(null===(r=null===(i=null==t?void 0:t.recognition)||void 0===i?void 0:i.math)||void 0===r?void 0:r.mimeTypes)&&(this.recognition.math.mimeTypes=t.recognition.math.mimeTypes),(null===(s=null===(o=null==t?void 0:t.recognition)||void 0===o?void 0:o.diagram)||void 0===s?void 0:s.mimeTypes)&&(this.recognition.diagram.mimeTypes=t.recognition.diagram.mimeTypes),(null===(h=null===(l=null===(a=null==t?void 0:t.recognition)||void 0===a?void 0:a.diagram)||void 0===l?void 0:l.convert)||void 0===h?void 0:h.types)&&(this.recognition.diagram.convert.types=t.recognition.diagram.convert.types),(null===(d=null===(u=null==t?void 0:t.recognition)||void 0===u?void 0:u["raw-content"])||void 0===d?void 0:d.gestures)&&(this.recognition["raw-content"].gestures=t.recognition["raw-content"].gestures),(null===(m=null===(f=null===(p=null==t?void 0:t.recognition)||void 0===p?void 0:p["raw-content"])||void 0===f?void 0:f.recognition)||void 0===m?void 0:m.types)&&(this.recognition["raw-content"].recognition.types=t.recognition["raw-content"].recognition.types),(null===(g=this.server)||void 0===g?void 0:g.useWindowLocation)&&(this.server.scheme=window.location.protocol.indexOf("s")>-1?"https":"http",this.server.host=window.location.host),this.offscreen?(this.recognition.type="Raw Content",this.rendering.smartGuide.enable=!1,this.server.protocol="WEBSOCKET",this.recognition.export.jiix["full-stroke-ids"]=!0,this.recognition.export.jiix.ids=!0,this.recognition.export.jiix.text.words=!0,this.recognition.export.jiix.text.chars=!0,this.recognition.export.jiix["bounding-box"]=!0):("REST"===this.server.protocol&&"POINTER_UP"===this.triggers.exportContent&&(this.triggers.exportContent="QUIET_PERIOD",this.triggers.exportContentDelay=Math.max(this.triggers.exportContentDelay,50)),"WEBSOCKET"===this.server.protocol&&"TEXT"===this.recognition.type?this.rendering.smartGuide.enable&&!this.recognition.text.mimeTypes.includes("application/vnd.myscript.jiix")&&this.recognition.text.mimeTypes.push("application/vnd.myscript.jiix"):this.rendering.smartGuide.enable=!1,delete this.recognition["raw-content"].gestures,this.menu.style.enable=!1),c(this,pt,"f").debug("overrideDefaultConfiguration",{configuration:this})}}pt=new WeakMap;const gt={[d.EDITOR]:u.ERROR,[d.BEHAVIORS]:u.ERROR,[d.RECOGNIZER]:u.ERROR,[d.GRABBER]:u.ERROR,[d.RENDERER]:u.ERROR,[d.CONFIGURATION]:u.ERROR,[d.PUBLIC_EVENT]:u.ERROR,[d.INTERNAL_EVENT]:u.ERROR,[d.MODEL]:u.ERROR,[d.SYMBOL]:u.ERROR,[d.SMARTGUIDE]:u.ERROR,[d.GESTURE]:u.ERROR,[d.STYLE]:u.ERROR,[d.HISTORY]:u.ERROR,[d.TRANSFORMER]:u.ERROR,[d.CONVERTER]:u.ERROR,[d.WRITE]:u.ERROR,[d.SELECTION]:u.ERROR,[d.SVGDEBUG]:u.ERROR,[d.MENU]:u.ERROR};var vt,yt,bt,wt,xt,St,kt,_t,Et,Lt,Ct,At,Mt,Nt,Pt,Tt,It,Ot,Dt,jt,Rt;!function(t){t.SVG_PATCH="internal_svg_patch",t.EXPORTED="internal_exported",t.CLEAR_MESSAGE="internal_clear_message",t.ERROR="internal_error",t.NOTIF="internal_notif",t.IMPORT_JIIX="internal_import_jiix",t.CONVERT="internal_convert",t.CLEAR="internal_clear",t.CONTEXT_CHANGE="internal_context_change",t.IDLE="internal_idle",t.SELECTED="internal_selected",t.INTENTION="internal_intention"}(kt||(kt={}));class Ft extends EventTarget{constructor(){super(),vt.add(this),wt.set(this,void 0),xt.set(this,g.getLogger(d.INTERNAL_EVENT)),c(this,xt,"f").info("constructor"),h(this,wt,new AbortController,"f")}static getInstance(){return c(yt,yt,"f",bt)||h(yt,yt,new yt,"f",bt),c(yt,yt,"f",bt)}removeAllListeners(){c(this,xt,"f").info("removeAllListeners"),c(this,wt,"f").abort(),h(this,wt,new AbortController,"f")}emitSVGPatch(t){c(this,xt,"f").info("emitSVGPatch",{patchChange:t}),c(this,vt,"m",St).call(this,kt.SVG_PATCH,t)}addSVGPatchListener(t){c(this,xt,"f").info("addSVGPatchListener",{callback:t}),this.addEventListener(kt.SVG_PATCH,(e=>t(e.detail)),{signal:c(this,wt,"f").signal})}emitExported(t){c(this,xt,"f").info("emitExported",{exports:t}),c(this,vt,"m",St).call(this,kt.EXPORTED,t)}addExportedListener(t){c(this,xt,"f").info("addExportedListener",{callback:t}),this.addEventListener(kt.EXPORTED,(e=>t(e.detail)),{signal:c(this,wt,"f").signal})}emitClearMessage(){c(this,xt,"f").info("emitClearMessage"),c(this,vt,"m",St).call(this,kt.CLEAR_MESSAGE)}addClearMessageListener(t){c(this,xt,"f").info("addClearMessageListener",{callback:t}),this.addEventListener(kt.CLEAR_MESSAGE,(()=>t()),{signal:c(this,wt,"f").signal})}emitError(t){c(this,xt,"f").info("emitError",{err:t}),c(this,vt,"m",St).call(this,kt.ERROR,t)}addErrorListener(t){c(this,xt,"f").info("addErrorListener",{callback:t}),this.addEventListener(kt.ERROR,(e=>t(e.detail)),{signal:c(this,wt,"f").signal})}emitNotif(t){c(this,xt,"f").info("emitWNotif",{notif:t}),c(this,vt,"m",St).call(this,kt.NOTIF,t)}addNotifListener(t){c(this,xt,"f").info("addNotifListener",{callback:t}),this.addEventListener(kt.NOTIF,(e=>t(e.detail)),{signal:c(this,wt,"f").signal})}emitImportJIIX(t){c(this,xt,"f").info("emitImportJIIX",{jiix:t}),c(this,vt,"m",St).call(this,kt.IMPORT_JIIX,t)}addImportJIIXListener(t){c(this,xt,"f").info("addImportJIIXListener",{callback:t}),this.addEventListener(kt.IMPORT_JIIX,(e=>t(e.detail)),{signal:c(this,wt,"f").signal})}emitConvert(t="DIGITAL_EDIT"){c(this,xt,"f").info("emitConvert",{conversionState:t}),c(this,vt,"m",St).call(this,kt.CONVERT,t)}addConvertListener(t){c(this,xt,"f").info("addConvertListener",{callback:t}),this.addEventListener(kt.CONVERT,(e=>t(e.detail)),{signal:c(this,wt,"f").signal})}emitClear(){c(this,xt,"f").info("emitClear"),c(this,vt,"m",St).call(this,kt.CLEAR)}addClearListener(t){c(this,xt,"f").info("addClearListener",{callback:t}),this.addEventListener(kt.CLEAR,(()=>t()),{signal:c(this,wt,"f").signal})}emitContextChange(t){c(this,xt,"f").info("emitContextChange",{context:t}),c(this,vt,"m",St).call(this,kt.CONTEXT_CHANGE,t)}addContextChangeListener(t){c(this,xt,"f").info("addContextChangeListener",{callback:t}),this.addEventListener(kt.CONTEXT_CHANGE,(e=>t(e.detail)),{signal:c(this,wt,"f").signal})}emitIdle(t){c(this,xt,"f").info("emitIdle",{idle:t}),c(this,vt,"m",St).call(this,kt.IDLE,t)}addIdleListener(t){c(this,xt,"f").info("addIdleListener",{callback:t}),this.addEventListener(kt.IDLE,(e=>t(e.detail)),{signal:c(this,wt,"f").signal})}emitSelected(t){c(this,vt,"m",St).call(this,kt.SELECTED,t)}addSelectedListener(t){c(this,xt,"f").info("addSelectedListener",{callback:t}),this.addEventListener(kt.SELECTED,(e=>t(e.detail)),{signal:c(this,wt,"f").signal})}emitIntention(t){c(this,vt,"m",St).call(this,kt.INTENTION,t)}addIntentionListener(t){c(this,xt,"f").info("addSelectedListener",{callback:t}),this.addEventListener(kt.INTENTION,(e=>t(e.detail)),{signal:c(this,wt,"f").signal})}}yt=Ft,wt=new WeakMap,xt=new WeakMap,vt=new WeakSet,St=function(t,e){this.dispatchEvent(new CustomEvent(t,Object.assign({bubbles:!0,composed:!0},e?{detail:e}:void 0)))},bt={value:void 0},function(t){t.CHANGED="changed",t.CLEARED="cleared",t.CONVERTED="converted",t.ERROR="error",t.POINTEREVENTS="pointer_events",t.EXPORTED="exported",t.IMPORTED="imported",t.IDLE="idle",t.LOADED="loaded",t.SELECTED="selected",t.INTENTION="intention"}(Nt||(Nt={}));class Bt extends EventTarget{constructor(){super(),_t.add(this),Ct.set(this,void 0),At.set(this,g.getLogger(d.PUBLIC_EVENT))}static getInstance(){return c(Et,Et,"f",Lt)||h(Et,Et,new Et,"f",Lt),c(Et,Et,"f",Lt)}setElement(t){c(this,At,"f").info("setElement",{el:t}),h(this,Ct,t,"f")}emitLoaded(){c(this,At,"f").info("emitLoaded"),c(this,_t,"m",Mt).call(this,Nt.LOADED)}emitExported(t){c(this,At,"f").info("emitExported",{exports:t}),c(this,_t,"m",Mt).call(this,Nt.EXPORTED,t)}emitChanged(t){c(this,At,"f").info("emitChanged",{undoRedoContext:t}),c(this,_t,"m",Mt).call(this,Nt.CHANGED,Object.assign(Object.assign({},t),{canClear:!t.empty}))}emitIdle(t){c(this,At,"f").info("emitIdle",{idle:t}),c(this,_t,"m",Mt).call(this,Nt.IDLE,t)}emitCleared(t){c(this,At,"f").info("emitCleared",{model:t}),c(this,_t,"m",Mt).call(this,Nt.CLEARED,t)}emitConverted(t){c(this,At,"f").info("emitConverted",{exports:t}),c(this,_t,"m",Mt).call(this,Nt.CONVERTED,t)}emitImported(t){c(this,At,"f").info("emitImported",{exports:t}),c(this,_t,"m",Mt).call(this,Nt.IMPORTED,t)}emitSelected(t){c(this,_t,"m",Mt).call(this,Nt.SELECTED,t)}emitIntention(t){c(this,_t,"m",Mt).call(this,Nt.INTENTION,t)}}Et=Bt,Ct=new WeakMap,At=new WeakMap,_t=new WeakSet,Mt=function(t,e){var n;const i=new CustomEvent(t,Object.assign({bubbles:!0,composed:!0},e?{detail:e}:void 0));this.dispatchEvent(i),null===(n=c(this,Ct,"f"))||void 0===n||n.dispatchEvent(i)},Lt={value:void 0};class zt{constructor(t){Pt.set(this,g.getLogger(d.GRABBER)),this.prevent=t=>t.preventDefault(),this.pointerDownHandler=t=>{if(c(this,Pt,"f").info("pointerDown",{evt:t}),0===t.button&&1===t.buttons&&(this.activePointerId=t.pointerId,this.onPointerDown)){const e=this.extractPoint(t);this.onPointerDown(t,e)}},this.pointerMoveHandler=t=>{if(c(this,Pt,"f").info("pointerMove",{evt:t}),null!=this.activePointerId&&this.activePointerId===t.pointerId&&this.onPointerMove){const e=this.extractPoint(t);this.onPointerMove(t,e)}},this.pointerUpHandler=t=>{if(c(this,Pt,"f").info("pointerUp",{evt:t}),null!=this.activePointerId&&this.activePointerId===t.pointerId&&(this.activePointerId=void 0,t.stopPropagation(),this.onPointerUp)){const e=this.extractPoint(t);this.onPointerUp(t,e)}},this.pointerOutHandler=t=>{if(null!=this.activePointerId&&this.activePointerId===t.pointerId&&!this.domElement.contains(t.target)&&(t.stopPropagation(),this.activePointerId=void 0,this.onPointerUp)){const e=this.extractPoint(t);this.onPointerUp(t,e)}},this.contextMenuHandler=t=>{const e=this.extractPoint(t);this.onContextMenu(t.target,e)},c(this,Pt,"f").info("constructor",{configuration:t}),this.configuration=t}roundFloat(t,e){if(e>=0){const n=Math.pow(10,e);return Math.round(t/n)*n}return c(this,Pt,"f").debug("roundFloat",{oneFloat:t,requestedFloatPrecision:e}),t}extractPoint(t){let e,n;({clientX:e,clientY:n}="changedTouches"in t?t.changedTouches[0]:t);const i=this.domElement.getBoundingClientRect(),r={x:this.roundFloat(e-i.left-this.domElement.clientLeft+this.domElement.scrollLeft,this.configuration.xyFloatPrecision),y:this.roundFloat(n-i.top-this.domElement.clientTop+this.domElement.scrollTop,this.configuration.xyFloatPrecision),t:this.roundFloat(Date.now(),this.configuration.timestampFloatPrecision),p:t.pressure};return c(this,Pt,"f").debug("extractPoint",{event:t,pointer:r}),r}stopPointerEvent(){this.activePointerId=void 0}attach(t){c(this,Pt,"f").info("attach",{domElement:t}),this.domElement&&this.detach(),this.domElement=t,this.domElement.addEventListener("pointerdown",this.pointerDownHandler,this.configuration.listenerOptions),this.domElement.addEventListener("pointermove",this.pointerMoveHandler,this.configuration.listenerOptions),this.domElement.addEventListener("pointerup",this.pointerUpHandler,this.configuration.listenerOptions),this.domElement.addEventListener("pointerleave",this.pointerUpHandler,this.configuration.listenerOptions),this.domElement.addEventListener("pointercancel",this.pointerUpHandler,this.configuration.listenerOptions),this.domElement.addEventListener("pointerout",this.pointerOutHandler,this.configuration.listenerOptions),this.domElement.addEventListener("contextmenu",this.contextMenuHandler)}detach(){var t,e,n,i,r,o,s;c(this,Pt,"f").info("detach"),null===(t=this.domElement)||void 0===t||t.removeEventListener("pointerdown",this.pointerDownHandler,this.configuration.listenerOptions),null===(e=this.domElement)||void 0===e||e.removeEventListener("pointermove",this.pointerMoveHandler,this.configuration.listenerOptions),null===(n=this.domElement)||void 0===n||n.removeEventListener("pointerup",this.pointerUpHandler,this.configuration.listenerOptions),null===(i=this.domElement)||void 0===i||i.removeEventListener("pointerleave",this.pointerUpHandler,this.configuration.listenerOptions),null===(r=this.domElement)||void 0===r||r.removeEventListener("pointercancel",this.pointerUpHandler,this.configuration.listenerOptions),null===(o=this.domElement)||void 0===o||o.removeEventListener("pointerout",this.pointerOutHandler,this.configuration.listenerOptions),null===(s=this.domElement)||void 0===s||s.removeEventListener("contextmenu",this.contextMenuHandler)}}Pt=new WeakMap;class $t{constructor(t){this.prevent=t=>t.preventDefault(),Tt.set(this,g.getLogger(d.GRABBER)),this.pointerDownHandler=t=>{if(c(this,Tt,"f").info("pointerDown",{evt:t}),0===t.button&&1===t.buttons&&(this.activePointerId=t.pointerId,this.onPointerDown)){const e=this.extractPoint(t);this.onPointerDown(t,e)}},this.pointerMoveHandler=t=>{if(c(this,Tt,"f").info("pointerMove",{evt:t}),null!=this.activePointerId&&this.activePointerId===t.pointerId){if(t.target.classList.contains("smartguide"))return void this.pointerUpHandler(t);if(this.onPointerMove){const e=this.extractPoint(t);this.onPointerMove(t,e)}}},this.pointerUpHandler=t=>{if(c(this,Tt,"f").info("pointerUp",{evt:t}),null!=this.activePointerId&&this.activePointerId===t.pointerId&&(this.activePointerId=void 0,t.stopPropagation(),this.onPointerUp)){const e=this.extractPoint(t);this.onPointerUp(t,e)}},this.pointerOutHandler=t=>{if(null!=this.activePointerId&&this.activePointerId===t.pointerId&&!this.domElement.contains(t.target)&&(t.stopPropagation(),this.activePointerId=void 0,this.onPointerUp)){const e=this.extractPoint(t);this.onPointerUp(t,e)}},c(this,Tt,"f").info("constructor",{configuration:t}),this.configuration=t}roundFloat(t,e){if(e>=0){const n=Math.pow(10,e);return Math.round(t/n)*n}return c(this,Tt,"f").debug("roundFloat",{oneFloat:t,requestedFloatPrecision:e}),t}extractPoint(t){let e,n;({clientX:e,clientY:n}="changedTouches"in t?t.changedTouches[0]:t);const i=this.domElement.getBoundingClientRect(),r={x:this.roundFloat(e-i.left-this.domElement.clientLeft+this.domElement.scrollLeft,this.configuration.xyFloatPrecision),y:this.roundFloat(n-i.top-this.domElement.clientTop+this.domElement.scrollTop,this.configuration.xyFloatPrecision),t:this.roundFloat(Date.now(),this.configuration.timestampFloatPrecision),p:t.pressure||1};return c(this,Tt,"f").debug("extractPoint",{event:t,pointer:r}),r}attach(t){c(this,Tt,"f").info("attach",{domElement:t}),this.domElement&&this.detach(),this.domElement=t,this.domElement.addEventListener("pointerdown",this.pointerDownHandler,this.configuration.listenerOptions),this.domElement.addEventListener("pointermove",this.pointerMoveHandler,this.configuration.listenerOptions),this.domElement.addEventListener("pointerup",this.pointerUpHandler,this.configuration.listenerOptions),this.domElement.addEventListener("pointerleave",this.pointerUpHandler,this.configuration.listenerOptions),this.domElement.addEventListener("pointercancel",this.pointerUpHandler,this.configuration.listenerOptions),this.domElement.addEventListener("pointerout",this.pointerOutHandler,this.configuration.listenerOptions),this.domElement.addEventListener("touchmove",this.prevent),document.documentElement.addEventListener("pointerdown",(()=>{}))}detach(){var t,e,n,i,r,o,s;c(this,Tt,"f").info("detach"),null===(t=this.domElement)||void 0===t||t.removeEventListener("pointerdown",this.pointerDownHandler,this.configuration.listenerOptions),null===(e=this.domElement)||void 0===e||e.removeEventListener("pointermove",this.pointerMoveHandler,this.configuration.listenerOptions),null===(n=this.domElement)||void 0===n||n.removeEventListener("pointerup",this.pointerUpHandler,this.configuration.listenerOptions),null===(i=this.domElement)||void 0===i||i.removeEventListener("pointerleave",this.pointerUpHandler,this.configuration.listenerOptions),null===(r=this.domElement)||void 0===r||r.removeEventListener("pointercancel",this.pointerUpHandler,this.configuration.listenerOptions),null===(o=this.domElement)||void 0===o||o.removeEventListener("pointerout",this.pointerOutHandler,this.configuration.listenerOptions),null===(s=this.domElement)||void 0===s||s.removeEventListener("touchmove",this.prevent),document.documentElement.removeEventListener("pointerdown",(()=>{}))}}Tt=new WeakMap,function(t){t.JIIX="application/vnd.myscript.jiix",t.TEXT="text/plain",t.LATEX="application/x-latex",t.MATHML="application/mathml+xml",t.SVG="image/svg+xml",t.OFFICE_DOCUMENT="application/vnd.openxmlformats-officedocument.presentationml.presentation"}(It||(It={})),function(t){t.Text="Text",t.Node="Node",t.Edge="Edge",t.RawContent="Raw Content"}(Ot||(Ot={})),function(t){t.Circle="circle",t.Ellipse="ellipse",t.Rectangle="rectangle",t.Triangle="triangle",t.Parallelogram="parallelogram",t.Polygon="polygon",t.Rhombus="rhombus"}(Dt||(Dt={})),function(t){t.Line="line",t.PolyEdge="polyedge",t.Arc="arc"}(jt||(jt={}));class qt{constructor(t){if(t.width<0)throw new Error("width must be positive");if(t.height<0)throw new Error("height must be positive");this.height=t.height,this.width=t.width,this.x=t.x,this.y=t.y}static createFromBoxes(t){if(!(null==t?void 0:t.length))return new qt({height:0,width:0,x:0,y:0});const e=Math.min(...t.map((t=>t.x))),n=Math.max(...t.map((t=>t.x+t.width)))-e,i=Math.min(...t.map((t=>t.y))),r=Math.max(...t.map((t=>t.y+t.height)))-i;return new qt({x:e,y:i,width:n,height:r})}static createFromPoints(t){if(!(null==t?void 0:t.length))return new qt({height:0,width:0,x:0,y:0});const e=Math.min(...t.map((t=>t.x))),n=Math.max(...t.map((t=>t.x)))-e,i=Math.min(...t.map((t=>t.y))),r=Math.max(...t.map((t=>t.y)))-i;return new qt({x:e,y:i,width:n,height:r})}static getCorners(t){return[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}]}static getCenter(t){return{x:t.x+t.width/2,y:t.y+t.height/2}}static getSides(t){const e=qt.getCorners(t);return e.map(((t,n)=>3===n?{p1:e[0],p2:t}:{p1:t,p2:e[n+1]}))}static isContained(t,e){return b(t.x,e.x,e.x+e.width)&&b(t.x+t.width,e.x,e.x+e.width)&&b(t.y,e.y,e.y+e.height)&&b(t.y+t.height,e.y,e.y+e.height)}static containsPoint(t,e){return b(e.x,t.x,t.x+t.width)&&b(e.y,t.y,t.y+t.height)}static contains(t,e){return b(e.x,t.x,t.x+t.width)&&b(e.x+e.width,t.x,t.x+t.width)&&b(e.y,t.y,t.y+t.height)&&b(e.y+e.height,t.y,t.y+t.height)}static overlaps(t,e){return!(t.x>e.x+e.width)&&!(t.x+t.width<e.x)&&!(t.y>e.y+e.height)&&!(t.y+t.height<e.y)}get xMin(){return this.x}get xMid(){return this.x+this.width/2}get xMax(){return this.x+this.width}get yMin(){return this.y}get yMid(){return this.y+this.height/2}get yMax(){return this.y+this.height}get corners(){return qt.getCorners(this)}get center(){return qt.getCenter(this)}get snapPoints(){return[...this.corners,this.center]}isContained(t){return qt.isContained(this,t)}contains(t){return qt.contains(this,t)}containsPoint(t){return qt.containsPoint(this,t)}overlaps(t){return qt.overlaps(this,t)}}!function(t){t.Highlight="highlight",t.Surround="surround",t.Underline="underline",t.Strikethrough="strikethrough"}(Rt||(Rt={}));class Ut{constructor(t,e){this.id=`${t}-${R()}`,this.style=structuredClone(e),this.kind=t}clone(){const t=new Ut(this.kind,structuredClone(this.style));return t.id=this.id,t}}const Gt={width:2,color:"#000000",opacity:1,fill:"transparent"},Ht={},Wt={ink:{color:"#000000",width:1,"-myscript-pen-width":1,"-myscript-pen-fill-style":"none","-myscript-pen-fill-color":"#FFFFFF00"},".math":{"font-family":"STIXGeneral"},".math-solved":{"font-family":"STIXGeneral",color:"#A8A8A8FF"},".text":{"font-family":"MyScriptInter","font-size":10}};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Vt=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){t.exports=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,n){function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function t(e){var n=this;i(this,t),this.toJSON=function(t){if("string"!=typeof t)return console.error("Need a CSS string but given ",void 0===t?"undefined":r(t),t),"Not a valid CSS..!";var e={},i=void 0,o=void 0,s=void 0;try{t.split("{").forEach((function(t){if(o=t.trim())if(-1===o.indexOf("}"))e[o]={},i=o;else{o.substring(0,o.indexOf("}")).split(";").forEach((function(t){(s=t.split(":"))&&2===s.length&&(e[i][s[0].trim().replace(/^\"|\"$/g,"")]=n._trimSemiColon(s[1].trim().replace(/^\"|\"$/g,"")))}));try{(i=o.split("}")[1].trim())&&(e[i]={})}catch(t){}}}))}catch(t){return"Not a valid CSS..!"}return e},this.toCSS=function(t){if("object"!==(void 0===t?"undefined":r(t)))return console.error("Need a JSON object but given ",void 0===t?"undefined":r(t),t),"Not a valid JSON..!";var e="";try{for(var n in t)if(t.hasOwnProperty(n)){for(var i in e+=n+" {\n",t[n])t[n].hasOwnProperty(i)&&(e+=i+": "+t[n][i]+";\n");e+="}\n"}}catch(t){return"Not a valid JSON..!"}return e},this._trimSemiColon=function(t){return";"===t.slice(-1)?t.slice(0,n.length-1):t}};e.default=o},function(t,e,n){t.exports=n(0).default}])})),Yt=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}(Vt);Vt.JsonCSS;const Jt=new Yt,Xt={themeToCSS:t=>Jt.toCSS(t),themeToJSON(t){const e=Jt.toJSON(t);return e[".text"]["font-size"]=Number(e[".text"]["font-size"]),e.ink["-myscript-pen-width"]=Number(e.ink["-myscript-pen-width"]),e.ink.width=Number(e.ink.width),e},penStyleToCSS(t){let e=Jt.toCSS({css:t});return e=e.substring(6,e.length-3),e},penStyleToJSON(t){const e=Jt.toJSON(`css {${t}}`).css;return e.width?e.width=Number(e.width):delete e.width,e["-myscript-pen-width"]?e["-myscript-pen-width"]=Number(e["-myscript-pen-width"]):delete e["-myscript-pen-width"],e},stringToJSON:t=>Jt.toJSON(`css {${t}}`).css,JSONToString:t=>Object.entries(t).map((([t,e])=>`${t}:${e}`)).join(";")};var Kt,Zt,Qt,te,ee,ne,ie,re,oe;class se{constructor(t,e){Kt.set(this,void 0),Zt.set(this,void 0),Qt.set(this,void 0),te.set(this,void 0),ee.set(this,g.getLogger(d.STYLE)),c(this,ee,"f").info("constructor",{penStyle:t,theme:e}),this.setTheme(e),this.setPenStyleClasses(),this.setPenStyle(t)}get currentPenStyle(){return c(this,te,"f")||c(this,Kt,"f")}get penStyle(){return c(this,Kt,"f")}setPenStyle(t){c(this,ee,"f").info("setPenStyle",{style:t}),h(this,Kt,F(structuredClone(Ht),t||{}),"f"),h(this,te,t||this.theme[`.${c(this,Qt,"f")}`],"f"),c(this,ee,"f").debug("setPenStyle",c(this,te,"f"))}get theme(){return c(this,Zt,"f")}setTheme(t){c(this,ee,"f").info("setTheme",{theme:t}),h(this,Zt,F(structuredClone(Wt),t||{}),"f"),c(this,ee,"f").debug("setTheme",c(this,Zt,"f"))}get penStyleClasses(){return c(this,Qt,"f")}setPenStyleClasses(t=""){c(this,ee,"f").info("setPenStyleClasses",{penStyleClass:t}),h(this,Qt,t,"f"),h(this,te,this.theme[`.${c(this,Qt,"f")}`],"f"),c(this,ee,"f").debug("setPenStyleClasses",c(this,te,"f"))}}Kt=new WeakMap,Zt=new WeakMap,Qt=new WeakMap,te=new WeakMap,ee=new WeakMap;class ae{constructor(t,e,n,i,r,o){this.xx=t,this.yx=e,this.xy=n,this.yy=i,this.tx=r,this.ty=o}static identity(){return new ae(1,0,0,1,0,0)}static applyToPoint(t,e){return{x:t.xx*e.x+t.xy*e.y+t.tx,y:t.yx*e.x+t.yy*e.y+t.ty}}static rotation(t){let e;if(0!==t.xx||0!==t.xy){const n=Math.hypot(t.xx,t.xy);e=Math.acos(t.xx/n)*(t.xy>0?-1:1)}else if(0!==t.yx||0!==t.yy){const n=Math.hypot(t.yx,t.yy);e=Math.PI/2+Math.acos(t.yx/n)*(t.yy>0?-1:1)}else e=0;return e}static toCssString(t){return`matrix(${t.xx}, ${t.yx}, ${t.xy}, ${t.yy}, ${t.tx}, ${t.ty})`}invert(){const{xx:t,yx:e,xy:n,yy:i,tx:r,ty:o}=this,s=t*i-e*n;return this.xx=i/s,this.yx=e/-s,this.xy=n/-s,this.yy=t/s,this.tx=(i*r-n*o)/-s,this.ty=(e*r-t*o)/s,this}multiply(t){const{xx:e,yx:n,xy:i,yy:r,tx:o,ty:s}=this;return this.xx=e*t.xx+i*t.yx,this.yx=n*t.xx+r*t.yx,this.xy=e*t.xy+i*t.yy,this.yy=n*t.xy+r*t.yy,this.tx=e*t.tx+i*t.ty+o,this.ty=n*t.tx+r*t.ty+s,this}translate(t,e){return this.multiply({xx:1,yx:0,xy:0,yy:1,tx:t,ty:e})}rotate(t,e){e&&this.translate(e.x,e.y);const n=Math.round(1e3*Math.cos(t))/1e3,i=Math.round(1e3*Math.sin(t))/1e3;return this.multiply({xx:n,yx:i,xy:-i,yy:n,tx:0,ty:0}),e&&this.translate(-e.x,-e.y),this}scale(t,e,n){return n&&this.translate(n.x,n.y),this.multiply({xx:t,yx:0,xy:0,yy:e,tx:0,ty:0}),n&&this.translate(-n.x,-n.y),this}applyToPoint(t){return ae.applyToPoint(this,t)}clone(){return new ae(this.xx,this.yx,this.xy,this.yy,this.tx,this.ty)}toCssString(){return ae.toCssString(this)}}class le{constructor(t,e){this.type=t,this.id=`${this.type}-${R()}`,this.creationTime=Date.now(),this.modificationDate=this.creationTime,this.selected=!1,this.deleting=!1,this.transform=ae.identity(),this.style=Object.assign({},Gt,e),this.style.opacity=+this.style.opacity,this.style.width=+this.style.width}get edges(){return this.isClosed?this.vertices.map(((t,e)=>e===this.vertices.length-1?{p1:t,p2:this.vertices[0]}:{p1:t,p2:this.vertices[e+1]})):this.vertices.slice(0,-1).map(((t,e)=>({p1:t,p2:this.vertices[e+1]})))}isIntersected(t){return this.edges.some((e=>C(e,t)))}}!function(t){t.Stroke="stroke",t.Group="group",t.Shape="shape",t.Edge="edge",t.Text="text",t.Eraser="eraser"}(ne||(ne={})),function(t){t.Line="line",t.PolyEdge="polyedge",t.Arc="arc"}(ie||(ie={})),function(t){t.Arrow="arrow-head"}(re||(re={}));class ce extends le{constructor(t,e,n,i){super(ne.Edge,i),this.isClosed=!1,this.kind=t,this.startDecoration=e,this.endDecoration=n}get bounds(){const t=qt.createFromPoints(this.vertices);return t.x-=5,t.y-=5,t.height+=a,t.width+=a,(this.startDecoration||this.endDecoration)&&(t.x-=2.5*(this.style.width||1),t.y-=2.5*(this.style.width||1),t.height+=5*(this.style.width||1),t.width+=5*(this.style.width||1)),t}get snapPoints(){return this.vertices}overlaps(t){return this.bounds.isContained(t)||this.edges.some((e=>qt.getSides(t).some((t=>!!C(e,t)))))}}function he(t){return!!t&&!!y(t.x)&&!!y(t.y)}class ue extends ce{constructor(t,e,n,i,r,o,s,a,l){super(ie.Arc,s,a,l),this.center=t,this.startAngle=e,this.sweepAngle=n,this.radiusX=i,this.radiusY=r,this.phi=o,this._vertices=new Map,this._vertices.set(this.verticesId,this.computedVertices())}get verticesId(){return`${this.center.x}-${this.center.y}-${this.startAngle}-${this.sweepAngle}-${this.radiusX}-${this.radiusY}-${this.phi}`}computedVertices(){const t=Math.abs(this.sweepAngle)*Math.sqrt((Math.pow(this.radiusX,2)+Math.pow(this.radiusY,2))/2),e=Math.max(8,Math.round(t/a)),n=this.sweepAngle/e,i=[],r=this.startAngle+this.sweepAngle;if(this.sweepAngle>0)for(let o=this.startAngle;o<r;o+=n)i.push(L(this.center,this.radiusX,this.radiusY,this.phi,o));else for(let o=this.startAngle;o>r;o+=n)i.push(L(this.center,this.radiusX,this.radiusY,this.phi,o));return i.push(L(this.center,this.radiusX,this.radiusY,this.phi,r)),i}get vertices(){return this._vertices.has(this.verticesId)||this._vertices.set(this.verticesId,this.computedVertices()),this._vertices.get(this.verticesId)}get snapPoints(){return[this.vertices[0],this.vertices.at(-1)]}clone(){const t=new ue(structuredClone(this.center),this.startAngle,this.sweepAngle,this.radiusX,this.radiusY,this.phi,this.startDecoration,this.endDecoration,structuredClone(this.style));return t.id=this.id,t.selected=this.selected,t.deleting=this.deleting,t.creationTime=this.creationTime,t.modificationDate=this.modificationDate,t}toJSON(){return{id:this.id,type:this.type,kind:this.kind,center:this.center,startAngle:this.startAngle,sweepAngle:this.sweepAngle,radiusX:this.radiusX,radiusY:this.radiusY,phi:this.phi,startDecoration:this.startDecoration,style:this.style,endDecoration:this.endDecoration}}static create(t){if(!he(null==t?void 0:t.center))throw new Error("Unable to create a arc, center point is invalid");if(!y(null==t?void 0:t.startAngle))throw new Error("Unable to create a arc, startAngle is invalid");if(!y(null==t?void 0:t.sweepAngle))throw new Error("Unable to create a arc, sweepAngle is invalid");if(!y(null==t?void 0:t.radiusX))throw new Error("Unable to create a arc, radiusX is invalid");if(!y(null==t?void 0:t.radiusY))throw new Error("Unable to create a arc, radiusY is invalid");const e=new ue(null==t?void 0:t.center,t.startAngle,t.sweepAngle,t.radiusX,t.radiusY,t.phi||0,t.startDecoration,t.endDecoration,t.style);return t.id&&(e.id=t.id),e}}class de extends ce{constructor(t,e,n,i,r){super(ie.Line,n,i,r),this.start=t,this.end=e}get vertices(){return[this.start,this.end]}clone(){const t=new de(structuredClone(this.start),structuredClone(this.end),this.startDecoration,this.endDecoration,structuredClone(this.style));return t.id=this.id,t.selected=this.selected,t.deleting=this.deleting,t.creationTime=this.creationTime,t.modificationDate=this.modificationDate,t}toJSON(){return{id:this.id,type:this.type,kind:this.kind,start:this.start,end:this.end,style:this.style,startDecoration:this.startDecoration,endDecoration:this.endDecoration}}static create(t){if(!he(null==t?void 0:t.start))throw new Error("Unable to create a arc, start point is invalid");if(!he(null==t?void 0:t.end))throw new Error("Unable to create a arc, end point is invalid");const e=new de(null==t?void 0:t.start,null==t?void 0:t.end,t.startDecoration,t.endDecoration,t.style);return t.id&&(e.id=t.id),e}}class pe extends ce{constructor(t,e,n,i){super(ie.PolyEdge,e,n,i),this.points=t}get vertices(){return this.points}clone(){const t=new pe(structuredClone(this.points),this.startDecoration,this.endDecoration,structuredClone(this.style));return t.id=this.id,t.selected=this.selected,t.deleting=this.deleting,t.creationTime=this.creationTime,t.modificationDate=this.modificationDate,t}toJSON(){return{id:this.id,type:this.type,kind:this.kind,points:this.points,style:this.style,startDecoration:this.startDecoration,endDecoration:this.endDecoration}}static create(t){var e;if(!(null===(e=null==t?void 0:t.points)||void 0===e?void 0:e.map((t=>he(t)))))throw new Error("Unable to create a PolyLine, points are invalid");const n=new pe(null==t?void 0:t.points,t.startDecoration,t.endDecoration,t.style);return t.id&&(n.id=t.id),n}}!function(t){t.Circle="circle",t.Ellipse="ellipse",t.Polygon="polygon",t.Table="table"}(oe||(oe={}));class fe extends le{constructor(t,e){super(ne.Shape,e),this.isClosed=!0,this.kind=t}get bounds(){return qt.createFromPoints(this.vertices)}get snapPoints(){return this.bounds.snapPoints}overlaps(t){return this.bounds.isContained(t)||this.edges.some((e=>qt.getSides(t).some((t=>!!C(e,t)))))}}class me extends fe{constructor(t,e,n,i,r){super(oe.Ellipse,r),this.center=t,this.radiusX=e,this.radiusY=n,this.orientation=i,this._vertices=new Map}get verticesId(){return`${this.center.x}-${this.center.y}-${this.radiusX}-${this.radiusY}-${this.orientation}`}computedVertices(){const t=[],e=2*Math.PI*Math.sqrt((Math.pow(this.radiusX,2)+Math.pow(this.radiusY,2))/2),n=Math.max(8,Math.round(e/a));for(let i=0;i<n;i++){const e=2*Math.PI*(i/n);t.push(L(this.center,this.radiusX,this.radiusY,this.orientation,e))}return t}get vertices(){return this._vertices.has(this.verticesId)||this._vertices.set(this.verticesId,this.computedVertices()),this._vertices.get(this.verticesId)}overlaps(t){return this.bounds.isContained(t)||this.edges.some((e=>qt.getSides(t).some((t=>!!C(e,t)))))}clone(){const t=new me(structuredClone(this.center),this.radiusX,this.radiusY,this.orientation,structuredClone(this.style));return t.id=this.id,t.selected=this.selected,t.deleting=this.deleting,t.creationTime=this.creationTime,t.modificationDate=this.modificationDate,t}toJSON(){return{id:this.id,type:this.type,kind:this.kind,center:this.center,orientation:this.orientation,radiusX:this.radiusX,radiusY:this.radiusY,style:this.style}}static createBetweenPoints(t,e,n){const i={x:(t.x+e.x)/2,y:(t.y+e.y)/2},r=Math.abs(t.x-e.x)/2,o=Math.abs(t.y-e.y)/2;return new me(i,r,o,0,n)}static updateBetweenPoints(t,e,n){return t.center={x:(e.x+n.x)/2,y:(e.y+n.y)/2},t.radiusX=Math.abs(e.x-n.x)/2,t.radiusY=Math.abs(e.y-n.y)/2,t}static create(t){if(!he(t.center))throw new Error("Unable to create ellipse, center is undefined");if(!y(t.radiusX))throw new Error("Unable to create ellipse, radiusX is undefined");if(!y(t.radiusY))throw new Error("Unable to create ellipse, radiusY is undefined");const e=new me(t.center,t.radiusX,t.radiusY,t.orientation||0,t.style);return t.id&&(e.id=t.id),e}}class ge extends fe{constructor(t,e,n){super(oe.Circle,n),this.center=t,this.radius=e,this._vertices=new Map,this._vertices.set(this.verticesId,this.computedVertices()),this._bounds=new Map,this._bounds.set(this.verticesId,this.computedBondingBox())}get verticesId(){return`${this.center.x}-${this.center.y}-${this.radius}`}computedVertices(){const t={x:this.center.x,y:this.radius+this.center.y},e=2*Math.PI*this.radius,n=Math.max(8,Math.round(e/a)),i=[];for(let r=0;r<n;r++){const e=2*Math.PI*(r/n);i.push(E(t,this.center,e))}return i}computedBondingBox(){const t={x:this.center.x-this.radius,y:this.center.y-this.radius,height:2*this.radius,width:2*this.radius};return this._bounds,new qt(t)}get bounds(){return this._bounds.has(this.verticesId)||this._bounds.set(this.verticesId,this.computedBondingBox()),this._bounds.get(this.verticesId)}get vertices(){return this._vertices.has(this.verticesId)||this._vertices.set(this.verticesId,this.computedVertices()),this._vertices.get(this.verticesId)}overlaps(t){return this.bounds.isContained(t)||qt.getSides(t).some((t=>A(t,this.center,this.radius).length))}clone(){const t=new ge(structuredClone(this.center),this.radius,structuredClone(this.style));return t.id=this.id,t.selected=this.selected,t.deleting=this.deleting,t.creationTime=this.creationTime,t.modificationDate=this.modificationDate,t}toJSON(){return{id:this.id,type:this.type,kind:this.kind,center:this.center,radius:this.radius,style:this.style}}static createBetweenPoints(t,e,n){const i={x:(t.x+e.x)/2,y:(t.y+e.y)/2},r=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y),s=Math.min(r,o)/2;return new ge(i,s,n)}static updateBetweenPoints(t,e,n){t.center={x:(e.x+n.x)/2,y:(e.y+n.y)/2};const i=Math.abs(e.x-n.x),r=Math.abs(e.y-n.y);return t.radius=Math.min(i,r)/2,t}static create(t){if(!he(t.center))throw new Error("Unable to create circle, center is invalid");if(!y(t.radius))throw new Error("Unable to create circle, radius is undefined");const e=new ge(t.center,t.radius,t.style);return t.id&&(e.id=t.id),e}}class ve extends fe{constructor(t,e){super(oe.Polygon,e),this.points=t}get vertices(){return this.points}get bounds(){return qt.createFromPoints(this.vertices)}clone(){const t=new ve(structuredClone(this.points),structuredClone(this.style));return t.id=this.id,t.selected=this.selected,t.deleting=this.deleting,t.creationTime=this.creationTime,t.modificationDate=this.modificationDate,t}toJSON(){return{id:this.id,type:this.type,kind:this.kind,points:this.points,style:this.style}}static create(t){var e,n;if(!(null==t?void 0:t.points)||(null===(e=null==t?void 0:t.points)||void 0===e?void 0:e.length)<3)throw new Error("Unable to create polygon at least 3 points required");if(null===(n=null==t?void 0:t.points)||void 0===n?void 0:n.some((t=>!he(t))))throw new Error("Unable to create a polygon, one or more points are invalid");const i=new ve(t.points,t.style);return t.id&&(i.id=t.id),i}static createTriangleBetweenPoints(t,e,n){const i=[{x:t.x,y:t.y},{x:e.x,y:t.y},{x:(t.x+e.x)/2,y:e.y}];return new ve(i,n)}static updateTriangleBetweenPoints(t,e,n){return t.points=[{x:e.x,y:e.y},{x:n.x,y:e.y},{x:(e.x+n.x)/2,y:n.y}],t.modificationDate=Date.now(),t}static createParallelogramBetweenPoints(t,e,n){const i=[{x:t.x,y:t.y},{x:t.x+.75*(e.x-t.x),y:t.y},{x:e.x,y:e.y},{x:t.x+.25*(e.x-t.x),y:e.y}];return new ve(i,n)}static updateParallelogramBetweenPoints(t,e,n){const i=[{x:e.x,y:e.y},{x:e.x+.75*(n.x-e.x),y:e.y},{x:n.x,y:n.y},{x:e.x+.25*(n.x-e.x),y:n.y}];return t.points=i,t.modificationDate=Date.now(),t}static createRectangleBetweenPoints(t,e,n){const i=qt.createFromPoints([t,e]),r=[{x:i.xMin,y:i.yMin},{x:i.xMax,y:i.yMin},{x:i.xMax,y:i.yMax},{x:i.xMin,y:i.yMax}];return new ve(r,n)}static updateRectangleBetweenPoints(t,e,n){const i=qt.createFromPoints([e,n]),r=[{x:i.xMin,y:i.yMin},{x:i.xMax,y:i.yMin},{x:i.xMax,y:i.yMax},{x:i.xMin,y:i.yMax}];return t.points=r,t.modificationDate=Date.now(),t}static createRhombusBetweenPoints(t,e,n){const i=qt.createFromPoints([t,e]),r=[{x:i.xMid,y:i.yMin},{x:i.xMax,y:i.yMid},{x:i.xMid,y:i.yMax},{x:i.xMin,y:i.yMid}];return new ve(r,n)}static updateRhombusBetweenPoints(t,e,n){const i=qt.createFromPoints([e,n]),r=[{x:i.xMid,y:i.yMin},{x:i.xMax,y:i.yMid},{x:i.xMid,y:i.yMax},{x:i.xMin,y:i.yMid}];return t.points=r,t.modificationDate=Date.now(),t}}class ye extends le{constructor(t,e="pen"){super(ne.Stroke,t),this.isClosed=!1,this.pointerType=e,this.pointers=[],this.decorators=[],this.length=0}get bounds(){return qt.createFromPoints(this.vertices)}static split(t,e){const n=new ye(t.style,t.pointerType);n.pointers=t.pointers.slice(0,e);const i=new ye(t.style,t.pointerType);return i.pointers=t.pointers.slice(e),{before:n,after:i}}static substract(t,e){var n,i;if(!e.length)return{before:t};const r={},o={x:e.pointers[0].x,y:e.pointers[0].y},s=P(t.pointers,o);if(s.index>-1){const e=ye.split(t,s.index);r.before=e.before,r.after=e.after}const a=r.after||t,l={x:e.pointers.at(-1).x,y:e.pointers.at(-1).y},c=P(a.pointers,l);if(c.index>-1){const t=ye.split(a,c.index);r.after=t.after}return(null===(n=r.before)||void 0===n?void 0:n.pointers.length)||(r.before=void 0),(null===(i=r.after)||void 0===i?void 0:i.pointers.length)||(r.after=void 0),r}get snapPoints(){return this.bounds.snapPoints}get vertices(){return this.pointers}computePressure(t){let e=1;t===this.length?e=1:t<10?e=.2+Math.pow(.1*t,.4):t>this.length-10&&(e=.2+Math.pow(.1*(this.length-t),.4));const n=e*Math.max(.1,1-.1*Math.sqrt(t));return isNaN(n)?.5:Math.round(100*n)/100}filterPointByAcquisitionDelta(t){const e=this.pointers.at(-1),n=2+(this.style.width||1)/4;return!e||Math.abs(e.x-t.x)>=n||Math.abs(e.y-t.y)>=n}addPointer(t){if(this.filterPointByAcquisitionDelta(t)){const e=this.pointers.at(-1),n=e?x(t,e):0;this.length+=n,t.p=this.computePressure(n),this.pointers.push(t),this.modificationDate=Date.now()}}overlaps(t){return this.pointers.some((e=>e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height))}clone(){const t=new ye(this.style,this.pointerType);return t.id=this.id,t.selected=this.selected,t.deleting=this.deleting,t.creationTime=this.creationTime,t.modificationDate=this.modificationDate,t.pointers=structuredClone(this.pointers),t.decorators=this.decorators.map((t=>t.clone())),t.length=this.length,t}formatToSend(){const t={id:this.id,pointerType:this.pointerType,p:[],t:[],x:[],y:[]};return this.pointers.forEach((e=>{t.p.push(e.p),t.t.push(e.t),t.x.push(e.x),t.y.push(e.y)})),t}toJSON(){return{id:this.id,type:this.type,pointers:this.pointers,style:this.style,decorators:this.decorators.length?this.decorators:void 0}}static create(t){var e,n,i;if(!(null===(e=t.pointers)||void 0===e?void 0:e.length))throw new Error("not pointers");const r=new ye(t.style,t.pointerType);t.id&&(r.id=t.id);const o=[];let s=!0;if(null===(n=t.pointers)||void 0===n||n.forEach(((t,e)=>{if(!t)return o.push(`no pointer at ${e}`),void(s=!1);const n={p:t.p||1,t:t.t||e,x:0,y:0};return null==(null==t?void 0:t.x)||null==(null==t?void 0:t.x)?(o.push(`no x at pointer at ${e}`),void(s=!1)):(n.x=t.x,null==(null==t?void 0:t.y)||null==(null==t?void 0:t.y)?(o.push(`no y at pointer at ${e}`),void(s=!1)):(n.y=t.y,void(s&&r.addPointer(n))))})),o.length)throw new Error(o.join(" and "));return(null===(i=t.decorators)||void 0===i?void 0:i.length)&&t.decorators.forEach((t=>{(null==t?void 0:t.kind)&&r.decorators.push(new Ut(t.kind,Object.assign({},r.style,t.style)))})),r}}function be(t){const e=[],n=[];if(t.forEach(((t,i)=>{try{n.push(ye.create(t))}catch(t){e.push(`stroke ${i+1} has ${t.message}`)}})),e.length)throw new Error(e.join("\n"));return n}class we extends le{constructor(t,e){super(ne.Group,e),this.isClosed=!1,this.children=t,this.decorators=[]}get snapPoints(){return this.bounds.snapPoints}get vertices(){return this.children.flatMap((t=>t.vertices))}get bounds(){return qt.createFromBoxes(this.children.map((t=>t.bounds)))}updateChildrenStyle(){this.children.forEach((t=>{t.style=Object.assign({},t.style,this.style),t.type===ne.Text?t.chars.forEach((e=>{t.style.color&&(e.color=t.style.color)})):t.type===ne.Group&&t.updateChildrenStyle()}))}overlaps(t){return this.children.some((e=>e.overlaps(t)))}containsSymbol(t){return we.containsSymbol(this,t)}containsOnlyStroke(){return we.containsOnlyStroke(this)}extractSymbols(){return we.extractSymbols(this)}extractStrokes(){return we.extractStrokes(this)}removeChilds(t){return we.removeChilds(this,t)}static containsOnlyStroke(t){return t.children.every((t=>t.type===ne.Group?we.containsOnlyStroke(t):t.type===ne.Stroke))}static extractSymbols(t){return t.children.flatMap((t=>t.type===ne.Group?we.extractSymbols(t).concat(t):t))}static extractStrokes(t){return t.children.flatMap((t=>t.type===ne.Stroke?t:t.type===ne.Group?we.extractStrokes(t):void 0)).filter((t=>!!t))}static containsSymbol(t,e){return t.children.some((t=>t.type===ne.Group?we.containsSymbol(t,e):t.id===e))}static removeChilds(t,e){return t.children=t.children.filter((t=>!e.includes(t.id))),t.children.slice().forEach((n=>{n.type===ne.Group&&(n.removeChilds(e).children.length||(t.children=t.children.filter((t=>t.id!==n.id))))})),t}clone(){const t=new we(this.children.map((t=>t.clone())),structuredClone(Object.assign({},this.style)));return t.id=this.id,t.selected=this.selected,t.deleting=this.deleting,t.creationTime=this.creationTime,t.modificationDate=this.modificationDate,t.decorators=this.decorators.map((t=>t.clone())),t}toJSON(){return{id:this.id,type:this.type,children:JSON.parse(JSON.stringify(this.children)),decorators:this.decorators.length?JSON.parse(JSON.stringify(this.decorators)):void 0}}}class xe extends le{constructor(t,e,n,i){super(ne.Text,i),this.isClosed=!0,this.point=e,this.bounds=new qt(n),this.chars=t,this.decorators=[]}get label(){return this.chars.map((t=>t.label)).join("")}get vertices(){if(this.rotation){const t=this.rotation.center,e=_(-this.rotation.degree);return this.bounds.corners.map((n=>E(n,t,e)))}return this.bounds.corners}get snapPoints(){const t=this.bounds.yMax-this.point.y,e=[{x:this.bounds.x,y:this.bounds.yMin+t},{x:this.bounds.xMax,y:this.bounds.yMin+t},{x:this.bounds.xMax,y:this.bounds.yMax-t},{x:this.bounds.x,y:this.bounds.yMax-t},this.bounds.center];if(this.rotation){const t=this.rotation.center,n=_(-this.rotation.degree);return e.map((e=>E(e,t,n)))}return e}getCharCorners(t){const e=new qt(t.bounds);if(this.rotation){const t=this.rotation.center,n=_(-this.rotation.degree);return e.corners.map((e=>E(e,t,n)))}return e.corners}getCharsOverlaps(t){return this.chars.filter((e=>{const n=this.getCharCorners(e);return t.some((t=>T(t,n)))}))}overlaps(t){return this.vertices.some((e=>qt.containsPoint(t,e)))||this.edges.some((e=>qt.getSides(t).some((t=>!!C(e,t)))))}clone(){const t=new xe(structuredClone(this.chars),structuredClone(this.point),this.bounds,structuredClone(this.style));return t.id=this.id,t.selected=this.selected,t.deleting=this.deleting,t.creationTime=this.creationTime,t.modificationDate=this.modificationDate,t.decorators=this.decorators.map((t=>t.clone())),t.rotation=this.rotation?structuredClone(this.rotation):void 0,t}toJSON(){return{id:this.id,type:this.type,point:this.point,chars:this.chars,style:this.style,rotation:this.rotation,bounds:this.bounds,decorators:this.decorators.length?this.decorators:void 0}}static create(t){var e,n;if(!he(null==t?void 0:t.point))throw new Error("Unable to create a OIText, point are invalid");if(!(null===(e=t.chars)||void 0===e?void 0:e.length))throw new Error("Unable to create a OIText, no chars");if(!t.bounds)throw new Error("Unable to create a OIText, no boundingBox");const i=new xe(t.chars,t.point,t.bounds,t.style);return t.id&&(i.id=t.id),(null===(n=t.decorators)||void 0===n?void 0:n.length)&&t.decorators.forEach((t=>{(null==t?void 0:t.kind)&&i.decorators.push(new Ut(t.kind,Object.assign({},i.style,t.style)))})),i}}const Se={color:"grey",fill:"none",width:12,opacity:.2};class ke extends le{constructor(){super(ne.Eraser,Se),this.isClosed=!1,this.id=`${this.type}-${R()}`,this.creationTime=Date.now(),this.modificationDate=this.creationTime,this.pointers=[]}get bounds(){return qt.createFromPoints(this.vertices)}get vertices(){return this.pointers}get snapPoints(){return[]}clone(){const t=new ke;return t.id=this.id,t.creationTime=this.creationTime,t.modificationDate=this.modificationDate,t.pointers=structuredClone(this.pointers),t}overlaps(t){return this.pointers.some((e=>e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height))}toJSON(){return{id:this.id,pointers:this.pointers,style:this.style}}}class _e{constructor(t,e="pen"){this.type=ne.Stroke,this.id=`${this.type}-${R()}`,this.creationTime=Date.now(),this.modificationDate=this.creationTime,this.style=t,this.pointerType=e,this.pointers=[],this.length=0}clone(){const t=new _e(this.style,this.pointerType);return t.id=this.id,t.creationTime=this.creationTime,t.modificationDate=this.modificationDate,t.pointers=structuredClone(this.pointers),t.length=this.length,t}formatToSend(){const t={id:this.id,pointerType:this.pointerType,p:[],t:[],x:[],y:[]};return this.pointers.forEach((e=>{t.p.push(e.p),t.t.push(e.t),t.x.push(e.x),t.y.push(e.y)})),t}}var Ee,Le,Ce,Ae;class Me{constructor(t=100,e=100,n=0,i=Date.now()){Ee.set(this,g.getLogger(d.MODEL)),c(this,Ee,"f").info("constructor",{width:t,height:e,creationDate:i}),this.creationTime=i,this.modificationDate=i,this.width=t,this.height=e,this.rowHeight=n,this.symbols=[],this.positions={lastSentPosition:0,lastReceivedPosition:0},this.idle=!0}computePressure(t,e){let n=1;t===e?n=1:t<10?n=.2+Math.pow(.1*t,.4):t>e-10&&(n=.2+Math.pow(.1*(e-t),.4));const i=n*Math.max(.1,1-.1*Math.sqrt(t));return isNaN(i)?.5:Math.round(100*i)/100}filterPointByAcquisitionDelta(t,e,n){const i=2+(t.style["-myscript-pen-width"]||0)/4;return!n||0===t.pointers.length||Math.abs(n.x-e.x)>=i||Math.abs(n.y-e.y)>=i}getStrokeFromPoint(t){c(this,Ee,"f").info("getStrokeFromPoint",{point:t});const e=(t,e,n)=>t>=e&&t<=n,n=[];return this.symbols.forEach((i=>{for(let r=0;r<i.pointers.length;r++){const o=i.pointers[r];if(e(o.x,t.x-5,t.x+5)&&e(o.y,t.y-5,t.y+5)){n.push(i);break}if(x(t,o)<10){n.push(i);break}}})),c(this,Ee,"f").debug("getStrokeFromPoint",{strokes:n}),n}addPoint(t,e){c(this,Ee,"f").debug("addPoint",{stroke:t,pointer:e});const n=t.pointers.at(-1);if(this.filterPointByAcquisitionDelta(t,e,n)){const i=n?x(e,n):0;t.length+=i,e.p=this.computePressure(i,t.length),t.pointers.push(e),t.modificationDate=Date.now()}}addStroke(t){c(this,Ee,"f").info("addStroke",{stroke:t}),this.symbols.push(t),this.modificationDate=Date.now(),this.converts=void 0,this.exports=void 0}updateStroke(t){c(this,Ee,"f").info("updateStroke",{updatedStroke:t});const e=this.symbols.findIndex((e=>e.id===t.id));-1!==e&&(t.modificationDate=Date.now(),this.symbols.splice(e,1,t),this.modificationDate=Date.now(),this.converts=void 0,this.exports=void 0),c(this,Ee,"f").debug("updateStroke",this.symbols)}removeStroke(t){c(this,Ee,"f").info("removeStroke",{id:t});const e=this.symbols.findIndex((e=>e.id===t));-1!==e&&(this.positions.lastSentPosition--,this.positions.lastReceivedPosition--,this.symbols.splice(e,1),this.modificationDate=Date.now(),this.converts=void 0,this.exports=void 0),c(this,Ee,"f").debug("removeStroke",this.symbols)}removeStrokesFromPoint(t){c(this,Ee,"f").info("removeStrokesFromPoint",{point:t});const e=this.getStrokeFromPoint(t);return e.forEach((t=>{this.removeStroke(t.id)})),c(this,Ee,"f").debug("removeStrokesFromPoint",e.map((t=>t.id))),e.map((t=>t.id))}extractUnsentStrokes(){return this.symbols.slice(this.positions.lastSentPosition)}initCurrentStroke(t,e,n,i=96){if(c(this,Ee,"f").info("initCurrentStroke",{point:t,pointerType:e,style:n,dpi:i}),n["-myscript-pen-width"]){const t=n["-myscript-pen-width"]*i/25.4;n.width=t/2}this.modificationDate=Date.now(),this.exports=void 0,this.currentSymbol=new _e(n,e),c(this,Ee,"f").debug("initCurrentStroke",this.currentSymbol),this.addPoint(this.currentSymbol,t)}appendToCurrentStroke(t){c(this,Ee,"f").info("appendToCurrentStroke",{point:t}),this.currentSymbol&&this.addPoint(this.currentSymbol,t),c(this,Ee,"f").debug("appendToCurrentStroke",this.currentSymbol)}endCurrentStroke(t){c(this,Ee,"f").info("endCurrentStroke",{point:t}),this.currentSymbol&&(this.addPoint(this.currentSymbol,t),this.addStroke(this.currentSymbol),this.currentSymbol=void 0),c(this,Ee,"f").debug("endCurrentStroke",this.currentSymbol)}updatePositionSent(t=this.symbols.length){c(this,Ee,"f").info("updatePositionSent",{position:t}),this.positions.lastSentPosition=t,c(this,Ee,"f").debug("updatePositionSent",this.positions.lastSentPosition)}updatePositionReceived(){c(this,Ee,"f").info("updatePositionReceived"),this.positions.lastReceivedPosition=this.positions.lastSentPosition,c(this,Ee,"f").debug("updatePositionReceived",this.positions.lastReceivedPosition)}mergeExport(t){c(this,Ee,"f").info("mergeExport",{exports:t}),this.exports?Object.assign(this.exports,t):this.exports=t,c(this,Ee,"f").debug("mergeExport",this.exports)}mergeConvert(t){c(this,Ee,"f").info("mergeConvert",{converts:t}),this.converts?Object.assign(this.converts,t):this.converts=t,c(this,Ee,"f").debug("mergeConvert",this.converts)}clone(){c(this,Ee,"f").info("clone");const t=new Me(this.width,this.height,this.rowHeight,this.creationTime);return t.modificationDate=JSON.parse(JSON.stringify(this.modificationDate)),t.currentSymbol=this.currentSymbol?this.currentSymbol.clone():void 0,t.symbols=this.symbols.map((t=>t.clone())),t.positions=JSON.parse(JSON.stringify(this.positions)),t.exports=this.exports?JSON.parse(JSON.stringify(this.exports)):void 0,t.converts=this.converts?JSON.parse(JSON.stringify(this.converts)):void 0,t.idle=this.idle,c(this,Ee,"f").debug("clone",{clonedModel:t}),t}clear(){c(this,Ee,"f").info("clear"),this.modificationDate=Date.now(),this.currentSymbol=void 0,this.symbols=[],this.positions.lastSentPosition=0,this.positions.lastReceivedPosition=0,this.exports=void 0,this.converts=void 0,this.idle=!0}}Ee=new WeakMap;class Ne{constructor(t=100,e=100,n=0,i=Date.now()){Le.set(this,g.getLogger(d.MODEL)),this.creationTime=i,this.modificationDate=i,this.width=t,this.height=e,this.rowHeight=n,this.symbols=[],this.exports=void 0,this.converts=void 0,this.idle=!0}get symbolsSelected(){return this.symbols.filter((t=>t.selected))}get symbolsToDelete(){return this.symbols.filter((t=>t.deleting))}selectSymbol(t){const e=this.symbols.find((e=>e.id===t||e.type===ne.Group&&e.containsSymbol(t)));e&&(e.selected=!0)}unselectSymbol(t){const e=this.symbols.find((e=>e.id===t));e&&(e.selected=!1)}resetSelection(){this.symbols.forEach((t=>t.selected=!1))}getRootSymbol(t){return this.symbols.find((e=>e.id===t||e.type===ne.Group&&e.containsSymbol(t)?e:void 0))}getSymbolRowIndex(t){return Math.round(t.bounds.yMid/this.rowHeight)}getSymbolsByRowOrdered(){const t=[];return this.symbols.forEach((e=>{const n=this.getSymbolRowIndex(e),i=t.find((t=>t.rowIndex===n));i?i.symbols.push(e):t.push({rowIndex:n,symbols:[e]})})),t.forEach((t=>{t.symbols.sort(((t,e)=>t.bounds.xMid-e.bounds.xMid))})),t.sort(((t,e)=>t.rowIndex-e.rowIndex))}roundToLineGuide(t){return Math.round(t/this.rowHeight)*this.rowHeight}isSymbolAbove(t,e){return t.bounds.yMid-this.rowHeight/2>e.bounds.yMid}isSymbolInRow(t,e){return Math.abs(t.bounds.yMid-e.bounds.yMid)<=this.rowHeight/2}isSymbolBelow(t,e){return t.bounds.yMid+this.rowHeight/2<e.bounds.yMid}getFirstSymbol(t){if(t.length)return t.reduce(((t,e)=>{if(t){if(Math.round(t.bounds.yMid/this.rowHeight)<Math.round(e.bounds.yMid/this.rowHeight))return t;if(Math.round(t.bounds.yMid/this.rowHeight)==Math.round(e.bounds.yMid/this.rowHeight)&&t.bounds.xMid<e.bounds.xMid)return t}return e}))}getLastSymbol(t){if(t.length)return t.reduce(((t,e)=>{if(t){if(t.bounds.yMid-e.bounds.yMid>this.rowHeight/2)return t;if(t.bounds.yMid-e.bounds.yMid<this.rowHeight/2)return e;if(t.bounds.xMid>e.bounds.xMid)return t}return e}))}addSymbol(t){if(c(this,Le,"f").info("addSymbol",{symbol:t}),this.symbols.findIndex((e=>e.id===t.id))>-1)throw new Error(`Symbol id already exist: ${t.id}`);this.symbols.push(t),this.modificationDate=Date.now(),this.converts=void 0,this.exports=void 0,c(this,Le,"f").debug("addSymbol",this.symbols)}updateSymbol(t){c(this,Le,"f").info("updateSymbol",{updatedSymbol:t});const e=this.symbols.findIndex((e=>e.id===t.id));-1!==e&&(t.modificationDate=Date.now(),this.symbols.splice(e,1,t),this.modificationDate=Date.now(),this.converts=void 0,this.exports=void 0),c(this,Le,"f").debug("updateSymbol",this.symbols)}replaceSymbol(t,e){const n=this.symbols.findIndex((e=>e.id===t));-1!==n&&(this.symbols.splice(n,1,...e),this.modificationDate=Date.now(),this.converts=void 0,this.exports=void 0)}changeOrderSymbol(t,e){const n=this.symbols.findIndex((e=>e.id===t));if(n>-1){let t=n;switch(e){case"first":t=0;break;case"last":t=this.symbols.length-1;break;case"forward":t=Math.min(t+1,this.symbols.length-1);break;case"backward":t=Math.max(t-1,0)}const i=this.symbols.splice(n,1)[0];this.symbols.splice(t,0,i)}}removeSymbol(t){c(this,Le,"f").info("removeSymbol",{id:t});const e=this.symbols.findIndex((e=>e.id===t));-1!==e&&(this.symbols.splice(e,1),this.modificationDate=Date.now(),this.converts=void 0,this.exports=void 0),c(this,Le,"f").debug("removeSymbol",this.symbols)}extractDifferenceSymbols(t){return{added:this.symbols.filter((e=>-1===t.symbols.findIndex((t=>e.id===t.id&&e.modificationDate===t.modificationDate)))),removed:t.symbols.filter((t=>-1===this.symbols.findIndex((e=>t.id===e.id&&t.modificationDate===e.modificationDate))))}}mergeExport(t){c(this,Le,"f").info("mergeExport",{exports:t}),this.exports?Object.assign(this.exports,t):this.exports=t,c(this,Le,"f").debug("mergeExport",this.exports)}clone(){c(this,Le,"f").info("clone");const t=new Ne(this.width,this.height,this.rowHeight,this.creationTime);return t.modificationDate=this.modificationDate,t.symbols=this.symbols.map((t=>{const e=t.clone();return e.selected=!1,e})),t.exports=structuredClone(this.exports),t.idle=this.idle,c(this,Le,"f").debug("clone",{clonedModel:t}),t}clear(){c(this,Le,"f").info("clear"),this.modificationDate=Date.now(),this.symbols=[],this.currentSymbol=void 0,this.exports=void 0,this.converts=void 0,this.idle=!0}}Le=new WeakMap,function(t){t.NO_ACTIVITY="Session closed due to no activity. Without a connection on your part, it will be permanently lost after an hour.",t.WRONG_CREDENTIALS="Application credentials are invalid. Please check or regenerate your application key and hmackey.",t.TOO_OLD="Session is too old. Max Session Duration Reached.",t.NO_SESSION_FOUND="No sessions found. Without activation for 1 hour, sessions are deleted from the server. To avoid losing your work, use the json export, then import it this will create a new session.",t.UNKNOW="An unknown error has occurred.",t.ABNORMAL_CLOSURE="MyScript recognition server is not reachable.",t.CANT_ESTABLISH="Unable to establish a connection to MyScript recognition server. Check the host and your connectivity.",t.GOING_AWAY="MyScript recognition server is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection.",t.PROTOCOL_ERROR="MyScript recognition server terminated the connection due to a protocol error.",t.UNSUPPORTED_DATA="MyScript recognition server terminated the connection because the endpoint received data of a type it cannot accept. (For example, a text-only endpoint received binary data.)",t.INVALID_FRAME_PAYLOAD="MyScript recognition server terminated the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message).",t.POLICY_VIOLATION="MyScript recognition server terminated the connection because it received a message that violates its policy.",t.MESSAGE_TOO_BIG="MyScript recognition server terminated the connection because a data frame was received that is too large.",t.INTERNAL_ERROR="MyScript recognition server terminated the connection because it encountered an unexpected condition that prevented it from fulfilling the request.",t.SERVICE_RESTART="MyScript recognition server terminated the connection because it is restarting.",t.TRY_AGAIN="MyScript recognition server terminated the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients.",t.BAD_GATEWAY="MyScript recognition server was acting as a gateway or proxy and received an invalid response from the upstream server.",t.TLS_HANDSHAKE="MyScript recognition server connection was closed due to a failure to perform a TLS handshake"}(Ce||(Ce={})),function(t){t.HMAC_Challenge="hmacChallenge",t.Authenticated="authenticated",t.SessionDescription="sessionDescription",t.NewPart="newPart",t.PartChanged="partChanged",t.ContentChanged="contentChanged",t.Idle="idle",t.Pong="pong",t.Exported="exported",t.GestureDetected="gestureDetected",t.ContextlessGesture="contextlessGesture",t.Error="error"}(Ae||(Ae={}));var Pe=null;try{var Te="undefined"!=typeof module&&"function"==typeof module.require&&module.require("worker_threads")||"function"==typeof require&&require("worker_threads")||"function"==typeof require&&require("worker_threads");Pe=Te.Worker}catch(i){}function Ie(t,e,n){var i=void 0===e?null:e,r=function(t,e){return Buffer.from(t,"base64").toString(e?"utf16":"utf8")}(t,void 0!==n&&n),o=r.indexOf("\n",10)+1,s=r.substring(o)+(i?"//# sourceMappingURL="+i:"");return function(t){return new Pe(s,Object.assign({},t,{eval:!0}))}}function Oe(t,e,n){var i=void 0===e?null:e,r=function(t,e){var n=atob(t);if(e){for(var i=new Uint8Array(n.length),r=0,o=n.length;r<o;++r)i[r]=n.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}(t,void 0!==n&&n),o=r.indexOf("\n",10)+1,s=r.substring(o)+(i?"//# sourceMappingURL="+i:""),a=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(a)}var De,je,Re,Fe,Be,ze,$e,qe,Ue,Ge="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0),He=function(t,e,n){return function(){return Ge}()?Ie(t,e,n):function(t,e,n){var i;return function(r){return i=i||Oe(t,e,n),new Worker(i,r)}}(t,e,n)}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7c2VsZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwoZT0+e3NldEludGVydmFsKCgoKT0+e3Bvc3RNZXNzYWdlKHt0eXBlOiJwaW5nIn0pfSksZS5kYXRhLnBpbmdEZWxheSl9KSl9KCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXBpbmcud29ya2VyLmpzLm1hcAoK",null,!1);class We{constructor(t,e){De.add(this),je.set(this,g.getLogger(d.RECOGNIZER)),this.pingCount=0,this.reconnectionCount=0,c(this,je,"f").info("constructor",{serverConfig:t,recognitionConfig:e}),this.serverConfiguration=t,this.recognitionConfiguration=e;const n="https"===this.serverConfiguration.scheme?"wss":"ws";this.url=`${n}://${this.serverConfiguration.host}/api/v4.0/iink/offscreen?applicationKey=${this.serverConfiguration.applicationKey}`,this.exportDeferredMap=new Map,this.contextlessGestureDeferred=new Map,this.connected=new v,this.initialized=new v}get mimeTypes(){return["application/vnd.myscript.jiix"]}get event(){return Ft.getInstance()}rejectDeferredPending(t){var e,n,i,r,o,s,a,l;this.initialized.reject(t),null===(e=this.addStrokeDeferred)||void 0===e||e.reject(t),null===(n=this.transformStrokeDeferred)||void 0===n||n.reject(t),null===(i=this.eraseStrokeDeferred)||void 0===i||i.reject(t),null===(r=this.replaceStrokeDeferred)||void 0===r||r.reject(t),null===(o=this.undoDeferred)||void 0===o||o.reject(t),null===(s=this.redoDeferred)||void 0===s||s.reject(t),null===(a=this.clearDeferred)||void 0===a||a.reject(t),Array.from(this.contextlessGestureDeferred.values()).forEach((e=>{e.reject(t)})),Array.from(this.exportDeferredMap.values()).forEach((e=>{e.reject(t)})),null===(l=this.waitForIdleDeferred)||void 0===l||l.reject(t)}resetAllDeferred(){this.connected=new v,this.initialized=new v,this.addStrokeDeferred=void 0,this.contextlessGestureDeferred.clear(),this.transformStrokeDeferred=void 0,this.eraseStrokeDeferred=void 0,this.replaceStrokeDeferred=void 0,this.exportDeferredMap.clear(),this.waitForIdleDeferred=void 0,this.closeDeferred=void 0}clearSocketListener(){this.socket.removeEventListener("open",this.openCallback.bind(this)),this.socket.removeEventListener("close",this.closeCallback.bind(this)),this.socket.removeEventListener("message",this.messageCallback.bind(this))}closeCallback(t){var e,n;c(this,je,"f").info("closeCallback",{evt:t});let i=t.reason;if(!this.currentErrorCode)switch(t.code){case 1e3:break;case 1001:i=Ce.GOING_AWAY;break;case 1002:i=Ce.PROTOCOL_ERROR;break;case 1003:i=Ce.UNSUPPORTED_DATA;break;case 1006:i=Ce.ABNORMAL_CLOSURE;break;case 1007:i=Ce.INVALID_FRAME_PAYLOAD;break;case 1008:i=Ce.POLICY_VIOLATION;break;case 1009:i=Ce.MESSAGE_TOO_BIG;break;case 1011:i=Ce.INTERNAL_ERROR;break;case 1012:i=Ce.SERVICE_RESTART;break;case 1013:i=Ce.TRY_AGAIN;break;case 1014:i=Ce.BAD_GATEWAY;break;case 1015:i=Ce.TLS_HANDSHAKE;break;default:i=Ce.CANT_ESTABLISH}if(this.clearSocketListener(),null===(e=this.closeDeferred)||void 0===e||e.resolve(),!this.currentErrorCode&&1e3!==t.code){const t=new Error(i);this.event.emitError(t),this.rejectDeferredPending(i)}null===(n=this.pingWorker)||void 0===n||n.terminate(),this.resetAllDeferred()}openCallback(){this.connected.resolve(),this.reconnectionCount=0,c(this,De,"m",Re).call(this,{type:"authenticate","myscript-client-name":"iink-ts","myscript-client-version":"2.0.1"})}manageHMACChallenge(t){return l(this,void 0,void 0,(function*(){c(this,De,"m",Re).call(this,{type:"hmac",hmac:yield O(t.hmacChallenge,this.serverConfiguration.applicationKey,this.serverConfiguration.hmacKey)})}))}initPing(){this.pingWorker=new He,this.pingWorker.postMessage({pingDelay:this.serverConfiguration.websocket.pingDelay}),this.pingWorker.onmessage=()=>{var t;this.pingCount<this.serverConfiguration.websocket.maxPingLostCount?c(this,De,"m",Re).call(this,{type:"ping"}):(this.close(1e3,"MAXIMUM_PING_REACHED"),null===(t=this.pingWorker)||void 0===t||t.terminate()),this.pingCount++}}manageAuthenticated(){const t=25.4/96;c(this,De,"m",Re).call(this,{type:this.sessionId?"restoreSession":"initSession",iinkSessionId:this.sessionId,scaleX:t,scaleY:t,configuration:this.recognitionConfiguration})}manageSessionDescriptionMessage(t){t.iinkSessionId&&(this.sessionId=t.iinkSessionId),this.currentPartId?c(this,De,"m",Re).call(this,{type:"openContentPart",id:this.currentPartId}):c(this,De,"m",Re).call(this,{type:"newContentPart",contentType:this.recognitionConfiguration.type,mimeTypes:this.mimeTypes})}manageNewPartMessage(t){this.initialized.resolve(),this.currentPartId=t.id}managePartChangeMessage(t){var e;null===(e=this.initialized)||void 0===e||e.resolve(),this.currentPartId=t.partId}manageContentChangedMessage(t){var e,n,i,r,o,s,a;null===(e=this.initialized)||void 0===e||e.resolve(),null===(n=this.replaceStrokeDeferred)||void 0===n||n.resolve(),null===(i=this.transformStrokeDeferred)||void 0===i||i.resolve(),null===(r=this.eraseStrokeDeferred)||void 0===r||r.resolve(),null===(o=this.undoDeferred)||void 0===o||o.resolve(),null===(s=this.redoDeferred)||void 0===s||s.resolve(),null===(a=this.clearDeferred)||void 0===a||a.resolve(),this.event.emitContextChange({canRedo:t.canRedo,canUndo:t.canRedo})}manageExportMessage(t){t.exports["application/vnd.myscript.jiix"]&&(t.exports["application/vnd.myscript.jiix"]=JSON.parse(t.exports["application/vnd.myscript.jiix"].toString())),Object.keys(t.exports).forEach((e=>{this.exportDeferredMap.has(e)&&this.exportDeferredMap.get(e).resolve(t.exports)})),this.event.emitExported(t.exports)}manageWaitForIdle(){var t;null===(t=this.waitForIdleDeferred)||void 0===t||t.resolve(),this.event.emitIdle(!0)}manageErrorMessage(t){var e,n;this.currentErrorCode=(null===(e=t.data)||void 0===e?void 0:e.code)||t.code;let i=(null===(n=t.data)||void 0===n?void 0:n.message)||t.message||Ce.UNKNOW;if("no.activity"===this.currentErrorCode)this.rejectDeferredPending(i),this.event.emitNotif({message:Ce.NO_ACTIVITY,timeout:1/0});else{switch(this.currentErrorCode){case"access.not.granted":i=Ce.WRONG_CREDENTIALS;break;case"session.too.old":i=Ce.TOO_OLD;break;case"restore.session.not.found":i=Ce.NO_SESSION_FOUND}this.rejectDeferredPending(i),this.event.emitError(new Error(i))}}manageGestureDetected(t){var e;null===(e=this.addStrokeDeferred)||void 0===e||e.resolve(t)}manageContextlessGesture(t){var e;null===(e=this.contextlessGestureDeferred.get(t.strokeId))||void 0===e||e.resolve(t)}messageCallback(t){this.currentErrorCode=void 0;try{const e=JSON.parse(t.data);if(e.type===Ae.Pong)return;switch(this.pingCount=0,e.type){case Ae.HMAC_Challenge:this.manageHMACChallenge(e);break;case Ae.Authenticated:this.manageAuthenticated();break;case Ae.SessionDescription:this.manageSessionDescriptionMessage(e);break;case Ae.NewPart:this.manageNewPartMessage(e);break;case Ae.PartChanged:this.managePartChangeMessage(e);break;case Ae.ContentChanged:this.manageContentChangedMessage(e);break;case Ae.Exported:this.manageExportMessage(e);break;case Ae.GestureDetected:this.manageGestureDetected(e);break;case Ae.ContextlessGesture:this.manageContextlessGesture(e);break;case Ae.Error:this.manageErrorMessage(e);break;case Ae.Idle:this.manageWaitForIdle();break;default:c(this,je,"f").warn("messageCallback",`Message type unknow: "${e}".`)}}catch(r){this.event.emitError(new Error(t.data))}}init(){return l(this,void 0,void 0,(function*(){"restore.session.not.found"===this.currentErrorCode&&(this.currentErrorCode,this.sessionId=void 0,this.currentPartId=void 0),this.socket=new WebSocket(this.url),this.clearSocketListener(),this.socket.addEventListener("open",this.openCallback.bind(this)),this.socket.addEventListener("close",this.closeCallback.bind(this)),this.socket.addEventListener("message",this.messageCallback.bind(this)),yield this.initialized.promise,this.serverConfiguration.websocket.pingEnabled&&(this.pingCount=0,this.initPing())}))}send(t){return l(this,void 0,void 0,(function*(){if(!this.socket)return Promise.reject(new Error("Recognizer must be initilized"));switch(this.socket.readyState){case this.socket.CONNECTING:case this.socket.OPEN:return yield this.initialized.promise,c(this,De,"m",Re).call(this,t),Promise.resolve();case this.socket.CLOSING:case this.socket.CLOSED:return this.serverConfiguration.websocket.autoReconnect?(this.reconnectionCount++,this.serverConfiguration.websocket.maxRetryCount>this.reconnectionCount?(this.event.emitClearMessage(),yield this.init(),yield this.waitForIdle(),this.send(t)):Promise.reject(new Error("Unable to send message. The maximum number of connection attempts has been reached."))):Promise.reject(new Error("Unable to send message. Connection closed and automatic reconnection disabled"))}}))}buildAddStrokesMessage(t,e=!0){return{type:"addStrokes",processGestures:e,strokes:t.map((t=>t.formatToSend()))}}addStrokes(t,e=!0){var n,i;return l(this,void 0,void 0,(function*(){return this.addStrokeDeferred=new v,0===t.length?(this.addStrokeDeferred.resolve(void 0),null===(n=this.addStrokeDeferred)||void 0===n?void 0:n.promise):(yield this.send(this.buildAddStrokesMessage(t,e)),null===(i=this.addStrokeDeferred)||void 0===i?void 0:i.promise)}))}buildReplaceStrokesMessage(t,e){return{type:"replaceStrokes",oldStrokeIds:t,newStrokes:e.map((t=>t.formatToSend()))}}replaceStrokes(t,e){var n,i;return l(this,void 0,void 0,(function*(){return this.replaceStrokeDeferred=new v,0===t.length?(this.replaceStrokeDeferred.resolve(),null===(n=this.replaceStrokeDeferred)||void 0===n?void 0:n.promise):(yield this.send(this.buildReplaceStrokesMessage(t,e)),null===(i=this.replaceStrokeDeferred)||void 0===i?void 0:i.promise)}))}buildTransformTranslateMessage(t,e,n){return{type:"transform",transformationType:"TRANSLATE",strokeIds:t,tx:e,ty:n}}transformTranslate(t,e,n){var i,r;return l(this,void 0,void 0,(function*(){return this.transformStrokeDeferred=new v,0===t.length?(this.transformStrokeDeferred.resolve(),null===(i=this.transformStrokeDeferred)||void 0===i?void 0:i.promise):(yield this.send(this.buildTransformTranslateMessage(t,e,n)),null===(r=this.transformStrokeDeferred)||void 0===r?void 0:r.promise)}))}buildTransformRotateMessage(t,e,n=0,i=0){return{type:"transform",transformationType:"ROTATE",strokeIds:t,angle:e,x0:n,y0:i}}transformRotate(t,e,n=0,i=0){var r,o;return l(this,void 0,void 0,(function*(){return this.transformStrokeDeferred=new v,0===t.length?(this.transformStrokeDeferred.resolve(),null===(r=this.transformStrokeDeferred)||void 0===r?void 0:r.promise):(yield this.send(this.buildTransformRotateMessage(t,e,n,i)),null===(o=this.transformStrokeDeferred)||void 0===o?void 0:o.promise)}))}buildTransformScaleMessage(t,e,n,i=0,r=0){return{type:"transform",transformationType:"SCALE",strokeIds:t,scaleX:e,scaleY:n,x0:i,y0:r}}transformScale(t,e,n,i=0,r=0){var o,s;return l(this,void 0,void 0,(function*(){return this.transformStrokeDeferred=new v,0===t.length?(this.transformStrokeDeferred.resolve(),null===(o=this.transformStrokeDeferred)||void 0===o?void 0:o.promise):(yield this.send(this.buildTransformScaleMessage(t,e,n,i,r)),null===(s=this.transformStrokeDeferred)||void 0===s?void 0:s.promise)}))}buildTransformMatrixMessage(t,e){return Object.assign({type:"transform",transformationType:"MATRIX",strokeIds:t},e)}transformMatrix(t,e){var n,i;return l(this,void 0,void 0,(function*(){return this.transformStrokeDeferred=new v,0===t.length?(this.transformStrokeDeferred.resolve(),null===(n=this.transformStrokeDeferred)||void 0===n?void 0:n.promise):(yield this.send(this.buildTransformMatrixMessage(t,e)),null===(i=this.transformStrokeDeferred)||void 0===i?void 0:i.promise)}))}buildEraseStrokesMessage(t){return{type:"eraseStrokes",strokeIds:t}}eraseStrokes(t){var e,n;return l(this,void 0,void 0,(function*(){return this.eraseStrokeDeferred=new v,0===t.length?(this.eraseStrokeDeferred.resolve(),null===(e=this.eraseStrokeDeferred)||void 0===e?void 0:e.promise):(yield this.send(this.buildEraseStrokesMessage(t)),null===(n=this.eraseStrokeDeferred)||void 0===n?void 0:n.promise)}))}recognizeGesture(t){return l(this,void 0,void 0,(function*(){if(!t)return;this.contextlessGestureDeferred.set(t.id,new v);const e=25.4/96;return yield this.send({type:"contextlessGesture",scaleX:e,scaleY:e,stroke:t.formatToSend()}),this.contextlessGestureDeferred.get(t.id).promise}))}waitForIdle(){var t;return l(this,void 0,void 0,(function*(){return this.waitForIdleDeferred&&!this.waitForIdleDeferred.isFullFilled||(this.waitForIdleDeferred=new v),yield this.send({type:"waitForIdle"}),null===(t=this.waitForIdleDeferred)||void 0===t?void 0:t.promise}))}buildUndoRedoChanges(t){var e,n,i,r,o,s,a;const l=[];return(null===(e=t.added)||void 0===e?void 0:e.length)&&l.push(this.buildAddStrokesMessage(t.added,!1)),(null===(n=t.erased)||void 0===n?void 0:n.length)&&l.push(this.buildEraseStrokesMessage(t.erased.map((t=>t.id)))),(null===(i=t.replaced)||void 0===i?void 0:i.newStrokes.length)&&l.push(this.buildReplaceStrokesMessage(t.replaced.oldStrokes.map((t=>t.id)),t.replaced.newStrokes)),(null===(r=t.matrix)||void 0===r?void 0:r.strokes.length)&&l.push(this.buildTransformMatrixMessage(t.matrix.strokes.map((t=>t.id)),t.matrix.matrix)),(null===(o=t.translate)||void 0===o?void 0:o.length)&&t.translate.forEach((t=>{l.push(this.buildTransformTranslateMessage(t.strokes.map((t=>t.id)),t.tx,t.ty))})),(null===(s=t.rotate)||void 0===s?void 0:s.length)&&t.rotate.forEach((t=>{l.push(this.buildTransformRotateMessage(t.strokes.map((t=>t.id)),t.angle,t.center.x,t.center.y))})),(null===(a=t.scale)||void 0===a?void 0:a.length)&&t.scale.forEach((t=>{l.push(this.buildTransformScaleMessage(t.strokes.map((t=>t.id)),t.scaleX,t.scaleY,t.origin.x,t.origin.y))})),l}undo(t){var e;return l(this,void 0,void 0,(function*(){const n=this.buildUndoRedoChanges(t);if(0===n.length)return;this.undoDeferred=new v;const i={type:"undo",changes:n};return yield this.send(i),null===(e=this.undoDeferred)||void 0===e?void 0:e.promise}))}redo(t){var e;return l(this,void 0,void 0,(function*(){const n=this.buildUndoRedoChanges(t);if(0===n.length)return;this.redoDeferred=new v;const i={type:"redo",changes:n};return yield this.send(i),null===(e=this.redoDeferred)||void 0===e?void 0:e.promise}))}export(t){return l(this,void 0,void 0,(function*(){const e=t||this.mimeTypes.slice();yield Promise.all(e.map((t=>{var e;return null===(e=this.exportDeferredMap.get(t))||void 0===e?void 0:e.promise}))),e.forEach((t=>{this.exportDeferredMap.set(t,new v)}));const n={type:"export",partId:this.currentPartId,mimeTypes:e};yield this.send(n);const i=yield Promise.all(e.map((t=>this.exportDeferredMap.get(t).promise)));return Object.assign({},...i)}))}clear(){var t;return l(this,void 0,void 0,(function*(){return this.clearDeferred=new v,yield this.send({type:"clear"}),null===(t=this.clearDeferred)||void 0===t?void 0:t.promise}))}close(t,e){return l(this,void 0,void 0,(function*(){return this.closeDeferred=new v,this.socket.readyState===this.socket.OPEN||this.socket.readyState===this.socket.CONNECTING?this.socket.close(t,e):this.closeDeferred.resolve(),this.closeDeferred.promise}))}destroy(){return l(this,void 0,void 0,(function*(){this.resetAllDeferred(),this.socket&&(yield this.close(1e3,"Recognizer destroyed"))}))}}je=new WeakMap,De=new WeakSet,Re=function(t){if(!this.socket)throw new Error("Recognizer must be initilized");if(this.socket.readyState!==this.socket.OPEN)throw new Error(`Connection not ready, state: ${this.socket.readyState}}`);this.socket.send(JSON.stringify(t))};class Ve{constructor(t,e){Fe.set(this,g.getLogger(d.RECOGNIZER)),c(this,Fe,"f").info("constructor",{serverConfig:t,recognitionConfig:e}),this.serverConfiguration=t,this.recognitionConfiguration=e}get url(){return`${this.serverConfiguration.scheme}://${this.serverConfiguration.host}/api/v4.0/iink/batch`}get postConfig(){switch(this.recognitionConfiguration.type){case"DIAGRAM":return{lang:this.recognitionConfiguration.lang,diagram:this.recognitionConfiguration.diagram,export:this.recognitionConfiguration.export};case"MATH":return{lang:this.recognitionConfiguration.lang,math:this.recognitionConfiguration.math,export:this.recognitionConfiguration.export};case"Raw Content":return{lang:this.recognitionConfiguration.lang,"raw-content":this.recognitionConfiguration["raw-content"],export:this.recognitionConfiguration.export};case"TEXT":return{lang:this.recognitionConfiguration.lang,text:this.recognitionConfiguration.text,export:this.recognitionConfiguration.export};default:throw new Error(`get postConfig error Recognition type unkow "${this.recognitionConfiguration.type}"`)}}buildData(t){c(this,Fe,"f").info("buildData",{model:t});const e=[];t.symbols.forEach((t=>{const n=e.findIndex((e=>{return n=e.penStyle,i=t.style,n&&i&&n["-myscript-pen-fill-color"]===i["-myscript-pen-fill-color"]&&n["-myscript-pen-fill-style"]===i["-myscript-pen-fill-style"]&&n["-myscript-pen-width"]===i["-myscript-pen-width"]&&n.color===i.color&&n.width===i.width;var n,i}));n>-1?e[n].strokes.push(t):e.push({penStyle:t.style,strokes:[t]})}));const n=[];e.forEach((t=>{const e={penStyle:"{}"===JSON.stringify(t.penStyle)?void 0:Xt.penStyleToCSS(t.penStyle),strokes:t.strokes.map((t=>t.formatToSend()))};n.push(e)}));const i="Raw Content"===this.recognitionConfiguration.type?"Raw Content":this.recognitionConfiguration.type.charAt(0).toUpperCase()+this.recognitionConfiguration.type.slice(1).toLowerCase(),r={configuration:this.postConfig,xDPI:96,yDPI:96,contentType:i,height:t.height,width:t.width,strokeGroups:n};return c(this,Fe,"f").debug("buildData",{data:r}),r}post(t,e){return l(this,void 0,void 0,(function*(){c(this,Fe,"f").info("post",{data:t,mimeType:e});const n=new Headers;n.append("Accept","application/json,"+e),n.append("applicationKey",this.serverConfiguration.applicationKey);try{const e=yield O(JSON.stringify(t),this.serverConfiguration.applicationKey,this.serverConfiguration.hmacKey);n.append("hmac",e)}catch(t){c(this,Fe,"f").error("post.computeHmac",t)}n.append("Content-Type","application/json"),I(this.serverConfiguration.version,"2.0.4")&&(n.append("myscript-client-name","iink-ts"),n.append("myscript-client-version","2.0.1"));const i={method:"POST",headers:n,body:JSON.stringify(t)},r=new Request(this.url,i),o=yield fetch(r);if(o.ok){let t;switch(o.headers.get("content-type")){case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"image/png":case"image/jpeg":t=yield o.blob();break;case"application/json":t=yield o.json();break;case"application/vnd.myscript.jiix":t=yield o.clone().json().catch((()=>l(this,void 0,void 0,(function*(){return yield o.text()}))));break;default:t=yield o.text()}return c(this,Fe,"f").debug("post",{result:t}),t}{const t=yield o.json();throw c(this,Fe,"f").error("post",{err:t}),t}}))}tryFetch(t,e){return l(this,void 0,void 0,(function*(){return c(this,Fe,"f").debug("tryFetch",{data:t,mimeType:e}),this.post(t,e).then((t=>{const n={};return n[e]=t,c(this,Fe,"f").debug("tryFetch",{exports:n}),n})).catch((n=>{c(this,Fe,"f").error("tryFetch",{data:t,mimeType:e,err:n});let i=n.message||Ce.UNKNOW;throw n.code?"access.not.granted"===n.code&&(i=Ce.WRONG_CREDENTIALS):i=Ce.CANT_ESTABLISH,new Error(i)}))}))}getMimeTypes(t){c(this,Fe,"f").info("getMimeTypes",{requestedMimeTypes:t});let e=t||[];if(!e.length)switch(this.recognitionConfiguration.type){case"DIAGRAM":e=this.recognitionConfiguration.diagram.mimeTypes;break;case"MATH":e=this.recognitionConfiguration.math.mimeTypes;break;case"Raw Content":e=["application/vnd.myscript.jiix"];break;case"TEXT":e=this.recognitionConfiguration.text.mimeTypes;break;default:throw new Error(`Recognition type "${this.recognitionConfiguration.type}" is unknown.\n Possible types are:\n -DIAGRAM\n -MATH\n -Raw Content\n -TEXT`)}return e}convert(t,e,n){return l(this,void 0,void 0,(function*(){c(this,Fe,"f").info("convert",{model:t,conversionState:e,requestedMimeTypes:n});const i=t.clone(),r=this.getMimeTypes(n),o=this.buildData(i);o.conversionState=e;const s=r.map((t=>this.tryFetch(o,t)));return(yield Promise.all(s)).forEach((t=>{i.mergeConvert(t)})),c(this,Fe,"f").debug("convert",{model:i}),i}))}export(t,e){return l(this,void 0,void 0,(function*(){c(this,Fe,"f").info("export",{model:t,requestedMimeTypes:e});const n=t.clone();if(0===n.symbols.length)return Promise.resolve(n);const i=this.getMimeTypes(e);if(!i.length)return c(this,Fe,"f").error("export",{model:t,requestedMimeTypes:e,"Export failed, no mimeTypes define in recognition configuration":String}),Promise.reject(new Error("Export failed, no mimeTypes define in recognition configuration"));const r=i.filter((t=>!n.exports||!n.exports[t])),o=this.buildData(t);return(yield Promise.all(r.map((t=>this.tryFetch(o,t))))).forEach((t=>{n.mergeExport(t)})),c(this,Fe,"f").debug("export",{model:n}),n}))}resize(t){return l(this,void 0,void 0,(function*(){return c(this,Fe,"f").info("resize",{model:t}),this.export(t)}))}}Fe=new WeakMap;class Ye{constructor(t,e){Be.set(this,g.getLogger(d.RECOGNIZER)),this.pingCount=0,this.reconnectionCount=0,this.serverConfiguration=t,this.recognitionConfiguration=e;const n="https"===this.serverConfiguration.scheme?"wss":"ws";this.url=`${n}://${this.serverConfiguration.host}/api/v4.0/iink/document?applicationKey=${this.serverConfiguration.applicationKey}`,c(this,Be,"f").info("constructor",{serverConfig:t,recognitionConfig:e,url:this.url})}get mimeTypes(){switch(this.recognitionConfiguration.type.toLocaleLowerCase()){case"text":return this.recognitionConfiguration.text.mimeTypes;case"math":return this.recognitionConfiguration.math.mimeTypes;default:throw new Error(`Unauthorized recognition type: "${this.recognitionConfiguration.type}"`)}}get internalEvent(){return Ft.getInstance()}infinitePing(){this.pingCount++,this.serverConfiguration.websocket.maxPingLostCount<this.pingCount?this.socket.close(1e3,"MAXIMUM_PING_REACHED"):this.socket.readyState<=1&&setTimeout((()=>{this.socket.readyState<=1&&(this.socket.send(JSON.stringify({type:"ping"})),this.infinitePing())}),this.serverConfiguration.websocket.pingDelay)}openCallback(){var t;null===(t=this.connected)||void 0===t||t.resolve();const e={type:this.sessionId?"restoreIInkSession":"newContentPackage",iinkSessionId:this.sessionId,applicationKey:this.serverConfiguration.applicationKey,xDpi:96,yDpi:96,viewSizeHeight:this.viewSizeHeight,viewSizeWidth:this.viewSizeWidth};I(this.serverConfiguration.version,"2.0.4")&&(e["myscript-client-name"]="iink-ts",e["myscript-client-version"]="2.0.1"),this.send(e)}rejectDeferredPending(t){var e,n,i,r,o,s,a,l,c,h,u,d,p,f,m,g,v,y,b,w;(null===(e=this.connected)||void 0===e?void 0:e.isPending)&&(null===(n=this.connected)||void 0===n||n.reject(t)),(null===(i=this.initialized)||void 0===i?void 0:i.isPending)&&(null===(r=this.initialized)||void 0===r||r.reject(t)),(null===(o=this.addStrokeDeferred)||void 0===o?void 0:o.isPending)&&(null===(s=this.addStrokeDeferred)||void 0===s||s.reject(t)),(null===(a=this.exportDeferred)||void 0===a?void 0:a.isPending)&&(null===(l=this.exportDeferred)||void 0===l||l.reject(t)),(null===(c=this.convertDeferred)||void 0===c?void 0:c.isPending)&&(null===(h=this.convertDeferred)||void 0===h||h.reject(t)),(null===(u=this.importDeferred)||void 0===u?void 0:u.isPending)&&(null===(d=this.importDeferred)||void 0===d||d.reject(t)),(null===(p=this.resizeDeferred)||void 0===p?void 0:p.isPending)&&(null===(f=this.resizeDeferred)||void 0===f||f.reject(t)),(null===(m=this.undoDeferred)||void 0===m?void 0:m.isPending)&&(null===(g=this.undoDeferred)||void 0===g||g.reject(t)),(null===(v=this.redoDeferred)||void 0===v?void 0:v.isPending)&&(null===(y=this.redoDeferred)||void 0===y||y.reject(t)),(null===(b=this.clearDeferred)||void 0===b?void 0:b.isPending)&&this.clearDeferred.reject(t),(null===(w=this.waitForIdleDeferred)||void 0===w?void 0:w.isPending)&&this.waitForIdleDeferred.reject(t)}closeCallback(t){let e="";if(!this.currentErrorCode)switch(t.code){case 1e3:break;case 1001:e=Ce.GOING_AWAY;break;case 1002:e=Ce.PROTOCOL_ERROR;break;case 1003:e=Ce.UNSUPPORTED_DATA;break;case 1006:e=Ce.ABNORMAL_CLOSURE;break;case 1007:e=Ce.INVALID_FRAME_PAYLOAD;break;case 1008:e=Ce.POLICY_VIOLATION;break;case 1009:e=Ce.MESSAGE_TOO_BIG;break;case 1011:e=Ce.INTERNAL_ERROR;break;case 1012:e=Ce.SERVICE_RESTART;break;case 1013:e=Ce.TRY_AGAIN;break;case 1014:e=Ce.BAD_GATEWAY;break;case 1015:e=Ce.TLS_HANDSHAKE;break;default:c(this,Be,"f").warn("closeCallback","unknow CloseEvent.code",{evt:t}),e=Ce.CANT_ESTABLISH}const n=new Error(e||t.reason);this.rejectDeferredPending(n),this.currentErrorCode||1e3===t.code||this.internalEvent.emitError(n)}manageAckMessage(t){var e;return l(this,void 0,void 0,(function*(){c(this,Be,"f").info("manageAckMessage",{websocketMessage:t});const n=t;n.hmacChallenge&&this.send({type:"hmac",hmac:yield O(n.hmacChallenge,this.serverConfiguration.applicationKey,this.serverConfiguration.hmacKey)}),n.iinkSessionId&&(this.sessionId=n.iinkSessionId);const i=structuredClone(this.recognitionConfiguration);I(this.serverConfiguration.version,"2.3.0")||delete i.convert,this.send(Object.assign(Object.assign({},i),{type:"configuration"})),null===(e=this.ackDeferred)||void 0===e||e.resolve()}))}manageContentPackageDescriptionMessage(){var t;return l(this,void 0,void 0,(function*(){this.reconnectionCount=0,yield null===(t=this.ackDeferred)||void 0===t?void 0:t.promise,c(this,Be,"f").info("manageContentPackageDescriptionMessage"),this.currentPartId?this.send({type:"openContentPart",id:this.currentPartId,mimeTypes:this.mimeTypes}):this.send({type:"newContentPart",contentType:this.recognitionConfiguration.type,mimeTypes:this.mimeTypes})}))}managePartChangeMessage(t){var e;c(this,Be,"f").info("managePartChangeMessage",{websocketMessage:t});const n=t;this.currentPartId=n.partId,null===(e=this.initialized)||void 0===e||e.resolve()}manageExportMessage(t){var e,n,i,r,o,s,a,l,h;c(this,Be,"f").info("manageExportMessage",{websocketMessage:t});const u=t;u.exports["application/vnd.myscript.jiix"]&&(u.exports["application/vnd.myscript.jiix"]=JSON.parse(u.exports["application/vnd.myscript.jiix"].toString())),null===(e=this.initialized)||void 0===e||e.resolve(),null===(n=this.addStrokeDeferred)||void 0===n||n.resolve(u.exports),null===(i=this.exportDeferred)||void 0===i||i.resolve(u.exports),null===(r=this.convertDeferred)||void 0===r||r.resolve(u.exports),null===(o=this.importDeferred)||void 0===o||o.resolve(u.exports),null===(s=this.undoDeferred)||void 0===s||s.resolve(u.exports),null===(a=this.redoDeferred)||void 0===a||a.resolve(u.exports),null===(l=this.clearDeferred)||void 0===l||l.resolve(u.exports),null===(h=this.importPointEventsDeferred)||void 0===h||h.resolve(u.exports),this.internalEvent.emitExported(u.exports)}manageWaitForIdle(){var t;return l(this,void 0,void 0,(function*(){this.internalEvent.emitIdle(!0),null===(t=this.waitForIdleDeferred)||void 0===t||t.resolve()}))}manageErrorMessage(t){var e,n;const i=t;this.currentErrorCode=(null===(e=i.data)||void 0===e?void 0:e.code)||i.code;let r=(null===(n=i.data)||void 0===n?void 0:n.message)||i.message||Ce.UNKNOW;switch(this.currentErrorCode){case"no.activity":r=Ce.NO_ACTIVITY;break;case"access.not.granted":r=Ce.WRONG_CREDENTIALS;break;case"session.too.old":r=Ce.TOO_OLD}const o=new Error(r);this.rejectDeferredPending(o),this.internalEvent.emitError(o)}manageContentChangeMessage(t){c(this,Be,"f").info("manageContentChangeMessage",{websocketMessage:t});const e=t,n={canRedo:e.canRedo,canUndo:e.canUndo,empty:e.empty,stackIndex:e.undoStackIndex,possibleUndoCount:e.possibleUndoCount};this.internalEvent.emitContextChange(n)}manageSVGPatchMessage(t){var e;c(this,Be,"f").info("manageSVGPatchMessage",{websocketMessage:t}),null===(e=this.resizeDeferred)||void 0===e||e.resolve();const n=t;this.internalEvent.emitSVGPatch(n)}messageCallback(t){var e;c(this,Be,"f").debug("messageCallback",{message:t}),this.currentErrorCode=void 0;const n=JSON.parse(t.data);if("pong"!==n.type)switch(this.pingCount=0,n.type){case"ack":this.manageAckMessage(n);break;case"contentPackageDescription":this.manageContentPackageDescriptionMessage();break;case"partChanged":this.managePartChangeMessage(n);break;case"newPart":null===(e=this.initialized)||void 0===e||e.resolve();break;case"contentChanged":this.manageContentChangeMessage(n);break;case"exported":this.manageExportMessage(n);break;case"svgPatch":this.manageSVGPatchMessage(n);break;case"error":this.manageErrorMessage(n);break;case"idle":this.manageWaitForIdle();break;default:c(this,Be,"f").warn("messageCallback",`Message type unknow: "${n.type}".`)}}init(t,e){var n,i;return l(this,void 0,void 0,(function*(){try{return c(this,Be,"f").info("init",{height:t,width:e}),this.destroy(),this.connected=new v,this.initialized=new v,this.ackDeferred=new v,this.viewSizeHeight=t,this.viewSizeWidth=e,this.pingCount=0,this.socket=new WebSocket(this.url),this.serverConfiguration.websocket.pingEnabled&&this.infinitePing(),this.socket.addEventListener("open",this.openCallback.bind(this)),this.socket.addEventListener("close",this.closeCallback.bind(this)),this.socket.addEventListener("message",this.messageCallback.bind(this)),this.initialized.promise}catch(t){const r=new Error(Ce.CANT_ESTABLISH);return this.internalEvent.emitError(r),null===(n=this.initialized)||void 0===n||n.reject(r),null===(i=this.initialized)||void 0===i?void 0:i.promise}}))}send(t){return l(this,void 0,void 0,(function*(){return this.connected?(yield this.connected.promise,this.socket.readyState===this.socket.OPEN?(c(this,Be,"f").debug("send",{message:t}),this.socket.send(JSON.stringify(t)),Promise.resolve()):this.socket.readyState!=this.socket.CONNECTING&&this.serverConfiguration.websocket.autoReconnect?(this.reconnectionCount++,this.serverConfiguration.websocket.maxRetryCount>=this.reconnectionCount?(c(this,Be,"f").debug("send",`try to reconnect number: ${this.reconnectionCount}.`),this.internalEvent.emitClearMessage(),yield this.init(this.viewSizeHeight,this.viewSizeWidth),yield this.setPenStyle(this.penStyle),yield this.setPenStyleClasses(this.penStyleClasses),yield this.setTheme(this.theme),this.send(t)):Promise.reject(new Error("Unable to send message. The maximum number of connection attempts has been reached."))):void 0):Promise.reject(new Error("Recognizer must be initilized"))}))}addStrokes(t){var e,n;return l(this,void 0,void 0,(function*(){return c(this,Be,"f").info("addStrokes",{strokes:t}),yield null===(e=this.initialized)||void 0===e?void 0:e.promise,this.addStrokeDeferred=new v,0===t.length?this.addStrokeDeferred.resolve({}):yield this.send({type:"addStrokes",strokes:t.map((t=>t.formatToSend()))}),null===(n=this.addStrokeDeferred)||void 0===n?void 0:n.promise}))}setPenStyle(t){var e;return l(this,void 0,void 0,(function*(){c(this,Be,"f").info("setPenStyle",{penStyle:t}),yield null===(e=this.initialized)||void 0===e?void 0:e.promise,this.penStyle=t;const n={type:"setPenStyle",style:Xt.penStyleToCSS(t)};return this.send(n)}))}setPenStyleClasses(t){var e;return l(this,void 0,void 0,(function*(){yield null===(e=this.initialized)||void 0===e?void 0:e.promise,this.penStyleClasses=t,c(this,Be,"f").info("setPenStyleClasses",{penStyleClasses:t});const n={type:"setPenStyleClasses",styleClasses:t};return this.send(n)}))}setTheme(t){var e;return l(this,void 0,void 0,(function*(){c(this,Be,"f").info("setTheme",{theme:t}),yield null===(e=this.initialized)||void 0===e?void 0:e.promise,this.theme=t;const n={type:"setTheme",theme:Xt.themeToCSS(t)};return this.send(n)}))}export(t,e){var n,i;return l(this,void 0,void 0,(function*(){c(this,Be,"f").info("export",{model:t,requestedMimeTypes:e}),yield null===(n=this.initialized)||void 0===n?void 0:n.promise,this.exportDeferred=new v;const r=t.clone();let o=e||[];if(!o.length)switch(this.recognitionConfiguration.type){case"DIAGRAM":o=this.recognitionConfiguration.diagram.mimeTypes;break;case"MATH":o=this.recognitionConfiguration.math.mimeTypes;break;case"Raw Content":o=["application/vnd.myscript.jiix"];break;case"TEXT":o=this.recognitionConfiguration.text.mimeTypes;break;default:throw new Error(`Recognition type "${this.recognitionConfiguration.type}" is unknown.\n Possible types are:\n -DIAGRAM\n -MATH\n -Raw Content\n -TEXT`)}if(!o.length)return Promise.reject(new Error(`Export failed, no mimeTypes define in recognition ${this.recognitionConfiguration.type} configuration`));const s={type:"export",partId:this.currentPartId,mimeTypes:o};yield this.send(s);const a=yield null===(i=this.exportDeferred)||void 0===i?void 0:i.promise;return r.updatePositionReceived(),r.mergeExport(a),c(this,Be,"f").debug("export",{model:r}),r}))}import(t,e,n){var i,r;return l(this,void 0,void 0,(function*(){c(this,Be,"f").info("import",{data:e,mimeType:n}),yield null===(i=this.initialized)||void 0===i?void 0:i.promise;const o=t.clone(),s=this.serverConfiguration.websocket.fileChunkSize,a=Math.random().toString(10).substring(2,6);this.importDeferred=new v;const l=t=>{const e=new FileReader;return new Promise(((n,i)=>{e.onloadend=t=>{var e;return n(null===(e=t.target)||void 0===e?void 0:e.result)},e.onerror=()=>i(),e.readAsText(t)}))},h={type:"importFile",importFileId:a,mimeType:n};yield this.send(h);for(let t=0;t<e.size;t+=s){const n=e.slice(t,t+s,e.type),i={type:"fileChunk",importFileId:a,data:yield l(n),lastChunk:t+s>e.size};yield this.send(i)}const u=yield null===(r=this.importDeferred)||void 0===r?void 0:r.promise;return this.importDeferred=void 0,o.mergeExport(u),o}))}resize(t){var e,n;return l(this,void 0,void 0,(function*(){c(this,Be,"f").info("resize",{model:t}),yield null===(e=this.initialized)||void 0===e?void 0:e.promise,this.resizeDeferred=new v;const i=t.clone();this.viewSizeHeight=i.height,this.viewSizeWidth=i.width;const r={type:"changeViewSize",height:this.viewSizeHeight,width:this.viewSizeWidth};return yield this.send(r),yield null===(n=this.resizeDeferred)||void 0===n?void 0:n.promise,i}))}importPointEvents(t){var e,n;return l(this,void 0,void 0,(function*(){c(this,Be,"f").info("importPointsEvents",{strokes:t}),yield null===(e=this.initialized)||void 0===e?void 0:e.promise,this.importPointEventsDeferred=new v;const i={type:"pointerEvents",events:t.map((t=>t.formatToSend()))};this.send(i);const r=yield null===(n=this.importPointEventsDeferred)||void 0===n?void 0:n.promise;return this.importPointEventsDeferred=void 0,c(this,Be,"f").debug("importPointEvents",{exportPoints:r}),r}))}convert(t,e){var n,i;return l(this,void 0,void 0,(function*(){c(this,Be,"f").info("convert",{model:t,conversionState:e}),yield null===(n=this.initialized)||void 0===n?void 0:n.promise,this.convertDeferred=new v;const r=t.clone(),o={type:"convert",conversionState:e};yield this.send(o);const s=yield null===(i=this.convertDeferred)||void 0===i?void 0:i.promise;return r.updatePositionReceived(),r.mergeConvert(s),c(this,Be,"f").debug("convert",{model:r}),r}))}waitForIdle(){var t,e;return l(this,void 0,void 0,(function*(){return yield null===(t=this.initialized)||void 0===t?void 0:t.promise,this.waitForIdleDeferred=new v,yield this.send({type:"waitForIdle"}),null===(e=this.waitForIdleDeferred)||void 0===e?void 0:e.promise}))}undo(t){var e,n;return l(this,void 0,void 0,(function*(){c(this,Be,"f").info("undo",{model:t}),yield null===(e=this.initialized)||void 0===e?void 0:e.promise;const i=t.clone();this.undoDeferred=new v,yield this.send({type:"undo"});const r=yield null===(n=this.undoDeferred)||void 0===n?void 0:n.promise;return i.updatePositionReceived(),i.mergeExport(r),c(this,Be,"f").debug("undo",{model:i}),this.undoDeferred=void 0,i}))}redo(t){var e,n;return l(this,void 0,void 0,(function*(){c(this,Be,"f").info("redo",{model:t}),yield null===(e=this.initialized)||void 0===e?void 0:e.promise;const i=t.clone();this.redoDeferred=new v,yield this.send({type:"redo"});const r=yield null===(n=this.redoDeferred)||void 0===n?void 0:n.promise;return i.updatePositionReceived(),i.mergeExport(r),c(this,Be,"f").debug("redo",{model:r}),this.redoDeferred=void 0,i}))}clear(t){var e,n;return l(this,void 0,void 0,(function*(){c(this,Be,"f").info("clear",{model:t}),yield null===(e=this.initialized)||void 0===e?void 0:e.promise;const i=t.clone();i.modificationDate=Date.now(),this.clearDeferred=new v,yield this.send({type:"clear"});const r=yield null===(n=this.clearDeferred)||void 0===n?void 0:n.promise;return i.updatePositionReceived(),i.mergeExport(r),this.clearDeferred=void 0,c(this,Be,"f").info("clear",{model:i}),i}))}close(t,e){this.socket.readyState!==this.socket.OPEN&&this.socket.readyState!==this.socket.CONNECTING||(c(this,Be,"f").info("close",{code:t,reason:e}),this.socket.removeEventListener("close",this.closeCallback),this.socket.removeEventListener("message",this.messageCallback),this.socket.removeEventListener("open",this.openCallback),this.socket.close(t,e))}destroy(){c(this,Be,"f").info("destroy"),this.connected=void 0,this.initialized=void 0,this.ackDeferred=void 0,this.addStrokeDeferred=void 0,this.exportDeferred=void 0,this.convertDeferred=void 0,this.importDeferred=void 0,this.resizeDeferred=void 0,this.undoDeferred=void 0,this.redoDeferred=void 0,this.clearDeferred=void 0,this.socket&&(this.socket.removeEventListener("close",this.closeCallback),this.socket.removeEventListener("message",this.messageCallback),this.socket.removeEventListener("open",this.openCallback),this.close(1e3,"Recognizer destroyed"))}}Be=new WeakMap;class Je{constructor(){ze.set(this,g.getLogger(d.RENDERER)),this.symbols={table:"table",ellipse:"ellipse",line:"line"}}phi(t){let e=(t+Math.PI)%(2*Math.PI)-Math.PI;return e<-Math.PI&&(e+=2*Math.PI),c(this,ze,"f").debug("phi",{angle:t,returnedAngle:e}),e}drawEllipseArc(t,e){c(this,ze,"f").debug("drawEllipseArc",{context2D:t,shapeEllipse:e});const{centerPoint:n,maxRadius:i,minRadius:r,orientation:o,startAngle:s,sweepAngle:a}=e,l=Math.cos(o)*i,h=Math.cos(o)*r,u=Math.sin(o)*i,d=Math.sin(o)*r,p=Math.floor(Math.abs(a)/.02),f=[];t.save();try{t.beginPath();for(let e=0;e<=p;e++){const o=s+e/p*a,c=Math.atan2(Math.sin(o)/r,Math.cos(o)/i),m=Math.cos(c),g=Math.sin(c),v=n.x+l*m-d*g,y=n.y+h*g+u*m;0===e?t.moveTo(v,y):t.lineTo(v,y),0!==e&&e!==p||f.push({x:v,y:y})}t.stroke()}catch(t){c(this,ze,"f").error("drawEllipseArc",{error:t})}finally{t.restore()}return f}drawLine(t,e,n){c(this,ze,"f").debug("drawLine",{context2D:t,p1:e,p2:n}),t.save();try{t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(n.x,n.y),t.stroke()}catch(t){c(this,ze,"f").error("drawLine",{error:t})}finally{t.restore()}}drawArrowHead(t,e,n,i){c(this,ze,"f").debug("drawArrowHead",{context2D:t,headPoint:e,angle:n,length:i});const r=this.phi(n+Math.PI*(7/8)),o=this.phi(n-Math.PI*(7/8));t.save();try{t.fillStyle=t.strokeStyle,t.moveTo(e.x,e.y),t.beginPath(),t.lineTo(e.x+i*Math.cos(r),e.y+i*Math.sin(r)),t.lineTo(e.x+i*Math.cos(o),e.y+i*Math.sin(o)),t.lineTo(e.x,e.y),t.fill()}catch(t){c(this,ze,"f").error("drawArrowHead",{error:t})}finally{t.restore()}}drawShapeEllipse(t,e){c(this,ze,"f").debug("drawShapeEllipse",{context2D:t,shapeEllipse:e});const n=this.drawEllipseArc(t,e);"ARROW_HEAD"===(null==e?void 0:e.beginDecoration)&&this.drawArrowHead(t,n[0],e.beginTangentAngle,12),"ARROW_HEAD"===(null==e?void 0:e.endDecoration)&&this.drawArrowHead(t,n[1],e.endTangentAngle,12)}drawShapeLine(t,e){c(this,ze,"f").debug("drawShapeLine",{context2D:t,shapeLine:e}),this.drawLine(t,e.firstPoint,e.lastPoint),"ARROW_HEAD"===e.beginDecoration&&this.drawArrowHead(t,e.firstPoint,e.beginTangentAngle,12),"ARROW_HEAD"===e.endDecoration&&this.drawArrowHead(t,e.lastPoint,e.endTangentAngle,12)}draw(t,e){switch(c(this,ze,"f").info("draw",{context2D:t,symbol:e}),t.save(),t.lineWidth=e.style.width,t.strokeStyle=e.style.color,e.type){case this.symbols.table:e.lines.forEach((e=>this.drawLine(t,e.p1,e.p2)));break;case this.symbols.ellipse:this.drawShapeEllipse(t,e);break;case this.symbols.line:this.drawShapeLine(t,e);break;default:c(this,ze,"f").warn("draw",`${e.type} not implemented`)}}}ze=new WeakMap;class Xe{constructor(){$e.set(this,g.getLogger(d.RENDERER))}renderArc(t,e,n){c(this,$e,"f").debug("renderArc",{context2d:t,center:e,radius:n}),t.arc(e.x,e.y,n,0,2*Math.PI,!0)}renderLine(t,e,n,i){c(this,$e,"f").debug("renderLine",{context2d:t,begin:e,end:n,width:i});const r=z(e,S(e,n),i),o=z(n,S(e,n),i);t.moveTo(r[0].x,r[0].y),t.lineTo(o[0].x,o[0].y),t.lineTo(o[1].x,o[1].y),t.lineTo(r[1].x,r[1].y)}renderFinal(t,e,n,i){c(this,$e,"f").debug("renderFinal",{context2d:t,begin:e,end:n,width:i});const r=S(e,n),o=z(n,r,i);t.moveTo(o[0].x,o[0].y);for(let s=1;s<=6;s++){const e=r-s*Math.PI/6;t.lineTo(n.x-n.p*i*Math.sin(e),n.y+n.p*i*Math.cos(e))}}renderQuadratic(t,e,n,i,r){c(this,$e,"f").debug("renderQuadratic",{context2d:t,begin:e,end:n,ctrl:i,width:r});const o=z(e,S(e,i),r),s=z(n,S(i,n),r),a=z(i,S(e,n),r);t.moveTo(o[0].x,o[0].y),t.quadraticCurveTo(a[0].x,a[0].y,s[0].x,s[0].y),t.lineTo(s[1].x,s[1].y),t.quadraticCurveTo(a[1].x,a[1].y,o[1].x,o[1].y)}draw(t,e){c(this,$e,"f").info("draw",{context2d:t,stroke:e});const n=e.pointers.length,i=n-2,r=e.style.width>0?e.style.width:t.lineWidth,o=e.style.color?e.style.color:t.strokeStyle,s=e.pointers[0];t.save();try{if(t.beginPath(),n<3)this.renderArc(t,s,.6*r);else{this.renderArc(t,s,r*s.p);const o=$(s,e.pointers[1]);this.renderLine(t,s,o,r);for(let n=0;n<i;n++){const i=$(e.pointers[n],e.pointers[n+1]),o=$(e.pointers[n+1],e.pointers[n+2]),s=e.pointers[n+1];this.renderQuadratic(t,i,o,s,r)}const a=$(e.pointers[n-2],e.pointers[n-1]),l=e.pointers[n-1];this.renderLine(t,a,l,r);const c=e.pointers[n-2],h=e.pointers[n-1];this.renderFinal(t,c,h,r)}t.closePath(),void 0!==o&&(t.fillStyle=o,t.fill()),t.save()}catch(t){c(this,$e,"f").error("draw",{error:t})}finally{t.restore()}}}$e=new WeakMap;class Ke{constructor(){qe.set(this,g.getLogger(d.RENDERER)),this.symbols={char:"char",string:"string",textLine:"textLine"}}drawUnderline(t,e,n){c(this,qe,"f").debug("#drawUnderline",{context2D:t,textUnderline:e,underline:n}),t.save();try{const i=e.data.width/e.label.length,r={x:e.data.topLeftPoint.x+n.data.firstCharacter*i,y:e.data.topLeftPoint.y+e.data.height},o={x:e.data.topLeftPoint.x+n.data.lastCharacter*i,y:e.data.topLeftPoint.y+e.data.height};t.beginPath(),t.moveTo(r.x,r.y),t.lineTo(o.x,o.y),t.stroke()}catch(t){c(this,qe,"f").error("#drawUnderline",{error:t})}finally{t.restore()}}drawText(t,e){c(this,qe,"f").debug("#drawText",{context2D:t,text:e}),t.save();try{t.font=`${e.data.textHeight}px serif`,t.textAlign="CENTER"===e.data.justificationType?"center":"left",t.textBaseline="bottom",t.fillStyle=t.strokeStyle,t.fillText(e.label,e.data.topLeftPoint.x,e.data.topLeftPoint.y+e.data.height)}catch(t){c(this,qe,"f").error("#drawText",{error:t})}finally{t.restore()}}drawTextLine(t,e){c(this,qe,"f").debug("#drawTextLine",{context2D:t,textUnderline:e}),this.drawText(t,e),e.underlineList.forEach((n=>{this.drawUnderline(t,e,n)}))}draw(t,e){switch(c(this,qe,"f").info("draw",{context2D:t,symbol:e}),t.lineWidth=e.style.width,t.strokeStyle=e.style.color,e.type){case this.symbols.char:case this.symbols.string:this.drawText(t,e);break;case this.symbols.textLine:this.drawTextLine(t,e);break;default:c(this,qe,"f").warn("draw",`${e.type} not implemented`)}}}qe=new WeakMap;class Ze{constructor(t){Ue.set(this,g.getLogger(d.RENDERER)),c(this,Ue,"f").info("constructor",{config:t}),this.configuration=t,this.strokeRenderer=new Xe,this.shapeRenderer=new Je,this.textRenderer=new Ke}createCanvas(t){c(this,Ue,"f").debug("createCanvas",{type:t});const e=document.createElement("canvas");return e.id=t,e.classList.add(t),e.classList.add("ms-canvas"),e}resizeContent(){const t=window.devicePixelRatio;[this.context.renderingCanvas,this.context.capturingCanvas].forEach((e=>{var n;const i=e.parentNode,r=Math.max(this.configuration.minWidth,i.clientWidth),o=Math.max(this.configuration.minHeight,i.clientHeight);e.width=r*t,e.height=o*t,null===(n=e.getContext("2d"))||void 0===n||n.scale(t,t),e.style.width=`${r}px`,e.style.height=`${o}px`}))}drawSymbol(t,e){if(c(this,Ue,"f").debug("drawSymbol",{symbol:e}),"stroke"===e.type){const n=e;"eraser"!==n.pointerType&&this.strokeRenderer.draw(t,n)}else Object.keys(this.textRenderer.symbols).includes(e.type)?this.textRenderer.draw(t,e):Object.keys(this.shapeRenderer.symbols).includes(e.type)?this.shapeRenderer.draw(t,e):c(this,Ue,"f").warn("drawSymbol",`symbol type unknow: ${e.type}`)}init(t){c(this,Ue,"f").info("init",{element:t});const e=this.createCanvas("ms-rendering-canvas");t.appendChild(e);const n=this.createCanvas("ms-capture-canvas");t.appendChild(n),this.context={parent:t,renderingCanvas:e,renderingCanvasContext:e.getContext("2d"),capturingCanvas:n,capturingCanvasContext:n.getContext("2d")},this.resizeContent()}drawModel(t){var e;c(this,Ue,"f").info("drawModel",{model:t}),null===(e=this.context.renderingCanvasContext)||void 0===e||e.clearRect(0,0,this.context.renderingCanvas.width,this.context.renderingCanvas.height),t.symbols.forEach((t=>this.drawSymbol(this.context.renderingCanvasContext,t))),this.context.capturingCanvasContext.clearRect(0,0,this.context.capturingCanvas.width,this.context.capturingCanvas.height)}drawPendingStroke(t){c(this,Ue,"f").info("drawPendingStroke",{stroke:t}),this.context.capturingCanvasContext.clearRect(0,0,this.context.capturingCanvas.width,this.context.capturingCanvas.height),t&&"eraser"!==(null==t?void 0:t.pointerType)&&this.strokeRenderer.draw(this.context.capturingCanvasContext,t)}resize(t){c(this,Ue,"f").info("resize",{model:t}),this.resizeContent(),this.drawModel(t)}destroy(){c(this,Ue,"f").info("destroy"),this.context.parent&&(this.context.parent.innerHTML="")}}Ue=new WeakMap;const Qe={arrowHeadStartMarker:"arrow-head-start",arrowHeadEndMaker:"arrow-head-end",selectionFilterId:"selection-filter",removalFilterId:"removal-filter",crossMarker:"cross-marker",noSelection:"pointer-events: none; -webkit-touch-callout: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;"},tn="http://www.w3.org/2000/svg";class en{static createLayer(t,e={}){const n=document.createElementNS(tn,"svg");return n.setAttribute("width",`${t.width}px`),n.setAttribute("height",`${t.height}px`),n.setAttribute("viewBox",`${t.x}, ${t.y}, ${t.width}, ${t.height}`),Object.keys(e).forEach((t=>{n.setAttribute(t,e[t])})),n}static createFilter(t,e={}){const n=document.createElementNS(tn,"filter");return n.id=t,Object.keys(e).forEach((t=>{n.setAttribute(t,e[t])})),n}static createDefs(){return document.createElementNS(tn,"defs")}static createMarker(t,e={}){const n=document.createElementNS(tn,"marker");return n.setAttribute("id",t),Object.keys(e).forEach((t=>{n.setAttribute(t,e[t])})),n}static createComponentTransfert(){return document.createElementNS(tn,"feComponentTransfer")}static createDropShadow({dx:t=0,dy:e=0,deviation:n=0,color:i="#3e68ff",opacity:r=1}){const o=document.createElementNS(tn,"feDropShadow");return o.setAttribute("dx",t.toString()),o.setAttribute("dy",e.toString()),o.setAttribute("stdDeviation",n.toString()),o.setAttribute("flood-color",i),o.setAttribute("flood-opacity",r.toString()),o}static createTransfertFunctionTable(t,e){const n=document.createElementNS(tn,t);return n.setAttribute("type","table"),n.setAttribute("tableValues",e),n}static createGroup(t={}){const e=document.createElementNS(tn,"g");return Object.keys(t).forEach((n=>{e.setAttribute(n,t[n])})),e}static createLine(t,e,n={}){const i=document.createElementNS(tn,"line");return i.setAttribute("x1",t.x.toString()),i.setAttribute("y1",t.y.toString()),i.setAttribute("x2",e.x.toString()),i.setAttribute("y2",e.y.toString()),Object.keys(n).forEach((t=>{i.setAttribute(t,n[t])})),i}static createCircle(t,e,n={}){const i=document.createElementNS(tn,"circle");return i.setAttribute("cx",t.x.toString()),i.setAttribute("cy",t.y.toString()),i.setAttribute("r",e.toString()),Object.keys(n).forEach((t=>{i.setAttribute(t,n[t])})),i}static createPath(t={}){const e=document.createElementNS(tn,"path");return Object.keys(t).forEach((n=>{e.setAttribute(n,t[n])})),e}static createPolygon(t,e={}){const n=document.createElementNS(tn,"polygon");return n.setAttribute("points",t.join(",")),Object.keys(e).forEach((t=>{n.setAttribute(t,e[t])})),n}static createRect(t,e={}){const n=document.createElementNS(tn,"rect");return n.setAttribute("x",t.x.toString()),n.setAttribute("y",t.y.toString()),n.setAttribute("width",t.width.toString()),n.setAttribute("height",t.height.toString()),Object.keys(e).forEach((t=>{n.setAttribute(t,e[t])})),n}static createTSpan(t,e={}){const n=document.createElementNS(tn,"tspan");return n.textContent=t,Object.keys(e).forEach((t=>{n.setAttribute(t,e[t])})),n}static createForeignObject(t,e,n={}){const i=document.createElementNS(tn,"foreignObject");return i.setAttribute("x",t.x.toString()),i.setAttribute("y",t.y.toString()),i.setAttribute("width",t.width.toString()),i.setAttribute("height",t.height.toString()),Object.keys(n).forEach((t=>{i.setAttribute(t,n[t])})),i.appendChild(e),i}static createText(t,e,n={}){const i=document.createElementNS(tn,"text");return i.textContent=e,i.setAttribute("x",t.x.toString()),i.setAttribute("y",t.y.toString()),Object.keys(n).forEach((t=>{i.setAttribute(t,n[t])})),i}}class nn{static getLinePath(t){return`M ${t.start.x} ${t.start.y} L ${t.end.x} ${t.end.y}`}static getPolyLinePath(t){return`M ${t.vertices[0].x} ${t.vertices[0].y} ${t.vertices.map((t=>`L ${t.x} ${t.y}`)).join(" ")}`}static getArcPath(t){return`M ${t.vertices[0].x} ${t.vertices[0].y} Q ${t.vertices.map((t=>`${t.x} ${t.y}`)).join(" ")}`}static getSVGPath(t){switch(t.kind){case ie.Line:return nn.getLinePath(t);case ie.PolyEdge:return nn.getPolyLinePath(t);case ie.Arc:return nn.getArcPath(t);default:throw new Error(`Can't getSVGPath for edge cause kind is unknow: "${JSON.stringify(t)}"`)}}static getSVGElement(t){const e={id:t.id,type:t.type,kind:t.kind,"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round"};t.selected&&(e.filter=`url(#${Qe.selectionFilterId})`),t.deleting&&(e.filter=`url(#${Qe.removalFilterId})`);const n=en.createGroup(e),i={fill:"transparent",stroke:t.style.color||Gt.color,"stroke-width":(t.style.width||Gt.width).toString(),opacity:(t.style.opacity||Gt.opacity).toString(),d:nn.getSVGPath(t)};return t.startDecoration===re.Arrow&&(i["marker-start"]=`url(#${Qe.arrowHeadStartMarker})`),t.endDecoration===re.Arrow&&(i["marker-end"]=`url(#${Qe.arrowHeadEndMaker})`),n.appendChild(en.createPath(i)),n}}class rn{static getSVGPath(t){if(t.pointers.length<1)return"";const e=t.pointers.at(0);if(1===t.pointers.length){const n=t.style.width||4;return`C ${e.x-n/2} ${e.y} Q ${e.x+n/2} ${e.y}`}const n=t.pointers.slice(1);return`M ${e.x} ${e.y} ${n.reduce(((t,e)=>`${t} ${e.x} ${e.y}`),"Q")}`}static getSVGElement(t){const e={id:t.id,type:"eraser","stroke-width":"12",stroke:"grey",opacity:"0.2",shadowBlur:"5","stroke-linecap":"round",fill:"transparent",d:rn.getSVGPath(t)};return en.createPath(e)}}class on{static getSVGElement(t,{deleting:e,style:n,bounds:i}){const r={id:t.id,type:"decorator",kind:t.kind,"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round"};let o;switch(r.opacity=(t.style.opacity||Gt.opacity).toString(),e&&(r.opacity=(.5*(t.style.opacity||Gt.opacity)).toString()),t.kind){case Rt.Highlight:{r.opacity=e?"0.25":"0.5",r.stroke="transparent",r.fill=t.style.color||Gt.color;const s={x:i.x-+(n.width||Gt.width),y:i.y-+(n.width||Gt.width),height:i.height+2*+(n.width||Gt.width),width:i.width+2*+(n.width||Gt.width)};o=en.createRect(s,r);break}case Rt.Surround:{r.fill="transparent",r.stroke=t.style.color||Gt.color,r["stroke-width"]=(t.style.width||Gt.width).toString();const e={x:i.x-+(n.width||Gt.width),y:i.y-+(n.width||Gt.width),height:i.height+2*+(n.width||Gt.width),width:i.width+2*+(n.width||Gt.width)};o=en.createRect(e,r);break}case Rt.Strikethrough:{r.fill="transparent",r.stroke=t.style.color||Gt.color,r["stroke-width"]=(t.style.width||Gt.width).toString();const e={x:i.xMin,y:i.yMid},n={x:i.xMax,y:i.yMid};o=en.createLine(e,n,r);break}case Rt.Underline:{r.fill="transparent",r.stroke=t.style.color||Gt.color,r["stroke-width"]=(t.style.width||Gt.width).toString();const e={x:i.xMin,y:i.yMax+ +(n.width||Gt.width)},s={x:i.xMax,y:i.yMax+ +(n.width||Gt.width)};o=en.createLine(e,s,r);break}}return o}}class sn{static getPolygonePath(t){return`M ${t.points[0].x} ${t.points[0].y} ${t.points.slice(1).map((t=>`L ${t.x} ${t.y}`)).join(" ")} Z`}static getCirclePath(t){return`M ${t.center.x-t.radius} ${t.center.y} a ${t.radius} ${t.radius} 0 1 1 ${2*t.radius} 0 a ${t.radius} ${t.radius} 0 1 1 -${2*t.radius} 0 Z`}static getEllipsePath(t){return`M ${t.center.x-t.radiusX} ${t.center.y} a ${t.radiusX} ${t.radiusY} 0 1 1 ${2*t.radiusX} 0 a ${t.radiusX} ${t.radiusY} 0 1 1 -${2*t.radiusX} 0 Z`}static getSVGPath(t){switch(t.kind){case oe.Polygon:return sn.getPolygonePath(t);case oe.Circle:return sn.getCirclePath(t);case oe.Ellipse:return sn.getEllipsePath(t);default:throw new Error(`Can't getSVGPath for shape cause kind is unknow: "${JSON.stringify(t)}"`)}}static getSVGElement(t){const e={id:t.id,type:t.type,kind:t.kind,"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round"};t.selected&&(e.filter=`url(#${Qe.selectionFilterId})`),t.deleting&&(e.filter=`url(#${Qe.removalFilterId})`);const n=en.createGroup(e),i={fill:t.style.fill||"transparent",stroke:t.style.color||Gt.color,"stroke-width":(t.style.width||Gt.width).toString(),opacity:(t.style.opacity||Gt.opacity).toString(),d:sn.getSVGPath(t)};return t.kind===oe.Ellipse&&(i.transform=`rotate(${k(t.orientation)}, ${t.center.x}, ${t.center.y})`),n.appendChild(en.createPath(i)),n}}class an{static getArcPath(t,e){return[`M ${t.x} ${t.y}`,`m ${-e} 0`,`a ${e} ${e} 0 1 0 ${2*e} 0`,`a ${e} ${e} 0 1 0 ${-2*e} 0`].join(" ")}static getLinePath(t,e,n){const i=z(t,S(t,e),n),r=z(e,S(t,e),n);return[`M ${i[0].x} ${i[0].y}`,`L ${r[0].x} ${r[0].y}`,`L ${r[1].x} ${r[1].y}`,`L ${i[1].x} ${i[1].y}`].join(" ")}static getFinalPath(t,e,n){const i=S(t,e),r=z(e,i,n),o=[`M ${r[0].x} ${r[0].y}`];for(let s=1;s<=6;s++){const t=i-s*(Math.PI/6),r=+(e.x-e.p*n*Math.sin(t)).toFixed(3),a=+(e.y+e.p*n*Math.cos(t)).toFixed(3);o.push(`L ${r} ${a}`)}return o.join(" ")}static getQuadraticPath(t,e,n,i){const r=z(t,S(t,n),i),o=z(e,S(n,e),i),s=z(n,S(t,e),i);return[`M ${r[0].x} ${r[0].y}`,`Q ${s[0].x} ${s[0].y} ${o[0].x} ${o[0].y}`,`L ${o[1].x} ${o[1].y}`,`Q ${s[1].x} ${s[1].y} ${r[1].x} ${r[1].y}`].join(" ")}static getSVGPath(t){const e=t.pointers.length;if(!e)return"";const n=t.style.width,i=e-2,r=t.pointers[0],o=[];if(e<3)o.push(this.getArcPath(r,.6*n));else{o.push(this.getArcPath(r,n*r.p)),o.push(this.getLinePath(r,$(r,t.pointers[1]),n));for(let e=0;e<i;e++){const i=$(t.pointers[e],t.pointers[e+1]),r=$(t.pointers[e+1],t.pointers[e+2]),s=t.pointers[e+1];o.push(this.getQuadraticPath(i,r,s,n))}const s=t.pointers[e-2],a=t.pointers[e-1];o.push(this.getLinePath($(s,a),a,n)),o.push(this.getFinalPath(s,a,n))}return o.join(" ")}static getSVGElement(t){const e={id:t.id,type:"stroke","vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round"};t.selected&&(e.filter=`url(#${Qe.selectionFilterId})`),t.deleting&&(e.filter=`url(#${Qe.removalFilterId})`);const n=en.createGroup(e),i={fill:t.style.color||Gt.color,"stroke-width":(t.style.width||Gt.width).toString(),opacity:(t.style.opacity||Gt.opacity).toString(),d:an.getSVGPath(t)};return n.append(en.createPath(i)),t.decorators.forEach((e=>{const i=on.getSVGElement(e,t);i&&(e.kind===Rt.Highlight?n.prepend(i):n.append(i))})),n}}class ln{static getSVGElement(t){const e={id:t.id,type:t.type,"vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round",style:Qe.noSelection,opacity:(t.style.opacity||Gt.opacity).toString()};t.rotation&&(e.transform=`rotate(${t.rotation.degree}, ${t.rotation.center.x}, ${t.rotation.center.y})`),t.selected&&(e.filter=`url(#${Qe.selectionFilterId})`),t.deleting&&(e.filter=`url(#${Qe.removalFilterId})`);const n=en.createGroup(e),i=en.createText(t.point,"");return t.chars.forEach((t=>{const e={id:t.id,fill:t.color,"font-size":`${t.fontSize}px`,"font-weight":t.fontWeight.toString()};i.appendChild(en.createTSpan(t.label,e))})),n.append(i),t.decorators.forEach((e=>{const i=on.getSVGElement(e,t);i&&(e.kind===Rt.Highlight?n.prepend(i):n.append(i))})),n}}class cn{static getChildElement(t){let e;switch(t.type){case ne.Stroke:e=an.getSVGElement(t);break;case ne.Shape:e=sn.getSVGElement(t);break;case ne.Edge:e=nn.getSVGElement(t);break;case ne.Text:e=ln.getSVGElement(t);break;case ne.Group:e=cn.getSVGElement(t)}return e}static getSVGElement(t){const e={id:t.id,type:"group","vector-effect":"non-scaling-stroke","stroke-linecap":"round","stroke-linejoin":"round",fill:t.style.color||Gt.color,"stroke-width":(t.style.width||Gt.width).toString(),opacity:(t.style.opacity||Gt.opacity).toString()};t.selected&&(e.filter=`url(#${Qe.selectionFilterId})`),t.deleting&&(e.filter=`url(#${Qe.removalFilterId})`);const n=en.createGroup(e);return t.children.forEach((t=>{n.append(cn.getChildElement(t))})),t.decorators.forEach((e=>{const i=on.getSVGElement(e,t);i&&(e.kind===Rt.Highlight?n.prepend(i):n.append(i))})),n}}var hn,un,dn,pn,fn,mn,gn,vn,yn,bn,wn,xn,Sn,kn,_n,En,Ln,Cn,An,Mn,Nn,Pn,Tn;class In{constructor(t){hn.set(this,g.getLogger(d.RENDERER)),this.groupGuidesId="guides-wrapper",this.verticalGuides=[],this.horizontalGuides=[],c(this,hn,"f").info("constructor",{configuration:t}),this.configuration=t}initLayer(){const t=Math.max(this.configuration.minWidth,this.parent.clientWidth),e=Math.max(this.configuration.minHeight,this.parent.clientHeight);this.layer=en.createLayer({x:0,y:0,width:t,height:e}),this.layer.style.setProperty("height","auto"),this.layer.style.setProperty("width","auto"),this.layer.appendChild(this.createSVGTools()),this.parent.style.setProperty("overflow","auto"),this.parent.appendChild(this.layer)}createDefs(){const t=en.createDefs(),e=4,n=2.5,i={style:Qe.noSelection,fill:"context-stroke",markerWidth:5..toString(),markerHeight:5..toString(),refX:e.toString(),refY:n.toString()},r=en.createMarker(Qe.arrowHeadStartMarker,Object.assign(Object.assign({},i),{orient:"auto-start-reverse"}));r.appendChild(en.createPolygon([0,0,5,n,0,5],i)),t.appendChild(r);const o=en.createMarker(Qe.arrowHeadEndMaker,Object.assign(Object.assign({},i),{orient:"auto"}));o.appendChild(en.createPolygon([0,0,5,n,0,5],i)),t.appendChild(o);const s={style:Qe.noSelection,markerWidth:"5",markerHeight:"5",refX:"0",refY:"0",viewBox:"-5 -5 10 10"},a=en.createMarker(Qe.crossMarker,s);return a.appendChild(en.createPath({d:"M -4,-4 L 4,4 M -4,4 L 4,-4",stroke:"white","stroke-width":"3"})),a.appendChild(en.createPath({d:"M -4,-4 L 4,4 M -4,4 L 4,-4",stroke:"context-stroke","stroke-width":"2"})),t.appendChild(a),t}createFilters(){const t=en.createGroup({id:"definition-group"}),e=en.createFilter(Qe.removalFilterId,{filterUnits:"userSpaceOnUse"}),n=en.createComponentTransfert(),i=en.createTransfertFunctionTable("feFuncA","0 0.25");n.appendChild(i),e.appendChild(n),t.appendChild(e);const r=en.createFilter(Qe.selectionFilterId,{filterUnits:"userSpaceOnUse"});return r.appendChild(en.createDropShadow({dx:-1,dy:-1,deviation:1})),t.appendChild(r),t}drawGuides(){var t,e;this.verticalGuides=[],this.horizontalGuides=[];const n=Number(null===(t=this.layer.getAttribute("height"))||void 0===t?void 0:t.replace("px","")),i=Number(null===(e=this.layer.getAttribute("width"))||void 0===e?void 0:e.replace("px","")),r=this.configuration.guides.gap,s=this.configuration.guides.gap/5,a={id:this.groupGuidesId,stroke:"grey",opacity:"0.5",style:Qe.noSelection,role:o.Guide},l=en.createGroup(a);switch(this.configuration.guides.type){case"line":for(let t=r;t<n;t+=r){const e={x:r,y:t},n={x:i-r,y:t};this.horizontalGuides.push(t);const o=en.createLine(e,n,{"stroke-width":"1",style:Qe.noSelection});l.appendChild(o)}break;case"grid":for(let t=0;t<n;t+=r){const e={x:0,y:t},n={x:i,y:t},o=en.createLine(e,n,{"stroke-width":"1",style:Qe.noSelection});l.appendChild(o),this.horizontalGuides.push(t);for(let a=t+s;a<t+r;a+=s){this.horizontalGuides.push(a);const t=en.createLine({x:0,y:a},{x:i,y:a},{"stroke-width":"0.25",style:Qe.noSelection});l.appendChild(t)}}for(let t=0;t<i;t+=r){const e={x:t,y:0},i={x:t,y:n},o=en.createLine(e,i,{"stroke-width":"1",style:Qe.noSelection});l.appendChild(o),this.verticalGuides.push(t);for(let a=t+s;a<t+r;a+=s){this.verticalGuides.push(a);const t=en.createLine({x:a,y:0},{x:a,y:n},{"stroke-width":"0.25",style:Qe.noSelection});l.appendChild(t)}}break;case"point":for(let t=r;t<i;t+=r){this.verticalGuides.push(t);for(let e=r;e<n;e+=r){this.horizontalGuides.push(e);const n=en.createCircle({x:t,y:e},1);l.appendChild(n)}}break;default:c(this,hn,"f").error("drawGuides",`Guide type unknow: ${this.configuration.guides.type}`)}this.horizontalGuides=[...new Set(this.horizontalGuides)],this.verticalGuides=[...new Set(this.verticalGuides)],this.definitionGroup.appendChild(l)}removeGuides(){var t;this.verticalGuides=[],this.horizontalGuides=[],null===(t=this.layer.querySelector(`#${this.groupGuidesId}`))||void 0===t||t.remove()}createSVGTools(){return this.definitionGroup=en.createGroup({id:"definition-group"}),this.definitionGroup.appendChild(this.createDefs()),this.definitionGroup.appendChild(this.createFilters()),this.configuration.guides.enable&&this.drawGuides(),this.definitionGroup}init(t){c(this,hn,"f").info("init",{element:t}),this.parent=t,this.parent.oncontextmenu=()=>!1,this.initLayer()}getAttribute(t,e){const n=this.layer.querySelector(`#${t}`);return null==n?void 0:n.getAttribute(e)}setAttribute(t,e,n){const i=this.layer.querySelector(`#${t}`);null==i||i.setAttribute(e,n)}buildElementFromSymbol(t){let e;switch(t.type){case ne.Stroke:e=an.getSVGElement(t);break;case ne.Eraser:e=rn.getSVGElement(t);break;case ne.Shape:e=sn.getSVGElement(t);break;case ne.Edge:e=nn.getSVGElement(t);break;case ne.Text:e=ln.getSVGElement(t);break;case ne.Group:e=cn.getSVGElement(t);break;default:c(this,hn,"f").error("buildElementFromSymbol",`symbol unknow: "${JSON.stringify(t)}"`)}return e}prependElement(t){this.layer.prepend(t)}changeOrderSymbol(t,e){var n,i;const r=this.layer.querySelector(`#${t.id}`);if(r)switch(e){case"first":this.definitionGroup.insertAdjacentElement("afterend",r);break;case"last":this.layer.insertAdjacentElement("beforeend",r);break;case"forward":null===(n=r.nextElementSibling)||void 0===n||n.insertAdjacentElement("afterend",r);break;case"backward":r.previousElementSibling!==this.definitionGroup&&(null===(i=r.previousElementSibling)||void 0===i||i.insertAdjacentElement("beforebegin",r))}}appendElement(t){this.layer.appendChild(t)}removeElement(t){c(this,hn,"f").debug("Element",{id:t});const e=this.layer.querySelector(`#${t}`);e&&e.remove()}drawSymbol(t){c(this,hn,"f").debug("drawSymbol",{symbol:t});const e=this.layer.querySelector(`#${null==t?void 0:t.id}`),n=this.buildElementFromSymbol(t);return n&&(e?e.replaceWith(n):this.layer.appendChild(n)),n}replaceSymbol(t,e){c(this,hn,"f").debug("drawSymbol",{symbols:e});const n=this.layer.querySelector(`#${t}`),i=e.map((t=>this.buildElementFromSymbol(t))).filter((t=>!!t));return i.length&&(n?(i.forEach((t=>n.insertAdjacentElement("beforebegin",t))),n.remove()):i.forEach((t=>this.layer.appendChild(t)))),i}removeSymbol(t){c(this,hn,"f").debug("removeSymbol",{id:t}),this.removeElement(t)}drawCircle(t,e,n={}){c(this,hn,"f").info("drawCircle",{point:t,radius:e,attrs:n}),this.layer.appendChild(en.createCircle(t,e,n))}drawRect(t,e={}){c(this,hn,"f").info("drawCircle",{box:t,attrs:e}),this.layer.appendChild(en.createRect(t,e))}drawLine(t,e,n={}){c(this,hn,"f").info("drawLine",{p1:t,p2:e,attrs:n}),this.layer.appendChild(en.createLine(t,e,n))}drawConnectionBetweenBox(t,e,n,i){const r=new qt(e).corners,o=new qt(n).corners,{p1:s,p2:a}=N(r,o),l=Object.assign({id:t,fill:"transparent",style:Qe.noSelection},i);this.drawLine(s,a,l)}resize(t,e){c(this,hn,"f").info("resize",{height:t,width:e}),this.layer.setAttribute("width",`${e}px`),this.layer.setAttribute("height",`${t}px`),this.layer.setAttribute("viewBox",`0, 0, ${e}, ${t}`),this.removeGuides(),this.configuration.guides.enable&&this.drawGuides()}getElementById(t){return this.layer.querySelector(`#${t}`)}getElements({tagName:t,attrs:e}){c(this,hn,"f").info("getElements",{tagName:t,attrs:e});let n=t||"*";return e&&Object.keys(e).forEach((t=>{n+=`[${t}=${e[t]}]`})),this.layer.querySelectorAll(n)}clearElements({tagName:t,attrs:e}){c(this,hn,"f").info("clearElements",{tagName:t,attrs:e}),this.getElements({tagName:t,attrs:e}).forEach((t=>t.remove()))}clear(){if(c(this,hn,"f").info("clear"),this.layer){for(;this.layer.firstChild;)this.layer.firstChild.remove();this.layer.appendChild(this.createSVGTools())}}destroy(){this.layer&&this.layer.remove()}}hn=new WeakMap;class On{getArcPath(t,e){return[`M ${t.x},${t.y}`,`m ${-e},0`,`a ${e},${e} 0 1 0 ${2*e},0`,`a ${e},${e} 0 1 0 ${-2*e},0`].join(" ")}getLinePath(t,e,n){const i=z(t,S(t,e),n),r=z(e,S(t,e),n);return[`M ${i[0].x},${i[0].y}`,`L ${r[0].x},${r[0].y}`,`L ${r[1].x},${r[1].y}`,`L ${i[1].x},${i[1].y}`].join(" ")}getFinalPath(t,e,n){const i=S(t,e),r=z(e,i,n),o=[`M ${r[0].x},${r[0].y}`];for(let s=1;s<=6;s++){const t=i-s*(Math.PI/6);o.push(`L ${e.x-e.p*n*Math.sin(t)},${e.y+e.p*n*Math.cos(t)}`)}return o.join(" ")}getQuadraticPath(t,e,n,i){const r=z(t,S(t,n),i),o=z(e,S(n,e),i),s=z(n,S(t,e),i);return[`M ${r[0].x},${r[0].y}`,`Q ${s[0].x},${s[0].y} ${o[0].x},${o[0].y}`,`L ${o[1].x},${o[1].y}`,`Q ${s[1].x},${s[1].y} ${r[1].x},${r[1].y}`].join(" ")}buildSVGPath(t){const e=t.pointers.length,n=t.style.width,i=e-2,r=t.pointers[0],o=[];if(e<3)o.push(this.getArcPath(r,.6*n));else{o.push(this.getArcPath(r,n*r.p)),o.push(this.getLinePath(r,$(r,t.pointers[1]),n));for(let e=0;e<i;e++){const i=$(t.pointers[e],t.pointers[e+1]),r=$(t.pointers[e+1],t.pointers[e+2]),s=t.pointers[e+1];o.push(this.getQuadraticPath(i,r,s,n))}const s=t.pointers[e-2],a=t.pointers[e-1];o.push(this.getLinePath($(s,a),a,n)),o.push(this.getFinalPath(s,a,n))}return o.join(" ")}drawStroke(t,e,n){const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.classList.add("pending-stroke"),i.setAttribute("id",e.id),i.setAttribute("type",e.pointerType),null==n||n.forEach((t=>{i.setAttribute(t.name,t.value)}));const r=this.buildSVGPath(e);i.setAttribute("d",`${r}Z`),t.appendChild(i)}}class Dn{constructor(t){un.set(this,g.getLogger(d.RENDERER)),c(this,un,"f").info("constructor",{config:t}),this.config=t,this.stroker=new On}init(t){c(this,un,"f").info("init",{element:t}),t.style.fontSize="10px",this.context={parent:t}}drawStroke(t,e){let n;"eraser"===e.pointerType?(e.style.width=12,n="fill:grey;stroke:transparent;shadowBlur:5;opacity:0.2;"):n=`fill:${e.style.color};stroke:transparent;`,this.stroker.drawStroke(t,e,[{name:"style",value:n}])}replaceAll(t,e){const n=this.context.parent.querySelector(`svg[data-layer="${t}"]`);null==n||n.remove(),this.context.parent.insertAdjacentHTML("beforeend",e.svg);const i=this.context.parent.querySelector(`svg[data-layer="${t}"]`);if("MODEL"===t){const t=document.createElementNS("http://www.w3.org/2000/svg","g");t.id="pendingStrokes",i.appendChild(t)}}replaceElement(t){const e=this.context.parent.querySelector(`#${t.id}`);if(e){const n=e.parentNode;null==e||e.remove(),null==n||n.insertAdjacentHTML("beforeend",t.svg)}}appendChild(t,e){const n=e.parentId?`#${e.parentId}`:`svg[data-layer="${t}"]`,i=this.context.parent.querySelector(n);null==i||i.insertAdjacentHTML("beforeend",e.svg)}removeChild(t){var e;null===(e=this.context.parent.querySelector(`#${t.parentId} > *:nth-child(${t.index+1})`))||void 0===e||e.remove()}removeElement(t){const e=this.context.parent.querySelector(`#${t.id}`);e&&(t.id.includes("s")||t.id.includes("MODEL")?e.remove():(e.setAttribute("class","removed-stroke"),setTimeout((()=>{null==e||e.remove()}),100)))}insertBefore(t){const e=this.context.parent.querySelector(`#${t.refId}`);null==e||e.insertAdjacentHTML("beforebegin",t.svg)}setAttribute(t){const e=t.id?`#${t.id}`:"svg",n=this.context.parent.querySelector(e);null==n||n.setAttribute(t.name,t.value)}removeAttribute(t){const e=t.id?`#${t.id}`:"svg",n=this.context.parent.querySelector(e);null==n||n.removeAttribute(t.name)}updateLayer(t,e){switch(c(this,un,"f").info("updateLayer",{layerName:t,update:e}),e.type){case"REPLACE_ALL":this.replaceAll(t,e);break;case"REPLACE_ELEMENT":this.replaceElement(e);break;case"APPEND_CHILD":this.appendChild(t,e);break;case"REMOVE_ELEMENT":this.removeElement(e);break;case"REMOVE_CHILD":this.removeChild(e);break;case"INSERT_BEFORE":this.insertBefore(e);break;case"SET_ATTRIBUTE":this.setAttribute(e);break;case"REMOVE_ATTRIBUTE":this.removeAttribute(e);break;default:c(this,un,"f").warn("updateLayer",`update.type unknow ${e.type}`)}}updatesLayer(t,e){c(this,un,"f").info("updatesLayer",{layerName:t,updates:e}),e.forEach((e=>this.updateLayer(t,e))),this.clearPendingStroke()}clearPendingStroke(){c(this,un,"f").info("clearPendingStroke");const t=this.context.parent.querySelector("#pendingStrokes");t&&(t.innerHTML="")}drawPendingStroke(t){if(c(this,un,"f").info("drawPendingStroke",{stroke:t}),t){const e=this.context.parent.querySelector("#pendingStrokes");if(e){const n=e.querySelector(`#${null==t?void 0:t.id}`);n&&n.remove(),this.drawStroke(e,t)}}}clearErasingStrokes(){this.context.parent.querySelectorAll("[type=eraser]").forEach((t=>{t.remove()}))}resize(t){c(this,un,"f").info("resize",{model:t});const e=this.context.parent.getBoundingClientRect(),n=this.context.parent.querySelectorAll("svg"),i=Math.max(e.width,t.width),r=Math.max(e.height,t.height);n.forEach((t=>{t.setAttribute("viewBox",`0 0 ${i}, ${r}`),t.setAttribute("width",`${i}px`),t.setAttribute("height",`${r}px`)}))}destroy(){var t;c(this,un,"f").info("destroy",{context:this.context}),(null===(t=this.context)||void 0===t?void 0:t.parent)&&this.context.parent.querySelectorAll("svg").forEach((t=>t.remove()))}}un=new WeakMap;class jn{constructor(t,e){dn.set(this,g.getLogger(d.CONVERTER)),c(this,dn,"f").info("constructor"),this.behaviors=t,this.fontSize=null==e?void 0:e.size,this.fontWeight=null==e?void 0:e.weight}get model(){return this.behaviors.model}get rowHeight(){return this.behaviors.configuration.rendering.guides.gap}computeFontSize(t){if(t.some((t=>t["bounding-box"]))){const e=D(w(t.map((t=>{var e;return(null===(e=t["bounding-box"])||void 0===e?void 0:e.height)||1}))));return 2*Math.round(Math.round(e*this.rowHeight)/this.rowHeight/2)}return Math.round(this.rowHeight/2)}buildChar(t,e,n){const i=t.grid.map((t=>({x:D(t.x),y:D(t.y)})));let r=this.fontWeight;r||(r=(e[0].style.width||1)>2?"bold":"normal");const o=e[0].style.color||"black";return{id:`text-char-${R()}`,label:t.label,color:o,fontSize:n,fontWeight:r,bounds:qt.createFromPoints(i)}}buildWord(t,e,n,i){const r=qt.createFromBoxes([j(t["bounding-box"])]),o=[];i=i||this.computeFontSize(e),e.forEach((t=>{const e=n.filter((e=>{var n;return null===(n=t.items)||void 0===n?void 0:n.some((t=>t["full-id"]===e.id))}));e.length&&o.push(this.buildChar(t,e,i))}));const s={x:r.xMin,y:r.yMax},a=new xe(o,s,r,n[0].style),l=n.flatMap((t=>t.decorators));if(n.forEach((t=>{const e=this.model.getRootSymbol(t.id);if((null==e?void 0:e.type)===ne.Group){const t=e,n=t.decorators.find((t=>t.kind===Rt.Highlight));n&&l.push(n);const i=t.decorators.find((t=>t.kind===Rt.Strikethrough));i&&l.push(i);const r=t.decorators.find((t=>t.kind===Rt.Surround));r&&l.push(r);const o=t.decorators.find((t=>t.kind===Rt.Underline));o&&l.push(o)}})),l.length){const t=l.find((t=>t.kind===Rt.Highlight));t&&a.decorators.push(new Ut(Rt.Highlight,t.style));const e=l.find((t=>t.kind===Rt.Strikethrough));e&&a.decorators.push(new Ut(Rt.Strikethrough,e.style));const n=l.find((t=>t.kind===Rt.Surround));n&&a.decorators.push(new Ut(Rt.Surround,n.style));const i=l.find((t=>t.kind===Rt.Underline));i&&a.decorators.push(new Ut(Rt.Underline,i.style))}return a}convertText(t,e,n){var i;if(!t.words)throw new Error("You need to active configuration.recognition.export.jiix.text.words = true");if(!t.chars)throw new Error("You need to active configuration.recognition.export.jiix.text.chars = true");if(!t.chars.some((t=>t.items)))throw new Error("You need to active configuration.recognition.export.jiix.strokes = true");const r=t.words,o=t.chars,s=[],a=j(t["bounding-box"]);let l=this.fontSize;n&&!l&&(l=2*Math.round(this.computeFontSize(o.filter((t=>{var e;return null===(e=t.items)||void 0===e?void 0:e.length})))/2));let c=!1,h=a.y+this.rowHeight,u=D((null===(i=r[0]["bounding-box"])||void 0===i?void 0:i.x)||0);return r.forEach((t=>{var i;if(" "===t.label)return void(u+=this.behaviors.texter.getSpaceWidth((null===(i=s.at(-1))||void 0===i?void 0:i.symbol.chars[0].fontSize)||this.rowHeight/2));const r=e.filter((e=>{var n;return null===(n=t.items)||void 0===n?void 0:n.some((t=>t["full-id"]===e.id))}));if(r.length){const e=o.slice(t["first-char"],(t["last-char"]||0)+1),i=this.buildWord(t,e,r,l);if(n){if(c){c=!1;const t=Math.round((i.point.y-h)/this.rowHeight)||1;h+=t*this.rowHeight,Math.abs(i.point.x-a.x)<2*this.behaviors.texter.getSpaceWidth(l)&&(u=a.x)}i.point.x=u,i.point.y=this.model.roundToLineGuide(h)}this.behaviors.texter.setBounds(i),u+=i.bounds.width,s.push({symbol:i,strokes:r})}c="\n"===t.label})),s}buildCircle(t,e){var n;const i={x:D(t.cx),y:D(t.cy)};return new ge(i,D(t.r),null===(n=e[0])||void 0===n?void 0:n.style)}buildEllipse(t,e){var n;const i={x:D(t.cx),y:D(t.cy)};return new me(i,D(t.rx),D(t.ry),t.orientation,null===(n=e[0])||void 0===n?void 0:n.style)}buildRectangle(t,e){var n;const i=D(t.height),r=D(t.width),o=D(t.x),s=D(t.y);return new ve([{x:o,y:s},{x:o+r,y:s},{x:o+r,y:s+i},{x:o,y:s+i}],null===(n=e[0])||void 0===n?void 0:n.style)}buildPolygon(t,e){var n;const i=[];for(let r=0;r<t.points.length;r+=2)i.push({x:D(t.points[r]),y:D(t.points[r+1])});return new ve(i,null===(n=e[0])||void 0===n?void 0:n.style)}buildRhombus(t,e){var n;const i=[];for(let r=0;r<t.points.length;r+=2)i.push({x:D(t.points[r]),y:D(t.points[r+1])});return new ve(i,null===(n=e[0])||void 0===n?void 0:n.style)}buildTriangle(t,e){var n;const i=[];for(let r=0;r<t.points.length;r+=2)i.push({x:D(t.points[r]),y:D(t.points[r+1])});return new ve(i,null===(n=e[0])||void 0===n?void 0:n.style)}buildParallelogram(t,e){var n;const i=[];for(let r=0;r<t.points.length;r+=2)i.push({x:D(t.points[r]),y:D(t.points[r+1])});return new ve(i,null===(n=e[0])||void 0===n?void 0:n.style)}convertNode(t,e){const n=e.filter((e=>{var n;return null===(n=t.items)||void 0===n?void 0:n.some((t=>t["full-id"]===e.id))}));if(!n.length)return;const i=n.filter(((t,e)=>n.findIndex((e=>t.id===e.id))===e));let r;switch(t.kind){case Dt.Circle:r=this.buildCircle(t,i);break;case Dt.Ellipse:r=this.buildEllipse(t,i);break;case Dt.Rectangle:r=this.buildRectangle(t,i);break;case Dt.Triangle:r=this.buildTriangle(t,i);break;case Dt.Parallelogram:r=this.buildParallelogram(t,i);break;case Dt.Polygon:r=this.buildPolygon(t,i);break;case Dt.Rhombus:r=this.buildRhombus(t,i);break;default:return void c(this,dn,"f").warn("convertNode",`Conversion of Node with kind equal to ${JSON.stringify(t)} is unknow`)}return{symbol:r,strokes:i}}buildLine(t,e){var n;const i={x:D(t.x1),y:D(t.y1)},r={x:D(t.x2),y:D(t.y2)},o=S(i,r);return Math.abs(o%Math.PI)<.1?(i.y=+((i.y+r.y)/2).toFixed(3),r.y=i.y):Math.abs(o%(Math.PI/2))<.1&&(i.x=+((i.x+r.x)/2).toFixed(3),r.x=i.x),new de(i,r,t.p1Decoration,t.p2Decoration,null===(n=e[0])||void 0===n?void 0:n.style)}buildPolyEdge(t,e){var n;const i={x:D(t.edges[0].x1),y:D(t.edges[0].y1)},r=t.edges.map((t=>({x:D(t.x2),y:D(t.y2)})));r.unshift(i);for(let o=0;o<r.length-1;o++){const t=r[o],e=r[o+1],n=S(t,e);Math.abs(n%Math.PI)<.1?(t.y=+((t.y+e.y)/2).toFixed(3),e.y=t.y):Math.abs(n%(Math.PI/2))<.1&&(t.x=+((t.x+e.x)/2).toFixed(3),e.x=t.x)}return new pe(r,t.edges[0].p1Decoration,t.edges.at(-1).p2Decoration,null===(n=e[0])||void 0===n?void 0:n.style)}buildArc(t,e){var n;const i={x:D(t.cx),y:D(t.cy)},r=D(t.rx),o=D(t.ry);return new ue(i,t.startAngle,t.sweepAngle,r,o,t.phi,t.startDecoration,t.endDecoration,null===(n=e[0])||void 0===n?void 0:n.style)}convertEdge(t,e){switch(t.kind){case jt.Line:{const n=e.filter((e=>{var n;return null===(n=t.items)||void 0===n?void 0:n.some((t=>t["full-id"]===e.id))}));if(!n.length)return;const i=n.filter(((t,e)=>n.findIndex((e=>t.id===e.id))===e));return{symbol:this.buildLine(t,i),strokes:i}}case jt.Arc:{const n=e.filter((e=>{var n;return null===(n=t.items)||void 0===n?void 0:n.some((t=>t["full-id"]===e.id))}));if(!n.length)return;const i=n.filter(((t,e)=>n.findIndex((e=>t.id===e.id))===e));return{symbol:this.buildArc(t,i),strokes:i}}case jt.PolyEdge:{const n=e.filter((e=>{var n;return null===(n=t.edges.flatMap((t=>t.items)))||void 0===n?void 0:n.some((t=>t["full-id"]===e.id))}));if(!n.length)return;const i=n.filter(((t,e)=>n.findIndex((e=>t.id===e.id))===e));return{symbol:this.buildPolyEdge(t,i),strokes:i}}default:return void c(this,dn,"f").error("convertEdge",`Conversion of Edge with kind equal to ${JSON.stringify(t)} is unknow`)}}apply(t=[]){var e,n,i,r;return l(this,void 0,void 0,(function*(){c(this,dn,"f").info("convert"),(null===(e=this.model.exports)||void 0===e?void 0:e["application/vnd.myscript.jiix"])||(yield this.behaviors.export(["application/vnd.myscript.jiix"])),this.behaviors.selector.removeSelectedGroup();const o=null===(n=this.model.exports)||void 0===n?void 0:n["application/vnd.myscript.jiix"];if(null===(i=null==o?void 0:o.elements)||void 0===i?void 0:i.length){const e=this.behaviors.extractStrokesFromSymbols(t.length?t:this.model.symbols),n=!(null===(r=o.elements)||void 0===r?void 0:r.some((t=>"Text"!==t.type))),i=[];o.elements.forEach((t=>{switch(t.type){case"Text":{const r=this.convertText(t,e,n);r&&i.push(...r);break}case"Node":{const n=this.convertNode(t,e);n&&i.push(n);break}case"Edge":{const n=this.convertEdge(t,e);n&&i.push(n);break}default:c(this,dn,"f").warn("buildConversions",`Unknow jiix element type: ${t.type}`)}})),this.behaviors.addSymbols(i.map((t=>t.symbol)),!1),this.behaviors.removeSymbols(i.flatMap((t=>t.strokes.map((t=>t.id)))),!1),this.behaviors.history.push(this.model,{added:i.map((t=>t.symbol)),erased:i.flatMap((t=>t.strokes))})}}))}}dn=new WeakMap,function(t){t.Select="select",t.Surround="surround",t.Highlight="highlight"}(pn||(pn={})),function(t){t.Erase="erase",t.Draw="draw"}(fn||(fn={})),function(t){t.LineBreak="line-break",t.Insert="insert"}(mn||(mn={}));class Rn{constructor(t,e){gn.set(this,g.getLogger(d.GESTURE)),this.insertAction=mn.LineBreak,this.surroundAction=pn.Select,this.strikeThroughAction=fn.Draw,c(this,gn,"f").info("constructor"),this.behaviors=t,this.surroundAction=(null==e?void 0:e.surround)||pn.Select,this.strikeThroughAction=(null==e?void 0:e.strikeThrough)||fn.Draw,this.insertAction=(null==e?void 0:e.insert)||mn.LineBreak}get renderer(){return this.behaviors.renderer}get recognizer(){return this.behaviors.recognizer}get translator(){return this.behaviors.translator}get texter(){return this.behaviors.texter}get model(){return this.behaviors.model}get history(){return this.behaviors.history}get currentStyle(){return this.behaviors.styler.currentPenStyle}get rowHeight(){return this.behaviors.configuration.rendering.guides.gap}get strokeSpaceWidth(){return this.behaviors.configuration.rendering.guides.gap/2}applySurroundGesture(t,e){return l(this,void 0,void 0,(function*(){c(this,gn,"f").info("applySurroundGesture",{gestureStroke:t,gesture:e});const n={},r=this.model.symbols.filter((e=>t.bounds.contains(e.bounds))).map((t=>t.id));switch(this.surroundAction){case pn.Select:r.length&&(this.behaviors.internalEvent.emitIntention(i.Select),this.behaviors.select(r));break;case pn.Highlight:{const t=[];n.decorator=[],r.forEach((e=>{const i=this.model.getRootSymbol(e);if(i&&[ne.Group,ne.Stroke,ne.Text].includes(i.type)&&!t.includes(i.id)){const e=i,r=new Ut(Rt.Highlight,this.currentStyle),o=e.decorators.findIndex((t=>t.kind===Rt.Highlight)),s=-1===o;s?e.decorators.push(r):e.decorators.splice(o,1),this.model.updateSymbol(e),this.renderer.drawSymbol(e),t.push(e.id),n.decorator.push({symbol:e,decorator:r,added:s})}})),n.decorator.length&&this.history.push(this.model,n);break}case pn.Surround:{const t=[];n.decorator=[],r.forEach((e=>{const i=this.model.getRootSymbol(e);if(i&&[ne.Group,ne.Stroke,ne.Text].includes(i.type)&&!t.includes(i.id)){const e=i,r=new Ut(Rt.Surround,this.currentStyle),o=e.decorators.findIndex((t=>t.kind===Rt.Surround)),s=-1===o;s?e.decorators.push(r):e.decorators.splice(o,1),this.model.updateSymbol(e),this.renderer.drawSymbol(e),n.decorator.push({symbol:e,decorator:r,added:s}),t.push(e.id)}})),this.history.push(this.model,n);break}default:c(this,gn,"f").error("applySurroundGesture",`Unknow surroundAction: ${this.surroundAction}, values allowed are: ${pn.Highlight}, ${pn.Select}, ${pn.Surround}`)}}))}computeScratchOnStrokes(t,e){var n;const i=[],r=null===(n=t.subStrokes)||void 0===n?void 0:n.find((t=>t.fullStrokeId===e.id));if(r){const t=new ye;r.x.forEach(((e,n)=>t.addPointer({x:e,y:r.y[n],p:1,t:1})));const n=ye.substract(e,t);n.before&&i.push(n.before),n.after&&i.push(n.after)}return i}computeScratchOnText(t,e){const n=e.getCharsOverlaps(t.pointers);return e.chars.length==n.length?void 0:(n.forEach((t=>{const n=e.chars.findIndex((e=>e.id===t.id));e.chars.splice(n,1)})),this.texter.updateBounds(e),e)}computeScratchOnSymbol(t,e,n){switch(n.type){case ne.Stroke:{const t=this.computeScratchOnStrokes(e,n);return t.length?{replaced:t}:{erased:!0}}case ne.Group:{const i=n.extractSymbols().filter((e=>!t.bounds.overlaps(e.bounds))),r=n.extractSymbols().filter((e=>t.bounds.overlaps(e.bounds))).map((n=>({symbol:n,result:this.computeScratchOnSymbol(t,e,n)})));if(0===i.length&&r.every((t=>t.result.erased)))return{erased:!0};{const t=i;r.forEach((e=>{e.result.replaced&&t.push(...e.result.replaced)}));const e=new we(t,n.style);return e.decorators=n.decorators,{replaced:[e]}}}case ne.Text:{const e=this.computeScratchOnText(t,n);return e?{replaced:[e]}:{erased:!0}}case ne.Shape:case ne.Edge:return{erased:!0}}}applyScratch(t,e){return l(this,void 0,void 0,(function*(){if(c(this,gn,"f").debug("applyScratchGesture",{gestureStroke:t,gesture:e}),!e.strokeIds.length)return void c(this,gn,"f").warn("applyScratchGesture","Unable to apply underline because there are no strokes");const n=[],i=[],r={oldSymbols:[],newSymbols:[]};e.strokeIds.forEach((n=>{const o=this.model.getRootSymbol(n);if(o&&!i.some((t=>t.id===o.id))&&!r.oldSymbols.some((t=>t.id===o.id))){const n=this.computeScratchOnSymbol(t,e,o);n.erased?i.push(o):n.replaced&&(r.newSymbols.push(...n.replaced),r.oldSymbols.push(o))}}));const o=[],s={};n.length&&(o.push(this.behaviors.updateSymbols(n,!1)),s.updated=n),i.length&&(o.push(this.behaviors.removeSymbols(i.map((t=>t.id)),!1)),s.erased=i),r.newSymbols.length&&(s.replaced=r,o.push(this.behaviors.replaceSymbols(r.oldSymbols,r.newSymbols,!1))),this.history.push(this.model,s),yield Promise.all(o)}))}applyJoinGesture(t,e){var n;return l(this,void 0,void 0,(function*(){c(this,gn,"f").debug("applyJoinGesture",{gestureStroke:t,gesture:e});const i=this.model.symbols.filter((e=>this.model.isSymbolAbove(t,e))),r=this.model.symbols.filter((e=>t.id!==e.id&&this.model.isSymbolInRow(t,e))),o=r.filter((e=>e.bounds.xMax<=t.bounds.xMid)),s=r.filter((e=>e.bounds.xMax>t.bounds.xMid&&e.bounds.xMin<=t.bounds.xMid)),a=r.filter((e=>e.bounds.xMin>t.bounds.xMid)),l=this.model.symbols.filter((e=>this.model.isSymbolBelow(t,e))),h={},u=[];if(s.length){const e=s[0];if((null==e?void 0:e.type)===ne.Group){const n=e.extractSymbols().map((t=>t.clone())),i=n.filter((e=>e.bounds.xMid<=t.bounds.xMid)),r=n.filter((e=>e.bounds.xMid>t.bounds.xMid));if(i.length&&r.length){const t=Math.max(...i.map((t=>t.bounds.xMax)))-Math.min(...r.map((t=>t.bounds.xMin)));r.forEach((e=>this.translator.applyToSymbol(e,t,0)));const o=new we(n,e.style);o.decorators=e.decorators.map((t=>t.clone())),h.replaced={oldSymbols:[e],newSymbols:[o]},a.length&&u.push({symbols:a,tx:t,ty:0});const s=l.filter((t=>this.model.isSymbolBelow(e,t)));s.length&&u.push({symbols:s,tx:0,ty:-this.rowHeight})}else if(a.length){const t=e.bounds.xMax-Math.min(...a.map((t=>t.bounds.xMin)));u.push({symbols:a,tx:t,ty:0})}}}else if(o.length&&a.length){const t=this.model.getLastSymbol(o),e=this.model.getFirstSymbol(a),n=Math.max(...o.map((t=>t.bounds.xMax)))-Math.min(...a.map((t=>t.bounds.xMin))),i=t.clone(),r=e.clone();this.translator.applyToSymbol(r,n,0);const s=t.type===ne.Group?i.extractSymbols():[i];if(s.push(...r.type===ne.Group?r.extractSymbols():[r]),s.every((t=>t.type===ne.Text))){const n=s,i=new xe(n.flatMap((t=>t.chars)),n[0].point,qt.createFromBoxes(n.map((t=>t.bounds))));this.texter.setBounds(i),h.replaced={oldSymbols:[t,e],newSymbols:[i]}}else{const n=new we(s,t.style);[ne.Group,ne.Stroke,ne.Text].includes(t.type)&&t.decorators.forEach((t=>{n.decorators.push(new Ut(t.kind,t.style))})),[ne.Group,ne.Stroke,ne.Text].includes(e.type)&&e.decorators.forEach((t=>{n.decorators.some((e=>e.kind==t.kind))||n.decorators.push(new Ut(t.kind,t.style))})),h.replaced={oldSymbols:[t,e],newSymbols:[n]}}const l=a.filter((t=>t.id!==e.id));l.length&&u.push({symbols:l,tx:n,ty:0})}else if(o.length){const t=this.model.getLastSymbol(o),e=this.model.getFirstSymbol(l);if(e){if(this.model.roundToLineGuide(t.bounds.yMid)>=this.model.roundToLineGuide(e.bounds.yMid-this.rowHeight)){const n=l.filter((t=>this.model.isSymbolInRow(e,t)));if(n.length){const i=t.bounds.xMax+this.strokeSpaceWidth-e.bounds.xMin;u.push({symbols:n,tx:i,ty:-this.rowHeight})}const i=l.filter((t=>this.model.isSymbolBelow(e,t)));i.length&&u.push({symbols:i,tx:0,ty:-this.rowHeight})}}else u.push({symbols:l,tx:0,ty:-this.rowHeight})}else if(a.length){const t=this.model.getFirstSymbol(a),e=this.model.getLastSymbol(i);if(e){if(this.model.roundToLineGuide(e.bounds.yMid)>=this.model.roundToLineGuide(t.bounds.yMid-this.rowHeight)){const n=e.bounds.xMax+this.strokeSpaceWidth-t.bounds.xMin;u.push({symbols:a,tx:n,ty:-this.rowHeight})}else u.push({symbols:a,tx:0,ty:-this.rowHeight});l.length&&u.push({symbols:l,tx:0,ty:-this.rowHeight})}else u.push({symbols:a.concat(...l),tx:0,ty:-this.rowHeight})}(null===(n=h.replaced)||void 0===n?void 0:n.oldSymbols.length)&&this.behaviors.replaceSymbols(h.replaced.oldSymbols,h.replaced.newSymbols,!1),u.length&&(h.translate=u,Promise.all(u.map((t=>this.translator.translate(t.symbols,t.tx,t.ty,!1))))),this.history.push(this.model,h)}))}createStrokesFromGestureSubStroke(t,e){const n=[];if(e[0]){const i=new ye(t.style);e[0].x.forEach(((n,r)=>{var o,s;i.pointers.push({x:n,y:e[0].y[r],p:(null===(o=t.pointers.at(r))||void 0===o?void 0:o.p)||1,t:(null===(s=t.pointers.at(r))||void 0===s?void 0:s.t)||Math.max(...i.pointers.map((t=>t.t+20)))})})),n.push(i)}if(e[1]){const i=new ye(t.style);e[1].x.forEach(((n,r)=>{var o,s;i.pointers.push({x:n,y:e[1].y[r],p:(null===(o=t.pointers.at(i.pointers.length+r))||void 0===o?void 0:o.p)||1,t:(null===(s=t.pointers.at(i.pointers.length+r))||void 0===s?void 0:s.t)||Math.max(...i.pointers.map((t=>t.t+20)))})})),n.push(i)}return n}computeSplitStroke(t,e){let n;const i=this.createStrokesFromGestureSubStroke(t,e);return i[1]&&(n=i[1],this.translator.applyToSymbol(n,this.strokeSpaceWidth,0)),{before:i[0],after:n}}computeSplitStrokeInGroup(t,e,n){const i=[],r=e.extractSymbols(),o=[],s=[],a=n[0].fullStrokeId;return r.forEach((e=>{if(e.id===a){const t=this.computeSplitStroke(e,n);t.before&&o.push(t.before),t.after&&s.push(t.after)}else e.bounds.xMid<t.bounds.xMid?o.push(e):e.bounds.xMid>t.bounds.xMid&&(this.translator.applyToSymbol(e,this.strokeSpaceWidth,0),s.push(e))})),o.length&&i.push(new we(o,e.style)),s.length&&i.push(new we(s,e.style)),i}computeChangesOnSplitStroke(t,e,n){const i=[],r={oldSymbols:[],newSymbols:[]},o=this.model.symbols.filter((e=>t.id!==e.id&&this.model.isSymbolInRow(t,e)&&t.bounds.xMid<e.bounds.xMin)),s=this.model.getRootSymbol(e);if((null==s?void 0:s.type)===ne.Group){const e=this.computeSplitStrokeInGroup(t,s,n);r.newSymbols.push(...e),r.oldSymbols.push(s)}else if((null==s?void 0:s.type)===ne.Stroke){const t=this.computeSplitStroke(s,n);t.before&&r.newSymbols.push(t.before),t.after&&r.newSymbols.push(t.after),r.oldSymbols.push(s)}return o.length&&i.push({symbols:o,tx:this.strokeSpaceWidth,ty:0}),{translate:i,replaced:r}}computeChangesOnSplitGroup(t,e){const n=[],i={oldSymbols:[],newSymbols:[]},r=this.model.symbols.filter((e=>t.id!==e.id&&this.model.isSymbolInRow(t,e)&&t.bounds.xMid<e.bounds.xMin)),o=e.children.filter((e=>e.bounds.xMid<=t.bounds.xMid)),s=e.children.filter((e=>e.bounds.xMid>t.bounds.xMid));if(i.oldSymbols.push(e),o.length){const t=new we(o.map((t=>t.clone())),e.style);t.decorators=e.decorators.map((t=>new Ut(t.kind,t.style))),i.newSymbols.push(t)}if(s.length){const t=new we(s.map((t=>t.clone())),e.style);t.decorators=e.decorators.map((t=>new Ut(t.kind,t.style))),this.translator.applyToSymbol(t,this.strokeSpaceWidth,0),i.newSymbols.push(t)}return(null==r?void 0:r.length)&&n.push({symbols:r.filter((t=>t.id!==e.id)),tx:this.strokeSpaceWidth,ty:0}),{translate:n,replaced:i}}computeChangesOnSplitText(t,e){const n=[],i={oldSymbols:[],newSymbols:[]},r=this.model.symbols.filter((e=>t.id!==e.id&&this.model.isSymbolInRow(t,e)&&t.bounds.xMid<e.bounds.xMin)),o=e.chars.filter((e=>e.bounds.x+e.bounds.width/2<=t.bounds.xMid)),s=e.chars.filter((e=>e.bounds.x+e.bounds.width/2>t.bounds.xMid)),a=[];if(o.length&&s.length){const t=new xe(o,e.point,qt.createFromBoxes(o.map((t=>t.bounds))));this.texter.setBounds(t),a.push(t);const n={x:t.point.x+t.bounds.width+this.texter.getSpaceWidth(w(t.chars.map((t=>t.fontSize)))),y:t.point.y},r=new xe(s,n,qt.createFromBoxes(s.map((t=>t.bounds))));this.texter.setBounds(r),a.push(r),i.newSymbols=a,i.oldSymbols=[e]}return(null==r?void 0:r.length)&&n.push({symbols:r.filter((e=>e.id!==t.id)),tx:this.strokeSpaceWidth,ty:0}),{translate:n,replaced:i}}applyInsertGesture(t,e){var n,i,r;return l(this,void 0,void 0,(function*(){c(this,gn,"f").debug("applyInsertGesture",{gestureStroke:t,gesture:e});const o=this.model.symbols.filter((e=>t.id!==e.id&&this.model.isSymbolInRow(t,e))),s=o.find((e=>e.type===ne.Text&&b(t.bounds.xMid,e.bounds.xMin,e.bounds.xMax))),a=o.find((e=>e.type===ne.Group&&b(t.bounds.xMid,e.bounds.xMin,e.bounds.xMax))),l=o.filter((e=>t.bounds.xMid>e.bounds.xMax)),h=o.filter((e=>t.bounds.xMid<e.bounds.xMin)),u=this.model.symbols.filter((e=>this.model.isSymbolBelow(t,e)));let d;if(e.strokeIds.length&&(null===(n=e.subStrokes)||void 0===n?void 0:n.length))d=this.computeChangesOnSplitStroke(t,e.strokeIds[0],e.subStrokes);else if(a)d=this.computeChangesOnSplitGroup(t,a);else if(s)d=this.computeChangesOnSplitText(t,s);else if(h.length){const t=[];let e=0;switch(l.length&&(e=Math.min(...l.map((t=>t.bounds.xMin)))-Math.min(...h.map((t=>t.bounds.xMin)))),this.insertAction){case mn.LineBreak:t.push({symbols:h,tx:e,ty:this.rowHeight}),u.length&&t.push({symbols:u,tx:0,ty:this.rowHeight});break;case mn.Insert:t.push({symbols:h,tx:2*this.strokeSpaceWidth,ty:0})}d={translate:t}}else l.length&&u.length&&this.insertAction===mn.LineBreak&&(d={translate:[{symbols:u,tx:0,ty:this.rowHeight}]});if(d){const t=[];(null===(i=d.translate)||void 0===i?void 0:i.length)&&t.push(...d.translate.map((t=>this.translator.translate(t.symbols,t.tx,t.ty,!1)))),(null===(r=d.replaced)||void 0===r?void 0:r.newSymbols.length)&&t.push(this.behaviors.replaceSymbols(d.replaced.oldSymbols,d.replaced.newSymbols,!1)),this.history.push(this.model,d),yield Promise.all(t)}}))}applyUnderlineGesture(t,e){var n;return l(this,void 0,void 0,(function*(){if(c(this,gn,"f").debug("applyUnderlineGesture",{gestureStroke:t,gesture:e}),!e.strokeIds.length)return void c(this,gn,"f").warn("applyUnderlineGesture","Unable to apply underline because there are no strokes");const i={decorator:[]},r=[];e.strokeIds.forEach((t=>{var e;const n=this.model.getRootSymbol(t);if(n&&[ne.Group,ne.Stroke,ne.Text].includes(n.type)&&!r.includes(n.id)){const t=n,o=new Ut(Rt.Underline,this.currentStyle),s=t.decorators.findIndex((t=>t.kind===Rt.Underline)),a=-1===s;a?t.decorators.push(o):t.decorators.splice(s,1),this.model.updateSymbol(t),this.renderer.drawSymbol(t),null===(e=i.decorator)||void 0===e||e.push({symbol:t,decorator:o,added:a}),r.push(t.id)}})),(null===(n=i.decorator)||void 0===n?void 0:n.length)&&this.history.push(this.model,i)}))}applyStrikeThroughGesture(t,e){var n;return l(this,void 0,void 0,(function*(){if(c(this,gn,"f").debug("applyStrikeThroughGesture",{gestureStroke:t,gesture:e}),e.strokeIds.length)switch(this.strikeThroughAction){case fn.Draw:{const t={decorator:[]},i=[];e.strokeIds.forEach((e=>{var n;const r=this.model.getRootSymbol(e);if(r&&[ne.Group,ne.Stroke,ne.Text].includes(r.type)&&!i.includes(r.id)){const e=r,o=new Ut(Rt.Strikethrough,this.currentStyle),s=e.decorators.findIndex((t=>t.kind===Rt.Strikethrough)),a=-1===s;a?e.decorators.push(o):e.decorators.splice(s,1),this.model.updateSymbol(e),this.renderer.drawSymbol(e),null===(n=t.decorator)||void 0===n||n.push({symbol:e,decorator:o,added:a}),i.push(e.id)}})),(null===(n=t.decorator)||void 0===n?void 0:n.length)&&this.history.push(this.model,t);break}case fn.Erase:return this.behaviors.removeSymbols(e.strokeIds);default:c(this,gn,"f").warn("#applyStrikeThroughGesture",`Unknow OnStrikeThrough: ${this.strikeThroughAction}, values allowed are: ${fn.Draw}, ${fn.Erase}`)}else c(this,gn,"f").warn("applyStrikeThroughGesture","Unable to apply strikethrough because there are no strokes")}))}apply(t,e){return l(this,void 0,void 0,(function*(){switch(c(this,gn,"f").info("apply",{gestureStroke:t,gesture:e}),this.behaviors.updateSymbolsStyle([t.id],{opacity:(t.style.opacity||1)/2},!1),yield this.behaviors.groupStrokesByJIIXElement(),yield this.behaviors.removeSymbol(t.id,!1),e.gestureType){case"UNDERLINE":yield this.applyUnderlineGesture(t,e);break;case"SCRATCH":yield this.applyScratch(t,e);break;case"JOIN":yield this.applyJoinGesture(t,e);break;case"INSERT":yield this.applyInsertGesture(t,e);break;case"STRIKETHROUGH":yield this.applyStrikeThroughGesture(t,e);break;case"SURROUND":yield this.applySurroundGesture(t,e);break;default:c(this,gn,"f").warn("apply",`Gesture unknow: ${e.gestureType}`)}return this.behaviors.svgDebugger.apply(),Promise.resolve()}))}getGestureFromContextLess(t){return l(this,void 0,void 0,(function*(){const e=yield this.recognizer.recognizeGesture(t);if(e)switch(e.gestureType){case"surround":return this.model.symbols.some((e=>!(e.id===t.id||!t.bounds.contains(e.bounds))&&(this.surroundAction===pn.Select||[ne.Group,ne.Stroke,ne.Text].includes(e.type))))?{gestureType:"SURROUND",gestureStrokeId:t.id,strokeAfterIds:[],strokeBeforeIds:[],strokeIds:[]}:void 0;case"left-right":case"right-left":{const e=this.model.symbols.filter((e=>[ne.Text,ne.Stroke,ne.Group].includes(e.type)&&b(e.bounds.xMid,t.bounds.xMin,t.bounds.xMax)&&b(t.bounds.yMid,e.bounds.y+3*e.bounds.height/4,e.bounds.y+5*e.bounds.height/4)));if(e.length)return{gestureType:"UNDERLINE",gestureStrokeId:t.id,strokeAfterIds:[],strokeBeforeIds:[],strokeIds:e.map((t=>t.id))};const n=this.model.symbols.filter((e=>[ne.Text,ne.Stroke,ne.Group].includes(e.type)&&b(e.bounds.xMid,t.bounds.xMin,t.bounds.xMax)&&b(t.bounds.yMid,e.bounds.y+e.bounds.height/4,e.bounds.y+3*e.bounds.height/4)));return n.length?{gestureType:"STRIKETHROUGH",gestureStrokeId:t.id,strokeAfterIds:[],strokeBeforeIds:[],strokeIds:n.map((t=>t.id))}:void 0}case"scratch":{const e=this.model.symbols.filter((e=>e.id!==t.id&&(t.bounds.overlaps(e.bounds)&&[ne.Stroke,ne.Text,ne.Group].includes(e.type)||t.bounds.contains(e.bounds)&&[ne.Shape,ne.Edge].includes(e.type))));return e.length?{gestureType:"SCRATCH",gestureStrokeId:t.id,strokeAfterIds:[],strokeBeforeIds:[],strokeIds:e.map((t=>t.id))}:void 0}case"bottom-top":return this.model.symbols.some((e=>e.id!==t.id&&[ne.Text,ne.Stroke,ne.Group].includes(e.type)&&b(e.bounds.yMid,t.bounds.yMin,t.bounds.yMax)))?{gestureType:"JOIN",gestureStrokeId:t.id,strokeAfterIds:[],strokeBeforeIds:[],strokeIds:[]}:void 0;case"top-bottom":return this.model.symbols.some((e=>e.id!==t.id&&[ne.Text,ne.Stroke,ne.Group].includes(e.type)&&b(e.bounds.yMid,t.bounds.yMin,t.bounds.yMax)))?{gestureType:"INSERT",gestureStrokeId:t.id,strokeAfterIds:[],strokeBeforeIds:[],strokeIds:[]}:void 0;default:return}}))}}gn=new WeakMap;class Fn{constructor(t){vn.set(this,g.getLogger(d.TRANSFORMER)),this.keepRatio=!1,c(this,vn,"f").info("constructor"),this.behaviors=t}get model(){return this.behaviors.model}applyToStroke(t,e,n,i){return c(this,vn,"f").debug("applyToStroke",{stroke:t,origin:e,scaleX:n,scaleY:i}),t.pointers.forEach((t=>{t.x=+(e.x+n*(t.x-e.x)).toFixed(3),t.y=+(e.y+i*(t.y-e.y)).toFixed(3)})),t}applyToShape(t,e,n,i){switch(c(this,vn,"f").debug("applyToShape",{shape:t,origin:e,scaleX:n,scaleY:i}),t.kind){case oe.Ellipse:{const r=Math.cos(t.orientation),o=Math.sin(t.orientation);return t.center.x=+(t.center.x+((n-1)*r+(i-1)*o)*(t.center.x-e.x)).toFixed(3),t.center.y=+(t.center.y+((n-1)*-o+(i-1)*r)*(t.center.y-e.y)).toFixed(3),t.radiusX=+Math.abs(t.radiusX*(n*r-i*o)).toFixed(3),t.radiusY=+Math.abs(t.radiusY*(n*o+i*r)).toFixed(3),t}case oe.Circle:return t.radius=+(t.radius*(n+i)/2).toFixed(3),t.center.x=+(e.x+n*(t.center.x-e.x)).toFixed(3),t.center.y=+(e.y+i*(t.center.y-e.y)).toFixed(3),t;case oe.Polygon:return t.points.forEach((t=>{t.x=+(e.x+n*(t.x-e.x)).toFixed(3),t.y=+(e.y+i*(t.y-e.y)).toFixed(3)})),t;default:throw new Error(`Can't apply resize on shape, kind unknow: ${JSON.stringify(t)}`)}}applyToEdge(t,e,n,i){switch(c(this,vn,"f").debug("applyToEdge",{edge:t,origin:e,scaleX:n,scaleY:i}),t.kind){case ie.Arc:{const r=Math.cos(t.phi),o=Math.sin(t.phi);return t.center.x=+(t.center.x+((n-1)*r+(i-1)*o)*(t.center.x-e.x)).toFixed(3),t.center.y=+(t.center.y+((n-1)*-o+(i-1)*r)*(t.center.y-e.y)).toFixed(3),t.radiusX=+(t.radiusX*Math.abs(n*r+i*o)).toFixed(3),t.radiusY=+(t.radiusY*Math.abs(n*o+i*r)).toFixed(3),n<0?(t.startAngle=+(Math.PI-t.startAngle).toFixed(3),t.sweepAngle*=-1):i<0&&(t.sweepAngle*=-1),t}case ie.Line:return t.start.x=+(e.x+n*(t.start.x-e.x)).toFixed(3),t.start.y=+(e.y+i*(t.start.y-e.y)).toFixed(3),t.end.x=+(e.x+n*(t.end.x-e.x)).toFixed(3),t.end.y=+(e.y+i*(t.end.y-e.y)).toFixed(3),t;case ie.PolyEdge:return t.points.forEach((t=>(t.x=+(e.x+n*(t.x-e.x)).toFixed(3),t.y=+(e.y+i*(t.y-e.y)).toFixed(3),t))),t;default:throw new Error(`Can't apply resize on edge, kind unknow: ${JSON.stringify(t)}`)}}applyOnText(t,e,n,i){return t.point.x=+(e.x+n*(t.point.x-e.x)).toFixed(3),t.point.y=+(e.y+i*(t.point.y-e.y)).toFixed(3),t.chars.forEach((t=>{t.fontSize=+(t.fontSize*(n+i)/2).toFixed(3)})),this.behaviors.texter.updateBounds(t)}applyOnGroup(t,e,n,i){return t.children.forEach((t=>this.applyToSymbol(t,e,n,i))),t}applyToSymbol(t,e,n,i){switch(c(this,vn,"f").info("applyToSymbol",{symbol:t,scaleX:n,scaleY:i}),t.type){case ne.Stroke:return this.applyToStroke(t,e,n,i);case ne.Shape:return this.applyToShape(t,e,n,i);case ne.Edge:return this.applyToEdge(t,e,n,i);case ne.Text:return this.applyOnText(t,e,n,i);case ne.Group:return this.applyOnGroup(t,e,n,i);default:throw new Error(`Can't apply resize on symbol, type unknow: ${JSON.stringify(t)}`)}}setTransformOrigin(t,e,n){this.behaviors.renderer.setAttribute(t,"transform-origin",`${e}px ${n}px`)}scaleElement(t,e,n){c(this,vn,"f").info("scaleElement",{id:t,sx:e,sy:n}),this.behaviors.renderer.setAttribute(t,"transform",`scale(${e},${n})`)}start(t,e){c(this,vn,"f").info("start",{target:t}),this.interactElementsGroup=t.closest(`[role=${o.InteractElementsGroup}]`),this.direction=t.getAttribute("resize-direction"),this.keepRatio=this.model.symbolsSelected.some((t=>t.type===ne.Text||t.type===ne.Shape&&t.kind===oe.Circle)),this.transformOrigin=e,this.boundingBox=qt.createFromPoints(this.model.symbolsSelected.flatMap((t=>t.vertices))),this.setTransformOrigin(this.interactElementsGroup.id,this.transformOrigin.x,this.transformOrigin.y),this.model.symbolsSelected.forEach((t=>{this.setTransformOrigin(t.id,this.transformOrigin.x,this.transformOrigin.y)})),this.behaviors.selector.hideInteractElements()}continue(t){if(c(this,vn,"f").info("continue",{point:t}),!this.interactElementsGroup)throw new Error("Can't resize, you must call start before");const e=t,n=["e-resize","ne-resize","se-resize","w-resize","nw-resize","sw-resize"].includes(this.direction),i=["n-resize","ne-resize","nw-resize","s-resize","se-resize","sw-resize"].includes(this.direction),{x:r,y:o}=this.behaviors.snaps.snapResize(t,n,i);e.x=r,e.y=o;let s=0,a=0;["e-resize","ne-resize","se-resize"].includes(this.direction)?s=e.x-this.boundingBox.xMax:["w-resize","nw-resize","sw-resize"].includes(this.direction)&&(s=this.boundingBox.xMin-e.x),["n-resize","ne-resize","nw-resize"].includes(this.direction)?a=this.boundingBox.yMin-e.y:["s-resize","se-resize","sw-resize"].includes(this.direction)&&(a=e.y-this.boundingBox.yMax);let l=this.boundingBox.width?1+s/this.boundingBox.width:1,h=this.boundingBox.height?1+a/this.boundingBox.height:1;return this.keepRatio&&(["n-resize","s-resize"].includes(this.direction)?l=h:(["e-resize","w-resize"].includes(this.direction)||(l=Math.max(l,h)),h=l)),this.scaleElement(this.interactElementsGroup.id,l,h),this.model.symbolsSelected.forEach((t=>{this.scaleElement(t.id,l,h)})),{scaleX:l,scaleY:h}}end(t){return l(this,void 0,void 0,(function*(){c(this,vn,"f").info("end",{point:t});const{scaleX:e,scaleY:n}=this.continue(t);this.behaviors.snaps.clearSnapToElementLines();const i=this.model.symbolsSelected.map((t=>t.clone()));this.model.symbolsSelected.forEach((t=>{this.applyToSymbol(t,this.transformOrigin,e,n),this.behaviors.renderer.drawSymbol(t),this.model.updateSymbol(t)}));const r=this.behaviors.extractStrokesFromSymbols(this.model.symbolsSelected);this.behaviors.recognizer.transformScale(r.map((t=>t.id)),e,n,this.transformOrigin.x,this.transformOrigin.y),this.behaviors.history.push(this.model,{scale:[{symbols:i,origin:Object.assign({},this.transformOrigin),scaleX:e,scaleY:n}]}),this.behaviors.selector.resetSelectedGroup(this.model.symbolsSelected),this.interactElementsGroup=void 0,this.behaviors.selector.showInteractElements(),this.behaviors.svgDebugger.apply()}))}}vn=new WeakMap;class Bn{constructor(t){yn.set(this,g.getLogger(d.TRANSFORMER)),c(this,yn,"f").info("constructor"),this.behaviors=t}get model(){return this.behaviors.model}applyToStroke(t,e,n){return t.pointers.forEach((t=>{const{x:i,y:r}=E(t,e,n);t.x=i,t.y=r})),t}applyToShape(t,e,n){switch(t.kind){case oe.Ellipse:return t.center=E(t.center,e,n),t.orientation=(t.orientation+n)%(2*Math.PI),t;case oe.Circle:return t.center=E(t.center,e,n),t;case oe.Polygon:return t.points.forEach((t=>{const{x:i,y:r}=E(t,e,n);t.x=i,t.y=r})),t;default:throw new Error(`Can't apply rotate on shape, kind unknow: ${JSON.stringify(t)}`)}}applyToEdge(t,e,n){switch(t.kind){case ie.Arc:return t.phi=(t.phi-n)%(2*Math.PI),t.center=E(t.center,e,n),t;case ie.Line:return t.start=E(t.start,e,n),t.end=E(t.end,e,n),t;case ie.PolyEdge:return t.points=t.points.map((t=>E(t,e,n))),t;default:throw new Error(`Can't apply rotate on edge, kind unknow: ${JSON.stringify(t)}`)}}applyOnText(t,e,n){var i;return t.rotation={degree:k(n)+((null===(i=t.rotation)||void 0===i?void 0:i.degree)||0),center:e},this.behaviors.texter.updateBounds(t)}applyOnGroup(t,e,n){return t.children.forEach((t=>this.applyToSymbol(t,e,n))),t}applyToSymbol(t,e,n){switch(t.type){case ne.Stroke:return this.applyToStroke(t,e,n);case ne.Shape:return this.applyToShape(t,e,n);case ne.Edge:return this.applyToEdge(t,e,n);case ne.Text:return this.applyOnText(t,e,n);case ne.Group:return this.applyOnGroup(t,e,n);default:throw new Error(`Can't apply rotate on symbol, type unknow: ${JSON.stringify(t)}`)}}setTransformOrigin(t,e,n){this.behaviors.renderer.setAttribute(t,"transform-origin",`${e}px ${n}px`)}rotateElement(t,e){c(this,yn,"f").info("rotateElement",{id:t,degree:e}),this.behaviors.renderer.setAttribute(t,"transform",`rotate(${e})`)}start(t,e){c(this,yn,"f").info("start",{target:t}),this.interactElementsGroup=t.closest(`[role=${o.InteractElementsGroup}]`);const n=qt.createFromPoints(this.model.symbolsSelected.flatMap((t=>t.vertices)));this.center={x:n.xMin+n.width/2,y:n.yMid},this.origin=e,this.setTransformOrigin(this.interactElementsGroup.id,this.center.x,this.center.y),this.model.symbolsSelected.forEach((t=>{this.setTransformOrigin(t.id,this.center.x,this.center.y)})),this.behaviors.selector.hideInteractElements()}continue(t){if(c(this,yn,"f").info("continue",{point:t}),!this.interactElementsGroup)throw new Error("Can't rotate, you must call start before");let e=Math.round(k(M(this.origin,this.center,t)));return e=this.behaviors.snaps.snapRotation(e),t.x-this.center.x<0&&(e=360-e),this.rotateElement(this.interactElementsGroup.id,e),this.model.symbolsSelected.forEach((t=>{this.rotateElement(t.id,e)})),e}end(t){return l(this,void 0,void 0,(function*(){c(this,yn,"f").info("end",{point:t});const e=_(this.continue(t))%(2*Math.PI),n=this.model.symbolsSelected.map((t=>t.clone()));this.model.symbolsSelected.forEach((t=>{this.applyToSymbol(t,this.center,e),this.behaviors.renderer.drawSymbol(t),this.model.updateSymbol(t)}));const i=this.behaviors.extractStrokesFromSymbols(this.model.symbolsSelected);this.behaviors.recognizer.transformRotate(i.map((t=>t.id)),e,this.center.x,this.center.y),this.behaviors.history.push(this.model,{rotate:[{symbols:n,angle:e,center:Object.assign({},this.center)}]}),this.behaviors.selector.resetSelectedGroup(this.model.symbolsSelected),this.interactElementsGroup=void 0,this.behaviors.selector.showInteractElements(),this.behaviors.svgDebugger.apply()}))}}yn=new WeakMap;class zn{constructor(t){bn.set(this,g.getLogger(d.SELECTION)),wn.set(this,"selecting-rect"),c(this,bn,"f").info("constructor"),this.behaviors=t}get model(){return this.behaviors.model}get renderer(){return this.behaviors.renderer}get internalEvent(){return this.behaviors.internalEvent}get rotator(){return this.behaviors.rotator}get translator(){return this.behaviors.translator}get resizer(){return this.behaviors.resizer}get selectionBox(){if(this.startSelectionPoint&&this.endSelectionPoint)return qt.createFromPoints([this.startSelectionPoint,this.endSelectionPoint])}drawSelectingRect(t){this.clearSelectingRect();const e={id:c(this,wn,"f"),fill:"transparent",stroke:"grey",opacity:"0.25"};this.renderer.appendElement(en.createRect(t,e))}clearSelectingRect(){this.renderer.clearElements({attrs:{id:c(this,wn,"f")}})}getPoint(t){const{clientLeft:e,scrollLeft:n,clientTop:i,scrollTop:r}=this.renderer.parent,o=this.renderer.parent.getBoundingClientRect();return{x:t.clientX-o.left-e+n,y:t.clientY-o.top-i+r}}createTranslateRect(t){const e={role:o.Translate,style:"cursor:move",fill:"transparent",stroke:"transparent"},n={height:t.height,width:t.width,x:t.x,y:t.y},i=en.createRect(n,e),r=t=>{t.preventDefault(),t.stopPropagation(),this.translator.continue(this.getPoint(t))},s=t=>{t.preventDefault(),t.stopPropagation(),this.translator.end(this.getPoint(t)),this.renderer.layer.removeEventListener("pointermove",r),this.renderer.layer.removeEventListener("pointercancel",s),this.renderer.layer.removeEventListener("pointerleave",s),this.renderer.layer.removeEventListener("pointerup",s)};return i.addEventListener("pointerdown",(t=>{0===t.button&&1===t.buttons&&(t.preventDefault(),t.stopPropagation(),this.translator.start(t.target,this.getPoint(t)),this.renderer.layer.addEventListener("pointermove",r),this.renderer.layer.addEventListener("pointercancel",s),this.renderer.layer.addEventListener("pointerleave",s),this.renderer.layer.addEventListener("pointerup",s))})),i}createRotateGroup(t){const e=en.createGroup({role:o.Rotate,"vector-effect":"non-scaling-size",style:"cursor:pointer;",opacity:"1"}),n={x:t.x+t.width/2,y:t.y-40},i={role:o.Rotate,"stroke-width":"2",stroke:"black",fill:"white"};e.appendChild(en.createCircle(n,8,i));const r={role:o.Rotate,fill:"black"};e.appendChild(en.createCircle(n,4,r));const s={role:o.Rotate,stroke:"black","stroke-width":"2"};e.appendChild(en.createLine({x:n.x,y:n.y+8},{x:n.x,y:t.y-a},s));const l=t=>{t.preventDefault(),t.stopPropagation(),this.rotator.continue(this.getPoint(t))},c=t=>{t.preventDefault(),t.stopPropagation(),this.rotator.end(this.getPoint(t)),this.renderer.layer.removeEventListener("pointermove",l),this.renderer.layer.removeEventListener("pointercancel",c),this.renderer.layer.removeEventListener("pointerleave",c),this.renderer.layer.removeEventListener("pointerup",c)};return e.addEventListener("pointerdown",(t=>{0===t.button&&1===t.buttons&&(t.preventDefault(),t.stopPropagation(),this.rotator.start(t.target,this.getPoint(t)),this.renderer.layer.addEventListener("pointermove",l),this.renderer.layer.addEventListener("pointercancel",c),this.renderer.layer.addEventListener("pointerleave",c),this.renderer.layer.addEventListener("pointerup",c))})),e}createResizeGroup(t){const e=en.createGroup({role:o.Resize,"vector-effect":"non-scaling-size","stroke-width":"4",stroke:"#3e68ff"}),n={x:t.x-a,y:t.y-a},i={x:t.x+t.width+a,y:t.y-a},r={x:t.x+t.width+a,y:t.y+t.height+a},s={x:t.x-a,y:t.y+t.height+a},l=(t,e)=>{const n=t=>{t.preventDefault(),t.stopPropagation(),this.resizer.continue(this.getPoint(t))},i=t=>{t.preventDefault(),t.stopPropagation(),this.resizer.end(this.getPoint(t)),this.renderer.layer.removeEventListener("pointermove",n),this.renderer.layer.removeEventListener("pointercancel",i),this.renderer.layer.removeEventListener("pointerleave",i),this.renderer.layer.removeEventListener("pointerup",i)};t.addEventListener("pointerdown",(t=>{0===t.button&&1===t.buttons&&(t.preventDefault(),t.stopPropagation(),this.resizer.start(t.target,e),this.renderer.layer.addEventListener("pointermove",n),this.renderer.layer.addEventListener("pointercancel",i),this.renderer.layer.addEventListener("pointerleave",i),this.renderer.layer.addEventListener("pointerup",i))}))};return[{direction:"n-resize",p1:n,p2:i,transformOrigin:{x:t.x+t.width/2,y:t.y+t.height}},{direction:"e-resize",p1:i,p2:r,transformOrigin:{x:t.x,y:t.y+t.height/2}},{direction:"s-resize",p1:s,p2:r,transformOrigin:{x:t.x+t.width/2,y:t.y}},{direction:"w-resize",p1:n,p2:s,transformOrigin:{x:t.x+t.width,y:t.y+t.height/2}}].forEach((t=>{const n={role:o.Resize,"resize-direction":t.direction,"transform-origin":JSON.stringify(t.transformOrigin),style:`cursor:${t.direction};`},i=en.createLine(t.p1,t.p2,n);l(i,t.transformOrigin),e.appendChild(i)})),[{direction:"nw-resize",p:n,transformOrigin:{x:t.x+t.width,y:t.y+t.height}},{direction:"ne-resize",p:i,transformOrigin:{x:t.x,y:t.y+t.height}},{direction:"se-resize",p:r,transformOrigin:{x:t.x,y:t.y}},{direction:"sw-resize",p:s,transformOrigin:{x:t.x+t.width,y:t.y}}].forEach((t=>{const n={"stroke-width":"4",role:o.Resize,"resize-direction":t.direction,"transform-origin":JSON.stringify(t.transformOrigin),transform:"scale(1, 1)",fill:"white",style:`cursor:${t.direction};`},i=en.createCircle(t.p,5,n);l(i,t.transformOrigin),e.appendChild(i)})),e}createInteractElementsGroup(t){if(c(this,bn,"f").info("createInteractElementsGroup",{symbols:t}),!t.length)return;const e=t.map((t=>({symbol:t,element:this.renderer.getElementById(t.id)}))),n=qt.createFromBoxes(t.map((t=>({x:t.bounds.x-(t.style.width||1),y:t.bounds.y-(t.style.width||1),height:t.bounds.height+2*(t.style.width||1),width:t.bounds.width+2*(t.style.width||1)})))),i=qt.createFromPoints(t.flatMap((t=>t.vertices))),r=qt.createFromBoxes([n,i]),s={id:`selected-${Date.now()}`,role:o.InteractElementsGroup},a=en.createGroup(s);a.appendChild(this.createTranslateRect(r)),a.appendChild(this.createResizeGroup(r)),a.appendChild(this.createRotateGroup(r));const l={style:"pointer-events: none",fill:"transparent",stroke:"#3e68ff","stroke-width":"1","stroke-dasharray":"4","vector-effect":"non-scaling-size",transform:"rotate(0, 0, 0)"};return e.forEach((t=>{var e,n,i;if(t.element){const r={x:t.symbol.bounds.x-(t.symbol.style.width||1),y:t.symbol.bounds.y-(t.symbol.style.width||1),height:t.symbol.bounds.height+2*(t.symbol.style.width||1),width:t.symbol.bounds.width+2*(t.symbol.style.width||1)};if(t.symbol.type===ne.Text){const r=t.symbol;l.transform=`rotate(${(null===(e=r.rotation)||void 0===e?void 0:e.degree)||0}, ${(null===(n=r.rotation)||void 0===n?void 0:n.center.x)||0}, ${(null===(i=r.rotation)||void 0===i?void 0:i.center.y)||0})`}else l.transform="rotate(0, 0, 0)";a.prepend(en.createRect(r,l))}})),a}drawSelectedGroup(t){if(t.length){if(this.selectedGroup=this.createInteractElementsGroup(t),this.selectedGroup){this.renderer.layer.appendChild(this.selectedGroup);const t=this.selectedGroup.getBBox();this.behaviors.menu.context.position.x=t.x+t.width/2-this.renderer.parent.clientLeft,this.behaviors.menu.context.position.y=t.y+t.height-this.renderer.parent.clientTop,this.behaviors.menu.context.show()}this.behaviors.menu.update()}}resetSelectedGroup(t){c(this,bn,"f").info("resetSelectedGroup",{symbols:t}),this.removeSelectedGroup(),this.drawSelectedGroup(t)}removeSelectedGroup(){var t;c(this,bn,"f").info("removeSelectedGroup"),this.behaviors.menu.context.hide(),null===(t=this.selectedGroup)||void 0===t||t.remove(),this.selectedGroup=void 0}hideInteractElements(){var t;this.behaviors.menu.context.hide();const e=`[role=${o.Resize}],[role=${o.Rotate}],[role=${o.Translate}]`;null===(t=this.selectedGroup)||void 0===t||t.querySelectorAll(e).forEach((t=>{t.setAttribute("visibility","hidden")}))}showInteractElements(){var t;this.behaviors.menu.context.show();const e=`[role=${o.Resize}],[role=${o.Rotate}],[role=${o.Translate}]`;null===(t=this.selectedGroup)||void 0===t||t.querySelectorAll(e).forEach((t=>t.setAttribute("visibility","visible")))}start(t){this.startSelectionPoint=t,this.endSelectionPoint=t,this.drawSelectingRect(this.selectionBox)}continue(t){if(!this.startSelectionPoint)throw new Error("You need to call startSelectionByBox before");this.endSelectionPoint=t;const e=[];return this.model.symbols.forEach((t=>{t.selected!==t.overlaps(this.selectionBox)&&(t.selected=t.overlaps(this.selectionBox),e.push(t),this.renderer.drawSymbol(t))})),this.drawSelectingRect(this.selectionBox),e}end(t){this.endSelectionPoint=t;const e=this.continue(t);return this.startSelectionPoint=void 0,this.endSelectionPoint=void 0,this.clearSelectingRect(),this.drawSelectedGroup(this.model.symbolsSelected),this.internalEvent.emitSelected(this.model.symbolsSelected),this.behaviors.menu.style.update(),e}}bn=new WeakMap,wn=new WeakMap;class $n{constructor(t,e){xn.set(this,g.getLogger(d.CONVERTER)),c(this,xn,"f").info("constructor"),this.behaviors=t,this.snapToElement=void 0===(null==e?void 0:e.element)||e.element,this.snapToGrid=void 0===(null==e?void 0:e.grid)||e.grid,this.snapAngle=void 0!==(null==e?void 0:e.angle)?e.angle:0}get model(){return this.behaviors.model}get renderer(){return this.behaviors.renderer}get selectionSnapPoints(){return qt.createFromPoints(this.model.symbolsSelected.flatMap((t=>t.snapPoints))).snapPoints}get otherSnapPoints(){const t=this.model.symbolsSelected.map((t=>t.id));return this.model.symbols.filter((e=>!t.includes(e.id))).flatMap((t=>t.snapPoints))}get snapThreshold(){return this.behaviors.configuration.rendering.guides.gap/2}getNearestVerticalGuide(t){return this.renderer.verticalGuides.length?this.renderer.verticalGuides.reduce(((e,n)=>Math.abs(n-t)<Math.abs(e-t)?n:e)):t}getNearestHorizontalGuide(t){return this.renderer.horizontalGuides.length?this.renderer.horizontalGuides.reduce(((e,n)=>Math.abs(n-t)<Math.abs(e-t)?n:e)):t}getGuidePointToSnap(t){return{x:this.getNearestVerticalGuide(t.x),y:this.getNearestHorizontalGuide(t.y)}}drawSnapToElementLines(t){const e={role:"snap-to-element",fill:"transparent",stroke:"blue","stroke-width":"2",style:Qe.noSelection,"marker-start":`url(#${Qe.crossMarker})`,"marker-end":`url(#${Qe.crossMarker})`};t.forEach((t=>{this.renderer.drawLine(t.p1,t.p2,e)}))}clearSnapToElementLines(){this.renderer.clearElements({attrs:{role:"snap-to-element"}})}getSnapLinesInfos(t,e){const n={nudge:{x:1/0,y:1/0},verticales:[],horizontales:[]};return t.length&&e.length?(t.forEach((t=>{e.forEach((e=>{this.snapThreshold>Math.abs(e.x-t.x)&&(Math.abs(n.nudge.x)>Math.abs(e.x-t.x)?(n.nudge.x=e.x-t.x,n.verticales=[{p1:Object.assign({},t),p2:e}]):n.nudge.x===e.x-t.x&&n.verticales.push({p1:Object.assign({},t),p2:e})),this.snapThreshold>Math.abs(e.y-t.y)&&(Math.abs(n.nudge.y)>Math.abs(e.y-t.y)?(n.nudge.y=e.y-t.y,n.horizontales=[{p1:Object.assign({},t),p2:e}]):n.nudge.y===e.y-t.y&&n.horizontales.push({p1:Object.assign({},t),p2:e}))}))})),n):n}snapResize(t,e=!0,n=!0){if(this.clearSnapToElementLines(),!this.snapToElement&&!this.snapToGrid)return t;let i={x:1/0,y:1/0};this.snapToGrid&&(i=this.getGuidePointToSnap(t));const r=[];if(this.snapToElement){const o=this.getSnapLinesInfos([t],this.otherSnapPoints);e&&Math.abs(o.nudge.x)<=Math.abs(t.x-i.x)&&(i.x=t.x+o.nudge.x,r.push(...o.verticales)),n&&Math.abs(o.nudge.y)<=Math.abs(t.y-i.y)&&(i.y=t.y+o.nudge.y,r.push(...o.horizontales))}return i.x===1/0&&(i.x=t.x),i.y===1/0&&(i.y=t.y),r.forEach((t=>t.p1=i)),this.drawSnapToElementLines(r),i}snapTranslate(t,e){this.clearSnapToElementLines();const n={x:t,y:e};if(!this.snapToElement&&!this.snapToGrid)return n;const i=this.selectionSnapPoints.map((n=>({x:n.x+t,y:n.y+e})));let r=1/0,o=1/0;this.snapToGrid&&i.forEach((i=>{const s=this.getGuidePointToSnap(i);r>Math.abs(s.x-i.x)&&(n.x=s.x-i.x+t,r=Math.abs(s.x-i.x)),o>Math.abs(s.y-i.y)&&(n.y=s.y-i.y+e,o=Math.abs(s.y-i.y))}));const s=[];if(this.snapToElement){const a=this.getSnapLinesInfos(i,this.otherSnapPoints);r>=Math.abs(a.nudge.x)&&a.verticales.length&&(n.x=a.nudge.x+t,s.push(...a.verticales)),o>=Math.abs(a.nudge.y)&&a.horizontales.length&&(n.y=a.nudge.y+e,s.push(...a.horizontales))}return s.length&&(s.forEach((i=>{i.p1.x+=n.x-t,i.p1.y+=n.y-e})),this.drawSnapToElementLines(s)),n}snapRotation(t){return this.snapAngle>0?this.snapAngle*Math.round(t/this.snapAngle):t}}xn=new WeakMap;class qn{constructor(t){Sn.set(this,g.getLogger(d.CONVERTER)),c(this,Sn,"f").info("constructor"),this.behaviors=t}get renderer(){return this.behaviors.renderer}get rowHeight(){return this.behaviors.configuration.rendering.guides.gap}get model(){return this.behaviors.model}drawSymbolHidden(t){var e;const n=t.clone();n.id="text-to-measure",n.chars.forEach((t=>t.id+="to-measure")),null===(e=this.renderer.layer.querySelector(`#${n.id}`))||void 0===e||e.remove();const i=this.renderer.buildElementFromSymbol(n);return i.setAttribute("visibility","hidden"),this.renderer.prependElement(i),i}setCharsBounds(t,e){const n=e.querySelector("text");if(n)for(let i=0;i<n.getNumberOfChars();i++){const e=t.chars.at(i);if(e){const t=n.getExtentOfChar(i);e.bounds=new qt(t)}}return t}setBounds(t){const e=this.drawSymbolHidden(t);t.bounds=this.getElementBoundingBox(e),this.setCharsBounds(t,e)}getElementBoundingBox(t){return new qt(t.querySelector("text").getBBox({stroke:!0,markers:!0,clipped:!0,fill:!0}))}getBoundingBox(t){const e=this.drawSymbolHidden(t);return this.getElementBoundingBox(e)}getSpaceWidth(t){var e;const n=new qt({height:0,width:0,x:0,y:0}),i={id:"text-char-space",label:"-",color:"",fontSize:t,fontWeight:"normal",bounds:n};return null===(e=this.getBoundingBox(new xe([i],{x:0,y:0},n)))||void 0===e?void 0:e.width}updateBounds(t){return this.setBounds(t),this.model.updateSymbol(t),t}moveTextAfter(t,e){const n=this.model.getSymbolsByRowOrdered().find((e=>e.rowIndex===this.model.getSymbolRowIndex(t)));if(n){const i=n.symbols.filter((e=>e.type===ne.Text&&e.bounds.xMid>t.bounds.xMid));return i.forEach((t=>{t.point.x+=e,this.updateBounds(t),this.model.updateSymbol(t),this.renderer.drawSymbol(t)})),i}}}Sn=new WeakMap;class Un{constructor(t){kn.set(this,g.getLogger(d.TRANSFORMER)),c(this,kn,"f").info("constructor"),this.behaviors=t}get model(){return this.behaviors.model}applyToStroke(t,e,n){return t.pointers.forEach((t=>{t.x+=e,t.y+=n})),t}applyToShape(t,e,n){switch(t.kind){case oe.Ellipse:case oe.Circle:return t.center.x+=e,t.center.y+=n,t;case oe.Polygon:return t.points.forEach((t=>{t.x+=e,t.y+=n})),t;default:throw new Error(`Can't apply translate on shape, kind unknow: ${JSON.stringify(t)}`)}}applyToEdge(t,e,n){switch(t.kind){case ie.Arc:return t.center.x+=e,t.center.y+=n,t;case ie.Line:return t.start.x+=e,t.start.y+=n,t.end.x+=e,t.end.y+=n,t;case ie.PolyEdge:return t.points.forEach((t=>{t.x+=e,t.y+=n})),t}return t}applyOnText(t,e,n){return t.rotation&&(t.rotation.center={x:t.rotation.center.x+e,y:t.rotation.center.y+n}),t.point.x+=e,t.point.y+=n,this.behaviors.texter.updateBounds(t)}applyOnGroup(t,e,n){return t.children.forEach((t=>this.applyToSymbol(t,e,n))),t}applyToSymbol(t,e,n){switch(c(this,kn,"f").info("applyToSymbol",{symbol:t,tx:e,ty:n}),t.type){case ne.Stroke:return this.applyToStroke(t,e,n);case ne.Shape:return this.applyToShape(t,e,n);case ne.Edge:return this.applyToEdge(t,e,n);case ne.Text:return this.applyOnText(t,e,n);case ne.Group:return this.applyOnGroup(t,e,n);default:throw new Error(`Can't apply translate on symbol, type unknow: ${JSON.stringify(t)}`)}}translate(t,e,n,i=!0){c(this,kn,"f").info("translate",{symbols:t,tx:e,ty:n}),t.forEach((t=>{this.applyToSymbol(t,e,n),this.model.updateSymbol(t),this.behaviors.renderer.drawSymbol(t)})),i&&this.behaviors.history.push(this.model,{translate:[{symbols:this.model.symbolsSelected,tx:e,ty:n}]});const r=this.behaviors.extractStrokesFromSymbols(t);return this.behaviors.recognizer.transformTranslate(r.map((t=>t.id)),e,n)}translateElement(t,e,n){c(this,kn,"f").info("translateElement",{id:t,tx:e,ty:n}),this.behaviors.renderer.setAttribute(t,"transform",`translate(${e},${n})`)}start(t,e){c(this,kn,"f").info("start",{origin:e}),this.interactElementsGroup=t.closest(`[role=${o.InteractElementsGroup}]`),this.transformOrigin=e,this.behaviors.selector.hideInteractElements()}continue(t){if(c(this,kn,"f").info("continue",{point:t}),!this.interactElementsGroup)throw new Error("Can't translate, you must call start before");let e=t.x-this.transformOrigin.x,n=t.y-this.transformOrigin.y;const i=this.behaviors.snaps.snapTranslate(e,n);return e=i.x,n=i.y,this.translateElement(this.interactElementsGroup.id,e,n),this.model.symbolsSelected.forEach((t=>{this.translateElement(t.id,e,n)})),{tx:e,ty:n}}end(t){return l(this,void 0,void 0,(function*(){c(this,kn,"f").info("end",{point:t});const{tx:e,ty:n}=this.continue(t);this.behaviors.snaps.clearSnapToElementLines(),this.translate(this.model.symbolsSelected,e,n),this.behaviors.selector.resetSelectedGroup(this.model.symbolsSelected),this.interactElementsGroup=void 0,this.behaviors.svgDebugger.apply()}))}}kn=new WeakMap;class Gn{constructor(t){_n.set(this,g.getLogger(d.WRITE)),En.set(this,r.Pencil),this.detectGesture=!0,c(this,_n,"f").info("constructor"),this.behaviors=t}get tool(){return c(this,En,"f")}set tool(t){h(this,En,t,"f"),t!==r.Pencil?this.renderer.parent.classList.add("shape"):this.renderer.parent.classList.remove("shape"),this.behaviors.unselectAll()}get model(){return this.behaviors.model}get renderer(){return this.behaviors.renderer}get history(){return this.behaviors.history}get gestureManager(){return this.behaviors.gesture}get snaps(){return this.behaviors.snaps}get recognizer(){return this.behaviors.recognizer}needContextLessGesture(t){const e=new qt(t.bounds);return e.x-=a,e.y-=a,e.width+=20,e.height+=20,this.detectGesture&&this.model.symbols.some((t=>{switch(t.type){case ne.Stroke:return!1;case ne.Group:return!t.containsOnlyStroke()&&t.extractSymbols().some((t=>t.bounds.overlaps(e)));default:return t.bounds.overlaps(e)}}))}createCurrentSymbol(t,e,n){switch(c(this,_n,"f").debug("createCurrentSymbol",{pointer:t,style:e,pointerType:n}),this.tool){case r.Pencil:this.model.currentSymbol=new ye(e,n);break;case r.Rectangle:this.model.currentSymbol=ve.createRectangleBetweenPoints(t,t,e);break;case r.Triangle:this.model.currentSymbol=ve.createTriangleBetweenPoints(t,t,e);break;case r.Parallelogram:this.model.currentSymbol=ve.createParallelogramBetweenPoints(t,t,e);break;case r.Rhombus:this.model.currentSymbol=ve.createRhombusBetweenPoints(t,t,e);break;case r.Circle:this.model.currentSymbol=ge.createBetweenPoints(t,t,e);break;case r.Ellipse:this.model.currentSymbol=me.createBetweenPoints(t,t,e);break;case r.Line:case r.Arrow:case r.DoubleArrow:{let n,i;this.tool===r.Arrow?i=re.Arrow:this.tool===r.DoubleArrow&&(n=re.Arrow,i=re.Arrow),this.model.currentSymbol=new de(t,t,n,i,e);break}default:throw new Error(`Can't create symbol, tool is unknow: "${this.tool}"`)}return this.updateCurrentSymbol(t)}updateCurrentSymbolShape(t){switch(this.tool){case r.Rectangle:ve.updateRectangleBetweenPoints(this.model.currentSymbol,this.currentSymbolOrigin,t);break;case r.Triangle:ve.updateTriangleBetweenPoints(this.model.currentSymbol,this.currentSymbolOrigin,t);break;case r.Parallelogram:ve.updateParallelogramBetweenPoints(this.model.currentSymbol,this.currentSymbolOrigin,t);break;case r.Rhombus:ve.updateRhombusBetweenPoints(this.model.currentSymbol,this.currentSymbolOrigin,t);break;case r.Circle:ge.updateBetweenPoints(this.model.currentSymbol,this.currentSymbolOrigin,t);break;case r.Ellipse:me.updateBetweenPoints(this.model.currentSymbol,this.currentSymbolOrigin,t)}}updateCurrentSymbolEdge(t){const e=this.model.currentSymbol;e.kind===ie.Line&&(e.end=t)}updateCurrentSymbol(t){if(c(this,_n,"f").debug("updateCurrentSymbol",{pointer:t}),!this.model.currentSymbol)throw new Error("Can't update current symbol because currentSymbol is undefined");switch(this.model.currentSymbol.type){case ne.Stroke:this.model.currentSymbol.addPointer(t);break;case ne.Shape:this.updateCurrentSymbolShape(t);break;case ne.Edge:this.updateCurrentSymbolEdge(t)}return this.model.currentSymbol}start(t,e,n){c(this,_n,"f").info("startWriting",{style:t,pointer:e,pointerType:n});const i=e;if(this.tool!==r.Pencil){const{x:t,y:n}=this.snaps.snapResize(e);i.x=t,i.y=n}this.currentSymbolOrigin=i,this.createCurrentSymbol(i,t,n),this.renderer.drawSymbol(this.model.currentSymbol)}continue(t){c(this,_n,"f").info("continueWriting",{pointer:t});const e=t;if(this.tool!==r.Pencil){const{x:n,y:i}=this.snaps.snapResize(t);e.x=n,e.y=i}this.updateCurrentSymbol(e),this.renderer.drawSymbol(this.model.currentSymbol)}interactWithBackend(t){return l(this,void 0,void 0,(function*(){const e=t.clone();let n;if(this.needContextLessGesture(t)&&(n=yield this.gestureManager.getGestureFromContextLess(e)),n)this.history.pop(),this.recognizer.addStrokes([e],this.detectGesture),this.gestureManager.apply(e,n);else{const t=yield this.recognizer.addStrokes([e],this.detectGesture);t&&(this.history.pop(),this.gestureManager.apply(this.model.getRootSymbol(t.gestureStrokeId),t))}}))}end(t){return l(this,void 0,void 0,(function*(){c(this,_n,"f").info("finishWriting",{pointer:t});const e=t;if(this.tool!==r.Pencil){const{x:n,y:i}=this.snaps.snapResize(t);e.x=n,e.y=i}const n=this.updateCurrentSymbol(e);this.model.currentSymbol=void 0,this.currentSymbolOrigin=void 0,this.snaps.clearSnapToElementLines(),this.renderer.drawSymbol(n),this.model.addSymbol(n),this.history.push(this.model,{added:[n]}),n.type===ne.Stroke&&(yield this.interactWithBackend(n))}))}}_n=new WeakMap,En=new WeakMap;class Hn{constructor(t){Ln.set(this,g.getLogger(d.WRITE)),c(this,Ln,"f").info("constructor"),this.behaviors=t}get model(){return this.behaviors.model}get renderer(){return this.behaviors.renderer}start(t){c(this,Ln,"f").info("startErase",{pointer:t}),this.currentEraser=new ke,this.currentEraser.pointers.push(t),this.renderer.drawSymbol(this.currentEraser)}continue(t){if(c(this,Ln,"f").info("continueErase",{pointer:t}),!this.currentEraser)throw new Error("Can't update current eraser because currentEraser is undefined");this.currentEraser.pointers.push(t),this.renderer.drawSymbol(this.currentEraser);const e={p1:this.currentEraser.pointers.at(-1),p2:this.currentEraser.pointers.at(-2)};this.model.symbols.forEach((t=>{t.isIntersected(e)&&(t.deleting=!0)})),this.model.symbolsToDelete.map((t=>this.renderer.drawSymbol(t)))}end(t){return l(this,void 0,void 0,(function*(){c(this,Ln,"f").info("finishErasing",{pointer:t}),this.continue(t),this.renderer.removeSymbol(this.currentEraser.id),this.currentEraser=void 0,this.behaviors.removeSymbols(this.model.symbolsToDelete.map((t=>t.id)))}))}}Ln=new WeakMap;class Wn{constructor(t){Cn.set(this,g.getLogger(d.SVGDEBUG)),An.set(this,!1),Mn.set(this,!1),Nn.set(this,!1),Pn.set(this,!1),Tn.set(this,!1),c(this,Cn,"f").info("constructor"),this.behaviors=t}get model(){return this.behaviors.model}get renderer(){return this.behaviors.renderer}get snapPointsVisibility(){return c(this,An,"f")}set snapPointsVisibility(t){h(this,An,t,"f"),this.debugSnapPoints()}get verticesVisibility(){return c(this,Mn,"f")}set verticesVisibility(t){h(this,Mn,t,"f"),this.debugVertices()}get boundingBoxVisibility(){return c(this,Nn,"f")}set boundingBoxVisibility(t){h(this,Nn,t,"f"),c(this,Nn,"f")?this.showBoundingBox():this.hideBoundingBox()}get recognitionBoxVisibility(){return c(this,Pn,"f")}set recognitionBoxVisibility(t){h(this,Pn,t,"f"),this.debugRecognitionBox()}get recognitionItemBoxVisibility(){return c(this,Tn,"f")}set recognitionItemBoxVisibility(t){h(this,Tn,t,"f"),this.debugRecognitionItemBox()}showSnapPoints(){c(this,Cn,"f").info("showSnapPoints"),this.model.currentSymbol&&this.model.currentSymbol.snapPoints.forEach((t=>this.renderer.drawCircle(t,2,{fill:"blue",debug:"snap-points"}))),this.model.symbols.forEach((t=>t.snapPoints.forEach((t=>this.renderer.drawCircle(t,2,{fill:"blue",debug:"snap-points"})))))}hideSnapPoints(){c(this,Cn,"f").info("hideSnapPoints"),this.renderer.clearElements({attrs:{debug:"snap-points"}})}debugSnapPoints(){this.hideSnapPoints(),this.snapPointsVisibility&&this.showSnapPoints()}showVertices(){c(this,Cn,"f").info("showVertices"),this.model.currentSymbol&&this.model.currentSymbol.vertices.forEach((t=>this.renderer.drawCircle(t,2,{fill:"red",debug:"vertices"}))),this.model.symbols.forEach((t=>t.vertices.forEach((t=>this.renderer.drawCircle(t,2,{fill:"red",debug:"vertices"})))))}hideVertices(){c(this,Cn,"f").info("hideVertices"),this.renderer.clearElements({attrs:{debug:"vertices"}})}debugVertices(){this.hideVertices(),this.verticesVisibility&&this.showVertices()}drawBoundingBox(t){const e={style:"pointer-events: none",fill:"transparent",stroke:"red","stroke-width":"1","stroke-dasharray":"5 5","vector-effect":"non-scaling-stroke",debug:"bounding-box"},n={style:"pointer-events: none",fill:"transparent",stroke:"orange","stroke-width":"1","stroke-dasharray":"0 5 0","vector-effect":"non-scaling-stroke",debug:"bounding-box"};t.forEach((t=>{const i=this.renderer.getElementById(t.id);if(i)if(t.type===ne.Text){const r=t;let o="";r.rotation&&(o=`rotate(${r.rotation.degree}, ${r.rotation.center.x}, ${r.rotation.center.y})`),r.chars.forEach((t=>{const e=Object.assign(Object.assign({},n),{char:t.label,transform:o});i.insertAdjacentElement("beforebegin",en.createRect(t.bounds,e))}));const s=Object.assign(Object.assign({},e),{symbol:t.id,transform:o});i.insertAdjacentElement("beforebegin",en.createRect(t.bounds,s))}else{const n=Object.assign(Object.assign({},e),{symbol:t.id});i.insertAdjacentElement("beforebegin",en.createRect(t.bounds,n))}}))}showBoundingBox(){c(this,Cn,"f").info("showBoundingBox"),this.model.currentSymbol&&this.drawBoundingBox([this.model.currentSymbol]),this.drawBoundingBox(this.model.symbols)}hideBoundingBox(){c(this,Cn,"f").info("hideBoundingBox"),this.renderer.clearElements({attrs:{debug:"bounding-box"}})}debugBoundingBox(){this.hideBoundingBox(),this.boundingBoxVisibility&&this.showBoundingBox()}drawRecognitionBox(t,e){const n="green",i=en.createGroup({debug:"recognition-box"}),r=en.createRect(t,{fill:"transparent",stroke:n,style:Qe.noSelection});i.appendChild(r);const o=en.createGroup({id:`infos-group-${R()}`}),s=t.x+t.width;let a=t.y+10;null==e||e.forEach((t=>{o.appendChild(en.createText({x:s,y:a},t,{stroke:n,style:Qe.noSelection})),a+=20})),i.appendChild(o),this.renderer.layer.appendChild(i);const l=o.getBBox(),c={width:l.width+10,height:l.height+10,x:l.x-5,y:l.y-5},h=en.createRect(c,{fill:"white",style:"cursor:move",stroke:n});o.prepend(h);const u=e=>{e.preventDefault(),e.stopPropagation();const i=Number(this.renderer.getAttribute(o.id,"originX")),r=Number(this.renderer.getAttribute(o.id,"originY")),s=e.clientX-i,a=e.clientY-r;this.renderer.setAttribute(o.id,"transform",`translate(${s},${a})`);const l={width:c.width,height:c.height,x:c.x+s,y:c.y+a};this.renderer.removeSymbol(`connection-${o.id}`),this.renderer.drawConnectionBetweenBox(`connection-${o.id}`,t,l,{stroke:n,debug:"recognition-box-link"})};h.addEventListener("pointerdown",(t=>{t.preventDefault(),t.stopPropagation(),this.renderer.getAttribute(o.id,"originX")||(this.renderer.setAttribute(o.id,"originX",t.clientX.toString()),this.renderer.setAttribute(o.id,"originY",t.clientY.toString())),this.renderer.layer.addEventListener("pointermove",u),this.renderer.layer.addEventListener("pointerup",(()=>this.renderer.layer.removeEventListener("pointermove",u))),this.renderer.layer.addEventListener("pointerleave",(()=>this.renderer.layer.removeEventListener("pointermove",u))),this.renderer.layer.addEventListener("pointercancel",(()=>this.renderer.layer.removeEventListener("pointermove",u)))}))}showRecognitionBox(){var t,e;return l(this,void 0,void 0,(function*(){c(this,Cn,"f").info("showRecognitionBox"),yield this.behaviors.export(["application/vnd.myscript.jiix"]);const n=null===(t=this.model.exports)||void 0===t?void 0:t["application/vnd.myscript.jiix"];if(c(this,Cn,"f").debug("showRecognitionBox",{jiix:n}),n){if(!n["bounding-box"])return void c(this,Cn,"f").warn("drawRecognitionBox",'You must to enabled configuration.recognition.exports["bounding-box"]');null===(e=n.elements)||void 0===e||e.forEach((t=>{var e;switch(t.type){case"Node":if(t["bounding-box"]){const e=j(t["bounding-box"]),n=["bounding-box","items","id"],i=Object.keys(t).filter((t=>!n.includes(t))).map((e=>`${e}: ${JSON.stringify(t[e])}`));this.drawRecognitionBox(e,i)}break;case"Text":null===(e=t.words)||void 0===e||e.forEach((e=>{if(null==e?void 0:e["bounding-box"]){const n=j(e["bounding-box"]);this.drawRecognitionBox(n,[`type: ${t.type}`,`candidates: ${JSON.stringify(e.candidates||[])}`])}}));break;case"Edge":if(t.kind===jt.PolyEdge){const e=[`type: ${t.type}`,`kind: ${t.kind}`];t.edges.forEach(((t,n)=>{let i=`edge-${n}: [{ x1: ${t.x1}, y2: ${t.y1} },{ x2: ${t.x2}, y2: ${t.y2} }]`;t.p1Decoration&&(i+=`, p1Decoration: ${t.p1Decoration}`),t.p2Decoration&&(i+=`, p2Decoration: ${t.p2Decoration}`),e.push(i)}));const n=j(qt.createFromBoxes(t.edges.map((t=>t["bounding-box"]))));this.drawRecognitionBox(n,e)}else if(t["bounding-box"]){const e=j(t["bounding-box"]),n=["bounding-box","items","id","ports","connected"],i=Object.keys(t).filter((t=>!n.includes(t))).map((e=>`${e}: ${JSON.stringify(t[e])}`));this.drawRecognitionBox(e,i)}break;default:c(this,Cn,"f").warn("drawRecognitionBox",`Unknow jiix element type: ${t.type}`)}}))}}))}clearRecognitionBox(){c(this,Cn,"f").info("clearRecognitionBox"),this.renderer.clearElements({attrs:{debug:"recognition-box"}}),this.renderer.clearElements({attrs:{debug:"recognition-box-link"}})}debugRecognitionBox(){return l(this,void 0,void 0,(function*(){this.clearRecognitionBox(),c(this,Pn,"f")&&this.showRecognitionBox()}))}drawRecognitionItemBox(t,e,n){const i="blue",r=en.createGroup({debug:"recognition-item-box"}),o=en.createRect(t,{fill:"transparent",stroke:i,style:Qe.noSelection});r.appendChild(o);const s=t.x;let a=t.y-14;const l=en.createGroup({id:`chars-group-${R()}`});e&&l.appendChild(en.createText({x:s,y:a},`label: ${e}`,{fill:i,"font-size":14..toString(),style:Qe.noSelection})),(null==n?void 0:n.length)&&(a+=14,l.appendChild(en.createText({x:s,y:a},`[${n.join(", ")}]`,{fill:i,"font-size":14..toString(),style:Qe.noSelection}))),r.appendChild(l),this.renderer.layer.appendChild(r);const c=l.getBBox(),h={width:c.width+10,height:c.height+10,x:c.x-5,y:c.y-5},u=en.createRect(h,{fill:"white",style:"cursor:move",stroke:i});l.prepend(u);const d=e=>{e.preventDefault(),e.stopPropagation();const n=Number(this.renderer.getAttribute(l.id,"originX")),r=Number(this.renderer.getAttribute(l.id,"originY")),o=e.clientX-n,s=e.clientY-r;this.renderer.setAttribute(l.id,"transform",`translate(${o},${s})`);const a={width:h.width,height:h.height,x:h.x+o,y:h.y+s};this.renderer.removeSymbol(`connection-${l.id}`),this.renderer.drawConnectionBetweenBox(`connection-${l.id}`,t,a,{stroke:i,debug:"recognition-item-box-link"})};u.addEventListener("pointerdown",(t=>{t.preventDefault(),t.stopPropagation(),this.renderer.getAttribute(l.id,"originX")||(this.renderer.setAttribute(l.id,"originX",t.clientX.toString()),this.renderer.setAttribute(l.id,"originY",t.clientY.toString())),this.renderer.layer.addEventListener("pointermove",d)})),this.renderer.layer.addEventListener("pointerup",(()=>this.renderer.layer.removeEventListener("pointermove",d))),this.renderer.layer.addEventListener("pointerleave",(()=>this.renderer.layer.removeEventListener("pointermove",d))),this.renderer.layer.addEventListener("pointercancel",(()=>this.renderer.layer.removeEventListener("pointermove",d)))}showRecognitionItemBox(){var t,e;return l(this,void 0,void 0,(function*(){c(this,Cn,"f").info("showRecognitionBoxItem"),yield this.behaviors.export(["application/vnd.myscript.jiix"]);const n=null===(t=this.model.exports)||void 0===t?void 0:t["application/vnd.myscript.jiix"];c(this,Cn,"f").debug("showRecognitionBoxItem",{jiix:n}),n&&(null===(e=n.elements)||void 0===e||e.forEach((t=>{var e;switch(t.type){case"Text":null===(e=t.chars)||void 0===e||e.forEach((t=>{if(null==t?void 0:t["bounding-box"]){const e=j(t["bounding-box"]);this.drawRecognitionItemBox(e,t.label,t.candidates)}}));break;case"Node":if(null==t?void 0:t["bounding-box"]){const e=j(t["bounding-box"]);this.drawRecognitionItemBox(e,t.kind)}break;case"Edge":if(t.kind===jt.PolyEdge)t.edges.forEach((t=>{const e=j(t["bounding-box"]);this.drawRecognitionItemBox(e,t.kind)}));else if(t["bounding-box"]){const e=j(t["bounding-box"]);this.drawRecognitionItemBox(e,t.kind)}break;default:c(this,Cn,"f").warn("drawRecognitionBoxItem",`Unknow jiix element type: ${t.type}`)}})))}))}clearRecognitionItemBox(){c(this,Cn,"f").info("clearRecognitionBoxItem"),this.renderer.clearElements({attrs:{debug:"recognition-item-box"}}),this.renderer.clearElements({attrs:{debug:"recognition-item-box-link"}})}debugRecognitionItemBox(){return l(this,void 0,void 0,(function*(){this.clearRecognitionItemBox(),c(this,Tn,"f")&&this.showRecognitionItemBox()}))}apply(){this.debugBoundingBox(),this.debugVertices(),this.debugSnapPoints(),this.debugRecognitionBox(),this.debugRecognitionItemBox()}}Cn=new WeakMap,An=new WeakMap,Mn=new WeakMap,Nn=new WeakMap,Pn=new WeakMap,Tn=new WeakMap;var Vn,Yn='<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n</svg>\n';class Jn{constructor(){this.thicknessList=[{label:"S",value:1},{label:"M",value:2},{label:"L",value:4},{label:"XL",value:8}],this.fontSizeList=[{label:"Auto",value:0},{label:"S",value:.5},{label:"M",value:.75},{label:"L",value:1}],this.fontWeightList=[{label:"Auto",value:void 0},{label:"Normal",value:"normal"},{label:"Bold",value:"bold"}],this.colors=["#000000","#808080","#ffffff","transparent","#ff0000","#ff6400","#ffc800","#ffff00","#0000ff","#0064ff","#00c8ff","#00ffff","#008000","#00af00","#00e100","#00ff00"]}createToolTip(t,e,n="top"){t.classList.add("ms-tooltip");const i=document.createElement("span");return i.classList.add("ms-tooltip-content",n),i.textContent=e,t.appendChild(i),t}createWrapCollapsible(t,e){const n=document.createElement("div");n.classList.add("collapsible-wrapper");const i=document.createElement("div");i.classList.add("collapsible-header"),i.textContent=e;const r=document.createElement("span");r.classList.add("collapsible-header-icon"),r.innerHTML=Yn,i.appendChild(r),i.style.setProperty("pointer","cursor");const o=document.createElement("div");return o.classList.add("collapsible-content"),i.addEventListener("pointerup",(()=>n.classList.toggle("active"))),n.appendChild(i),o.appendChild(t),n.appendChild(o),n}createSeparatorHorizontal(){const t=document.createElement("hr");return t.classList.add("separator"),t.classList.add("horizontal"),t}createSeparatorVertical(){const t=document.createElement("hr");return t.classList.add("separator"),t.classList.add("vertical"),t}createMenuItemBoolean(t){const e=document.createElement("div");e.classList.add("ms-menu-item",t.type);const n=document.createElement("span");n.textContent=t.label,e.appendChild(n);const i=document.createElement("input");return i.id=t.id,i.setAttribute("type","checkbox"),t.disabled&&(i.disabled=!0),"indeterminate"===t.initValue?i.indeterminate=!0:i.checked=t.initValue,i.addEventListener("change",(e=>t.callback(e.target.checked))),e.appendChild(i),e}createMenuItemSelect(t){const e=document.createElement("div");e.classList.add("ms-menu-item",t.type);const n=document.createElement("span");n.textContent=t.label,e.appendChild(n);const i=document.createElement("select");return i.id=t.id,t.disabled&&(i.disabled=!0),t.values.forEach((e=>{const n=e.value===t.initValue,r=new Option(e.label,e.value.toString(),n,n);i.appendChild(r)})),i.addEventListener("change",(e=>t.callback(e.target.value))),e.appendChild(i),e}createMenuItemButton(t){const e=document.createElement("button");return e.classList.add("ms-menu-item","ms-menu-button"),e.innerHTML=t.icon||t.label,e.addEventListener("pointerup",t.callback),t.tooltip?this.createToolTip(e,t.tooltip.label,t.tooltip.position):e}createMenuItemButtonList(t){const e=document.createElement("div");e.classList.add("ms-menu-item",t.type),e.id=t.id;const n=document.createElement("span");return n.textContent=t.label,e.appendChild(n),t.values.forEach((n=>{const i=document.createElement("button");t.disabled&&(i.disabled=!0),i.id=`${t.id}-${n.value}-btn`,t.initValue===n.value&&i.classList.add("active"),i.textContent=n.label,i.addEventListener("pointerup",(()=>{t.callback(n.value),e.querySelectorAll("*").forEach((t=>t.classList.remove("active"))),i.classList.add("active")})),e.appendChild(i)})),e}createMenuItemColorList(t){const e=document.createElement("div");e.classList.add("ms-menu-item",t.type),e.id=t.id;const n=document.createElement("span");return n.textContent=t.label,e.appendChild(n),e.appendChild(this.createColorList(t)),e}createColorList(t){const e=document.createElement("div");return e.id=`${t.id}-list`,e.classList.add("ms-menu-row","color-list"),t.values.forEach((n=>{const i=document.createElement("button");t.disabled&&(i.disabled=!0),i.id=`${t.id}-${n.replace("#","")}-btn`,i.classList.add("ms-menu-button","square");const r=document.createElement("div");r.classList.add("color"),t.fill?(r.style.setProperty("background-color",n),r.style.setProperty("border","1px solid lightgrey")):(r.style.setProperty("background-color","transparent"),r.style.setProperty("border",`3px solid ${n}`)),"#ffffff"===n&&r.style.setProperty("border","1px solid black"),"transparent"===n&&r.style.setProperty("background-image","linear-gradient(45deg, #AAA 10%, transparent 20%, #AAA 30%, transparent 40%, #AAA 50%, transparent 60%, #AAA 70%, transparent 80%, #AAA 90%, transparent 100%)"),t.initValue===n&&i.classList.add("active"),i.appendChild(r),i.addEventListener("pointerup",(r=>{r.preventDefault(),r.stopPropagation(),t.callback(n),e.querySelectorAll("*").forEach((t=>t.classList.remove("active"))),i.classList.add("active")})),e.appendChild(i)})),e}createMenuItem(t){switch(t.type){case"checkbox":return this.createMenuItemBoolean(t);case"select":return this.createMenuItemSelect(t);case"list":return this.createMenuItemButtonList(t);case"colors":return this.createMenuItemColorList(t);default:return this.createMenuItemButton(t)}}}class Xn{constructor(t){if(this.element=document.createElement("div"),this.element.classList.add("sub-menu"),this.element.appendChild(t.trigger),this.content=document.createElement("div"),t.menuTitle){const e=document.createElement("h3");e.classList.add("ms-menu-title"),e.textContent=t.menuTitle,this.content.appendChild(e)}this.content.classList.add("sub-menu-content",t.position),this.content.appendChild(t.subMenu),this.element.appendChild(this.content),t.trigger.addEventListener("pointerdown",(()=>this.toggle())),document.addEventListener("pointerdown",(t=>{this.element.contains(t.target)||this.close()}))}open(){this.content.classList.add("open")}close(){this.content.classList.remove("open")}toggle(){this.content.classList.toggle("open")}unwrap(){this.content.classList.remove("sub-menu-content"),this.element.insertAdjacentElement("beforebegin",this.content),this.element.style.display="none"}wrap(){this.content.classList.add("sub-menu-content"),this.element.appendChild(this.content),this.element.style.display="block"}}class Kn extends Jn{constructor(t,e="ms-menu-action"){super(),Vn.set(this,g.getLogger(d.MENU)),this.guideGaps=[{label:"S",value:"25"},{label:"M",value:"50"},{label:"L",value:"100"},{label:"XL",value:"150"}],this.id=e,this.behaviors=t}get model(){return this.behaviors.model}get isMobile(){return this.behaviors.renderer.parent.clientWidth<700}createMenuClear(){return this.menuClear=document.createElement("button"),this.menuClear.id=`${this.id}-clear`,this.menuClear.classList.add("ms-menu-button","square"),this.menuClear.innerHTML='<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path\n    d="M20 9L18.005 20.3463C17.8369 21.3026 17.0062 22 16.0353 22H7.96474C6.99379 22 6.1631 21.3026 5.99496 20.3463L4 9"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    d="M21 6L15.375 6M3 6L8.625 6M8.625 6V4C8.625 2.89543 9.52043 2 10.625 2H13.375C14.4796 2 15.375 2.89543 15.375 4V6M8.625 6L15.375 6"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n</svg>\n',this.menuClear.addEventListener("pointerup",(()=>{c(this,Vn,"f").info(`${this.id}.clear`),this.behaviors.clear()})),this.createToolTip(this.menuClear,"Clear","bottom")}createMenuLanguage(){const t=document.createElement("button");t.id=this.id,t.classList.add("ms-menu-button","square"),t.innerHTML='<svg\n  width="24px"\n  height="24px"\n  stroke-width="1"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path\n    d="M2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12Z"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    d="M13 2.04932C13 2.04932 16 5.99994 16 11.9999C16 17.9999 13 21.9506 13 21.9506"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    d="M11 21.9506C11 21.9506 8 17.9999 8 11.9999C8 5.99994 11 2.04932 11 2.04932"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path d="M2.62964 15.5H21.3704" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M2.62964 8.5H21.3704" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n</svg>\n';const e=document.createElement("select");e.classList.add("select-language"),e.id=`${this.id}-language`,B(this.behaviors.configuration).then((t=>{const n=t.result;Object.keys(n).forEach((t=>{const i=t===this.behaviors.configuration.recognition.lang,r=new Option(n[t],t,i,i);e.appendChild(r)}))})),e.addEventListener("change",(t=>{c(this,Vn,"f").info(`${this.id}.selectLanguage`);const e=t.target.value;this.behaviors.changeLanguage(e)}));const n={trigger:t,subMenu:e,position:"bottom-right"};return this.menuLanguage=new Xn(n),this.menuLanguage.element}createMenuUndo(){return this.menuUndo=document.createElement("button"),this.menuUndo.id=`${this.id}-undo`,this.menuUndo.classList.add("ms-menu-button","square"),this.menuUndo.innerHTML='<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path\n    d="M4.5 8C8.5 8 11 8 15 8C15 8 15 8 15 8C15 8 20 8 20 12.7059C20 18 15 18 15 18C11.5714 18 9.71429 18 6.28571 18"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    d="M7.5 11.5C6.13317 10.1332 5.36683 9.36683 4 8C5.36683 6.63317 6.13317 5.86683 7.5 4.5"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n</svg>\n',this.menuUndo.addEventListener("pointerup",(()=>l(this,void 0,void 0,(function*(){c(this,Vn,"f").info(`${this.id}.undo`),yield this.behaviors.undo()})))),this.createToolTip(this.menuUndo,"Undo","bottom")}createMenuRedo(){return this.menuRedo=document.createElement("button"),this.menuRedo.id=`${this.id}-redo`,this.menuRedo.classList.add("ms-menu-button","square"),this.menuRedo.innerHTML='<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path\n    d="M19.5 8C15.5 8 13 8 9 8C9 8 9 8 9 8C9 8 4 8 4 12.7059C4 18 9 18 9 18C12.4286 18 14.2857 18 17.7143 18"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    d="M16.5 11.5C17.8668 10.1332 18.6332 9.36683 20 8C18.6332 6.63317 17.8668 5.86683 16.5 4.5"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n</svg>\n',this.menuRedo.addEventListener("pointerup",(()=>l(this,void 0,void 0,(function*(){c(this,Vn,"f").info(`${this.id}.redo`),yield this.behaviors.redo()})))),this.createToolTip(this.menuRedo,"Redo","bottom")}createMenuConvert(){return this.menuConvert=document.createElement("button"),this.menuConvert.id=`${this.id}-convert`,this.menuConvert.classList.add("ms-menu-button","square"),this.menuConvert.innerHTML='<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path\n    d="M2 5H9M16 5H13.5M9 5L13.5 5M9 5V3M13.5 5C12.6795 7.73513 10.9612 10.3206 9 12.5929M4 17.5C5.58541 16.1411 7.376 14.4744 9 12.5929M9 12.5929C8 11.5 6.4 9.3 6 8.5M9 12.5929L12 15.5"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    d="M13.5 21L14.6429 18M21.5 21L20.3571 18M14.6429 18L17.5 10.5L20.3571 18M14.6429 18H20.3571"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n</svg>\n',this.menuConvert.addEventListener("pointerup",(()=>{c(this,Vn,"f").info(`${this.id}.convert`),this.behaviors.convert()})),this.createToolTip(this.menuConvert,"Convert","bottom")}createMenuGesture(){const t=document.createElement("button");t.id=`${this.id}-gesture`,t.classList.add("ms-menu-button","square"),t.innerHTML='<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path\n    d="M18 7.5L18.9187 7.65312C20.0497 7.84162 20.791 8.94046 20.5423 10.0598L20.0143 12.4357C20.0048 12.4784 20 12.5223 20 12.5661C20 15.1904 20 17.5 20 17.5C20 17.5 20 17.5 20 17.5C20 19.5 18.4 21.5 16 21.5C14.1259 21.5 11.0119 21.5 9.41979 21.5C8.83594 21.5 8.28132 21.2449 7.90136 20.8016L3.35288 15.495C2.85811 14.9178 2.84375 14.0703 3.31868 13.4767V13.4767C3.93438 12.707 5.09624 12.6814 5.74526 13.4231L8 16V12.5"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    d="M9 5L8.20966 5.13172C7.03189 5.32802 6.28739 6.50588 6.61542 7.65395L8 12.5"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    d="M11 12.5L8.92263 4.60598C8.69579 3.744 9.25886 2.87352 10.1381 2.72699V2.72699C10.9097 2.59838 11.6523 3.07873 11.8514 3.83526L14 12"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    d="M17 12.5L18 7.5L18.2475 6.01515C18.3869 5.17836 17.8216 4.38694 16.9848 4.24747V4.24747C16.16 4.11 15.3767 4.65763 15.2226 5.47955L14 12"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n</svg>\n';const e=document.createElement("div");e.classList.add("ms-menu-colmun");const n=[];for(const i in pn){const t=pn[i];n.push({label:i,value:t})}const o=[];for(const i in fn){const t=fn[i];o.push({label:i,value:t})}const s=[];for(const i in mn){const t=mn[i];s.push({label:i,value:t})}return[{type:"checkbox",id:`${this.id}-gesture-detect`,label:"Detect gesture",initValue:this.behaviors.writer.detectGesture,callback:t=>{c(this,Vn,"f").info(`${this.id}.gesture-detect`,{value:t}),this.behaviors.writer.detectGesture=t,this.behaviors.intention=i.Write,this.behaviors.writer.tool=r.Pencil}},{type:"select",id:`${this.id}-gesture-surround`,label:"On surround",values:n,initValue:this.behaviors.gesture.surroundAction,callback:t=>{c(this,Vn,"f").info(`${this.id}.gesture-surround`,{value:t}),this.behaviors.gesture.surroundAction=t,this.behaviors.intention=i.Write,this.behaviors.writer.tool=r.Pencil}},{type:"select",id:`${this.id}-gesture-strikethrough`,label:"On strikethrough",values:o,initValue:this.behaviors.gesture.strikeThroughAction,callback:t=>{c(this,Vn,"f").info(`${this.id}.gesture-strikethrough`,{value:t}),this.behaviors.gesture.strikeThroughAction=t,this.behaviors.intention=i.Write,this.behaviors.writer.tool=r.Pencil}},{type:"select",id:`${this.id}-gesture-strikethrough`,label:"On insert",values:s,initValue:this.behaviors.gesture.insertAction,callback:t=>{c(this,Vn,"f").info(`${this.id}.gesture-InsertAction`,{value:t}),this.behaviors.gesture.insertAction=t,this.behaviors.intention=i.Write,this.behaviors.writer.tool=r.Pencil}}].forEach((t=>{e.appendChild(this.createMenuItem(t))})),new Xn({trigger:t,menuTitle:"Gesture",subMenu:e,position:"right-top"}).element}createMenuGuide(){const t=document.createElement("button");t.id=`${this.id}-guide`,t.classList.add("ms-menu-button","square"),t.innerHTML='<svg\n  width="24px"\n  height="24px"\n  stroke-width="1"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path d="M3 21V3H21V21H3Z" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M3 16.5H12H21" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M3 12H21" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M3 7.5H21" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M16.5 3V12V21" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M12 3V21" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M7.5 3V21" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n</svg>\n';const e=document.createElement("div");return e.classList.add("ms-menu-colmun"),[{type:"checkbox",id:`${this.id}-guide-enable`,label:"Show guide",initValue:this.behaviors.configuration.rendering.guides.enable,callback:t=>{c(this,Vn,"f").info(`${this.id}.guide-enable`,{value:t}),this.behaviors.configuration.rendering.guides.enable=t,this.behaviors.renderingConfiguration=this.behaviors.configuration.rendering}},{type:"select",id:`${this.id}-guide-type`,label:"Guide style",values:[{label:"Line",value:"line"},{label:"Grid",value:"grid"},{label:"Point",value:"point"}],initValue:this.behaviors.configuration.rendering.guides.type,callback:t=>{c(this,Vn,"f").info(`${this.id}.guide-type`,{value:t}),this.behaviors.configuration.rendering.guides.type=t,this.behaviors.renderingConfiguration=this.behaviors.configuration.rendering}},{type:"list",id:`${this.id}-guide-size`,label:"Guide style",values:this.guideGaps,initValue:this.behaviors.configuration.rendering.guides.gap.toString(),callback:t=>{c(this,Vn,"f").info(`${this.id}.guide-size`,{value:t}),this.behaviors.configuration.rendering.guides.gap=+t,this.behaviors.renderingConfiguration=this.behaviors.configuration.rendering}}].forEach((t=>{e.appendChild(this.createMenuItem(t))})),new Xn({trigger:t,menuTitle:"Guide",subMenu:e,position:"right-top"}).element}createMenuSnap(){const t=document.createElement("button");t.id=`${this.id}-snap`,t.classList.add("ms-menu-button","square"),t.innerHTML='<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path\n    d="M 19 14 C 17.8954 14 17 13.1046 17 12 C 17 10.8954 17.8954 10 19 10 C 20.1046 10 21 10.8954 21 12 C 21 13.1046 20.1046 14 19 14 Z"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path d="M 4 12 H 17 M 17 12 L 14 9 M 17 12 L 14 15" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n</svg>\n';const e=document.createElement("div");return e.classList.add("ms-menu-colmun"),[{type:"checkbox",id:`${this.id}-snap-to-guide`,label:"Snap to guide",initValue:this.behaviors.snaps.snapToGrid,callback:t=>this.behaviors.snaps.snapToGrid=t},{type:"checkbox",id:`${this.id}-snap-to-element`,label:"Snap to element",initValue:this.behaviors.snaps.snapToElement,callback:t=>this.behaviors.snaps.snapToElement=t},{type:"select",id:`${this.id}-snap-angle`,label:"Snap angle",values:[{label:"None",value:"0"},{label:"10°",value:"10"},{label:"30°",value:"30"},{label:"45°",value:"45"},{label:"90°",value:"90"},{label:"180°",value:"180"}],initValue:this.behaviors.snaps.snapAngle.toString(),callback:t=>this.behaviors.snaps.snapAngle=+t}].forEach((t=>{e.appendChild(this.createMenuItem(t))})),new Xn({trigger:t,menuTitle:"Snap",subMenu:e,position:"right-top"}).element}createMenuDebug(){const t=document.createElement("button");t.id=`${this.id}-debug`,t.classList.add("ms-menu-button","square"),t.innerHTML='<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  stroke-width="1"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path\n    d="M5.81249 7C5.81249 7 5.35861 7.62759 4.81552 8.66667M18.1875 7C18.1875 7 18.6414 7.62759 19.1845 8.66667M4.81552 8.66667C4.0067 10.2142 3 12.6743 3 15.3333C5.8125 15.3333 7.49999 17 7.49999 17C7.49999 17 8.62499 22 12 22C15.375 22 16.5 17 16.5 17C16.5 17 18.1875 15.3333 21 15.3333C21 12.6743 19.9933 10.2142 19.1845 8.66667M4.81552 8.66667C4.81552 8.66667 1.875 6.44436 4.81552 2C5.81249 2.55556 8.625 4.77778 8.625 4.77778C8.625 4.77778 10.3125 3.66667 12 3.66667C13.6875 3.66667 15.375 4.77778 15.375 4.77778C15.375 4.77778 18.1875 2.55556 19.3125 2C22.125 6.44456 19.1845 8.66667 19.1845 8.66667"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path d="M11 18L12 18M13 18L12 18M12 18L12 19" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M8.5 12.5L10 14" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M15.5 12.5L14 14" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n</svg>\n';const e=[{type:"checkbox",id:`${this.id}-debug-bounding-box`,label:"Show bounding box",initValue:this.behaviors.svgDebugger.boundingBoxVisibility,callback:t=>this.behaviors.svgDebugger.boundingBoxVisibility=t},{type:"checkbox",id:`${this.id}-debug-recognition-box`,label:"Show recognition box",initValue:this.behaviors.svgDebugger.recognitionBoxVisibility,callback:t=>this.behaviors.svgDebugger.recognitionBoxVisibility=t},{type:"checkbox",id:`${this.id}-debug-bounding-item-box`,label:"Show recognition item box",initValue:this.behaviors.svgDebugger.recognitionItemBoxVisibility,callback:t=>this.behaviors.svgDebugger.recognitionItemBoxVisibility=t},{type:"checkbox",id:`${this.id}-debug-snap-points`,label:"Show snap points",initValue:this.behaviors.svgDebugger.snapPointsVisibility,callback:t=>this.behaviors.svgDebugger.snapPointsVisibility=t},{type:"checkbox",id:`${this.id}-debug-vertices`,label:"Show vertices",initValue:this.behaviors.svgDebugger.verticesVisibility,callback:t=>this.behaviors.svgDebugger.verticesVisibility=t}],n=document.createElement("div");return n.classList.add("ms-menu-colmun"),e.forEach((t=>{n.appendChild(this.createMenuItem(t))})),new Xn({trigger:t,menuTitle:"Debug",subMenu:n,position:"right-top"}).element}createMenuExport(){const t=document.createElement("button");t.id=`${this.id}-export`,t.classList.add("ms-menu-button","square"),t.innerHTML='<svg\n  width="24px"\n  height="24px"\n  stroke-width="1"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="#000000"\n>\n  <path d="M6 20L18 20" stroke="#000000" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M12 4V16M12 16L15.5 12.5M12 16L8.5 12.5" stroke="#000000" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n</svg>\n';const e=[{type:"button",id:`${this.id}-export-json`,label:"json",callback:()=>{this.behaviors.downloadAsJson()}},{type:"button",id:`${this.id}-export-svg`,label:"svg",callback:()=>{this.behaviors.downloadAsSVG()}},{type:"button",id:`${this.id}-export-png`,label:"png",callback:()=>{this.behaviors.downloadAsPNG()}}],n=document.createElement("div");return n.classList.add("ms-menu-colmun"),e.forEach((t=>{n.appendChild(this.createMenuItem(t))})),new Xn({trigger:t,menuTitle:"Export",subMenu:n,position:"right-top"}).element}readFileAsText(t){return l(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{const i=new FileReader;i.onerror=n,i.onload=()=>{e(i.result)},t&&i.readAsText(t)}))}))}createMenuImport(){const t=document.createElement("button");t.id=`${this.id}-import`,t.classList.add("ms-menu-button","square"),t.innerHTML='<svg\n  width="24px"\n  height="24px"\n  stroke-width="1"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="#000000"\n>\n  <path d="M6 20L18 20" stroke="#000000" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M12 16V4M12 4L15.5 7.5M12 4L8.5 7.5" stroke="#000000" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n</svg>\n';const e=document.createElement("div");e.classList.add("ms-menu-colmun");const n=document.createElement("input");n.type="file",n.accept=".json",n.multiple=!1,n.addEventListener("change",(()=>{var t;i.disabled=!(null===(t=n.files)||void 0===t?void 0:t.length)})),e.appendChild(n);const i=document.createElement("button");return i.classList.add("ms-menu-button"),i.innerText="Import",i.disabled=!0,e.appendChild(i),i.addEventListener("pointerup",(t=>l(this,void 0,void 0,(function*(){var e;t.preventDefault(),t.stopPropagation();try{if(null===(e=n.files)||void 0===e?void 0:e.length){const t=yield this.readFileAsText(n.files[0]),e=JSON.parse(t);yield this.behaviors.createSymbols(e),n.value="",i.disabled=!0}}catch(t){this.behaviors.internalEvent.emitError(new Error(t))}})))),new Xn({trigger:t,menuTitle:"Import",subMenu:e,position:"right-top"}).element}unselectAll(){var t;null===(t=this.wrapper)||void 0===t||t.querySelectorAll("*").forEach((t=>t.classList.remove("active")))}closeAllSubMenu(){var t;null===(t=this.wrapper)||void 0===t||t.querySelectorAll(".open").forEach((t=>t.classList.remove("open")))}render(t){if(this.behaviors.configuration.menu.action.enable){const e=document.createElement("button");e.id=this.id,e.classList.add("ms-menu-button","square"),e.innerHTML='<svg\n  width="24px"\n  height="24px"\n  stroke-width="1"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path d="M3 5H21" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M3 12H21" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M3 19H21" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n</svg>\n';const n=document.createElement("div");n.classList.add("ms-menu-colmun"),n.appendChild(this.createMenuGesture()),n.appendChild(this.createMenuGuide()),n.appendChild(this.createMenuSnap()),n.appendChild(this.createMenuDebug()),n.appendChild(this.createMenuImport()),n.appendChild(this.createMenuExport()),this.wrapper=document.createElement("div"),this.wrapper.classList.add("ms-menu","ms-menu-top-left","ms-menu-row"),this.wrapper.appendChild(new Xn({trigger:e,subMenu:n,position:"bottom"}).element),this.wrapper.appendChild(this.createMenuLanguage()),this.wrapper.appendChild(this.createMenuClear()),this.wrapper.appendChild(this.createMenuUndo()),this.wrapper.appendChild(this.createMenuRedo()),this.wrapper.appendChild(this.createMenuConvert()),t.appendChild(this.wrapper),this.update(),this.show()}}update(){this.menuLanguage&&(this.isMobile?this.menuLanguage.wrap():this.menuLanguage.unwrap()),this.menuClear&&(this.menuClear.disabled=this.behaviors.history.context.empty),this.menuUndo&&(this.menuUndo.disabled=!this.behaviors.history.context.canUndo),this.menuRedo&&(this.menuRedo.disabled=!this.behaviors.history.context.canRedo),this.menuConvert&&(this.menuConvert.disabled=!this.behaviors.extractStrokesFromSymbols(this.model.symbols).length)}show(){this.wrapper&&(this.wrapper.style.visibility="visible")}hide(){this.wrapper&&(this.wrapper.style.visibility="hidden")}destroy(){if(this.wrapper){for(;this.wrapper.lastChild;)this.wrapper.removeChild(this.wrapper.lastChild);this.wrapper.remove(),this.wrapper=void 0,this.menuClear=void 0,this.menuUndo=void 0,this.menuRedo=void 0,this.menuConvert=void 0}}}Vn=new WeakMap;var Zn,Qn,ti,ei,ni='<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path\n    d="M 21 5 V 17.986 C 21 19 21 19 20 19 H 4 C 3 19 3 19 3.015 17.986 V 5 C 3 4 3 4 4 4 H 20.4 C 21 4 21 4 21 5 Z"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n</svg>\n',ii='<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path d="M3 20L21 4" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n</svg>\n';class ri extends Jn{constructor(t,e="ms-menu-intention"){super(),Zn.set(this,g.getLogger(d.MENU)),this.id=e,c(this,Zn,"f").info("constructor"),this.behaviors=t}createMenuWrite(){return this.writeBtn=document.createElement("button"),this.writeBtn.id=`${this.id}-write-pencil`,this.writeBtn.classList.add("ms-menu-button","square"),this.writeBtn.innerHTML='<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path\n    d="M14.3632 5.65156L15.8431 4.17157C16.6242 3.39052 17.8905 3.39052 18.6716 4.17157L20.0858 5.58579C20.8668 6.36683 20.8668 7.63316 20.0858 8.41421L18.6058 9.8942M14.3632 5.65156L4.74749 15.2672C4.41542 15.5993 4.21079 16.0376 4.16947 16.5054L3.92738 19.2459C3.87261 19.8659 4.39148 20.3848 5.0115 20.33L7.75191 20.0879C8.21972 20.0466 8.65806 19.8419 8.99013 19.5099L18.6058 9.8942M14.3632 5.65156L18.6058 9.8942"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n</svg>\n',this.writeBtn.addEventListener("pointerup",(()=>{this.unselectAll(),this.writeBtn.classList.add("active"),this.behaviors.intention=i.Write,this.behaviors.writer.tool=r.Pencil})),this.createToolTip(this.writeBtn,"Write")}createMenuMove(){return this.menuMove=document.createElement("button"),this.menuMove.id=`${this.id}-move`,this.menuMove.classList.add("ms-menu-button","square"),this.menuMove.innerHTML='<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path\n    d="M7 10.5L4.99591 13.1721C4.41845 13.9421 4.47127 15.0141 5.1216 15.7236L8.9055 19.8515C9.28432 20.2647 9.81826 20.5 10.3789 20.5C11.4651 20.5 13.2415 20.5 15 20.5C17.4 20.5 19 19 19 16.5C19 16.5 19 16.5 19 16.5C19 16.5 19 9.64287 19 7.92859"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    d="M16 8.49995C16 8.49995 16 8.37483 16 7.92852C16 5.6428 19 5.6428 19 7.92852"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    d="M13 8.50008C13 8.50008 13 7.91978 13 7.02715M13 6.50008C13 6.50008 13 6.804 13 7.02715M16 8.50008C16 8.50008 16 8.37496 16 7.92865C16 7.70549 16 7.25031 16 7.02715C16 4.74144 13 4.74144 13 7.02715"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    d="M13 8.50008C13 8.50008 13 7.91978 13 7.02715C13 4.74144 16 4.74144 16 7.02715C16 7.25031 16 7.70549 16 7.92865C16 8.37496 16 8.50008 16 8.50008"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    d="M10 8.50005C10 8.50005 10 7.85719 10 6.50005C10 4.21434 13 4.21434 13 6.50005C13 6.50005 13 6.50005 13 6.50005C13 6.50005 13 6.80397 13 7.02713C13 7.91975 13 8.50005 13 8.50005"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    d="M7 13.5001V6.50006C7 5.67164 7.67157 5.00006 8.5 5.00006V5.00006C9.32843 5.00006 10 5.55527 10 6.38369C10 6.42151 10 6.4603 10 6.50006C10 7.85721 10 8.50006 10 8.50006"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n</svg>\n',this.menuMove.addEventListener("pointerup",(()=>{this.unselectAll(),this.menuMove.classList.add("active"),this.behaviors.intention=i.Move})),this.createToolTip(this.menuMove,"Move")}createMenuSelect(){return this.menuSelect=document.createElement("button"),this.menuSelect.id=`${this.id}-select`,this.menuSelect.classList.add("ms-menu-button","square"),this.menuSelect.innerHTML='<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path\n    d="M4.9984 2H2V4.9984H4.9984V2Z"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-miterlimit="1.5"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    d="M4.99854 3.50098H18.9987"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-miterlimit="1.5"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path d="M3.5 4.99854V19.0005" stroke="currentColor" stroke-width="1" stroke-miterlimit="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M20.4978 5V19.002" stroke="currentColor" stroke-width="1" stroke-miterlimit="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M4.99854 20.501H18.9987" stroke="currentColor" stroke-width="1" stroke-miterlimit="1.5" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path\n    d="M4.9984 19H2V21.9984H4.9984V19Z"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-miterlimit="1.5"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    d="M21.9974 2.00195H18.999V5.00035H21.9974V2.00195Z"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-miterlimit="1.5"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    d="M21.9974 19.002H18.999V22.0004H21.9974V19.002Z"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-miterlimit="1.5"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    fill-rule="evenodd"\n    clip-rule="evenodd"\n    d="M10.9966 15.002L7.99658 8.00195L14.9966 11.002L11.9986 12.0009L10.9966 15.002Z"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-miterlimit="1.5"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n  <path\n    fill-rule="evenodd"\n    clip-rule="evenodd"\n    d="M11.999 12.002L14.997 15.002L11.999 12.002Z"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-miterlimit="1.5"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n</svg>\n',this.menuSelect.addEventListener("pointerup",(()=>{this.unselectAll(),this.menuSelect.classList.add("active"),this.behaviors.intention=i.Select})),this.createToolTip(this.menuSelect,"Select")}createMenuErase(){return this.menuErase=document.createElement("button"),this.menuErase.id=`${this.id}-erase`,this.menuErase.classList.add("ms-menu-button","square"),this.menuErase.innerHTML='<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path d="M21 21L9 21" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M15.889 14.8891L8.46436 7.46448" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path\n    d="M2.8934 12.6066L12.0858 3.41421C12.8668 2.63317 14.1332 2.63317 14.9142 3.41421L19.864 8.36396C20.645 9.14501 20.645 10.4113 19.864 11.1924L10.6213 20.435C10.2596 20.7968 9.76894 21 9.25736 21C8.74577 21 8.25514 20.7968 7.8934 20.435L2.8934 15.435C2.11235 14.654 2.11235 13.3877 2.8934 12.6066Z"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n</svg>\n',this.menuErase.addEventListener("pointerup",(()=>{this.unselectAll(),this.menuErase.classList.add("active"),this.behaviors.intention=i.Erase})),this.createToolTip(this.menuErase,"Erase")}createShapeSubMenu(t,e){const n=document.createElement("button");return n.id=`${this.id}-write-shape-${e}`,n.classList.add("ms-menu-button","square"),n.innerHTML=t,n.addEventListener("pointerup",(()=>{this.unselectAll(),this.behaviors.intention=i.Write,this.behaviors.writer.tool=e,n.classList.add("active"),this.menuShape.innerHTML=t,this.menuShape.classList.add("active");const r=this.menuShape.nextSibling;r&&r.classList.remove("open")})),this.createToolTip(n,e.toString())}createMenuShape(){this.menuShape=document.createElement("button"),this.menuShape.id=`${this.id}-write-shape`,this.menuShape.classList.add("ms-menu-button","square"),this.menuShape.innerHTML=ni,this.subMenuShape={circle:this.createShapeSubMenu('<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path\n    d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n</svg>\n',r.Circle),rectangle:this.createShapeSubMenu(ni,r.Rectangle),triangle:this.createShapeSubMenu('<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path\n    d="M11.4752 2.94682C11.7037 2.53464 12.2963 2.53464 12.5248 2.94682L21.8985 19.8591C22.1202 20.259 21.831 20.75 21.3738 20.75H2.62625C2.16902 20.75 1.87981 20.259 2.10146 19.8591L11.4752 2.94682Z"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n</svg>\n',r.Triangle),ellipse:this.createShapeSubMenu('<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path\n    d="M 12 19 C 18 19 22 17 22 12 C 22 7 18 5 12 5 C 6 5 2 7 2 12 C 2 17 6 19 12 19 Z"\n    stroke="currentColor"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n</svg>\n',r.Ellipse),rhombus:this.createShapeSubMenu('<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path\n    d="M11.5757 1.42426C11.81 1.18995 12.1899 1.18995 12.4243 1.42426L22.5757 11.5757C22.81 11.81 22.8101 12.1899 22.5757 12.4243L12.4243 22.5757C12.19 22.81 11.8101 22.8101 11.5757 22.5757L1.42426 12.4243C1.18995 12.19 1.18995 11.8101 1.42426 11.5757L11.5757 1.42426Z"\n    stroke="#000000"\n    stroke-width="1"\n    stroke-linecap="round"\n    stroke-linejoin="round"\n  ></path>\n</svg>\n',r.Rhombus)};const t=document.createElement("div");t.id=`${this.id}-write-shape-list`,t.classList.add("ms-menu-row","sub-menu-content-shape"),t.appendChild(this.subMenuShape.rectangle),t.appendChild(this.subMenuShape.circle),t.appendChild(this.subMenuShape.ellipse),t.appendChild(this.subMenuShape.triangle),t.appendChild(this.subMenuShape.rhombus);const e={trigger:this.menuShape,subMenu:t,position:"top"};return new Xn(e).element}createEdgeSubMenu(t,e){const n=document.createElement("button");return n.id=`${this.id}-write-edge-${e}`,n.classList.add("ms-menu-button","square"),n.innerHTML=t,n.addEventListener("pointerup",(()=>{this.unselectAll(),this.behaviors.intention=i.Write,this.behaviors.writer.tool=e,n.classList.add("active"),this.menuEdge.innerHTML=t,this.menuEdge.classList.add("active");const r=this.menuEdge.nextSibling;r&&r.classList.remove("open")})),this.createToolTip(n,e.toString())}createMenuEdge(){this.menuEdge=document.createElement("button"),this.menuEdge.id=`${this.id}-write-edge`,this.menuEdge.classList.add("ms-menu-button","square"),this.menuEdge.innerHTML=ii,this.subMenuEdge={line:this.createEdgeSubMenu(ii,r.Line),arrow:this.createEdgeSubMenu('<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path d="M3 20L21 4" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M15 5L21 4L 20 10" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n</svg>\n',r.Arrow),doubleArrow:this.createEdgeSubMenu('<svg\n  width="24px"\n  height="24px"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path d="M3 20L21 4" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M9 19L3 20L 4 14" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M15 5L21 4L 20 10" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n</svg>\n',r.DoubleArrow)};const t=document.createElement("div");t.id=`${this.id}-write-edge-list`,t.classList.add("ms-menu-row","sub-menu-content-edge"),t.appendChild(this.subMenuEdge.line),t.appendChild(this.subMenuEdge.arrow),t.appendChild(this.subMenuEdge.doubleArrow);const e={trigger:this.menuEdge,subMenu:t,position:"top"};return new Xn(e).element}unselectAll(){var t;null===(t=this.wrapper)||void 0===t||t.querySelectorAll("*").forEach((t=>t.classList.remove("active")))}update(){var t,e,n,o,s,a,l,c,h,u,d,p,f,m,g,v,y,b,w,x,S,k,_,E,L;switch(this.unselectAll(),this.behaviors.intention){case i.Erase:null===(t=this.menuErase)||void 0===t||t.classList.add("active");break;case i.Move:null===(e=this.menuMove)||void 0===e||e.classList.add("active");break;case i.Select:null===(n=this.menuSelect)||void 0===n||n.classList.add("active");break;case i.Write:switch(this.behaviors.writer.tool){case r.Circle:null===(o=this.menuShape)||void 0===o||o.classList.add("active"),null===(a=null===(s=this.subMenuShape)||void 0===s?void 0:s.circle)||void 0===a||a.classList.add("active");break;case r.Ellipse:null===(l=this.menuShape)||void 0===l||l.classList.add("active"),null===(h=null===(c=this.subMenuShape)||void 0===c?void 0:c.ellipse)||void 0===h||h.classList.add("active");break;case r.Triangle:null===(u=this.menuShape)||void 0===u||u.classList.add("active"),null===(p=null===(d=this.subMenuShape)||void 0===d?void 0:d.triangle)||void 0===p||p.classList.add("active");break;case r.Rectangle:null===(f=this.menuShape)||void 0===f||f.classList.add("active"),null===(g=null===(m=this.subMenuShape)||void 0===m?void 0:m.rectangle)||void 0===g||g.classList.add("active");break;case r.Line:null===(v=this.menuEdge)||void 0===v||v.classList.add("active"),null===(b=null===(y=this.subMenuEdge)||void 0===y?void 0:y.line)||void 0===b||b.classList.add("active");break;case r.Arrow:null===(w=this.menuEdge)||void 0===w||w.classList.add("active"),null===(S=null===(x=this.subMenuEdge)||void 0===x?void 0:x.arrow)||void 0===S||S.classList.add("active");break;case r.DoubleArrow:null===(k=this.menuEdge)||void 0===k||k.classList.add("active"),null===(E=null===(_=this.subMenuEdge)||void 0===_?void 0:_.doubleArrow)||void 0===E||E.classList.add("active");break;default:null===(L=this.writeBtn)||void 0===L||L.classList.add("active")}}}render(t){this.behaviors.configuration.menu.intention.enable&&(this.wrapper=document.createElement("div"),this.wrapper.classList.add("ms-menu","ms-menu-bottom","ms-menu-row"),this.wrapper.appendChild(this.createMenuWrite()),this.wrapper.appendChild(this.createMenuMove()),this.wrapper.appendChild(this.createMenuSelect()),this.wrapper.appendChild(this.createMenuErase()),this.wrapper.appendChild(this.createMenuEdge()),this.wrapper.appendChild(this.createMenuShape()),t.appendChild(this.wrapper),this.update(),this.show())}show(){this.wrapper&&(this.wrapper.style.visibility="visible")}hide(){this.wrapper&&(this.wrapper.style.visibility="hidden")}destroy(){if(this.wrapper){for(;this.wrapper.lastChild;)this.wrapper.removeChild(this.wrapper.lastChild);this.wrapper.remove(),this.writeBtn=void 0,this.menuSelect=void 0,this.menuMove=void 0,this.menuErase=void 0,this.menuShape=void 0,this.subMenuShape=void 0,this.menuEdge=void 0,this.subMenuEdge=void 0,this.wrapper=void 0}}}Zn=new WeakMap;class oi extends Jn{constructor(t,e="ms-menu-style"){super(),Qn.set(this,g.getLogger(d.MENU)),this.id=e,c(this,Qn,"f").info("constructor"),this.behaviors=t}get model(){return this.behaviors.model}get symbolsSelected(){return this.model.symbolsSelected}get writeShape(){return![r.Arrow,r.DoubleArrow,r.Line,r.Pencil].includes(this.behaviors.writer.tool)}get rowHeight(){return this.behaviors.configuration.rendering.guides.gap}get isMobile(){return this.behaviors.renderer.parent.clientWidth<700}createMenuStroke(){var t,e;const n=this.symbolsSelected.map((t=>t.style)),i=n.length&&n.every((t=>{var e;return t.color===(null===(e=n[0])||void 0===e?void 0:e.color)})),r=i&&(null===(t=n[0])||void 0===t?void 0:t.color)?null===(e=n[0])||void 0===e?void 0:e.color:this.behaviors.currentPenStyle.color||"rgb(0, 0, 0)",o={type:"colors",label:"Colors",id:`${this.id}-color`,fill:!1,values:this.colors,initValue:r,callback:t=>{this.behaviors.setPenStyle({color:t}),this.behaviors.updateSymbolsStyle(this.symbolsSelected.map((t=>t.id)),{color:t})}},s=this.createColorList(o);return this.menuColorStroke=this.createWrapCollapsible(s,"Colors"),this.menuColorStroke.id=`${this.id}-color`,this.menuColorStroke}createMenuColorFill(){var t,e;const n=this.symbolsSelected.map((t=>t.style)),i=n.length&&n.every((t=>{var e;return t.color===(null===(e=n[0])||void 0===e?void 0:e.color)})),r=i&&(null===(t=n[0])||void 0===t?void 0:t.color)?null===(e=n[0])||void 0===e?void 0:e.color:this.behaviors.currentPenStyle.color||"rgb(0, 0, 0)",o={type:"colors",label:"Fill",id:`${this.id}-fill`,fill:!0,values:this.colors,initValue:r,callback:t=>{this.behaviors.setPenStyle({fill:t}),this.behaviors.updateSymbolsStyle(this.symbolsSelected.map((t=>t.id)),{fill:t})}},s=this.createColorList(o);return this.menuColorFill=this.createWrapCollapsible(s,"Fill"),this.menuColorFill.id=`${this.id}-fill`,this.menuColorFill}createMenuThickness(){var t;const e=document.createElement("div");e.id=`${this.id}-thickness-list`,e.classList.add("ms-menu-row","thickness-list");const n=this.symbolsSelected.map((t=>t.style)),i=n.length&&n.every((t=>{var e;return t.width===(null===(e=n[0])||void 0===e?void 0:e.width)})),r=i?null===(t=n[0])||void 0===t?void 0:t.width:this.behaviors.currentPenStyle.width||2;return this.thicknessList.forEach((t=>{const n=document.createElement("button");n.id=`${this.id}-thickness-${t.label}-btn`,n.classList.add("ms-menu-button","square"),n.textContent=t.label,r===t.value&&n.classList.add("active"),n.addEventListener("pointerup",(i=>{i.preventDefault(),i.stopPropagation(),this.behaviors.setPenStyle({width:t.value}),e.querySelectorAll("*").forEach((t=>t.classList.remove("active"))),n.classList.add("active"),this.symbolsSelected.length&&(this.behaviors.updateSymbolsStyle(this.symbolsSelected.map((t=>t.id)),{width:t.value}),this.behaviors.selector.resetSelectedGroup(this.symbolsSelected))})),e.appendChild(n)})),this.menuThickness=this.createWrapCollapsible(e,"Thickness"),this.menuThickness.id=`${this.id}-thickness`,this.menuThickness}createMenuFontSize(){const t=document.createElement("div");return t.id=`${this.id}-font-size-list`,t.classList.add("ms-menu-row","font-size-list"),this.fontSizeList.forEach((e=>{const n=document.createElement("button");n.id=`${this.id}-font-size-${e.label}-btn`,n.classList.add("ms-menu-button","square"),n.textContent=e.label,(this.behaviors.converter.fontSize||0)===e.value*this.rowHeight&&n.classList.add("active"),n.addEventListener("pointerup",(i=>{if(i.preventDefault(),i.stopPropagation(),t.querySelectorAll("*").forEach((t=>t.classList.remove("active"))),n.classList.add("active"),0===e.value)this.behaviors.converter.fontSize=void 0;else{const t=e.value*this.rowHeight;this.behaviors.converter.fontSize=t;const n=this.symbolsSelected.filter((t=>t.type===ne.Text||t.type===ne.Group&&t.extractSymbols().some((t=>t.type===ne.Text))));this.behaviors.updateTextFontStyle(n.map((t=>t.id)),{fontSize:t}),this.behaviors.selector.resetSelectedGroup(this.symbolsSelected)}})),t.appendChild(n)})),this.menuFontSize=this.createWrapCollapsible(t,"Font size"),this.menuFontSize.id=`${this.id}-font-size`,this.menuFontSize}createMenuFontWeight(){const t=document.createElement("div");return t.id=`${this.id}-font-weight-list`,t.classList.add("ms-menu-row","font-weight-list"),this.fontWeightList.forEach((e=>{const n=document.createElement("button");n.id=`${this.id}-font-weight-${e.label}-btn`,n.classList.add("ms-menu-button","center"),n.textContent=e.label,this.behaviors.converter.fontWeight===e.value&&n.classList.add("active"),n.addEventListener("pointerup",(i=>{if(i.preventDefault(),i.stopPropagation(),t.querySelectorAll("*").forEach((t=>t.classList.remove("active"))),n.classList.add("active"),this.behaviors.converter.fontWeight=""===e.value?void 0:e.value,this.behaviors.converter.fontWeight){const t=this.symbolsSelected.filter((t=>t.type===ne.Text||t.type===ne.Group&&t.extractSymbols().some((t=>t.type===ne.Text))));this.behaviors.updateTextFontStyle(t.map((t=>t.id)),{fontWeight:this.behaviors.converter.fontWeight}),this.behaviors.selector.resetSelectedGroup(this.symbolsSelected)}})),t.appendChild(n)})),this.menuFontWeight=this.createWrapCollapsible(t,"Font weight"),this.menuFontWeight.id=`${this.id}-font-weight`,this.menuFontWeight}createMenuOpacity(){var t,e;const n=this.symbolsSelected.map((t=>t.style)),i=n.length&&n.every((t=>{var e;return t.opacity===(null===(e=n[0])||void 0===e?void 0:e.opacity)})),r=100*(i&&(null===(t=n[0])||void 0===t?void 0:t.opacity)?null===(e=n[0])||void 0===e?void 0:e.opacity:this.behaviors.currentPenStyle.opacity||1),o=document.createElement("div");o.id=`${this.id}-opacity-input-wrapper`;const s=document.createElement("input");s.id=`${this.id}-opacity-input`,s.setAttribute("name","opacity"),s.setAttribute("type","range"),s.setAttribute("step","1"),s.setAttribute("min","1"),s.setAttribute("max","100"),o.appendChild(s);const a=document.createElement("output");return a.setAttribute("for","opacity"),a.classList.add("tooltip"),a.innerHTML=r?`${r}`:"-",o.appendChild(a),r&&s.setAttribute("value",r.toString()),s.addEventListener("input",(t=>{const e=t.target.value;a.innerHTML=`${e}%`,this.behaviors.setPenStyle({opacity:e/100}),this.symbolsSelected.length&&this.behaviors.updateSymbolsStyle(this.symbolsSelected.map((t=>t.id)),{opacity:e/100})})),this.menuStrokeOpacity=this.createWrapCollapsible(o,"Opacity"),this.menuStrokeOpacity.id=`${this.id}-opacity`,this.menuStrokeOpacity}render(t){if(this.behaviors.configuration.menu.style.enable){this.triggerBtn=document.createElement("button"),this.triggerBtn.id=this.id,this.triggerBtn.classList.add("ms-menu-button","square"),this.triggerBtn.innerHTML='<svg\n  width="24px"\n  height="24px"\n  stroke-width="1"\n  viewBox="0 0 24 24"\n  fill="none"\n  xmlns="http://www.w3.org/2000/svg"\n  color="currentColor"\n>\n  <path\n    d="M20.5096 9.54C20.4243 9.77932 20.2918 9.99909 20.12 10.1863C19.9483 10.3735 19.7407 10.5244 19.5096 10.63C18.2796 11.1806 17.2346 12.0745 16.5002 13.2045C15.7659 14.3345 15.3733 15.6524 15.3696 17C15.3711 17.4701 15.418 17.9389 15.5096 18.4C15.5707 18.6818 15.5747 18.973 15.5215 19.2564C15.4682 19.5397 15.3588 19.8096 15.1996 20.05C15.0649 20.2604 14.8877 20.4403 14.6793 20.5781C14.4709 20.7158 14.2359 20.8085 13.9896 20.85C13.4554 20.9504 12.9131 21.0006 12.3696 21C11.1638 21.0006 9.97011 20.7588 8.85952 20.2891C7.74893 19.8194 6.74405 19.1314 5.90455 18.2657C5.06506 17.4001 4.40807 16.3747 3.97261 15.2502C3.53714 14.1257 3.33208 12.9252 3.36959 11.72C3.4472 9.47279 4.3586 7.33495 5.92622 5.72296C7.49385 4.11097 9.60542 3.14028 11.8496 3H12.3596C14.0353 3.00042 15.6777 3.46869 17.1017 4.35207C18.5257 5.23544 19.6748 6.49885 20.4196 8C20.6488 8.47498 20.6812 9.02129 20.5096 9.52V9.54Z"\n    stroke="currentColor"\n    stroke-width="1"\n  ></path>\n  <path d="M8 16.01L8.01 15.9989" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M6 12.01L6.01 11.9989" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M8 8.01L8.01 7.99889" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M12 6.01L12.01 5.99889" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n  <path d="M16 8.01L16.01 7.99889" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"></path>\n</svg>\n';const e=document.createElement("div");e.classList.add("ms-menu-colmun"),e.appendChild(this.createMenuStroke()),e.appendChild(this.createMenuColorFill()),e.appendChild(this.createMenuThickness()),e.appendChild(this.createMenuFontSize()),e.appendChild(this.createMenuFontWeight()),e.appendChild(this.createMenuOpacity());const n={trigger:this.triggerBtn,subMenu:e,position:"bottom-left"};this.subMenu=new Xn(n),this.wrapper=document.createElement("div"),this.wrapper.classList.add("ms-menu","ms-menu-top-right"),this.wrapper.appendChild(this.subMenu.element),t.appendChild(this.wrapper),this.update()}}update(){if(this.subMenu&&(this.isMobile?this.subMenu.wrap():this.subMenu.unwrap()),this.behaviors.intention===i.Write)this.show(),this.menuColorStroke&&(this.menuColorStroke.style.display="block"),this.menuColorFill&&(this.menuColorFill.style.display=this.writeShape?"block":"none"),this.menuThickness&&(this.menuThickness.style.display="block"),this.menuFontSize&&(this.menuFontSize.style.display="block"),this.menuFontWeight&&(this.menuFontWeight.style.display="block"),this.menuStrokeOpacity&&(this.menuStrokeOpacity.style.display="block");else if(this.behaviors.intention===i.Select){if(this.show(),this.menuColorStroke&&(this.menuColorStroke.style.display="block"),this.menuColorFill){const t=this.model.symbolsSelected.length&&this.model.symbolsSelected.some((t=>t.type===ne.Shape));this.menuColorFill.style.display=t?"block":"none"}this.menuThickness&&(this.menuThickness.style.display="block"),this.menuFontSize&&(this.menuFontSize.style.display="block"),this.menuFontWeight&&(this.menuFontWeight.style.display="block"),this.menuStrokeOpacity&&(this.menuStrokeOpacity.style.display="block")}else this.hide()}show(){this.wrapper&&(this.wrapper.style.visibility="visible")}hide(){this.wrapper&&(this.wrapper.style.visibility="hidden")}destroy(){if(this.wrapper){for(;this.wrapper.lastChild;)this.wrapper.removeChild(this.wrapper.lastChild);this.wrapper.remove(),this.wrapper=void 0,this.subMenu=void 0,this.triggerBtn=void 0,this.menuColorStroke=void 0,this.menuColorFill=void 0,this.menuThickness=void 0,this.menuFontSize=void 0,this.menuFontWeight=void 0,this.menuStrokeOpacity=void 0}}}Qn=new WeakMap;class si extends Jn{constructor(t,e="ms-menu-context"){super(),ti.set(this,g.getLogger(d.MENU)),this.id=e,c(this,ti,"f").info("constructor"),this.behaviors=t,this.position={x:0,y:0,scrollLeft:0,scrollTop:0}}get symbolsSelected(){return this.behaviors.model.symbolsSelected}get haveSymbolsSelected(){return this.symbolsSelected.length>0}get symbolsDecorable(){return this.symbolsSelected.filter((t=>[ne.Stroke.toString(),ne.Text.toString(),ne.Group.toString()].includes(t.type)))}get showDecorator(){return this.symbolsDecorable.length>0}createMenuEdit(){const t=document.createElement("button");t.id=`${this.id}-edit-trigger`,t.classList.add("ms-menu-button");const e=document.createElement("span");e.innerText="Edit",t.appendChild(e);const n=document.createElement("span");n.style.setProperty("width","32px"),n.style.setProperty("transform","rotate(270deg)"),n.innerHTML=Yn,t.appendChild(n);const i=document.createElement("div");i.classList.add("ms-menu-colmun"),this.editInput=document.createElement("input"),i.appendChild(this.editInput),this.editSaveBtn=document.createElement("button"),this.editSaveBtn.classList.add("ms-menu-button"),this.editSaveBtn.innerText="Save",i.appendChild(this.editSaveBtn),this.editSaveBtn.addEventListener("pointerdown",(t=>l(this,void 0,void 0,(function*(){t.stopPropagation();const e=this.behaviors.model.symbolsSelected.find((t=>t.type===ne.Text));if(e){const t=e.chars[0];e.chars=[];for(let n=0;n<this.editInput.value.length;n++)e.chars.push({label:this.editInput.value.charAt(n),id:R(),color:t.color,fontSize:t.fontSize,fontWeight:t.fontWeight,bounds:t.bounds});yield this.behaviors.updateSymbol(e),this.behaviors.selector.resetSelectedGroup([e])}}))));const r={trigger:t,subMenu:i,position:"right"};return this.editMenu=new Xn(r).element,this.editMenu}createMenuDuplicate(){return this.duplicateBtn=document.createElement("button"),this.duplicateBtn.id=`${this.id}-duplicate`,this.duplicateBtn.textContent="Duplicate",this.duplicateBtn.classList.add("ms-menu-button"),this.duplicateBtn.addEventListener("pointerup",(()=>l(this,void 0,void 0,(function*(){const t=this.symbolsSelected.map((t=>{const e=t.clone();for(;this.behaviors.model.symbols.find((t=>t.id===e.id));)e.id=e.id.slice(0,-36)+`-${R()}`,e.type===ne.Group&&e.extractSymbols().forEach((t=>t.id=t.id.slice(0,-36)+`-${R()}`));return e.selected=!0,this.behaviors.translator.applyToSymbol(e,a,a),e}));this.behaviors.unselectAll(),yield this.behaviors.addSymbols(t),this.behaviors.selector.drawSelectedGroup(t)})))),this.duplicateBtn}createMenuGroup(){return this.groupBtn=document.createElement("button"),this.groupBtn.id=`${this.id}-duplicate`,this.groupBtn.textContent="Group",this.groupBtn.classList.add("ms-menu-button"),this.groupBtn.addEventListener("pointerup",(()=>l(this,void 0,void 0,(function*(){if(1===this.symbolsSelected.length&&this.symbolsSelected[0].type===ne.Group){const t=this.behaviors.ungroupSymbol(this.symbolsSelected[0]);this.behaviors.select(t.map((t=>t.id)))}else{const t=this.symbolsSelected.slice();this.behaviors.unselectAll();const e=this.behaviors.groupSymbols(t);e.selected=!0,this.behaviors.select([e.id])}})))),this.groupBtn}createMenuConvert(){return this.convertBtn=document.createElement("button"),this.convertBtn.id=`${this.id}-convert`,this.convertBtn.textContent="Convert",this.convertBtn.classList.add("ms-menu-button"),this.convertBtn.addEventListener("pointerup",(()=>l(this,void 0,void 0,(function*(){try{this.behaviors.internalEvent.emitIdle(!1),yield this.behaviors.converter.apply(this.symbolsSelected)}catch(i){throw c(this,ti,"f").error("convert",i),this.behaviors.internalEvent.emitError(i),i}finally{this.behaviors.updateLayerInfos()}})))),this.convertBtn}createMenuRemove(){return this.removeBtn=document.createElement("button"),this.removeBtn.id=`${this.id}-remove`,this.removeBtn.textContent="Remove",this.removeBtn.classList.add("ms-menu-button"),this.removeBtn.addEventListener("pointerup",(()=>l(this,void 0,void 0,(function*(){this.behaviors.selector.removeSelectedGroup(),yield this.behaviors.removeSymbols(this.symbolsSelected.map((t=>t.id))),this.behaviors.menu.update()})))),this.removeBtn}createMenuReorder(){const t=document.createElement("button");t.id=`${this.id}-reorder`,t.classList.add("ms-menu-button");const e=document.createElement("span");e.innerText="Reorder",t.appendChild(e);const n=document.createElement("span");n.style.setProperty("width","32px"),n.style.setProperty("transform","rotate(270deg)"),n.innerHTML=Yn,t.appendChild(n);const i=[{type:"button",id:`${this.id}-reorder-first`,label:"Bring to front",callback:()=>{this.behaviors.changeOrderSymbols(this.symbolsSelected,"last"),this.behaviors.selector.resetSelectedGroup(this.symbolsSelected)}},{type:"button",id:`${this.id}-reorder-forward`,label:"Bring forward",callback:()=>{this.behaviors.changeOrderSymbols(this.symbolsSelected,"forward"),this.behaviors.selector.resetSelectedGroup(this.symbolsSelected)}},{type:"button",id:`${this.id}-reorder-backward`,label:"Send backward",callback:()=>{this.behaviors.changeOrderSymbols(this.symbolsSelected,"backward"),this.behaviors.selector.resetSelectedGroup(this.symbolsSelected)}},{type:"button",id:`${this.id}-reorder-last`,label:"Send to back",callback:()=>{this.behaviors.changeOrderSymbols(this.symbolsSelected.slice().reverse(),"first"),this.behaviors.selector.resetSelectedGroup(this.symbolsSelected)}}],r=document.createElement("div");r.classList.add("ms-menu-colmun"),i.forEach((t=>{r.appendChild(this.createMenuItem(t))}));const o={trigger:t,subMenu:r,position:"right"};return this.reorderMenu=new Xn(o).element,this.reorderMenu}createDecoratorSubMenu(t,e){const n=document.createElement("button");n.id=`${this.id}-decorator-${e}`,n.classList.add("ms-menu-button");const i=document.createElement("span");i.innerText=t,n.appendChild(i);const r=document.createElement("span");r.style.setProperty("width","32px"),r.style.setProperty("transform","rotate(270deg)"),r.innerHTML=Yn,n.appendChild(r);const o=[{type:"checkbox",id:`${this.id}-decorator-${e}-enable`,label:"Enable",initValue:!1,callback:t=>{var n;this.symbolsDecorable.forEach((n=>{if(t)n.decorators.some((t=>t.kind===e))||n.decorators.push(new Ut(e,this.behaviors.currentPenStyle));else{const t=n.decorators.findIndex((t=>t.kind===e));t>-1&&n.decorators.splice(t,1)}this.behaviors.model.updateSymbol(n),this.behaviors.renderer.drawSymbol(n)})),document.querySelectorAll(`#${this.id}-decorator-${e}-color button`).forEach((e=>{e.disabled=!t,e.classList.remove("active")})),t&&(null===(n=document.querySelector(`#${this.id}-decorator-${e}-color button`))||void 0===n||n.classList.add("active"))}},{type:"colors",label:"Colors",id:`${this.id}-decorator-${e}-color`,fill:!1,values:this.colors.filter(((t,e)=>!(e%4))),initValue:this.colors[0],disabled:!0,callback:t=>{this.symbolsDecorable.forEach((n=>{const i=n.decorators.find((t=>t.kind===e));i&&(i.style.color=t,this.behaviors.model.updateSymbol(n),this.behaviors.renderer.drawSymbol(n))}))}}],s=document.createElement("div");s.classList.add("ms-menu-colmun"),o.forEach((t=>{s.appendChild(this.createMenuItem(t))}));const a={trigger:n,subMenu:s,position:"right"};return this.decoratorMenu=new Xn(a).element}createMenuDecorator(){const t=document.createElement("button");t.id=`${this.id}-decorator`,t.classList.add("ms-menu-button");const e=document.createElement("span");e.innerText="Decorator",t.appendChild(e);const n=document.createElement("span");n.style.setProperty("width","32px"),n.style.setProperty("transform","rotate(270deg)"),n.innerHTML=Yn,t.appendChild(n);const i=document.createElement("div");i.classList.add("ms-menu-colmun"),i.appendChild(this.createDecoratorSubMenu("Hightlight",Rt.Highlight)),i.appendChild(this.createDecoratorSubMenu("Surround",Rt.Surround)),i.appendChild(this.createDecoratorSubMenu("Underline",Rt.Underline)),i.appendChild(this.createDecoratorSubMenu("Strikethrough",Rt.Strikethrough));const r={trigger:t,subMenu:i,position:"right"};return this.decoratorMenu=new Xn(r).element,this.decoratorMenu}createMenuExport(){const t=document.createElement("button");t.id=`${this.id}-export`,t.classList.add("ms-menu-button");const e=document.createElement("span");e.innerText="Export",t.appendChild(e);const n=document.createElement("span");n.style.setProperty("width","32px"),n.style.setProperty("transform","rotate(270deg)"),n.innerHTML=Yn,t.appendChild(n);const i=[{type:"button",id:`${this.id}-export-json`,label:"json",callback:()=>this.behaviors.downloadAsJson(this.haveSymbolsSelected)},{type:"button",id:`${this.id}-export-svg`,label:"svg",callback:()=>this.behaviors.downloadAsSVG(this.haveSymbolsSelected)},{type:"button",id:`${this.id}-export-png`,label:"png",callback:()=>this.behaviors.downloadAsPNG(this.haveSymbolsSelected)}],r=document.createElement("div");r.classList.add("ms-menu-colmun"),i.forEach((t=>{r.appendChild(this.createMenuItem(t))}));const o={trigger:t,subMenu:r,position:"right"};return this.menuExport=new Xn(o).element,this.menuExport}createMenuSelectAll(){const t=document.createElement("button");return t.id=`${this.id}-duplicate`,t.textContent="Select all",t.classList.add("ms-menu-button"),t.addEventListener("pointerup",(()=>l(this,void 0,void 0,(function*(){return this.behaviors.selectAll()})))),t}updateDecoratorSubMenu(){var t,e;this.showDecorator?(null===(t=this.decoratorMenu)||void 0===t||t.style.removeProperty("display"),Object.values(Rt).forEach((t=>{var e;const n=document.getElementById(`${this.id}-decorator-${t}-enable`);if(n){document.querySelectorAll(`#${this.id}-decorator-${t}-color button`).forEach((t=>t.classList.remove("active")));const i=this.symbolsDecorable.flatMap((t=>t.decorators)).filter((e=>e.kind===t));if(i.length&&i.every((t=>t.style.color===i[0].style.color))){const n=document.getElementById(`${this.id}-decorator-${t}-color-${null===(e=i[0].style.color)||void 0===e?void 0:e.replace("#","")}-btn`);null==n||n.classList.add("active")}this.symbolsDecorable.filter((e=>e.decorators.some((e=>e.kind===t)))).length===this.symbolsDecorable.length?(n.checked=!0,document.querySelectorAll(`#${this.id}-decorator-${t}-color button`).forEach((t=>{t.disabled=!1})),n.indeterminate=!1):this.symbolsDecorable.filter((e=>!e.decorators.some((e=>e.kind===t)))).length===this.symbolsDecorable.length?(n.checked=!1,document.querySelectorAll(`#${this.id}-decorator-${t}-color button`).forEach((t=>{t.disabled=!0})),n.indeterminate=!1):(n.setAttribute("indeterminate","true"),n.indeterminate=!0,document.querySelectorAll(`#${this.id}-decorator-${t}-color button`).forEach((t=>{t.disabled=!1})))}}))):null===(e=this.decoratorMenu)||void 0===e||e.style.setProperty("display","none")}updateGroupMenu(){var t;this.groupBtn&&this.haveSymbolsSelected?(this.groupBtn.style.removeProperty("display"),1===this.symbolsSelected.length&&this.symbolsSelected[0].type===ne.Group?this.groupBtn.textContent="UnGroup":this.groupBtn.textContent="Group"):null===(t=this.groupBtn)||void 0===t||t.style.setProperty("display","none")}update(){var t,e,n,i,r,o,s,a,l,c,h,u,d,p,f;if(null===(t=this.wrapper)||void 0===t||t.style.setProperty("left",this.position.x-this.position.scrollLeft+"px"),null===(e=this.wrapper)||void 0===e||e.style.setProperty("top",this.position.y-this.position.scrollTop+"px"),this.haveSymbolsSelected){const t=this.behaviors.model.symbolsSelected.find((t=>t.type===ne.Text));this.editMenu&&this.editInput&&1===this.behaviors.model.symbolsSelected.length&&t?(this.editMenu.style.removeProperty("display"),this.editInput.value=t.label):null===(n=this.editMenu)||void 0===n||n.style.setProperty("display","none"),this.behaviors.extractStrokesFromSymbols(this.symbolsSelected).length?null===(i=this.convertBtn)||void 0===i||i.style.removeProperty("display"):null===(r=this.convertBtn)||void 0===r||r.style.setProperty("display","none"),null===(o=this.reorderMenu)||void 0===o||o.style.removeProperty("display"),null===(s=this.duplicateBtn)||void 0===s||s.style.removeProperty("display"),null===(a=this.removeBtn)||void 0===a||a.style.removeProperty("display"),null===(l=this.menuExport)||void 0===l||l.style.removeProperty("display")}else null===(c=this.editMenu)||void 0===c||c.style.setProperty("display","none"),null===(h=this.convertBtn)||void 0===h||h.style.setProperty("display","none"),null===(u=this.reorderMenu)||void 0===u||u.style.setProperty("display","none"),null===(d=this.duplicateBtn)||void 0===d||d.style.setProperty("display","none"),null===(p=this.removeBtn)||void 0===p||p.style.setProperty("display","none"),null===(f=this.menuExport)||void 0===f||f.style.setProperty("display","none");this.updateDecoratorSubMenu(),this.updateGroupMenu()}render(t){var e;this.wrapper=document.createElement("div"),this.wrapper.id=`${this.id}-wrapper`,this.wrapper.classList.add("ms-menu","ms-menu-context"),this.wrapper.appendChild(this.createMenuEdit()),this.wrapper.appendChild(this.createMenuDecorator()),this.wrapper.appendChild(this.createMenuReorder()),this.wrapper.appendChild(this.createMenuExport()),this.wrapper.appendChild(this.createMenuConvert()),this.wrapper.appendChild(this.createMenuGroup()),this.wrapper.appendChild(this.createMenuDuplicate()),this.wrapper.appendChild(this.createMenuRemove()),this.wrapper.appendChild(this.createMenuSelectAll()),this.wrapper.style.setProperty("display","none"),t.appendChild(this.wrapper),null===(e=t.parentElement)||void 0===e||e.addEventListener("scroll",(()=>{var e,n;this.position.scrollLeft=(null===(e=t.parentElement)||void 0===e?void 0:e.scrollLeft)||0,this.position.scrollTop=(null===(n=t.parentElement)||void 0===n?void 0:n.scrollTop)||0,this.update()}))}show(){var t;this.update(),null===(t=this.wrapper)||void 0===t||t.style.setProperty("display","block")}hide(){var t;null===(t=this.wrapper)||void 0===t||t.style.setProperty("display","none")}destroy(){}}ti=new WeakMap;class ai{constructor(t,e){if(ei.set(this,g.getLogger(d.MENU)),c(this,ei,"f").info("constructor"),this.behaviors=t,null==e?void 0:e.style){const t=e.style;this.style=new t(this.behaviors)}else this.style=new oi(this.behaviors);if(null==e?void 0:e.intention){const t=e.intention;this.intention=new t(this.behaviors)}else this.intention=new ri(this.behaviors);if(null==e?void 0:e.action){const t=e.action;this.action=new t(this.behaviors)}else this.action=new Kn(this.behaviors);if(null==e?void 0:e.context){const t=e.context;this.context=new t(this.behaviors)}else this.context=new si(this.behaviors)}render(t){this.behaviors.configuration.menu.enable&&(this.layer=t,this.behaviors.configuration.menu.action.enable&&this.action.render(this.layer),this.behaviors.configuration.menu.style.enable&&this.style.render(this.layer),this.behaviors.configuration.menu.intention.enable&&this.intention.render(this.layer),this.behaviors.configuration.menu.context.enable&&this.context.render(this.layer))}update(){this.action.update(),this.intention.update(),this.style.update()}show(){this.action.show(),this.intention.show(),this.style.show()}hide(){this.action.hide(),this.intention.hide(),this.style.hide()}destroy(){this.action.destroy(),this.intention.destroy(),this.style.destroy()}}ei=new WeakMap;class li{constructor(t){this.behaviors=t}get renderer(){return this.behaviors.renderer}start(t){this.origin={left:this.renderer.parent.scrollLeft,top:this.renderer.parent.scrollTop,x:t.clientX,y:t.clientY}}continue(t){if(!this.origin)throw new Error("Can't move cause origin is undefined");const e=t.clientX-this.origin.x,n=t.clientY-this.origin.y;this.renderer.parent.scrollTop=this.origin.top-n,this.renderer.parent.scrollLeft=this.origin.left-e}end(t){return l(this,void 0,void 0,(function*(){this.continue(t),this.origin=void 0}))}}var ci,hi,ui,di,pi,fi,mi,gi,vi,yi,bi,wi,xi,Si,ki,_i,Ei,Li,Ci,Ai,Mi,Ni,Pi,Ti,Ii,Oi,Di,ji,Ri,Fi,Bi,zi,$i,qi,Ui,Gi,Hi,Wi,Vi,Yi,Ji,Xi,Ki,Zi,Qi,tr,er,nr,ir,rr,or,sr,ar,lr,cr,hr,ur,dr,pr,fr,mr,gr,vr,yr,br,wr,xr,Sr,kr,_r,Er,Lr,Cr,Ar,Mr,Nr,Pr,Tr,Ir,Or,Dr,jr,Rr,Fr,Br,zr,$r;class qr{constructor(t){ci.set(this,g.getLogger(d.HISTORY)),c(this,ci,"f").info("constructor",{configuration:t}),this.configuration=t,this.context={stackIndex:0,possibleUndoCount:0,canRedo:!1,canUndo:!1,empty:!0},this.stack=[]}get internalEvent(){return Ft.getInstance()}updateContext(){this.context.canRedo=this.stack.length-1>this.context.stackIndex,this.context.canUndo=this.context.stackIndex>0,this.context.empty=0===this.stack[this.context.stackIndex].symbols.length}push(t){c(this,ci,"f").info("push",{model:t}),this.context.stackIndex+1<this.stack.length&&this.stack.splice(this.context.stackIndex+1),this.stack.push(t.clone()),this.context.stackIndex=this.stack.length-1,this.stack.length>this.configuration.maxStackSize&&(this.stack.shift(),this.context.stackIndex--),this.updateContext(),this.internalEvent.emitContextChange(this.context)}updateStack(t){c(this,ci,"f").info("updateStack",{model:t});const e=this.stack.findIndex((e=>e.modificationDate===t.modificationDate));e>-1&&this.stack.splice(e,1,t.clone()),this.updateContext(),this.internalEvent.emitContextChange(this.context)}undo(){c(this,ci,"f").info("undo"),this.context.canUndo&&(this.context.stackIndex--,this.updateContext(),this.internalEvent.emitContextChange(this.context));const t=this.stack[this.context.stackIndex].clone();return c(this,ci,"f").debug("undo",t),t}redo(){c(this,ci,"f").info("redo"),this.context.canRedo&&(this.context.stackIndex++,this.updateContext(),this.internalEvent.emitContextChange(this.context));const t=this.stack[this.context.stackIndex].clone();return c(this,ci,"f").debug("redo",t),t}}ci=new WeakMap;class Ur{constructor(t){hi.set(this,g.getLogger(d.HISTORY)),c(this,hi,"f").info("constructor",{configuration:t}),this.configuration=t,this.context={stackIndex:0,possibleUndoCount:0,canRedo:!1,canUndo:!1,empty:!0},this.stack=[]}get internalEvent(){return Ft.getInstance()}updateContext(){this.context.canRedo=this.stack.length-1>this.context.stackIndex,this.context.canUndo=this.context.stackIndex>0,this.context.empty=0===this.stack[this.context.stackIndex].model.symbols.length}isChangesEmpty(t){var e,n,i,r,o,s,a,l,c,h,u,d,p,f,m;return!((null===(e=t.added)||void 0===e?void 0:e.length)||(null===(n=t.updated)||void 0===n?void 0:n.length)||(null===(i=t.erased)||void 0===i?void 0:i.length)||(null===(r=t.replaced)||void 0===r?void 0:r.oldSymbols.length)||(null===(o=t.matrix)||void 0===o?void 0:o.symbols.length)||(null===(s=t.translate)||void 0===s?void 0:s.length)||(null===(a=t.rotate)||void 0===a?void 0:a.length)||(null===(l=t.scale)||void 0===l?void 0:l.length)||(null===(h=null===(c=t.style)||void 0===c?void 0:c.symbols)||void 0===h?void 0:h.length)||(null===(d=null===(u=t.order)||void 0===u?void 0:u.symbols)||void 0===d?void 0:d.length)||(null===(p=t.decorator)||void 0===p?void 0:p.length)||(null===(f=t.group)||void 0===f?void 0:f.symbols.length)||(null===(m=t.ungroup)||void 0===m?void 0:m.group))}init(t){this.stack.push({model:t.clone(),changes:{}}),this.internalEvent.emitContextChange(this.context)}push(t,e){c(this,hi,"f").info("push",{model:t,changes:e}),this.isChangesEmpty(e)||(this.context.stackIndex+1<this.stack.length&&this.stack.splice(this.context.stackIndex+1),this.stack.push({model:t.clone(),changes:e}),this.context.stackIndex=this.stack.length-1,this.stack.length>this.configuration.maxStackSize&&(this.stack.shift(),this.context.stackIndex--),this.updateContext(),this.internalEvent.emitContextChange(this.context))}pop(){c(this,hi,"f").info("pop"),this.stack.pop(),this.context.stackIndex=this.stack.length-1,this.updateContext()}reverseChanges(t){var e,n,i;const r={};return t.added&&(r.erased=t.added),t.erased&&(r.added=t.erased),t.replaced&&(r.replaced={newSymbols:t.replaced.oldSymbols,oldSymbols:t.replaced.newSymbols}),t.matrix&&(r.matrix={symbols:t.matrix.symbols,matrix:new ae(t.matrix.matrix.xx,t.matrix.matrix.yx,t.matrix.matrix.xy,t.matrix.matrix.yy,t.matrix.matrix.tx,t.matrix.matrix.ty).invert()}),(null===(e=t.translate)||void 0===e?void 0:e.length)&&(r.translate=t.translate.map((t=>({symbols:t.symbols,tx:-t.tx,ty:-t.ty})))),(null===(n=t.rotate)||void 0===n?void 0:n.length)&&(r.rotate=t.rotate.map((t=>({symbols:t.symbols,angle:2*Math.PI-t.angle,center:t.center})))),(null===(i=t.scale)||void 0===i?void 0:i.length)&&(r.scale=t.scale.map((t=>({symbols:t.symbols,origin:t.origin,scaleX:1/t.scaleX,scaleY:1/t.scaleY})))),r}undo(){c(this,hi,"f").info("undo");const t=this.stack[this.context.stackIndex];this.context.canUndo&&(this.context.stackIndex--,this.updateContext(),this.internalEvent.emitContextChange(this.context));const e=this.stack[this.context.stackIndex];return c(this,hi,"f").debug("undo",e),{model:e.model,changes:this.reverseChanges(t.changes)}}redo(){c(this,hi,"f").info("redo"),this.context.canRedo&&(this.context.stackIndex++,this.updateContext(),this.internalEvent.emitContextChange(this.context));const t=this.stack[this.context.stackIndex];return c(this,hi,"f").debug("redo",t),t}clear(){this.context={stackIndex:0,possibleUndoCount:0,canRedo:!1,canUndo:!1,empty:!0},this.stack=[]}}hi=new WeakMap;class Gr{constructor(t,e){var n,r,o;this.name="OIBehaviors",ui.set(this,g.getLogger(d.BEHAVIORS)),di.set(this,void 0),pi.set(this,void 0),fi.set(this,void 0),mi.set(this,void 0),c(this,ui,"f").info("constructor",{options:t}),h(this,di,new mt(null==t?void 0:t.configuration),"f"),this.layerInfos=e,this.styler=new se(Object.assign({},Gt,null==t?void 0:t.penStyle),null==t?void 0:t.theme),this.grabber=new zt(c(this,di,"f").grabber),this.recognizer=new We(c(this,di,"f").server,c(this,di,"f").recognition),this.renderer=new In(c(this,di,"f").rendering),this.history=new Ur(c(this,di,"f")["undo-redo"]),this.writer=new Gn(this),this.eraser=new Hn(this),this.gesture=new Rn(this,null===(n=t.behaviors)||void 0===n?void 0:n.gesture),this.resizer=new Fn(this),this.rotator=new Bn(this),this.translator=new Un(this),this.converter=new jn(this,t.fontStyle),this.texter=new qn(this),this.selector=new zn(this),this.svgDebugger=new Wn(this),this.snaps=new $n(this,null===(r=t.behaviors)||void 0===r?void 0:r.snap),this.move=new li(this),this.menu=new ai(this,null===(o=t.behaviors)||void 0===o?void 0:o.menu),h(this,fi,i.Write,"f"),h(this,pi,new Ne(c(this,di,"f").rendering.minWidth,c(this,di,"f").rendering.minHeight,this.configuration.rendering.guides.gap),"f")}get internalEvent(){return Ft.getInstance()}get intention(){return c(this,fi,"f")}set intention(t){var e,n,r,o,s,a,l,u,d,p,f,m,g,v,y,b;switch(h(this,fi,t,"f"),c(this,fi,"f")){case i.Erase:null===(e=this.renderer.parent)||void 0===e||e.classList.remove("draw"),null===(n=this.renderer.parent)||void 0===n||n.classList.add("erase"),null===(r=this.renderer.parent)||void 0===r||r.classList.remove("select"),null===(o=this.renderer.parent)||void 0===o||o.classList.remove("move");break;case i.Select:null===(s=this.renderer.parent)||void 0===s||s.classList.remove("draw"),null===(a=this.renderer.parent)||void 0===a||a.classList.remove("erase"),null===(l=this.renderer.parent)||void 0===l||l.classList.add("select"),null===(u=this.renderer.parent)||void 0===u||u.classList.remove("move");break;case i.Move:null===(d=this.renderer.parent)||void 0===d||d.classList.remove("draw"),null===(p=this.renderer.parent)||void 0===p||p.classList.remove("erase"),null===(f=this.renderer.parent)||void 0===f||f.classList.remove("select"),null===(m=this.renderer.parent)||void 0===m||m.classList.add("move");break;default:null===(g=this.renderer.parent)||void 0===g||g.classList.add("draw"),null===(v=this.renderer.parent)||void 0===v||v.classList.remove("erase"),null===(y=this.renderer.parent)||void 0===y||y.classList.remove("select"),null===(b=this.renderer.parent)||void 0===b||b.classList.remove("move")}this.unselectAll()}get model(){return c(this,pi,"f")}get configuration(){return c(this,di,"f")}set renderingConfiguration(t){this.configuration.rendering=F(this.configuration.rendering,t);const e=Math.max(this.renderer.parent.clientHeight,this.configuration.rendering.minHeight),n=Math.max(this.renderer.parent.clientWidth,this.configuration.rendering.minWidth);this.renderer.resize(e,n),this.model.rowHeight=this.configuration.rendering.guides.gap,this.history.stack.forEach((t=>t.model.rowHeight=this.model.rowHeight))}get currentPenStyle(){return this.styler.currentPenStyle}get penStyle(){return this.styler.penStyle}setPenStyle(t){return l(this,void 0,void 0,(function*(){return c(this,ui,"f").info("setPenStyle",{penStyle:t}),this.styler.setPenStyle(Object.assign({},this.currentPenStyle,t)),Promise.resolve()}))}get penStyleClasses(){return this.styler.penStyleClasses}setPenStyleClasses(t){return l(this,void 0,void 0,(function*(){return c(this,ui,"f").info("setPenStyleClasses",{penStyleClasses:t}),this.styler.setPenStyleClasses(t),Promise.resolve()}))}get theme(){return this.styler.theme}setTheme(t){return l(this,void 0,void 0,(function*(){return c(this,ui,"f").info("setTheme",{theme:t}),this.styler.setTheme(t),Promise.resolve()}))}updateLayerInfos(){clearTimeout(c(this,mi,"f")),h(this,mi,setTimeout((()=>{this.menu.update(),this.svgDebugger.apply(),this.recognizer.waitForIdle()}),1500),"f")}onPointerDown(t,e){c(this,ui,"f").debug("onPointerDown",{evt:t,pointer:e}),this.internalEvent.emitIdle(!1);try{switch(this.unselectAll(),c(this,fi,"f")){case i.Erase:this.eraser.start(e);break;case i.Select:this.selector.start(e);break;case i.Move:this.move.start(t);break;default:this.writer.start(this.currentPenStyle,e,t.pointerType)}}catch(i){c(this,ui,"f").error("onPointerDown",i),this.grabber.stopPointerEvent(),this.internalEvent.emitError(i)}finally{this.svgDebugger.apply()}}onPointerMove(t,e){c(this,ui,"f").debug("onPointerMove",{pointer:e});try{switch(c(this,fi,"f")){case i.Erase:this.eraser.continue(e);break;case i.Select:this.selector.continue(e);break;case i.Move:this.move.continue(t);break;default:this.writer.continue(e)}}catch(i){c(this,ui,"f").error("onPointerMove",i),this.internalEvent.emitError(i)}finally{this.svgDebugger.apply()}}onPointerUp(t,e){return l(this,void 0,void 0,(function*(){c(this,ui,"f").debug("onPointerUp",{pointer:e});try{switch(c(this,fi,"f")){case i.Erase:this.eraser.end(e);break;case i.Select:this.selector.end(e);break;case i.Move:this.move.end(t);break;default:this.writer.end(e)}}catch(i){this.undo(),c(this,ui,"f").error("onPointerUp",i),this.internalEvent.emitError(i)}finally{this.updateLayerInfos()}}))}onContextMenu(t,e){return l(this,void 0,void 0,(function*(){if(this.intention===i.Select){let n=!1,i=t;const r=[ne.Edge.toString(),ne.Shape.toString(),ne.Stroke.toString(),ne.Text.toString()];for(;i&&"svg"!==i.tagName&&!n;)r.includes(i.getAttribute("type"))?n=!0:i=i.parentElement;this.unselectAll(),(null==i?void 0:i.id)?(this.model.selectSymbol(i.id),this.renderer.drawSymbol(this.model.symbolsSelected[0]),this.selector.drawSelectedGroup(this.model.symbolsSelected)):(this.menu.context.position.x=e.x+this.renderer.parent.clientLeft,this.menu.context.position.y=e.y+this.renderer.parent.clientTop,this.menu.context.show())}}))}init(t){return l(this,void 0,void 0,(function*(){c(this,ui,"f").info("init",{domElement:t}),this.renderer.init(t),this.menu.render(this.layerInfos),this.grabber.attach(this.renderer.layer),this.grabber.onPointerDown=this.onPointerDown.bind(this),this.grabber.onPointerMove=this.onPointerMove.bind(this),this.grabber.onPointerUp=this.onPointerUp.bind(this),this.grabber.onContextMenu=this.onContextMenu.bind(this),this.model.width=Math.max(t.clientWidth,c(this,di,"f").rendering.minWidth),this.model.height=Math.max(t.clientHeight,c(this,di,"f").rendering.minHeight),this.model.rowHeight=this.configuration.rendering.guides.gap,this.history.init(this.model),yield this.recognizer.init(),yield this.setPenStyle(this.penStyle),yield this.setTheme(this.theme),yield this.setPenStyleClasses(this.penStyleClasses)}))}changeLanguage(t){return l(this,void 0,void 0,(function*(){try{c(this,ui,"f").info("changeLanguage",{code:t}),this.internalEvent.emitIdle(!1),this.configuration.recognition.lang=t,yield this.recognizer.destroy(),this.recognizer=new We(c(this,di,"f").server,c(this,di,"f").recognition),yield this.recognizer.init(),yield this.recognizer.addStrokes(this.model.symbols.filter((t=>t.type===ne.Stroke)),!1)}catch(t){throw c(this,ui,"f").error("changeLanguage",t),this.internalEvent.emitError(t),t}finally{this.updateLayerInfos()}}))}createShape(t){switch(t.kind){case oe.Circle:return ge.create(t);case oe.Ellipse:return me.create(t);case oe.Polygon:return ve.create(t);default:throw new Error(`Unable to create shape, kind: "${t.kind}" is unknown`)}}createEdge(t){switch(t.kind){case ie.Arc:return ue.create(t);case ie.Line:return de.create(t);case ie.PolyEdge:return pe.create(t);default:throw new Error(`Unable to create edge, kind: "${t.kind}" is unknown`)}}createGroup(t){var e;if(!(null===(e=t.children)||void 0===e?void 0:e.length))throw new Error("Unable to create group, no children");const n=t.children.map((t=>{switch(null==t?void 0:t.type){case ne.Stroke:return ye.create(t);case ne.Shape:return this.createShape(t);case ne.Edge:return this.createEdge(t);case ne.Text:return xe.create(t);case ne.Group:return this.createGroup(t);default:throw new Error(`Unable to create group, symbol type '${JSON.stringify(t)} is unknow`)}})),i=new we(n,t.style);return t.id&&(i.id=t.id),t.decorators&&(i.decorators=t.decorators.map((t=>new Ut(t.kind,t.style)))),i}createStroke(t){return ye.create(t)}createText(t){return xe.create(t)}createSymbol(t){return l(this,void 0,void 0,(function*(){try{switch(t.type){case ne.Stroke:return yield this.addSymbol(this.createStroke(t));case ne.Shape:return yield this.addSymbol(this.createShape(t));case ne.Edge:return yield this.addSymbol(this.createEdge(t));case ne.Text:return yield this.addSymbol(this.createText(t));case ne.Group:return yield this.addSymbol(this.createGroup(t));default:throw new Error(`Unable to create symbol, type: "${t.type}" is unknown`)}}catch(t){throw c(this,ui,"f").error("createSymbol",t),this.updateLayerInfos(),this.internalEvent.emitError(t),t}}))}createSymbols(t){return l(this,void 0,void 0,(function*(){try{const e=[],n=[];if(t.forEach((t=>{try{switch(t.type){case ne.Stroke:n.push(this.createStroke(t));break;case ne.Shape:n.push(this.createShape(t));break;case ne.Edge:n.push(this.createEdge(t));break;case ne.Text:n.push(this.createText(t));break;case ne.Group:n.push(this.createGroup(t));break;default:e.push(`Unable to create symbol, type: "${t.type}" is unknown`)}}catch(t){e.push(t.message||t)}})),e.length)throw new Error(e.join("\n"));return yield this.addSymbols(n)}catch(t){throw c(this,ui,"f").error("importPointEvents",t),this.internalEvent.emitError(t),t}}))}addSymbol(t,e=!0){return l(this,void 0,void 0,(function*(){c(this,ui,"f").info("addSymbol",{sym:t}),this.internalEvent.emitIdle(!1),t.type===ne.Text?this.texter.updateBounds(t):t.type===ne.Group&&t.extractSymbols().forEach((t=>{t.type===ne.Text&&this.texter.updateBounds(t)})),this.model.addSymbol(t),this.renderer.drawSymbol(t);const n=this.extractStrokesFromSymbols([t]);return this.recognizer.addStrokes(n,!1),e&&this.history.push(this.model,{added:[t]}),this.updateLayerInfos(),t}))}addSymbols(t,e=!0){return l(this,void 0,void 0,(function*(){c(this,ui,"f").info("addSymbol",{symList:t}),this.internalEvent.emitIdle(!1),t.forEach((t=>{t.type===ne.Text?this.texter.updateBounds(t):t.type===ne.Group&&t.extractSymbols().forEach((t=>{t.type===ne.Text&&this.texter.updateBounds(t)})),this.model.addSymbol(t),this.renderer.drawSymbol(t)}));const n=this.extractStrokesFromSymbols(t);return this.recognizer.addStrokes(n,!1),e&&this.history.push(this.model,{added:t}),this.updateLayerInfos(),t}))}updateSymbol(t,e=!0){return l(this,void 0,void 0,(function*(){c(this,ui,"f").info("updateSymbol",{sym:t}),this.internalEvent.emitIdle(!1),t.type===ne.Text?this.texter.updateBounds(t):t.type===ne.Group&&t.extractSymbols().forEach((t=>{t.type===ne.Text&&this.texter.updateBounds(t)})),this.model.updateSymbol(t),this.renderer.drawSymbol(t);const n=this.extractStrokesFromSymbols([t]);return this.recognizer.replaceStrokes(n.map((t=>t.id)),n),e&&this.history.push(this.model,{updated:[t]}),this.updateLayerInfos(),t}))}updateSymbols(t,e=!0){return l(this,void 0,void 0,(function*(){c(this,ui,"f").info("updateSymbol",{symList:t}),this.internalEvent.emitIdle(!1),t.forEach((t=>{t.type===ne.Text?this.texter.updateBounds(t):t.type===ne.Group&&t.extractSymbols().forEach((t=>{t.type===ne.Text&&this.texter.updateBounds(t)})),this.model.updateSymbol(t),this.renderer.drawSymbol(t)}));const n=this.extractStrokesFromSymbols(t);return this.recognizer.replaceStrokes(n.map((t=>t.id)),n),e&&this.history.push(this.model,{updated:t}),this.updateLayerInfos(),t}))}updateSymbolsStyle(t,e,n=!0){c(this,ui,"f").info("updateSymbolsStyle",{symbolIds:t,style:e});const i=[];this.model.symbols.forEach((n=>{t.includes(n.id)&&(n.style=Object.assign({},n.style,e),n.type===ne.Text?n.chars.forEach((t=>{e.color&&(t.color=e.color)})):n.type===ne.Group&&n.updateChildrenStyle(),this.renderer.drawSymbol(n),this.model.updateSymbol(n),n.modificationDate=Date.now(),i.push(n))})),i.length&&i.forEach((t=>{if(t.type===ne.Text){const e=t.bounds.width;this.texter.updateBounds(t);const n=t.bounds.width-e;0!==n&&this.texter.moveTextAfter(t,n)}})),n&&i.length&&this.history.push(this.model,{style:{symbols:i,style:e}})}updateTextFontStyle(t,{fontSize:e,fontWeight:n}){c(this,ui,"f").info("updateTextFontStyle",{textIds:t,fontSize:e,fontWeight:n});const i=[],r=[];this.model.symbols.forEach((o=>{if(t.includes(o.id))if(o.type===ne.Text){o.chars.forEach((t=>{e&&(t.fontSize=e),n&&(t.fontWeight=n)}));const t=o.bounds.width;this.texter.updateBounds(o),this.renderer.drawSymbol(o);const s=o.bounds.width-t;if(0!==s){const t=this.texter.moveTextAfter(o,s);(null==t?void 0:t.length)&&r.push({symbols:t,tx:s,ty:0})}o.modificationDate=Date.now(),i.push(o)}else o.type===ne.Group&&o.extractSymbols().some((t=>t.type===ne.Text))&&(o.extractSymbols().forEach((t=>{if(t.type===ne.Text){t.chars.forEach((t=>{e&&(t.fontSize=e),n&&(t.fontWeight=n)}));const i=o.bounds.width;this.texter.updateBounds(t);const s=o.bounds.width-i,a=this.texter.moveTextAfter(t,s);(null==a?void 0:a.length)&&r.push({symbols:a,tx:s,ty:0}),t.modificationDate=Date.now()}})),o.modificationDate=Date.now(),this.renderer.drawSymbol(o),i.push(o))})),i.length&&this.history.push(this.model,{style:{symbols:i,fontSize:e},translate:r})}replaceSymbols(t,e,n=!0){return l(this,void 0,void 0,(function*(){c(this,ui,"f").info("replaceSymbol",{oldSymbols:t,newSymbols:e}),this.internalEvent.emitIdle(!1);const i=this.extractStrokesFromSymbols(t),r=this.extractStrokesFromSymbols(e),o=t[0];o&&(this.model.replaceSymbol(o.id,e),this.renderer.replaceSymbol(o.id,e),t.slice(1).forEach((t=>{this.renderer.removeSymbol(t.id),this.model.removeSymbol(t.id)})),i.length&&r.length?this.recognizer.replaceStrokes(i.map((t=>t.id)),r):i.length?this.recognizer.eraseStrokes(i.map((t=>t.id))):this.recognizer.addStrokes(r,!1),n&&this.history.push(this.model,{replaced:{oldSymbols:t,newSymbols:e}}),this.updateLayerInfos())}))}changeOrderSymbol(t,e){this.model.changeOrderSymbol(t.id,e),this.renderer.changeOrderSymbol(t,e),this.history.push(this.model,{order:{symbols:[t],position:e}})}changeOrderSymbols(t,e){t.forEach((t=>{this.model.changeOrderSymbol(t.id,e),this.renderer.changeOrderSymbol(t,e)})),this.history.push(this.model,{order:{symbols:t,position:e}})}groupSymbols(t){const e=this.createGroup({children:t});return t.forEach((t=>{this.model.removeSymbol(t.id),this.renderer.removeSymbol(t.id)})),this.model.addSymbol(e),this.history.push(this.model,{group:{symbols:t}}),e}ungroupSymbol(t){return t.children.forEach((t=>this.renderer.drawSymbol(t))),this.renderer.removeSymbol(t.id),this.model.replaceSymbol(t.id,t.children),this.history.push(this.model,{ungroup:{group:t}}),t.children}groupStrokesByJIIXElement(){var t,e;return l(this,void 0,void 0,(function*(){yield this.export(["application/vnd.myscript.jiix"]);const n=this.model.symbols.filter((t=>t.type===ne.Stroke)),i=null===(t=this.model.exports)||void 0===t?void 0:t["application/vnd.myscript.jiix"];null===(e=null==i?void 0:i.elements)||void 0===e||e.forEach((t=>{var e;if("Text"===t.type)null===(e=t.words)||void 0===e||e.forEach((t=>{var e,i;const r=n.filter((e=>{var n;return null===(n=t.items)||void 0===n?void 0:n.map((t=>t["full-id"])).includes(e.id)}));if(r.length){const n=[];let o=r[0].style;(null===(e=t.items)||void 0===e?void 0:e.length)!==r.length&&(null===(i=t.items)||void 0===i||i.forEach((t=>{const e=this.model.getRootSymbol(t["full-id"]);(null==e?void 0:e.type)===ne.Group&&(n.push(...e.decorators),o=Object.assign({},o,e.style),r.push(...e.extractStrokes()),this.model.removeSymbol(e.id),this.renderer.removeSymbol(e.id))})));const s=this.createGroup({children:r,style:o});n.forEach((t=>{s.decorators.some((e=>e.kind===t.kind))||s.decorators.push(t)})),r.map((t=>{this.model.removeSymbol(t.id),this.renderer.removeSymbol(t.id)})),this.model.addSymbol(s),this.renderer.drawSymbol(s)}}));else{const e=n.filter((e=>{var n;return null===(n=t.items)||void 0===n?void 0:n.map((t=>t["full-id"])).includes(e.id)}));if(e.length){const t=this.createGroup({children:e});e.map((t=>{this.model.removeSymbol(t.id),this.renderer.removeSymbol(t.id)})),this.model.addSymbol(t),this.renderer.drawSymbol(t)}}}))}))}removeSymbol(t,e=!0){return l(this,void 0,void 0,(function*(){c(this,ui,"f").info("removeSymbol",{id:t});const n=this.model.getRootSymbol(t);if(n){if(this.internalEvent.emitIdle(!1),n.type===ne.Group){const e=n.extractStrokes().map((t=>t.id));n.removeChilds([t]),n.children.length?(this.model.updateSymbol(n),this.renderer.drawSymbol(n),e.includes(t)&&this.recognizer.eraseStrokes([t])):(this.recognizer.eraseStrokes(e),this.model.removeSymbol(n.id),this.renderer.removeSymbol(n.id))}else this.recognizer.eraseStrokes([t]),this.model.removeSymbol(n.id),this.renderer.removeSymbol(n.id);e&&this.history.push(this.model,{erased:[n]}),this.updateLayerInfos()}else this.renderer.removeSymbol(t),this.recognizer.eraseStrokes([t])}))}removeSymbols(t,e=!0){return l(this,void 0,void 0,(function*(){c(this,ui,"f").info("removeSymbol",{ids:t});const n=[],i=[],r=[];if(t.forEach((e=>{const o=this.model.getRootSymbol(e);if(o)if(o.id===e)switch(n.push(o),o.type){case ne.Stroke:r.push(o.id);break;case ne.Group:r.push(...o.extractStrokes().map((t=>t.id)))}else{const e=o.clone();r.push(...e.extractStrokes().map((t=>t.id)).filter((e=>t.includes(e)))),e.removeChilds(t),e.children.length?i.push(e):n.push(e)}})),this.recognizer.eraseStrokes(r),n.forEach((t=>{this.model.removeSymbol(t.id),this.renderer.removeSymbol(t.id)})),i.forEach((t=>{this.model.updateSymbol(t),this.renderer.drawSymbol(t)})),e){const t={};(n.length||i.length)&&(n.length&&(t.erased=n),i.length&&(t.updated=i),this.history.push(this.model,t),this.updateLayerInfos())}return this.internalEvent.emitIdle(!1),n}))}select(t){this.selector.removeSelectedGroup(),this.model.symbols.forEach((e=>{e.selected=t.includes(e.id),this.renderer.drawSymbol(e)})),this.selector.drawSelectedGroup(this.model.symbolsSelected),this.internalEvent.emitSelected(this.model.symbolsSelected)}selectAll(){this.selector.removeSelectedGroup(),this.model.symbols.forEach((t=>{t.selected=!0,this.renderer.drawSymbol(t)})),this.selector.drawSelectedGroup(this.model.symbolsSelected),this.internalEvent.emitSelected(this.model.symbolsSelected)}unselectAll(){this.menu.context.hide(),this.menu.update(),this.model.symbolsSelected.length&&(this.model.symbolsSelected.forEach((t=>{t.selected=!1,this.renderer.drawSymbol(t)})),this.selector.removeSelectedGroup(),this.internalEvent.emitSelected(this.model.symbolsSelected))}importPointEvents(t){return l(this,void 0,void 0,(function*(){c(this,ui,"f").info("importPointEvents",{partialStrokes:t}),this.internalEvent.emitIdle(!1);const e=be(t);return e.forEach((t=>{this.model.addSymbol(t),this.renderer.drawSymbol(t)})),this.recognizer.addStrokes(e,!1),this.history.push(this.model,{added:e}),c(this,ui,"f").debug("importPointEvents",this.model),this.updateLayerInfos(),this.model}))}triggerDownload(t,e){const n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),document.body.appendChild(n),n.click(),n.remove()}getSymbolsBounds(t,e=10){const n=qt.createFromBoxes(t.map((t=>t.bounds)));return n.x-=e,n.y-=e,n.width+=2*e,n.height+=2*e,n}buildBlobFromSymbols(t,e){const n=en.createLayer(e);t.forEach((t=>{var e;const i=null===(e=this.renderer.getElementById(t.id))||void 0===e?void 0:e.cloneNode(!0);i&&n.appendChild(i)}));const i=(new XMLSerializer).serializeToString(n);return new Blob([i],{type:"image/svg+xml;charset=utf-8"})}getExportName(t){const e={year:"numeric",month:"numeric",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};try{return`iink-ts-${(new Date).toLocaleDateString(navigator.language,e)}.${t}`}catch(o){return`iink-ts-${(new Date).toLocaleDateString("en-US",e)}.${t}`}}downloadAsSVG(t=!1){const e=t?this.model.symbolsSelected:this.model.symbols,n=this.getSymbolsBounds(e),i=this.buildBlobFromSymbols(e,n),r=URL.createObjectURL(i);this.triggerDownload(this.getExportName("svg"),r)}downloadAsPNG(t=!1){const e=t?this.model.symbolsSelected:this.model.symbols,n=this.getSymbolsBounds(e),i=this.buildBlobFromSymbols(e,n),r=URL.createObjectURL(i),o=new Image;o.width=n.width,o.height=n.height,o.src=r,o.onload=()=>{const t=document.createElement("canvas");t.width=o.width,t.height=o.height,t.getContext("2d").drawImage(o,0,0),URL.revokeObjectURL(r);const e=t.toDataURL("image/png").replace("image/png","image/octet-stream");this.triggerDownload(this.getExportName("png"),e)}}downloadAsJson(t=!1){const e=t?this.model.symbolsSelected:this.model.symbols,n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e,null,2));this.triggerDownload(this.getExportName("json"),n)}extractStrokesFromSymbols(t){if(!(null==t?void 0:t.length))return[];const e=[];return t.forEach((t=>{switch(t.type){case ne.Stroke:e.push(t);break;case ne.Group:e.push(...t.extractStrokes())}})),e}extractBackendChanges(t){var e,n,i,r,o;const s={};s.added=this.extractStrokesFromSymbols(t.added),s.erased=this.extractStrokesFromSymbols(t.erased);const a=this.extractStrokesFromSymbols(t.updated),l=a.concat(this.extractStrokesFromSymbols(null===(e=t.replaced)||void 0===e?void 0:e.oldSymbols)),c=a.concat(this.extractStrokesFromSymbols(null===(n=t.replaced)||void 0===n?void 0:n.newSymbols));return l.length&&c.length?s.replaced={oldStrokes:l,newStrokes:c}:(s.added.push(...c),s.erased.push(...l)),t.matrix&&(s.matrix={strokes:this.extractStrokesFromSymbols(t.matrix.symbols),matrix:t.matrix.matrix}),(null===(i=t.translate)||void 0===i?void 0:i.length)&&(s.translate=[],t.translate.forEach((t=>{const e=this.extractStrokesFromSymbols(t.symbols);e.length&&s.translate.push({strokes:e,tx:t.tx,ty:t.ty})}))),(null===(r=t.scale)||void 0===r?void 0:r.length)&&(s.scale=[],t.scale.forEach((t=>{const e=this.extractStrokesFromSymbols(t.symbols);e.length&&s.scale.push({strokes:e,origin:t.origin,scaleX:t.scaleX,scaleY:t.scaleY})}))),(null===(o=t.rotate)||void 0===o?void 0:o.length)&&(s.rotate=[],t.rotate.forEach((t=>{const e=this.extractStrokesFromSymbols(t.symbols);e.length&&s.rotate.push({strokes:e,center:t.center,angle:t.angle})}))),s}undo(){var t,e,n,i,r;return l(this,void 0,void 0,(function*(){if(c(this,ui,"f").info("undo"),this.history.context.canUndo){this.internalEvent.emitIdle(!1),this.unselectAll();const o=this.history.undo(),s=o.model.extractDifferenceSymbols(this.model);h(this,pi,o.model.clone(),"f"),c(this,ui,"f").debug("undo",{previousStackItem:o});const a=this.extractBackendChanges(o.changes);s.removed.forEach((t=>this.renderer.removeSymbol(t.id))),s.added.forEach((t=>this.renderer.drawSymbol(t))),((null===(t=a.added)||void 0===t?void 0:t.length)||(null===(e=a.erased)||void 0===e?void 0:e.length)||a.replaced||a.matrix||(null===(n=a.translate)||void 0===n?void 0:n.length)||(null===(i=a.scale)||void 0===i?void 0:i.length)||(null===(r=a.rotate)||void 0===r?void 0:r.length))&&(yield this.recognizer.undo(a)),this.updateLayerInfos()}return this.model}))}redo(){var t,e,n,i,r;return l(this,void 0,void 0,(function*(){if(c(this,ui,"f").info("redo"),this.history.context.canRedo){this.internalEvent.emitIdle(!1),this.unselectAll();const o=this.history.redo(),s=o.model.extractDifferenceSymbols(this.model);h(this,pi,o.model.clone(),"f"),c(this,ui,"f").debug("redo",{modifications:s});const a=this.extractBackendChanges(o.changes);s.removed.forEach((t=>this.renderer.removeSymbol(t.id))),s.added.forEach((t=>this.renderer.drawSymbol(t))),((null===(t=a.added)||void 0===t?void 0:t.length)||(null===(e=a.erased)||void 0===e?void 0:e.length)||a.replaced||a.matrix||(null===(n=a.translate)||void 0===n?void 0:n.length)||(null===(i=a.scale)||void 0===i?void 0:i.length)||(null===(r=a.rotate)||void 0===r?void 0:r.length))&&(yield this.recognizer.redo(a)),this.updateLayerInfos()}return this.model}))}export(t){return l(this,void 0,void 0,(function*(){try{c(this,ui,"f").info("export",{mimeTypes:t});const e=yield this.recognizer.export(t);this.model.mergeExport(e)}catch(t){throw c(this,ui,"f").error("export",{error:t}),this.internalEvent.emitError(t),t}return this.model}))}convert(){return l(this,void 0,void 0,(function*(){try{this.internalEvent.emitIdle(!1),yield this.converter.apply()}catch(i){throw c(this,ui,"f").error("convert",i),this.internalEvent.emitError(i),i}finally{this.updateLayerInfos()}return this.model}))}resize(t,e){return l(this,void 0,void 0,(function*(){return this.internalEvent.emitIdle(!1),c(this,ui,"f").info("resize",{height:t,width:e}),this.model.height=t,this.model.width=e,this.renderer.resize(t,e),this.menu.update(),this.internalEvent.emitIdle(!0),this.model}))}clear(){return l(this,void 0,void 0,(function*(){if(c(this,ui,"f").info("clear"),this.internalEvent.emitIdle(!1),this.model.symbols.length){this.selector.removeSelectedGroup();const t=this.model.symbols;this.renderer.clear(),this.model.clear(),this.history.push(this.model,{erased:t}),this.recognizer.clear(),this.internalEvent.emitSelected(this.model.symbolsSelected)}return this.updateLayerInfos(),this.model}))}destroy(){return l(this,void 0,void 0,(function*(){return c(this,ui,"f").info("destroy"),this.grabber.detach(),this.renderer.destroy(),this.menu.destroy(),this.recognizer.destroy(),this.model.clear(),this.history.clear(),Promise.resolve()}))}}ui=new WeakMap,di=new WeakMap,pi=new WeakMap,fi=new WeakMap,mi=new WeakMap;class Hr{constructor(t){var e,n,r,o;if(this.name="RestBehaviors",gi.set(this,g.getLogger(d.BEHAVIORS)),vi.set(this,void 0),yi.set(this,void 0),bi.set(this,void 0),wi.set(this,void 0),c(this,gi,"f").info("constructor",{options:t}),h(this,vi,new mt(null==t?void 0:t.configuration),"f"),this.styleManager=new se(null==t?void 0:t.penStyle,null==t?void 0:t.theme),null===(e=t.behaviors)||void 0===e?void 0:e.grabber){const e=null===(n=t.behaviors)||void 0===n?void 0:n.grabber;this.grabber=new e(c(this,vi,"f").grabber)}else this.grabber=new $t(c(this,vi,"f").grabber);if(null===(r=t.behaviors)||void 0===r?void 0:r.recognizer){const e=null===(o=t.behaviors)||void 0===o?void 0:o.recognizer;this.recognizer=new e(c(this,vi,"f").server,c(this,vi,"f").recognition)}else this.recognizer=new Ve(c(this,vi,"f").server,c(this,vi,"f").recognition);this.renderer=new Ze(c(this,vi,"f").rendering),this.intention=i.Write,h(this,yi,new Me,"f"),this.history=new qr(c(this,vi,"f")["undo-redo"])}onPointerDown(t,e){var n;c(this,gi,"f").info("onPointerDown",{intention:this.intention,evt:t,point:e});const{pointerType:r}=t,o=Object.assign({},null===(n=this.theme)||void 0===n?void 0:n.ink,this.currentPenStyle);switch(this.intention){case i.Erase:this.model.removeStrokesFromPoint(e).length>0&&this.renderer.drawModel(this.model);break;case i.Write:this.model.initCurrentStroke(e,r,o),this.drawCurrentStroke();break;default:c(this,gi,"f").warn("#onPointerDown",`onPointerDown intention unknow: "${this.intention}"`)}}onPointerMove(t,e){switch(c(this,gi,"f").info("onPointerMove",{intention:this.intention,point:e}),this.intention){case i.Erase:this.model.removeStrokesFromPoint(e).length>0&&this.renderer.drawModel(this.model);break;case i.Write:this.model.appendToCurrentStroke(e),this.drawCurrentStroke();break;default:c(this,gi,"f").warn("#onPointerMove",`onPointerMove intention unknow: "${this.intention}"`)}}onPointerUp(t,e){var n;return l(this,void 0,void 0,(function*(){switch(c(this,gi,"f").info("onPointerUp",{intention:this.intention,point:e}),this.intention){case i.Erase:this.model.removeStrokesFromPoint(e),(null===(n=this.history.stack.at(-1))||void 0===n?void 0:n.modificationDate)!==this.model.modificationDate&&(yield this.updateModelRendering());break;case i.Write:this.model.endCurrentStroke(e),yield this.updateModelRendering();break;default:c(this,gi,"f").warn("#onPointerUp",`onPointerUp intention unknow: "${this.intention}"`)}}))}get internalEvent(){return Ft.getInstance()}get model(){return c(this,yi,"f")}get currentPenStyle(){return this.styleManager.currentPenStyle}get penStyle(){return this.styleManager.penStyle}setPenStyle(t){return l(this,void 0,void 0,(function*(){return c(this,gi,"f").info("setPenStyle",{penStyle:t}),this.styleManager.setPenStyle(t),Promise.resolve()}))}get penStyleClasses(){return this.styleManager.penStyleClasses}setPenStyleClasses(t){return l(this,void 0,void 0,(function*(){return c(this,gi,"f").info("setPenStyleClasses",{penStyleClasses:t}),this.styleManager.setPenStyleClasses(t),Promise.resolve()}))}get theme(){return this.styleManager.theme}setTheme(t){return l(this,void 0,void 0,(function*(){return c(this,gi,"f").info("setTheme",{theme:t}),this.styleManager.setTheme(t),Promise.resolve()}))}get configuration(){return c(this,vi,"f")}init(t){return l(this,void 0,void 0,(function*(){return c(this,gi,"f").info("init",{domElement:t}),this.model.width=Math.max(t.clientWidth,c(this,vi,"f").rendering.minWidth),this.model.height=Math.max(t.clientHeight,c(this,vi,"f").rendering.minHeight),this.history.push(this.model),this.renderer.init(t),this.grabber.attach(t),this.grabber.onPointerDown=this.onPointerDown.bind(this),this.grabber.onPointerMove=this.onPointerMove.bind(this),this.grabber.onPointerUp=this.onPointerUp.bind(this),Promise.resolve()}))}drawCurrentStroke(){c(this,gi,"f").debug("drawCurrentStroke",{stroke:this.model.currentSymbol}),this.renderer.drawPendingStroke(this.model.currentSymbol)}updateModelRendering(){return l(this,void 0,void 0,(function*(){c(this,gi,"f").info("updateModelRendering"),this.renderer.drawModel(this.model);const t=new v;if(this.history.push(this.model),"DEMAND"!==c(this,vi,"f").triggers.exportContent){clearTimeout(c(this,wi,"f"));let e=this.model.clone();h(this,wi,setTimeout((()=>l(this,void 0,void 0,(function*(){try{e=yield this.recognizer.export(e),this.history.updateStack(e),this.model.modificationDate===e.modificationDate&&(this.model.exports=e.exports),t.resolve(this.model)}catch(e){c(this,gi,"f").error("updateModelRendering",{error:e}),this.internalEvent.emitError(e),t.reject(e)}}))),"QUIET_PERIOD"===c(this,vi,"f").triggers.exportContent?c(this,vi,"f").triggers.exportContentDelay:0),"f")}else t.resolve(this.model);return yield t.promise,this.internalEvent.emitExported(this.model.exports),c(this,gi,"f").debug("updateModelRendering",this.model.exports),t.promise}))}export(t){return l(this,void 0,void 0,(function*(){c(this,gi,"f").info("export",{mimeTypes:t});const e=yield this.recognizer.export(this.model.clone(),t);return this.model.modificationDate===e.modificationDate&&this.model.mergeExport(e.exports),this.history.updateStack(e),c(this,gi,"f").debug("export",this.model),this.model}))}convert(t,e){return l(this,void 0,void 0,(function*(){c(this,gi,"f").info("convert",{conversionState:t,requestedMimeTypes:e});const n=yield this.recognizer.convert(this.model,t,e);return Object.assign(c(this,yi,"f"),n),c(this,gi,"f").debug("convert",this.model),this.model}))}importPointEvents(t){return l(this,void 0,void 0,(function*(){const e=[];t.forEach(((t,n)=>{var i,r;let o=!0;const s=new _e(t.style||Ht,t.pointerType);if(t.id&&(s.id=t.id),!(null===(i=t.pointers)||void 0===i?void 0:i.length))return e.push(`stroke ${n+1} has not pointers`),void(o=!1);null===(r=t.pointers)||void 0===r||r.forEach(((t,i)=>{if(!t)return e.push(`stroke ${n+1} has no pointer at ${i}`),void(o=!1);const r={p:t.p||1,t:t.t||i,x:0,y:0};return null==(null==t?void 0:t.x)||null==(null==t?void 0:t.x)?(e.push(`stroke ${n+1} has no x at pointer at ${i}`),void(o=!1)):(r.x=t.x,null==(null==t?void 0:t.y)||null==(null==t?void 0:t.y)?(e.push(`stroke ${n+1} has no y at pointer at ${i}`),void(o=!1)):(r.y=t.y,void(o&&s.pointers.push(r))))})),o&&this.model.addStroke(s)})),e.length&&this.internalEvent.emitError(new Error(e.join("\n")));try{const t=yield this.updateModelRendering();return Object.assign(c(this,yi,"f"),t),this.model}catch(t){throw this.internalEvent.emitError(t),t}}))}resize(t,e){return l(this,void 0,void 0,(function*(){c(this,gi,"f").info("resize",{height:t,width:e});const n=new v;return this.model.height=t,this.model.width=e,this.renderer.resize(this.model),this.model.symbols.length?(clearTimeout(c(this,bi,"f")),h(this,bi,setTimeout((()=>l(this,void 0,void 0,(function*(){const t=yield this.recognizer.resize(this.model);n.resolve(t)}))),c(this,vi,"f").triggers.resizeTriggerDelay),"f")):n.resolve(this.model),h(this,yi,yield n.promise,"f"),c(this,gi,"f").debug("resize",{model:this.model}),this.internalEvent.emitExported(this.model.exports),this.model}))}undo(){return l(this,void 0,void 0,(function*(){return c(this,gi,"f").info("undo"),h(this,yi,this.history.undo(),"f"),this.renderer.drawModel(c(this,yi,"f")),h(this,yi,yield this.recognizer.export(c(this,yi,"f")),"f"),this.history.updateStack(c(this,yi,"f")),this.internalEvent.emitExported(c(this,yi,"f").exports),c(this,gi,"f").debug("undo",c(this,yi,"f")),c(this,yi,"f")}))}redo(){return l(this,void 0,void 0,(function*(){return c(this,gi,"f").info("redo"),h(this,yi,this.history.redo(),"f"),this.renderer.drawModel(c(this,yi,"f")),h(this,yi,yield this.recognizer.export(c(this,yi,"f")),"f"),this.history.updateStack(c(this,yi,"f")),this.internalEvent.emitExported(c(this,yi,"f").exports),c(this,gi,"f").debug("redo",c(this,yi,"f")),c(this,yi,"f")}))}clear(){return l(this,void 0,void 0,(function*(){return c(this,gi,"f").info("clear"),this.model.clear(),this.history.push(this.model),this.renderer.drawModel(this.model),this.internalEvent.emitExported(this.model.exports),c(this,gi,"f").debug("clear",this.model),this.model}))}destroy(){return l(this,void 0,void 0,(function*(){return c(this,gi,"f").info("destroy"),this.grabber.detach(),this.renderer.destroy(),Promise.resolve()}))}}gi=new WeakMap,vi=new WeakMap,yi=new WeakMap,bi=new WeakMap,wi=new WeakMap;class Wr{constructor(t){var e,n,r,o;if(this.name="WSBehaviors",xi.set(this,g.getLogger(d.BEHAVIORS)),Si.set(this,void 0),ki.set(this,void 0),_i.set(this,void 0),c(this,xi,"f").info("constructor",{options:t}),h(this,Si,new mt(null==t?void 0:t.configuration),"f"),this.styleManager=new se(null==t?void 0:t.penStyle,null==t?void 0:t.theme),null===(e=t.behaviors)||void 0===e?void 0:e.grabber){const e=null===(n=t.behaviors)||void 0===n?void 0:n.grabber;this.grabber=new e(c(this,Si,"f").grabber)}else this.grabber=new $t(c(this,Si,"f").grabber);if(null===(r=t.behaviors)||void 0===r?void 0:r.recognizer){const e=null===(o=t.behaviors)||void 0===o?void 0:o.recognizer;this.recognizer=new e(c(this,Si,"f").server,c(this,Si,"f").recognition)}else this.recognizer=new Ye(c(this,Si,"f").server,c(this,Si,"f").recognition);this.renderer=new Dn(c(this,Si,"f").rendering),this.intention=i.Write,h(this,ki,new Me,"f"),this.history=new qr(c(this,Si,"f")["undo-redo"])}get internalEvent(){return Ft.getInstance()}get model(){return c(this,ki,"f")}get configuration(){return c(this,Si,"f")}get currentPenStyle(){return this.styleManager.currentPenStyle}get penStyle(){return this.styleManager.penStyle}setPenStyle(t){return c(this,xi,"f").info("setPenStyle",{penStyle:t}),this.styleManager.setPenStyle(t),c(this,xi,"f").debug("setPenStyle",this.styleManager.penStyle),this.recognizer.setPenStyle(this.styleManager.penStyle)}get penStyleClasses(){return this.styleManager.penStyleClasses}setPenStyleClasses(t){return c(this,xi,"f").info("setPenStyleClasses",{penClass:t}),this.styleManager.setPenStyleClasses(t),c(this,xi,"f").debug("setPenStyleClasses",this.styleManager.penStyleClasses),this.recognizer.setPenStyleClasses(this.styleManager.penStyleClasses)}get theme(){return this.styleManager.theme}setTheme(t){return c(this,xi,"f").info("setTheme",{theme:t}),this.styleManager.setTheme(t),c(this,xi,"f").debug("setTheme",this.styleManager.theme),this.recognizer.setTheme(this.styleManager.theme)}onExport(t){c(this,xi,"f").debug("onExport",{exports:t}),this.model.mergeExport(t)}onPointerDown(t,e){var n;c(this,xi,"f").info("onPointerDown",{intention:this.intention,evt:t,point:e});let{pointerType:r}=t;const o=Object.assign({},null===(n=this.theme)||void 0===n?void 0:n.ink,this.currentPenStyle);this.intention===i.Erase&&(r="eraser"),this.model.initCurrentStroke(e,r,o),this.drawCurrentStroke()}onPointerMove(t,e){c(this,xi,"f").info("onPointerMove",{intention:this.intention,point:e}),this.model.appendToCurrentStroke(e),this.drawCurrentStroke()}onPointerUp(t,e){return l(this,void 0,void 0,(function*(){try{c(this,xi,"f").info("onPointerUp",{intention:this.intention,point:e}),this.model.endCurrentStroke(e),yield this.synchronizeModelWithBackend()}catch(t){this.internalEvent.emitError(t)}}))}onSVGPatch(t){c(this,xi,"f").info("onSVGPatch",{evt:t}),this.renderer.updatesLayer(t.layer,t.updates)}init(t){return l(this,void 0,void 0,(function*(){c(this,xi,"f").info("init",{domElement:t});const e=window.getComputedStyle(t);this.model.width=Math.max(parseInt(e.width.replace("px","")),c(this,Si,"f").rendering.minWidth),this.model.height=Math.max(parseInt(e.height.replace("px","")),c(this,Si,"f").rendering.minHeight),this.history.push(this.model),this.renderer.init(t),this.grabber.attach(t),this.grabber.onPointerDown=this.onPointerDown.bind(this),this.grabber.onPointerMove=this.onPointerMove.bind(this),this.grabber.onPointerUp=this.onPointerUp.bind(this),this.internalEvent.addExportedListener(this.onExport.bind(this)),this.internalEvent.addSVGPatchListener(this.onSVGPatch.bind(this)),yield this.recognizer.init(this.model.height,this.model.width),yield this.setPenStyle(this.penStyle),yield this.setTheme(this.theme),yield this.setPenStyleClasses(this.penStyleClasses)}))}drawCurrentStroke(){c(this,xi,"f").debug("drawCurrentStroke",{stroke:this.model.currentSymbol});const t=this.model.currentSymbol;t&&this.renderer.drawPendingStroke(t)}synchronizeModelWithBackend(){return l(this,void 0,void 0,(function*(){if(c(this,xi,"f").info("synchronizeModelWithBackend"),"DEMAND"!==c(this,Si,"f").triggers.exportContent){const t=this.model.extractUnsentStrokes();this.model.updatePositionSent(),this.history.push(this.model),this.renderer.clearErasingStrokes();const e=yield this.recognizer.addStrokes(t);this.model.mergeExport(e),this.history.updateStack(this.model)}return c(this,xi,"f").debug("synchronizeModelWithBackend",this.model),this.model}))}waitForIdle(){return l(this,void 0,void 0,(function*(){return this.recognizer.waitForIdle()}))}export(t){return l(this,void 0,void 0,(function*(){c(this,xi,"f").info("export",{mimeTypes:t});try{if("DEMAND"===c(this,Si,"f").triggers.exportContent){const t=this.model.extractUnsentStrokes();this.model.updatePositionSent();const e=yield this.recognizer.addStrokes(t);return this.model.updatePositionReceived(),this.model.mergeExport(e),c(this,xi,"f").debug("export",this.model),this.model}return this.recognizer.export(this.model,t)}catch(t){return c(this,xi,"f").error("export",{error:t}),this.internalEvent.emitError(t),Promise.reject(t)}}))}convert(t){return l(this,void 0,void 0,(function*(){return c(this,xi,"f").info("convert",{conversionState:t}),this.history.push(this.model),this.history.stack.push(this.model.clone()),h(this,ki,yield this.recognizer.convert(this.model,t),"f"),c(this,xi,"f").debug("convert",this.model),this.history.push(this.model),this.model}))}import(t,e){return l(this,void 0,void 0,(function*(){c(this,xi,"f").info("import",{data:t,mimeType:e}),this.history.stack.push(this.model.clone());const n=yield this.recognizer.import(this.model,t,e);return this.history.push(n),n}))}importPointEvents(t){return l(this,void 0,void 0,(function*(){c(this,xi,"f").info("importPointEvents",{strokes:t});const e=[],n=t.map(((t,n)=>{var i,r;const o=new _e(t.style||Ht,t.pointerType);t.id&&(o.id=t.id),t.pointerType&&(o.pointerType=t.pointerType),(null===(i=t.pointers)||void 0===i?void 0:i.length)||e.push(`stroke ${n+1} has not pointers`);let s=!0;return null===(r=t.pointers)||void 0===r||r.forEach(((t,i)=>{if(s=!0,!t)return void e.push(`stroke ${n+1} has no pointer at ${i}`);const r={p:t.p||1,t:t.t||i,x:0,y:0};null==(null==t?void 0:t.x)||null==(null==t?void 0:t.x)?(e.push(`stroke ${n+1} has no x at pointer at ${i}`),s=!1):r.x=t.x,null==(null==t?void 0:t.y)||null==(null==t?void 0:t.y)?(e.push(`stroke ${n+1} has no y at pointer at ${i}`),s=!1):r.y=t.y,s&&o.pointers.push(r)})),o}));e.length&&this.internalEvent.emitError(new Error(e.join("\n"))),n.map((t=>this.model.addStroke(t)));const i=yield this.recognizer.importPointEvents(n);return this.model.mergeExport(i),c(this,xi,"f").debug("importPointEvents",this.model),this.model}))}resize(t,e){return l(this,void 0,void 0,(function*(){c(this,xi,"f").info("resize",{height:t,width:e});const n=new v;this.model.height=t,this.model.width=e;const i=this.model.clone();return this.renderer.resize(i),clearTimeout(c(this,_i,"f")),h(this,_i,setTimeout((()=>l(this,void 0,void 0,(function*(){try{const t=yield this.recognizer.resize(i);n.resolve(t)}catch(i){c(this,xi,"f").error("resize",{height:t,width:e,error:i}),n.reject(i)}}))),c(this,Si,"f").triggers.resizeTriggerDelay),"f"),h(this,ki,yield n.promise,"f"),this.internalEvent.emitExported(this.model.exports),c(this,xi,"f").debug("resize",this.model),this.model}))}undo(){return l(this,void 0,void 0,(function*(){if(c(this,xi,"f").info("undo"),this.history.context.canUndo)return h(this,ki,this.history.undo(),"f"),this.recognizer.undo(this.model);throw new Error("Undo not allowed")}))}redo(){return l(this,void 0,void 0,(function*(){if(c(this,xi,"f").info("redo"),this.history.context.canRedo)return h(this,ki,this.history.redo(),"f"),c(this,xi,"f").debug("undo",c(this,ki,"f")),this.recognizer.redo(this.model);throw new Error("Redo not allowed")}))}clear(){return l(this,void 0,void 0,(function*(){return c(this,xi,"f").info("clear"),this.model.clear(),this.history.push(this.model),this.recognizer.clear(this.model)}))}destroy(){return l(this,void 0,void 0,(function*(){return c(this,xi,"f").info("destroy"),this.grabber.detach(),this.renderer.destroy(),this.recognizer.destroy(),Promise.resolve()}))}}xi=new WeakMap,Si=new WeakMap,ki=new WeakMap,_i=new WeakMap;class Vr{constructor(){Ei.add(this),Li.set(this,void 0),Ci.set(this,void 0),Ai.set(this,void 0),Mi.set(this,void 0),Ni.set(this,void 0),Pi.set(this,void 0),Ti.set(this,void 0),Ii.set(this,void 0),Oi.set(this,void 0),Di.set(this,void 0),ji.set(this,void 0),Ri.set(this,void 0),Fi.set(this,g.getLogger(d.SMARTGUIDE)),Xi.set(this,(t=>{var e,n;c(this,Fi,"f").info("showCandidates",{target:t});const i=parseInt(t.id.replace("word-","").replace(this.uuid,"")),r=null===(e=this.jiix)||void 0===e?void 0:e.words;this.wordToChange=r[i],this.wordToChange&&(this.wordToChange.id=i.toString(),c(this,Ti,"f").innerHTML="",(null===(n=this.wordToChange)||void 0===n?void 0:n.candidates)&&(c(this,Ti,"f").style.display="flex",this.wordToChange.candidates.forEach(((t,e)=>{var n;(null===(n=this.wordToChange)||void 0===n?void 0:n.label)===t?c(this,Ti,"f").innerHTML+=`<span id="cdt-${e}${this.uuid}" class="selected-word">${t}</span>`:c(this,Ti,"f").innerHTML+=`<span id="cdt-${e}${this.uuid}">${t}</span>`})),t.appendChild(c(this,Ti,"f"))))})),tr.set(this,(t=>{c(this,Fi,"f").info("onClickEllipsis",{evt:t}),t.preventDefault(),t.stopPropagation(),c(this,Ri,"f")?c(this,Ei,"m",Qi).call(this):c(this,Ei,"m",Zi).call(this),c(this,Ei,"m",Ki).call(this)})),er.set(this,(t=>{c(this,Fi,"f").info("onClickConvert",{evt:t}),t.preventDefault(),t.stopPropagation(),this.internalEvent.emitConvert(),c(this,Ei,"m",Qi).call(this)})),rr.set(this,(t=>l(this,void 0,void 0,(function*(){c(this,Fi,"f").info("onClickCopy",{evt:t}),t.preventDefault(),t.stopPropagation();try{c(this,Ei,"m",Qi).call(this);let t="Nothing to copy";if(c(this,Mi,"f").innerText){t=`"${c(this,Mi,"f").innerText}" copied to clipboard`;const e=c(this,Ei,"m",nr).call(this,c(this,Mi,"f").innerText);c(this,Ai,"f").appendChild(e),c(this,Ei,"m",ir).call(this,e),document.execCommand("copy"),e.remove()}this.internalEvent.emitNotif({message:t,timeout:1500})}catch(t){c(this,Fi,"f").error("onClickCopy",t),this.internalEvent.emitError(t)}})))),or.set(this,(t=>{c(this,Fi,"f").info("onClickDelete",{evt:t}),t.preventDefault(),t.stopPropagation(),this.internalEvent.emitClear(),c(this,Ei,"m",Qi).call(this)})),sr.set(this,(t=>{var e,n,i,r,o;c(this,Fi,"f").info("onClickCandidate",{evt:t}),t.preventDefault(),t.stopPropagation();const s=t.target.innerText;(null===(e=this.jiix)||void 0===e?void 0:e.words)&&s!==(null===(n=this.wordToChange)||void 0===n?void 0:n.label)&&(null===(r=null===(i=this.wordToChange)||void 0===i?void 0:i.candidates)||void 0===r?void 0:r.includes(s))&&(this.jiix.words[parseInt(null===(o=this.wordToChange)||void 0===o?void 0:o.id)].label=s,this.internalEvent.emitImportJIIX(this.jiix)),c(this,Ti,"f").style.display="none"})),ar.set(this,(t=>{c(this,Fi,"f").info("onClickPrompter",{evt:t}),t.preventDefault(),t.stopPropagation(),c(this,Ei,"m",Qi).call(this);const e=t.target;e.id!==c(this,Mi,"f").id?c(this,Xi,"f").call(this,e):c(this,Ei,"m",Ki).call(this)})),lr.set(this,(t=>{t.preventDefault(),t.stopPropagation()})),cr.set(this,(()=>{c(this,Ei,"m",Ki).call(this),c(this,Ei,"m",Qi).call(this)})),c(this,Fi,"f").info("constructor"),this.uuid=R(),this.margin={bottom:0,left:0,right:0,top:0},c(this,Ei,"m",Bi).call(this),c(this,Ei,"m",zi).call(this),c(this,Ei,"m",$i).call(this),c(this,Ei,"m",qi).call(this),c(this,Ei,"m",Ui).call(this),c(this,Ei,"m",Gi).call(this),c(this,Ei,"m",Hi).call(this),c(this,Ei,"m",Wi).call(this),c(this,Ei,"m",Vi).call(this),c(this,Ei,"m",Yi).call(this),c(this,Ei,"m",Ji).call(this)}get internalEvent(){return Ft.getInstance()}init(t,e,n){c(this,Fi,"f").info("init",{domElement:t,margin:e,renderingConfiguration:n}),t.appendChild(c(this,Li,"f")),c(this,Li,"f").appendChild(c(this,Ci,"f")),c(this,Ci,"f").appendChild(c(this,Pi,"f")),c(this,Ai,"f").appendChild(c(this,Mi,"f")),c(this,Ci,"f").appendChild(c(this,Ai,"f")),c(this,Ci,"f").appendChild(c(this,Ni,"f")),c(this,Ii,"f").appendChild(c(this,Oi,"f")),c(this,Ii,"f").appendChild(c(this,Di,"f")),c(this,Ii,"f").appendChild(c(this,ji,"f")),c(this,Ii,"f").classList.add("close"),c(this,Ci,"f").appendChild(c(this,Ii,"f")),h(this,Ri,!1,"f"),c(this,Ti,"f").style.display="none",c(this,Ci,"f").appendChild(c(this,Ti,"f")),this.margin=e,this.renderingConfiguration=n,c(this,Ei,"m",hr).call(this),this.resize()}resize(){c(this,Fi,"f").info("resize");const t=D(this.margin.left),e=D(this.margin.right);c(this,Ci,"f").style.marginLeft=`${t}px`,c(this,Ci,"f").style.marginRight=`${e}px`}update(t){var e,n;c(this,Fi,"f").info("update",{exports:t}),this.jiix=t;const i=(t,e)=>{const n=document.createElement("span");return n.id=`word-${t}${this.uuid}`,e?n.textContent=e.label:n.innerHTML="&nbsp;",c(this,Fi,"f").debug("update",{span:n}),n};(()=>{var t;if(c(this,Fi,"f").info("populatePrompter"),c(this,Mi,"f").innerHTML="",null===(t=this.jiix)||void 0===t?void 0:t.words){const t=this.jiix.words,e=document.createDocumentFragment();t.forEach(((n,r)=>{var o,s,a;if(" "===n.label||n.label.includes("\n"))e.appendChild(i(r));else if(r!==t.length-1)e.appendChild(i(r,n));else{c(this,Mi,"f").appendChild(e),this.lastWord&&(this.lastWord=n);const t=i(r,n);(null===(o=this.lastWord)||void 0===o?void 0:o.candidates)!==n.candidates&&(null===(s=this.lastWord)||void 0===s?void 0:s.label)!==n.label&&(this.lastWord=n),(null===(a=this.wordToChange)||void 0===a?void 0:a.id)===r.toString()?(t.classList.add("modified-word"),this.wordToChange=void 0):t.classList.add("added-word"),c(this,Mi,"f").appendChild(t),c(this,Ai,"f").scrollLeft=t.offsetLeft,c(this,Fi,"f").debug("update => populatePrompter",{span:t,lastWord:this.lastWord})}}))}})(),(null===(n=null===(e=this.jiix)||void 0===e?void 0:e.words)||void 0===n?void 0:n.length)?c(this,Ni,"f").style.setProperty("pointer-events","auto"):c(this,Ni,"f").style.setProperty("pointer-events","none")}clear(){c(this,Fi,"f").info("clear"),c(this,Mi,"f").innerHTML="",c(this,Ti,"f").innerHTML=""}destroy(){c(this,Fi,"f").info("destroy"),c(this,Ei,"m",ur).call(this),c(this,Li,"f").remove()}}Li=new WeakMap,Ci=new WeakMap,Ai=new WeakMap,Mi=new WeakMap,Ni=new WeakMap,Pi=new WeakMap,Ti=new WeakMap,Ii=new WeakMap,Oi=new WeakMap,Di=new WeakMap,ji=new WeakMap,Ri=new WeakMap,Fi=new WeakMap,Xi=new WeakMap,tr=new WeakMap,er=new WeakMap,rr=new WeakMap,or=new WeakMap,sr=new WeakMap,ar=new WeakMap,lr=new WeakMap,cr=new WeakMap,Ei=new WeakSet,Bi=function(){h(this,Li,document.createElement("div"),"f"),c(this,Li,"f").id=`smartguide-${this.uuid}`,c(this,Li,"f").classList.add("smartguide"),c(this,Li,"f").addEventListener("pointerdown",(t=>{t.preventDefault(),t.stopPropagation()}))},zi=function(){h(this,Ci,document.createElement("div"),"f"),c(this,Ci,"f").id=`smartguide-wrapper-${this.uuid}`,c(this,Ci,"f").classList.add("smartguide-wrapper")},$i=function(){h(this,Ai,document.createElement("div"),"f"),c(this,Ai,"f").id=`prompter-container-${this.uuid}`,c(this,Ai,"f").classList.add("prompter-container")},qi=function(){h(this,Mi,document.createElement("div"),"f"),c(this,Mi,"f").id=`prompter-text-${this.uuid}`,c(this,Mi,"f").classList.add("prompter-text"),c(this,Mi,"f").setAttribute("touch-action","none")},Ui=function(){h(this,Ni,document.createElement("div"),"f"),c(this,Ni,"f").id=`ellipsis-${this.uuid}`,c(this,Ni,"f").classList.add("ellipsis"),c(this,Ni,"f").innerHTML="..."},Gi=function(){h(this,Pi,document.createElement("div"),"f"),c(this,Pi,"f").id=`tag-icon-${this.uuid}`,c(this,Pi,"f").classList.add("tag-icon"),c(this,Pi,"f").innerHTML="&#182;"},Hi=function(){h(this,Ti,document.createElement("div"),"f"),c(this,Ti,"f").id=`candidates-${this.uuid}`,c(this,Ti,"f").classList.add("candidates")},Wi=function(){h(this,Ii,document.createElement("div"),"f"),c(this,Ii,"f").id=`more-menu-${this.uuid}`,c(this,Ii,"f").classList.add("more-menu")},Vi=function(){h(this,Oi,document.createElement("button"),"f"),c(this,Oi,"f").id=`convert-${this.uuid}`,c(this,Oi,"f").classList.add("options-label-button"),c(this,Oi,"f").innerHTML="Convert"},Yi=function(){h(this,Di,document.createElement("button"),"f"),c(this,Di,"f").id=`copy-${this.uuid}`,c(this,Di,"f").classList.add("options-label-button"),c(this,Di,"f").innerHTML="Copy"},Ji=function(){h(this,ji,document.createElement("button"),"f"),c(this,ji,"f").id=`delete-${this.uuid}`,c(this,ji,"f").classList.add("options-label-button"),c(this,ji,"f").innerHTML="Delete"},Ki=function(){c(this,Ti,"f").style.display="none"},Zi=function(){c(this,Ii,"f").classList.add("open"),c(this,Ii,"f").classList.remove("close"),h(this,Ri,!0,"f")},Qi=function(){c(this,Ii,"f").classList.add("close"),c(this,Ii,"f").classList.remove("open"),h(this,Ri,!1,"f")},nr=function(t){const e="rtl"===document.documentElement.getAttribute("dir"),n=document.createElement("textarea");n.style.fontSize="12pt",n.style.display="absolute",n.style[e?"right":"left"]="-9999px";const i=window.pageYOffset||document.documentElement.scrollTop;return n.style.top=`${i}px`,n.setAttribute("readonly",""),n.value=t,n},ir=function(t){if(navigator.userAgent.match(/ipad|iphone/i)){const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n&&(n.removeAllRanges(),n.addRange(e),t.setSelectionRange(0,999999))}else t.select()},hr=function(){c(this,Li,"f").addEventListener("pointerdown",c(this,lr,"f").bind(this)),c(this,Ni,"f").addEventListener("pointerdown",c(this,tr,"f").bind(this)),c(this,Oi,"f").addEventListener("pointerdown",c(this,er,"f").bind(this)),c(this,Di,"f").addEventListener("pointerdown",c(this,rr,"f").bind(this)),c(this,ji,"f").addEventListener("pointerdown",c(this,or,"f").bind(this)),c(this,Mi,"f").addEventListener("pointerdown",c(this,ar,"f").bind(this)),c(this,Ti,"f").addEventListener("pointerdown",c(this,sr,"f").bind(this)),document.addEventListener("pointerdown",c(this,cr,"f").bind(this))},ur=function(){c(this,Li,"f").addEventListener("pointerdown",c(this,lr,"f")),c(this,Ni,"f").removeEventListener("pointerdown",c(this,tr,"f")),c(this,Oi,"f").removeEventListener("pointerdown",c(this,er,"f")),c(this,Di,"f").removeEventListener("pointerdown",c(this,rr,"f")),c(this,ji,"f").removeEventListener("pointerdown",c(this,or,"f")),c(this,Mi,"f").removeEventListener("pointerdown",c(this,ar,"f")),c(this,Ti,"f").removeEventListener("pointerdown",c(this,sr,"f")),document.removeEventListener("pointerdown",c(this,cr,"f"))};class Yr{constructor(t,e,n="ms-editor"){dr.add(this),this.logger=g.getLogger(d.EDITOR),pr.set(this,void 0),fr.set(this,void 0),mr.set(this,void 0),gr.set(this,void 0),vr.set(this,void 0),yr.set(this,void 0),br.set(this,void 0),wr.set(this,void 0),xr.set(this,void 0),Sr.set(this,void 0),kr.set(this,void 0),_r.set(this,void 0),Er.set(this,void 0),jr.set(this,(t=>{this.events.emitSelected(t)})),Rr.set(this,(t=>{this.intention=t,this.events.emitIntention(t)})),Fr.set(this,(t=>{this.events.emitChanged(t)})),Br.set(this,(t=>{c(this,dr,"m",Nr).call(this,t),this.events.emitIdle(t)})),h(this,_r,new v,"f"),this.loggerConfiguration=F({},e.logger,gt),this.logger.info("constructor",{wrapperHTML:t,options:e,globalClassCss:n}),this.wrapperHTML=t,this.wrapperHTML.classList.add(n),this.wrapperHTML.classList.add("draw"),this.events.setElement(this.wrapperHTML);const i=document.createElement("style");i.appendChild(document.createTextNode(".ms-editor{color:#1a9fff;font-family:sans-serif;height:100%;overflow:auto;position:relative;width:100%;z-index:10}#editor:active,#editor:focus{-webkit-tap-highlight-color:transparent}.ms-editor input:not([type=checkbox]):not([type=color]):not([type=range]),.ms-editor select{-webkit-tap-highlight-color:transparent;-webkit-appearance:none;appearance:none;border:1px solid #ced5d9;border-radius:3px;color:#131f26;font:600 14px Source Sans Pro,sans-serif;height:2rem;padding:0 10px}.ms-editor input[type=file]{border:none!important}.ms-editor input[type=file]:focus{border:none!important;box-shadow:none!important}.ms-editor input[type=file]:focus::file-selector-button{border:1px solid #1a9fff!important}.ms-editor input[type=file]::file-selector-button{background-color:#fff;border:1px solid rgba(0,0,0,.16);border-radius:4px;box-shadow:0 1px 0 rgba(0,0,0,.05);cursor:pointer;height:2rem;margin:0 auto 0 8px;padding:0 16px;transition:background-color .2s}.ms-editor input[type=file]::file-selector-button:hover{background-color:#f3f4f6}.ms-editor input[type=file]::file-selector-button:active{background-color:#e5e7eb}.ms-editor select{background:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTQuNDIyLjI2Yy0uMjMzLS4zMzctLjYxLS4zMzctLjg0NCAwTC4xNzUgNS4xN0MtLjE0MiA1LjYyOC4wNDggNiAuNjEgNmg2Ljc4Yy41NTggMCAuNzU0LS4zNy40MzUtLjgzTDQuNDIyLjI2em0uMDIgMTMuNDdjLS4yMzYuMzQyLS42MTguMzQ3LS44NS4wMUwuMTY3IDguODE4Qy0uMTQ2IDguMzY3LjA0OCA4IC42MDggOGg2Ljc4M2MuNTU4IDAgLjc1NS4zNy40MzcuODNsLTMuMzg1IDQuOXoiIGZpbGw9IiMxMzFGMjYiIGZpbGwtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==) 100% no-repeat #fff;padding:0 25px 0 10px}.ms-editor input:not([type=checkbox]):not([type=color]):not([type=range]):not([type=file]):focus,.ms-editor select:focus{border:1px solid #1a9fff;box-shadow:0 1px 1px 0 rgba(0,0,0,.16);outline:0}.ms-editor.draw{cursor:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m14.363 5.652 1.48-1.48a2 2 0 0 1 2.829 0l1.414 1.414a2 2 0 0 1 0 2.828l-1.48 1.48m-4.243-4.242-9.616 9.615a2 2 0 0 0-.578 1.238l-.242 2.74a1 1 0 0 0 1.084 1.085l2.74-.242a2 2 0 0 0 1.24-.578l9.615-9.616m-4.243-4.242 4.243 4.242' stroke='%23000' fill='%23fff' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E\") 5 20,pointer}.ms-editor.draw.shape{cursor:crosshair}.ms-editor.erase{cursor:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='m2.893 12.607 9.193-9.193a2 2 0 0 1 2.828 0l4.95 4.95a2 2 0 0 1 0 2.828l-9.243 9.243a1.929 1.929 0 0 1-2.728 0l-5-5a2 2 0 0 1 0-2.828Z' stroke='%23000' fill='%23fff' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M21 21H9M15.889 14.89 8.464 7.463' stroke='%23000' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E\") 5 20,auto}.ms-editor.move{cursor:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' xmlns='http://www.w3.org/2000/svg' fill='%23fff'%3E%3Cpath d='m7 10.5-2.004 2.672a2 2 0 0 0 .126 2.552l3.784 4.128c.378.413.912.648 1.473.648H15c2.4 0 4-1.5 4-4 0 0 0 0 0 0V7.929M16 8.5v-.571c0-2.286 3-2.286 3 0' stroke='%23000' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M13 8.5V7.027m0-.527v.527M16 8.5V7.027c0-2.286-3-2.286-3 0' stroke='%23000' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M13 8.5V7.027c0-2.286 3-2.286 3 0V8.5M10 8.5v-2c0-2.286 3-2.286 3 0 0 0 0 0 0 0v2M7 13.5v-7A1.5 1.5 0 0 1 8.5 5v0c.828 0 1.5.555 1.5 1.384V8.5' stroke='%23000' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E\") 10 10,auto}.ms-editor.select{cursor:context-menu}.ms-editor canvas,.ms-editor svg{left:0;position:absolute;top:0;z-index:20}.ms-editor canvas.ms-rendering-canvas{background-image:linear-gradient(90deg,#f5f6f7 1px,transparent 0),linear-gradient(180deg,#f5f6f7 1px,transparent 0);background-size:18px 18px;pointer-events:none;z-index:9}.ms-editor .ms-layer-infos{height:100%;left:0;pointer-events:none;position:sticky;top:0;user-select:none;width:100%;z-index:25}.ms-editor .ms-layer-infos>*{cursor:auto;pointer-events:all;user-select:none}.ms-editor .loader{-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite;border:16px solid #f5f6f7;border-radius:50%;border-top-color:#1a9fff;height:120px;left:calc(50% - 60px);position:absolute;top:calc(50% - 60px);width:120px;z-index:30}.ms-editor .state{background-color:#f5f6f7;box-shadow:1px 1px 5px rgba(0,0,0,.25),-1px -1px 5px rgba(0,0,0,.25);color:#717171;cursor:auto;height:50px;left:0;padding:12px;position:absolute;top:calc(100% - 50px);width:50px;z-index:99}.ms-editor .state .busy{-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite;border:4px solid #1a9fff;border-radius:100%;border-right-color:#f5f6f7;color:#717171;height:100%;width:100%}.ms-editor .state .idle{align-items:center;display:flex;justify-content:center}.ms-editor .message-container,.ms-editor .message-overlay{height:100%;position:absolute;width:100%}.ms-editor .message-overlay{background-color:hsla(0,0%,73%,.25);z-index:99}.ms-editor .message-modal{word-wrap:break-word;background-color:#fff;box-shadow:1px 1px 5px rgba(0,0,0,.25),-1px -1px 5px rgba(0,0,0,.25);font-size:16px;left:calc(50% - 150px);max-height:50%;overflow:auto;padding:12px;position:absolute;text-align:center;top:50%;transform:translateY(-50%);width:300px;z-index:999}.ms-editor .message-modal.error-msg:before{content:url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgNzYuNSA2MTIgNDU5IiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWluWU1pbiBtZWV0Ij48cGF0aCBmaWxsPSIjMUE5RkZGIiBkPSJNNDk0LjcgMjI5LjVjLTE3Ljg1MS04Ni43LTk0LjM1MS0xNTMtMTg4LjctMTUzLTM4LjI1IDAtNzMuOTUgMTAuMi0xMDIgMzAuNmwzOC4yNSAzOC4yNWMxNy44NS0xMi43NSA0MC44LTE3Ljg1IDYzLjc1LTE3Ljg1IDc2LjUgMCAxNDAuMjUgNjMuNzUgMTQwLjI1IDE0MC4yNXYxMi43NWgzOC4yNWM0My4zNSAwIDc2LjUgMzMuMTUgNzYuNSA3Ni41IDAgMjguMDUtMTUuMyA1My41NS00MC44IDY2LjNsMzguMjUgMzguMjVDNTkxLjYgNDM4LjYgNjEyIDQwMC4zNSA2MTIgMzU3YzAtNjYuMy01My41NS0xMjIuNC0xMTcuMy0xMjcuNXpNNzYuNSAxMDkuNjVsNzEuNCA2OC44NUM2Ni4zIDE4My42IDAgMjQ5LjkgMCAzMzEuNWMwIDg0LjE1IDY4Ljg1IDE1MyAxNTMgMTUzaDI5OC4zNWw1MSA1MSAzMy4xNS0zMy4xNUwxMDkuNjUgNzYuNSA3Ni41IDEwOS42NXpNMTk2LjM1IDIyOS41bDIwNCAyMDRIMTUzYy01Ni4xIDAtMTAyLTQ1LjktMTAyLTEwMnM0NS45LTEwMiAxMDItMTAyaDQzLjM1eiIvPjwvc3ZnPg==\")}.ms-editor .message-modal.info-msg:before{background-image:url(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMUE5RkZGIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTAiLz48cGF0aCBkPSJNMTIgMTZ2LTRNMTIgOGguMDEiLz48L3N2Zz4=\");background-size:100% 100%;content:\"\";display:block;height:25px;margin:auto;padding-bottom:10px;width:25px}.ms-editor .message-modal .ms-button{background-color:#fff;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg width='24' height='24' fill='none' xmlns='http://www.w3.org/2000/svg' color='%23000'%3E%3Cpath d='M9.172 14.828 12.001 12m2.828-2.828L12.001 12m0 0L9.172 9.172M12.001 12l2.828 2.828M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10Z' stroke='%23000' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E\");background-position:50%;background-repeat:no-repeat;border:none;border-radius:4px;color:#000;cursor:pointer;font-size:inherit;height:32px;padding:0;position:absolute;right:0;top:0;width:32px}.ms-editor .message-modal .ms-button:hover{background-color:#eee}.ms-editor .ms-tooltip .ms-tooltip-content{background-color:#fff;border-radius:5px;box-shadow:0 2px 5px 0 rgba(0,0,0,.225);color:#000;display:none;font-weight:700;opacity:1!important;padding:5px;position:absolute;white-space:nowrap;width:auto;z-index:9999}.ms-editor .ms-menu-title{background-color:#b3dfff;border-radius:5px 5px 0 0;font-size:16px;font-weight:700;margin-top:0;padding:2px;text-align:center}.ms-editor .ms-tooltip .ms-tooltip-content.top{left:50%;top:0;transform:translate(-50%,-100%)}.ms-editor .ms-tooltip .ms-tooltip-content.left{left:0;top:50%;transform:translate(-100%,-50%)}.ms-editor .ms-tooltip .ms-tooltip-content.right{right:0;top:50%;transform:translate(100%,-50%)}.ms-editor .ms-tooltip .ms-tooltip-content.bottom{bottom:0;left:50%;transform:translate(-50%,100%)}.ms-editor .smartguide{box-shadow:2px 2px 12px #bdbdbd;cursor:default;font-size:16px;left:0;line-height:48px;padding-bottom:12px;padding-top:12px;position:absolute;top:0;width:100%;z-index:40}.ms-editor .smartguide .smartguide-wrapper{border-bottom:1px solid #959da6;display:flex}.ms-editor .smartguide .tag-icon{background-color:hsla(0,0%,100%,.9);border-left:1px solid #959da6;border-right:1px solid #959da6;border-top:1px solid #959da6;font-size:large;height:100%;line-height:48px;padding:0 18px;z-index:31}.ms-editor .smartguide .ellipsis,.ms-editor .smartguide .tag-icon{color:#959da6;font-weight:700;height:48px;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;width:48px}.ms-editor .smartguide .ellipsis{-webkit-tap-highlight-color:transparent;cursor:pointer;font-size:x-large;line-height:38px;padding:0 8px}.ms-editor .smartguide .ellipsis:active{background-color:#e0e0e0}.ms-editor .smartguide .prompter-container{-webkit-tap-highlight-color:transparent;color:#bfbfbf;display:block;height:48px;line-height:48px;overflow:hidden;text-align:left;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;width:calc(100% - 96px)}.ms-editor .smartguide .prompter-container>div>span{cursor:pointer;display:inline-block}.ms-editor .smartguide .prompter-container .prompter-text{margin-left:12px}.ms-editor .smartguide .prompter-container .prompter-text .added-word{animation:word-added .1s linear,color-input 3s ease-in-out}.ms-editor .smartguide .prompter-container .prompter-text .modified-word{animation:word-modified .1s linear,color-input 3s ease-in-out}.ms-editor .smartguide .candidates{-webkit-tap-highlight-color:transparent;background-color:#f5f5f5;border-radius:3px;box-shadow:2px 2px 12px #bdbdbd,-2px 2px 12px #bdbdbd;color:#000;flex-direction:column;line-height:30px;position:absolute;text-align:center;z-index:100}.ms-editor .smartguide .candidates>span{cursor:pointer;padding:2px 20px}.ms-editor .smartguide .candidates>span:hover{background-color:#eee}.ms-editor .smartguide .candidates>span:active{background-color:#e0e0e0}.ms-editor .smartguide .candidates .selected-word{background-color:#e0e0e0;font-weight:700}.ms-editor .smartguide .more-menu{background-color:#f5f5f5;border-radius:3px;bottom:0;box-shadow:2px 2px 12px #bdbdbd;display:flex;flex-direction:column;line-height:30px;margin-right:12px;overflow:hidden;position:absolute;right:0;transform:translateY(100%);transition:max-height 1s ease-out,opacity 1s,visibility .5s linear;z-index:100}.ms-editor .smartguide .more-menu.open{max-height:500px;opacity:1;visibility:visible}.ms-editor .smartguide .more-menu.close{max-height:0;opacity:0;visibility:hidden}.ms-editor .smartguide .more-menu .options-label-button{-webkit-tap-highlight-color:transparent;background:transparent;border:none;box-sizing:border-box;color:#000;cursor:pointer;font-size:16px;height:40px;margin:0;outline:none;padding:0 24px}.ms-editor .smartguide .more-menu .options-label-button:hover{background-color:#eee;padding:4px}.ms-editor .smartguide .more-menu .options-label-button:active{background-color:#e0e0e0}.ms-editor .ps__rail-x{top:32px!important}.ms-editor .collapsible-wrapper .collapsible-header{align-items:center;color:#424242;cursor:pointer;display:flex;justify-content:space-between}.ms-editor .collapsible-wrapper .collapsible-header:hover{background-color:#efefef}.ms-editor .collapsible-wrapper .collapsible-header .collapsible-header-icon{align-items:center;display:flex;height:32px;justify-content:center;padding:4px;position:relative;transition:transform .5s;width:32px}.ms-editor .collapsible-wrapper.active .collapsible-header .collapsible-header-icon{transform:rotate(180deg)}.ms-editor .collapsible-wrapper .collapsible-content{max-height:0;overflow:auto;transition:max-height .5s}.ms-editor .collapsible-wrapper.active .collapsible-content{max-height:200px}.ms-editor hr.separator.horizontal{border:none;border-top:1px solid #d3d3d3;margin:5px 0;max-height:1px;max-width:100%;min-height:1px;min-width:100%}.ms-editor hr.separator.vertical{border:none;border-left:1px solid #d3d3d3;margin:0 5px;max-height:100%;max-width:1px;min-height:100%;min-width:1px}.ms-editor .ms-menu{background-color:#fff;box-shadow:1px 1px 5px rgba(0,0,0,.25),-1px -1px 5px rgba(0,0,0,.25);cursor:auto;padding:5px;pointer-events:all;z-index:99}.ms-editor .ms-menu-top-left{border-radius:0 0 5px 5px;left:5px;position:absolute;top:0}.ms-editor .ms-menu-bottom{border-radius:5px;bottom:8px;left:50%;position:absolute;transform:translateX(-50%)}.ms-editor .ms-menu-top-right{border-radius:0 0 5px 5px;position:absolute;right:5px;top:0}.ms-editor .ms-menu-colmun{display:flex;flex-direction:column;justify-content:center}.ms-editor .ms-menu-row{display:flex;flex-direction:row;justify-content:center}.ms-editor .ms-menu-item{align-items:center;display:flex;gap:5px;justify-content:space-between;padding:5px;width:100%}.ms-editor .ms-menu .select-language{height:32px;padding:0 8px;width:auto}.ms-editor .ms-menu-item.list button{align-items:center;background-color:#fff;border:none;border-radius:4px;cursor:pointer;display:flex;font-size:inherit;height:32px;justify-content:center;padding:0;position:relative;width:32px}.ms-editor .ms-menu-item.list button:hover{background-color:#efefef}.ms-editor .ms-menu-item.list button.active{border:1px solid #1a9fff}.ms-editor .ms-menu .color-list{cursor:pointer;flex-wrap:wrap;gap:2px;margin:auto;max-width:150px;min-width:150px;padding:4px}.ms-editor .ms-menu .font-size-list,.ms-editor .ms-menu .thickness-list{cursor:pointer;flex-wrap:wrap;gap:2px;margin:auto;max-width:150px;min-width:150px;padding:0}.ms-editor .ms-menu .ms-menu-button{-webkit-touch-callout:none;align-items:center;background-color:#fff;border:none;border-radius:4px;color:#000;cursor:pointer;display:flex;font-size:inherit;height:32px;justify-content:space-between;padding:4px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.ms-editor .ms-menu svg{height:20px;position:relative;width:20px}.ms-editor .ms-menu .ms-menu-button.center{justify-content:center}.ms-editor .ms-menu .ms-menu-button.square{justify-content:center;width:32px}.ms-editor .ms-menu .ms-menu-button .color{border-radius:100%;height:75%;margin:auto;width:75%}.ms-editor .ms-menu .ms-menu-button:hover{background-color:#efefef}.ms-editor .ms-menu .ms-menu-button:disabled{background-color:hsla(0,0%,100%,.4);color:rgba(0,0,0,.4);opacity:.5;pointer-events:none}.ms-editor .ms-menu .ms-menu-button:active,.ms-editor .ms-menu .ms-menu-button:focus{background-color:#1aa0ff55;outline:none}.ms-editor .ms-menu .ms-menu-button.active{border:1px solid #1a9fff;color:#1a9fff}.ms-editor .sub-menu{overflow:visible;position:relative}.ms-editor .sub-menu .sub-menu-content{background-color:#fff;border-radius:5px;box-shadow:1px 1px 5px rgba(0,0,0,.25),-1px -1px 5px rgba(0,0,0,.25);color:#000;display:none;padding:5px;position:absolute;white-space:nowrap;width:auto;z-index:100}.ms-editor .sub-menu .sub-menu-content.open{display:block}.ms-editor .sub-menu .sub-menu-content.top{left:50%;top:-8px;transform:translate(-50%,-100%)}.ms-editor .sub-menu .sub-menu-content.bottom{bottom:-8px;left:50%;transform:translate(-50%,100%)}.ms-editor .sub-menu .sub-menu-content.bottom-left{bottom:-8px;right:0;transform:translateY(100%)}.ms-editor .sub-menu .sub-menu-content.right-top{right:-8px;top:0;transform:translate(100%)}.ms-editor .sub-menu .sub-menu-content.right{right:-8px;top:50%;transform:translate(100%,-50%)}.ms-editor .ms-menu-context{position:absolute}.ms-editor output.tooltip{background-color:#fff;border-radius:5px;box-shadow:0 2px 5px 0 rgba(0,0,0,.225);color:#000;display:none;font-weight:700;left:50%;padding:5px;position:absolute;transform:translate(-50%,-250%);white-space:nowrap;width:auto}.ms-editor input:focus+output.tooltip,.ms-editor input:focus-visible+output.tooltip,.ms-editor input:hover+output.tooltip{display:block}.ms-editor .removed-stroke{opacity:0;transition:opacity .1s ease-in-out}.ms-editor .added-stroke{animation:opacity-appear .2s}@keyframes color-input{0%{color:#000}to{color:#bfbfbf}}@keyframes word-added{0%{transform:translate(5px)}to{transform:none}}@keyframes word-modified{0%{transform:translateY(5px)}to{transform:none}}@keyframes opacity-appear{0%{opacity:0}to{opacity:1}}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}")),this.wrapperHTML.appendChild(i),this.wrapperHTML.appendChild(c(this,dr,"m",Pr).call(this)),c(this,dr,"m",Tr).call(this,e)}get loggerConfiguration(){return c(this,Er,"f")}set loggerConfiguration(t){h(this,Er,Object.assign({},gt,t),"f"),g.setLoggerLevel(c(this,Er,"f"))}get initializationPromise(){return c(this,_r,"f").promise}get model(){return this.behaviors.model}get behaviors(){return c(this,Sr,"f")}get configuration(){return this.behaviors.configuration}set configuration(t){this.logger.info("set configuration",{configuration:t}),c(this,dr,"m",Tr).call(this,{configuration:t}),this.initialize()}get intention(){return this.behaviors.intention}set intention(t){this.logger.info("set intention",t),this.behaviors.intention=t,c(this,dr,"m",Lr).call(this)}get events(){return Bt.getInstance()}get internalEvents(){return Ft.getInstance()}get context(){return this.behaviors.history.context}get grabber(){return this.behaviors.grabber}get currentPenStyle(){return this.behaviors.currentPenStyle}get penStyle(){return this.behaviors.penStyle}set penStyle(t){this.logger.info("set penStyle",{ps:t}),this.behaviors.setPenStyle(t)}get theme(){return this.behaviors.theme}set theme(t){this.logger.info("set theme",{t:t}),this.behaviors.setTheme(t)}get penStyleClasses(){return this.behaviors.penStyleClasses}set penStyleClasses(t){this.logger.info("set penStyleClasses",{psc:t}),this.behaviors.setPenStyleClasses(t)}closeMessageModal(){return l(this,void 0,void 0,(function*(){c(this,mr,"f").style.display="none",c(this,yr,"f").innerText="",c(this,gr,"f").classList.contains("error-msg")&&(c(this,gr,"f").classList.remove("error-msg"),yield this.behaviors.destroy(),this.initialize())}))}showError(t){c(this,gr,"f").classList.add("error-msg"),c(this,gr,"f").classList.remove("info-msg"),c(this,mr,"f").style.display="block",c(this,yr,"f").innerText="string"==typeof t?t:t.message}showNotif(t){c(this,gr,"f").classList.add("info-msg"),c(this,gr,"f").classList.remove("error-msg"),c(this,mr,"f").style.display="block",c(this,yr,"f").innerText=t.message,setTimeout((()=>{this.closeMessageModal()}),t.timeout||2500)}initialize(){return l(this,void 0,void 0,(function*(){this.logger.info("initialize"),c(this,dr,"m",Dr).call(this),yield c(this,dr,"m",Ir).call(this),c(this,dr,"m",Or).call(this)}))}waitForIdle(){return l(this,void 0,void 0,(function*(){if(this.behaviors.waitForIdle)return this.behaviors.waitForIdle()}))}undo(){return l(this,void 0,void 0,(function*(){return this.logger.info("undo"),yield c(this,_r,"f").promise,yield this.behaviors.undo(),this.logger.debug("undo",this.model),this.model}))}redo(){return l(this,void 0,void 0,(function*(){return this.logger.info("redo"),yield c(this,_r,"f").promise,yield this.behaviors.redo(),this.logger.debug("redo",this.model),this.model}))}clear(){return l(this,void 0,void 0,(function*(){return this.logger.info("clear"),yield c(this,_r,"f").promise,yield this.behaviors.clear(),this.events.emitCleared(this.model),this.logger.debug("clear",this.model),this.model}))}resize(){var t;return l(this,void 0,void 0,(function*(){this.logger.info("resize"),yield c(this,_r,"f").promise,this.configuration.rendering.smartGuide.enable&&(null===(t=c(this,kr,"f"))||void 0===t||t.resize());const e=window.getComputedStyle(this.wrapperHTML),n=Math.max(parseInt(e.height.replace("px","")),this.configuration.rendering.minHeight),i=Math.max(parseInt(e.width.replace("px","")),this.configuration.rendering.minWidth);return yield this.behaviors.resize(n,i),this.logger.debug("resize",this.model),this.model}))}export(t){return l(this,void 0,void 0,(function*(){return this.logger.info("export",{mimeTypes:t}),yield c(this,_r,"f").promise,yield this.behaviors.export(t),this.logger.debug("export",this.model),this.model}))}convert(t){return l(this,void 0,void 0,(function*(){return this.logger.info("export",{params:t}),yield c(this,_r,"f").promise,yield this.behaviors.convert(null==t?void 0:t.conversionState,null==t?void 0:t.mimeTypes),this.events.emitConverted(this.model.converts),this.logger.debug("convert",this.model),this.model}))}import(t,e){return l(this,void 0,void 0,(function*(){if(this.logger.info("import",{data:t,mimeType:e}),yield c(this,_r,"f").promise,this.behaviors.import){let n;return n=t instanceof Blob?t:"string"==typeof t?new Blob([t]):new Blob([JSON.stringify(t)]),yield this.behaviors.import(n,e),this.events.emitImported(this.model.exports),this.logger.debug("import",this.model),this.model}return Promise.reject("Import impossible, behaviors has no import function")}))}importPointEvents(t){return l(this,void 0,void 0,(function*(){return this.logger.info("importPointEvents",{strokes:t}),yield c(this,_r,"f").promise,yield this.behaviors.importPointEvents(t),this.events.emitImported(this.model.exports),this.logger.debug("importPointEvents",this.model),this.model}))}}pr=new WeakMap,fr=new WeakMap,mr=new WeakMap,gr=new WeakMap,vr=new WeakMap,yr=new WeakMap,br=new WeakMap,wr=new WeakMap,xr=new WeakMap,Sr=new WeakMap,kr=new WeakMap,_r=new WeakMap,Er=new WeakMap,jr=new WeakMap,Rr=new WeakMap,Fr=new WeakMap,Br=new WeakMap,dr=new WeakSet,Lr=function(){switch(this.behaviors.intention){case i.Erase:this.wrapperHTML.classList.remove("draw"),this.wrapperHTML.classList.add("erase"),this.wrapperHTML.classList.remove("select");break;case i.Select:this.wrapperHTML.classList.remove("draw"),this.wrapperHTML.classList.remove("erase"),this.wrapperHTML.classList.add("select");break;default:this.wrapperHTML.classList.add("draw"),this.wrapperHTML.classList.remove("erase"),this.wrapperHTML.classList.remove("select")}},Cr=function(){return h(this,fr,document.createElement("div"),"f"),c(this,fr,"f").classList.add("loader"),c(this,fr,"f").style.display="none",c(this,fr,"f")},Ar=function(){h(this,mr,document.createElement("div"),"f"),c(this,mr,"f").classList.add("message-container"),c(this,mr,"f").style.display="none",h(this,vr,document.createElement("div"),"f"),c(this,vr,"f").classList.add("message-overlay"),c(this,mr,"f").appendChild(c(this,vr,"f")),h(this,gr,document.createElement("div"),"f"),c(this,gr,"f").classList.add("message-modal");const t=document.createElement("button");return t.classList.add("ms-button","close"),t.addEventListener("pointerup",(()=>this.closeMessageModal())),c(this,gr,"f").appendChild(t),h(this,yr,document.createElement("p"),"f"),c(this,gr,"f").appendChild(c(this,yr,"f")),c(this,mr,"f").appendChild(c(this,gr,"f")),c(this,mr,"f")},Mr=function(){return h(this,br,document.createElement("div"),"f"),c(this,br,"f").classList.add("state"),h(this,xr,document.createElement("div"),"f"),c(this,xr,"f").textContent="idle",c(this,xr,"f").style.display="block",c(this,br,"f").appendChild(c(this,xr,"f")),h(this,wr,document.createElement("div"),"f"),c(this,wr,"f").classList.add("busy"),c(this,wr,"f").style.display="none",c(this,br,"f").appendChild(c(this,wr,"f")),c(this,br,"f").style.display="none",c(this,br,"f")},Nr=function(t){this.configuration.offscreen?(c(this,br,"f").style.display="block",t?(c(this,xr,"f").style.display="block",c(this,wr,"f").style.display="none"):(c(this,xr,"f").style.display="none",c(this,wr,"f").style.display="block")):c(this,br,"f").style.display="none"},Pr=function(){return h(this,pr,document.createElement("div"),"f"),c(this,pr,"f").classList.add("ms-layer-infos"),c(this,pr,"f").appendChild(c(this,dr,"m",Cr).call(this)),c(this,pr,"f").appendChild(c(this,dr,"m",Ar).call(this)),c(this,pr,"f").appendChild(c(this,dr,"m",Mr).call(this)),c(this,pr,"f")},Tr=function(t){var e;if(this.logger.info("instantiateBehaviors",{options:t}),!(null==t?void 0:t.configuration))throw new Error("Configuration required");this.internalEvents.removeAllListeners(),c(this,Sr,"f")&&c(this,Sr,"f").destroy(),t.configuration.offscreen?h(this,Sr,new Gr(t,c(this,pr,"f")),"f"):"REST"===(null===(e=t.configuration.server)||void 0===e?void 0:e.protocol)?h(this,Sr,new Hr(t),"f"):h(this,Sr,new Wr(t),"f"),this.logger.debug("instantiateBehaviors",c(this,Sr,"f"))},Ir=function(){return l(this,void 0,void 0,(function*(){return this.logger.info("initializeBehaviors","start"),h(this,_r,new v,"f"),c(this,fr,"f").style.display="initial",this.closeMessageModal(),this.behaviors.init(this.wrapperHTML).then((()=>l(this,void 0,void 0,(function*(){this.logger.info("initializeBehaviors","then"),this.wrapperHTML.editor=this,c(this,_r,"f").resolve(),this.events.emitLoaded()})))).catch((t=>{this.logger.error("initializeBehaviors",t),c(this,_r,"f").reject(t),this.showError(t)})).finally((()=>(this.logger.debug("initializeBehaviors","finally"),c(this,fr,"f").style.display="none",c(this,dr,"m",Nr).call(this,!0),c(this,_r,"f").promise)))}))},Or=function(){var t;if(null===(t=c(this,kr,"f"))||void 0===t||t.destroy(),this.logger.info("initializeSmartGuide",{smartGuide:this.configuration.rendering.smartGuide}),this.configuration.rendering.smartGuide.enable){let t;switch(h(this,kr,new Vr,"f"),this.configuration.recognition.type){case"TEXT":t=this.configuration.recognition.text.margin;break;case"MATH":t=this.configuration.recognition.math.margin;break;default:t={top:20,left:10,right:10,bottom:10}}c(this,kr,"f").init(c(this,pr,"f"),t,this.configuration.rendering)}},Dr=function(){this.internalEvents.removeAllListeners(),this.internalEvents.addConvertListener(this.convert.bind(this)),this.internalEvents.addClearListener(this.clear.bind(this)),this.internalEvents.addErrorListener(this.showError.bind(this)),this.internalEvents.addNotifListener(this.showNotif.bind(this)),this.internalEvents.addClearMessageListener(this.closeMessageModal.bind(this)),this.internalEvents.addImportJIIXListener(c(this,dr,"m",$r).bind(this)),this.internalEvents.addExportedListener(c(this,dr,"m",zr).bind(this)),this.internalEvents.addContextChangeListener(c(this,Fr,"f").bind(this)),this.internalEvents.addIdleListener(c(this,Br,"f").bind(this)),this.internalEvents.addSelectedListener(c(this,jr,"f").bind(this)),this.internalEvents.addIntentionListener(c(this,Rr,"f").bind(this))},zr=function(t){var e;if(this.logger.info("onExport",{exports:t}),this.configuration.rendering.smartGuide.enable&&t&&t["application/vnd.myscript.jiix"]){const n=t["application/vnd.myscript.jiix"];null===(e=c(this,kr,"f"))||void 0===e||e.update(n)}this.events.emitExported(t)},$r=function(t){this.logger.info("onImportJIIX",{jiix:t}),this.import(new Blob([JSON.stringify(t)],{type:It.JIIX}),It.JIIX)}},2483:function(t,e,n){"use strict";n.d(e,{PO:function(){return B},p7:function(){return ee}});n(7658);var i=n(3396),r=n(4870);
/*!
  * vue-router v4.2.1
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */
const o="undefined"!==typeof window;function s(t){return t.__esModule||"Module"===t[Symbol.toStringTag]}const a=Object.assign;function l(t,e){const n={};for(const i in e){const r=e[i];n[i]=h(r)?r.map(t):t(r)}return n}const c=()=>{},h=Array.isArray;const u=/\/$/,d=t=>t.replace(u,"");function p(t,e,n="/"){let i,r={},o="",s="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),o=e.slice(l+1,a>-1?a:e.length),r=t(o)),a>-1&&(i=i||e.slice(0,a),s=e.slice(a,e.length)),i=x(null!=i?i:e,n),{fullPath:i+(o&&"?")+o+s,path:i,query:r,hash:s}}function f(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function m(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function g(t,e,n){const i=e.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&v(e.matched[i],n.matched[r])&&y(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function v(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function y(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!b(t[n],e[n]))return!1;return!0}function b(t,e){return h(t)?w(t,e):h(e)?w(e,t):t===e}function w(t,e){return h(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}function x(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/"),r=i[i.length-1];".."!==r&&"."!==r||i.push("");let o,s,a=n.length-1;for(o=0;o<i.length;o++)if(s=i[o],"."!==s){if(".."!==s)break;a>1&&a--}return n.slice(0,a).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var S,k;(function(t){t["pop"]="pop",t["push"]="push"})(S||(S={})),function(t){t["back"]="back",t["forward"]="forward",t["unknown"]=""}(k||(k={}));function _(t){if(!t)if(o){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),d(t)}const E=/^[^#]+#/;function L(t,e){return t.replace(E,"#")+e}function C(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const A=()=>({left:window.pageXOffset,top:window.pageYOffset});function M(t){let e;if("el"in t){const n=t.el,i="string"===typeof n&&n.startsWith("#");0;const r="string"===typeof n?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=C(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function N(t,e){const n=history.state?history.state.position-e:-1;return n+t}const P=new Map;function T(t,e){P.set(t,e)}function I(t){const e=P.get(t);return P.delete(t),e}let O=()=>location.protocol+"//"+location.host;function D(t,e){const{pathname:n,search:i,hash:r}=e,o=t.indexOf("#");if(o>-1){let e=r.includes(t.slice(o))?t.slice(o).length:1,n=r.slice(e);return"/"!==n[0]&&(n="/"+n),m(n,"")}const s=m(n,t);return s+i+r}function j(t,e,n,i){let r=[],o=[],s=null;const l=({state:o})=>{const a=D(t,location),l=n.value,c=e.value;let h=0;if(o){if(n.value=a,e.value=o,s&&s===l)return void(s=null);h=c?o.position-c.position:0}else i(a);r.forEach((t=>{t(n.value,l,{delta:h,type:S.pop,direction:h?h>0?k.forward:k.back:k.unknown})}))};function c(){s=n.value}function h(t){r.push(t);const e=()=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)};return o.push(e),e}function u(){const{history:t}=window;t.state&&t.replaceState(a({},t.state,{scroll:A()}),"")}function d(){for(const t of o)t();o=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:h,destroy:d}}function R(t,e,n,i=!1,r=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:r?A():null}}function F(t){const{history:e,location:n}=window,i={value:D(t,n)},r={value:e.state};function o(i,o,s){const a=t.indexOf("#"),l=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+i:O()+t+i;try{e[s?"replaceState":"pushState"](o,"",l),r.value=o}catch(c){console.error(c),n[s?"replace":"assign"](l)}}function s(t,n){const s=a({},e.state,R(r.value.back,t,r.value.forward,!0),n,{position:r.value.position});o(t,s,!0),i.value=t}function l(t,n){const s=a({},r.value,e.state,{forward:t,scroll:A()});o(s.current,s,!0);const l=a({},R(i.value,t,null),{position:s.position+1},n);o(t,l,!1),i.value=t}return r.value||o(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:i,state:r,push:l,replace:s}}function B(t){t=_(t);const e=F(t),n=j(t,e.state,e.location,e.replace);function i(t,e=!0){e||n.pauseListeners(),history.go(t)}const r=a({location:"",base:t,go:i,createHref:L.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function z(t){return"string"===typeof t||t&&"object"===typeof t}function $(t){return"string"===typeof t||"symbol"===typeof t}const q={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},U=Symbol("");var G;(function(t){t[t["aborted"]=4]="aborted",t[t["cancelled"]=8]="cancelled",t[t["duplicated"]=16]="duplicated"})(G||(G={}));function H(t,e){return a(new Error,{type:t,[U]:!0},e)}function W(t,e){return t instanceof Error&&U in t&&(null==e||!!(t.type&e))}const V="[^/]+?",Y={sensitive:!1,strict:!1,start:!0,end:!0},J=/[.+*?^${}()[\]/\\]/g;function X(t,e){const n=a({},Y,e),i=[];let r=n.start?"^":"";const o=[];for(const a of t){const t=a.length?[]:[90];n.strict&&!a.length&&(r+="/");for(let e=0;e<a.length;e++){const i=a[e];let s=40+(n.sensitive?.25:0);if(0===i.type)e||(r+="/"),r+=i.value.replace(J,"\\$&"),s+=40;else if(1===i.type){const{value:t,repeatable:n,optional:l,regexp:c}=i;o.push({name:t,repeatable:n,optional:l});const h=c||V;if(h!==V){s+=10;try{new RegExp(`(${h})`)}catch(u){throw new Error(`Invalid custom RegExp for param "${t}" (${h}): `+u.message)}}let d=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;e||(d=l&&a.length<2?`(?:/${d})`:"/"+d),l&&(d+="?"),r+=d,s+=20,l&&(s+=-8),n&&(s+=-20),".*"===h&&(s+=-50)}t.push(s)}i.push(t)}if(n.strict&&n.end){const t=i.length-1;i[t][i[t].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const s=new RegExp(r,n.sensitive?"":"i");function l(t){const e=t.match(s),n={};if(!e)return null;for(let i=1;i<e.length;i++){const t=e[i]||"",r=o[i-1];n[r.name]=t&&r.repeatable?t.split("/"):t}return n}function c(e){let n="",i=!1;for(const r of t){i&&n.endsWith("/")||(n+="/"),i=!1;for(const t of r)if(0===t.type)n+=t.value;else if(1===t.type){const{value:o,repeatable:s,optional:a}=t,l=o in e?e[o]:"";if(h(l)&&!s)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const c=h(l)?l.join("/"):l;if(!c){if(!a)throw new Error(`Missing required param "${o}"`);r.length<2&&(n.endsWith("/")?n=n.slice(0,-1):i=!0)}n+=c}}return n||"/"}return{re:s,score:i,keys:o,parse:l,stringify:c}}function K(t,e){let n=0;while(n<t.length&&n<e.length){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function Z(t,e){let n=0;const i=t.score,r=e.score;while(n<i.length&&n<r.length){const t=K(i[n],r[n]);if(t)return t;n++}if(1===Math.abs(r.length-i.length)){if(Q(i))return 1;if(Q(r))return-1}return r.length-i.length}function Q(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const tt={type:0,value:""},et=/[a-zA-Z0-9_]/;function nt(t){if(!t)return[[]];if("/"===t)return[[tt]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${c}": ${t}`)}let n=0,i=n;const r=[];let o;function s(){o&&r.push(o),o=[]}let a,l=0,c="",h="";function u(){c&&(0===n?o.push({type:0,value:c}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:h,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),c="")}function d(){c+=a}while(l<t.length)if(a=t[l++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(c&&u(),s()):":"===a?(u(),n=1):d();break;case 4:d(),n=i;break;case 1:"("===a?n=2:et.test(a)?d():(u(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--);break;case 2:")"===a?"\\"==h[h.length-1]?h=h.slice(0,-1)+a:n=3:h+=a;break;case 3:u(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--,h="";break;default:e("Unknown state");break}else i=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${c}"`),u(),s(),r}function it(t,e,n){const i=X(nt(t.path),n);const r=a(i,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf===!e.record.aliasOf&&e.children.push(r),r}function rt(t,e){const n=[],i=new Map;function r(t){return i.get(t)}function o(t,n,i){const r=!i,l=st(t);l.aliasOf=i&&i.record;const u=ht(e,t),d=[l];if("alias"in t){const e="string"===typeof t.alias?[t.alias]:t.alias;for(const t of e)d.push(a({},l,{components:i?i.record.components:l.components,path:t,aliasOf:i?i.record:l}))}let p,f;for(const e of d){const{path:a}=e;if(n&&"/"!==a[0]){const t=n.record.path,i="/"===t[t.length-1]?"":"/";e.path=n.record.path+(a&&i+a)}if(p=it(e,n,u),i?i.alias.push(p):(f=f||p,f!==p&&f.alias.push(p),r&&t.name&&!lt(p)&&s(t.name)),l.children){const t=l.children;for(let e=0;e<t.length;e++)o(t[e],p,i&&i.children[e])}i=i||p,(p.record.components&&Object.keys(p.record.components).length||p.record.name||p.record.redirect)&&h(p)}return f?()=>{s(f)}:c}function s(t){if($(t)){const e=i.get(t);e&&(i.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(s),e.alias.forEach(s))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&i.delete(t.record.name),t.children.forEach(s),t.alias.forEach(s))}}function l(){return n}function h(t){let e=0;while(e<n.length&&Z(t,n[e])>=0&&(t.record.path!==n[e].record.path||!ut(t,n[e])))e++;n.splice(e,0,t),t.record.name&&!lt(t)&&i.set(t.record.name,t)}function u(t,e){let r,o,s,l={};if("name"in t&&t.name){if(r=i.get(t.name),!r)throw H(1,{location:t});0,s=r.record.name,l=a(ot(e.params,r.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params&&ot(t.params,r.keys.map((t=>t.name)))),o=r.stringify(l)}else if("path"in t)o=t.path,r=n.find((t=>t.re.test(o))),r&&(l=r.parse(o),s=r.record.name);else{if(r=e.name?i.get(e.name):n.find((t=>t.re.test(e.path))),!r)throw H(1,{location:t,currentLocation:e});s=r.record.name,l=a({},e.params,t.params),o=r.stringify(l)}const c=[];let h=r;while(h)c.unshift(h.record),h=h.parent;return{name:s,path:o,params:l,matched:c,meta:ct(c)}}return e=ht({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>o(t))),{addRoute:o,resolve:u,removeRoute:s,getRoutes:l,getRecordMatcher:r}}function ot(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function st(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:at(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function at(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]="boolean"===typeof n?n:n[i];return e}function lt(t){while(t){if(t.record.aliasOf)return!0;t=t.parent}return!1}function ct(t){return t.reduce(((t,e)=>a(t,e.meta)),{})}function ht(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}function ut(t,e){return e.children.some((e=>e===t||ut(t,e)))}const dt=/#/g,pt=/&/g,ft=/\//g,mt=/=/g,gt=/\?/g,vt=/\+/g,yt=/%5B/g,bt=/%5D/g,wt=/%5E/g,xt=/%60/g,St=/%7B/g,kt=/%7C/g,_t=/%7D/g,Et=/%20/g;function Lt(t){return encodeURI(""+t).replace(kt,"|").replace(yt,"[").replace(bt,"]")}function Ct(t){return Lt(t).replace(St,"{").replace(_t,"}").replace(wt,"^")}function At(t){return Lt(t).replace(vt,"%2B").replace(Et,"+").replace(dt,"%23").replace(pt,"%26").replace(xt,"`").replace(St,"{").replace(_t,"}").replace(wt,"^")}function Mt(t){return At(t).replace(mt,"%3D")}function Nt(t){return Lt(t).replace(dt,"%23").replace(gt,"%3F")}function Pt(t){return null==t?"":Nt(t).replace(ft,"%2F")}function Tt(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function It(t){const e={};if(""===t||"?"===t)return e;const n="?"===t[0],i=(n?t.slice(1):t).split("&");for(let r=0;r<i.length;++r){const t=i[r].replace(vt," "),n=t.indexOf("="),o=Tt(n<0?t:t.slice(0,n)),s=n<0?null:Tt(t.slice(n+1));if(o in e){let t=e[o];h(t)||(t=e[o]=[t]),t.push(s)}else e[o]=s}return e}function Ot(t){let e="";for(let n in t){const i=t[n];if(n=Mt(n),null==i){void 0!==i&&(e+=(e.length?"&":"")+n);continue}const r=h(i)?i.map((t=>t&&At(t))):[i&&At(i)];r.forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function Dt(t){const e={};for(const n in t){const i=t[n];void 0!==i&&(e[n]=h(i)?i.map((t=>null==t?null:""+t)):null==i?i:""+i)}return e}const jt=Symbol(""),Rt=Symbol(""),Ft=Symbol(""),Bt=Symbol(""),zt=Symbol("");function $t(){let t=[];function e(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function qt(t,e,n,i,r){const o=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise(((s,a)=>{const l=t=>{!1===t?a(H(4,{from:n,to:e})):t instanceof Error?a(t):z(t)?a(H(2,{from:e,to:t})):(o&&i.enterCallbacks[r]===o&&"function"===typeof t&&o.push(t),s())},c=t.call(i&&i.instances[r],e,n,l);let h=Promise.resolve(c);t.length<3&&(h=h.then(l)),h.catch((t=>a(t)))}))}function Ut(t,e,n,i){const r=[];for(const o of t){0;for(const t in o.components){let a=o.components[t];if("beforeRouteEnter"===e||o.instances[t])if(Gt(a)){const s=a.__vccOpts||a,l=s[e];l&&r.push(qt(l,n,i,o,t))}else{let l=a();0,r.push((()=>l.then((r=>{if(!r)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${o.path}"`));const a=s(r)?r.default:r;o.components[t]=a;const l=a.__vccOpts||a,c=l[e];return c&&qt(c,n,i,o,t)()}))))}}}return r}function Gt(t){return"object"===typeof t||"displayName"in t||"props"in t||"__vccOpts"in t}function Ht(t){const e=(0,i.f3)(Ft),n=(0,i.f3)(Bt),o=(0,i.Fl)((()=>e.resolve((0,r.SU)(t.to)))),s=(0,i.Fl)((()=>{const{matched:t}=o.value,{length:e}=t,i=t[e-1],r=n.matched;if(!i||!r.length)return-1;const s=r.findIndex(v.bind(null,i));if(s>-1)return s;const a=Xt(t[e-2]);return e>1&&Xt(i)===a&&r[r.length-1].path!==a?r.findIndex(v.bind(null,t[e-2])):s})),a=(0,i.Fl)((()=>s.value>-1&&Jt(n.params,o.value.params))),l=(0,i.Fl)((()=>s.value>-1&&s.value===n.matched.length-1&&y(n.params,o.value.params)));function h(n={}){return Yt(n)?e[(0,r.SU)(t.replace)?"replace":"push"]((0,r.SU)(t.to)).catch(c):Promise.resolve()}return{route:o,href:(0,i.Fl)((()=>o.value.href)),isActive:a,isExactActive:l,navigate:h}}const Wt=(0,i.aZ)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Ht,setup(t,{slots:e}){const n=(0,r.qj)(Ht(t)),{options:o}=(0,i.f3)(Ft),s=(0,i.Fl)((()=>({[Kt(t.activeClass,o.linkActiveClass,"router-link-active")]:n.isActive,[Kt(t.exactActiveClass,o.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const r=e.default&&e.default(n);return t.custom?r:(0,i.h)("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},r)}}}),Vt=Wt;function Yt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function Jt(t,e){for(const n in e){const i=e[n],r=t[n];if("string"===typeof i){if(i!==r)return!1}else if(!h(r)||r.length!==i.length||i.some(((t,e)=>t!==r[e])))return!1}return!0}function Xt(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Kt=(t,e,n)=>null!=t?t:null!=e?e:n,Zt=(0,i.aZ)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const o=(0,i.f3)(zt),s=(0,i.Fl)((()=>t.route||o.value)),l=(0,i.f3)(Rt,0),c=(0,i.Fl)((()=>{let t=(0,r.SU)(l);const{matched:e}=s.value;let n;while((n=e[t])&&!n.components)t++;return t})),h=(0,i.Fl)((()=>s.value.matched[c.value]));(0,i.JJ)(Rt,(0,i.Fl)((()=>c.value+1))),(0,i.JJ)(jt,h),(0,i.JJ)(zt,s);const u=(0,r.iH)();return(0,i.YP)((()=>[u.value,h.value,t.name]),(([t,e,n],[i,r,o])=>{e&&(e.instances[n]=t,r&&r!==e&&t&&t===i&&(e.leaveGuards.size||(e.leaveGuards=r.leaveGuards),e.updateGuards.size||(e.updateGuards=r.updateGuards))),!t||!e||r&&v(e,r)&&i||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const r=s.value,o=t.name,l=h.value,c=l&&l.components[o];if(!c)return Qt(n.default,{Component:c,route:r});const d=l.props[o],p=d?!0===d?r.params:"function"===typeof d?d(r):d:null,f=t=>{t.component.isUnmounted&&(l.instances[o]=null)},m=(0,i.h)(c,a({},p,e,{onVnodeUnmounted:f,ref:u}));return Qt(n.default,{Component:m,route:r})||m}}});function Qt(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const te=Zt;function ee(t){const e=rt(t.routes,t),n=t.parseQuery||It,s=t.stringifyQuery||Ot,u=t.history;const d=$t(),m=$t(),v=$t(),y=(0,r.XI)(q);let b=q;o&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const w=l.bind(null,(t=>""+t)),x=l.bind(null,Pt),k=l.bind(null,Tt);function _(t,n){let i,r;return $(t)?(i=e.getRecordMatcher(t),r=n):r=t,e.addRoute(r,i)}function E(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)}function L(){return e.getRoutes().map((t=>t.record))}function C(t){return!!e.getRecordMatcher(t)}function P(t,i){if(i=a({},i||y.value),"string"===typeof t){const r=p(n,t,i.path),o=e.resolve({path:r.path},i),s=u.createHref(r.fullPath);return a(r,o,{params:k(o.params),hash:Tt(r.hash),redirectedFrom:void 0,href:s})}let r;if("path"in t)r=a({},t,{path:p(n,t.path,i.path).path});else{const e=a({},t.params);for(const t in e)null==e[t]&&delete e[t];r=a({},t,{params:x(e)}),i.params=x(i.params)}const o=e.resolve(r,i),l=t.hash||"";o.params=w(k(o.params));const c=f(s,a({},t,{hash:Ct(l),path:o.path})),h=u.createHref(c);return a({fullPath:c,hash:l,query:s===Ot?Dt(t.query):t.query||{}},o,{redirectedFrom:void 0,href:h})}function O(t){return"string"===typeof t?p(n,t,y.value.path):a({},t)}function D(t,e){if(b!==t)return H(8,{from:e,to:t})}function j(t){return B(t)}function R(t){return j(a(O(t),{replace:!0}))}function F(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let i="function"===typeof n?n(t):n;return"string"===typeof i&&(i=i.includes("?")||i.includes("#")?i=O(i):{path:i},i.params={}),a({query:t.query,hash:t.hash,params:"path"in i?{}:t.params},i)}}function B(t,e){const n=b=P(t),i=y.value,r=t.state,o=t.force,l=!0===t.replace,c=F(n);if(c)return B(a(O(c),{state:"object"===typeof c?a({},r,c.state):r,force:o,replace:l}),e||n);const h=n;let u;return h.redirectedFrom=e,!o&&g(s,i,n)&&(u=H(16,{to:h,from:i}),it(i,i,!0,!1)),(u?Promise.resolve(u):G(h,i)).catch((t=>W(t)?W(t,2)?t:nt(t):tt(t,h,i))).then((t=>{if(t){if(W(t,2))return B(a({replace:l},O(t.to),{state:"object"===typeof t.to?a({},r,t.to.state):r,force:o}),e||h)}else t=Y(h,i,!0,l,r);return V(h,i,t),t}))}function z(t,e){const n=D(t,e);return n?Promise.reject(n):Promise.resolve()}function U(t){const e=at.values().next().value;return e&&"function"===typeof e.runWithContext?e.runWithContext(t):t()}function G(t,e){let n;const[i,r,o]=ne(t,e);n=Ut(i.reverse(),"beforeRouteLeave",t,e);for(const a of i)a.leaveGuards.forEach((i=>{n.push(qt(i,t,e))}));const s=z.bind(null,t,e);return n.push(s),ct(n).then((()=>{n=[];for(const i of d.list())n.push(qt(i,t,e));return n.push(s),ct(n)})).then((()=>{n=Ut(r,"beforeRouteUpdate",t,e);for(const i of r)i.updateGuards.forEach((i=>{n.push(qt(i,t,e))}));return n.push(s),ct(n)})).then((()=>{n=[];for(const i of t.matched)if(i.beforeEnter&&!e.matched.includes(i))if(h(i.beforeEnter))for(const r of i.beforeEnter)n.push(qt(r,t,e));else n.push(qt(i.beforeEnter,t,e));return n.push(s),ct(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=Ut(o,"beforeRouteEnter",t,e),n.push(s),ct(n)))).then((()=>{n=[];for(const i of m.list())n.push(qt(i,t,e));return n.push(s),ct(n)})).catch((t=>W(t,8)?t:Promise.reject(t)))}function V(t,e,n){for(const i of v.list())U((()=>i(t,e,n)))}function Y(t,e,n,i,r){const s=D(t,e);if(s)return s;const l=e===q,c=o?history.state:{};n&&(i||l?u.replace(t.fullPath,a({scroll:l&&c&&c.scroll},r)):u.push(t.fullPath,r)),y.value=t,it(t,e,n,l),nt()}let J;function X(){J||(J=u.listen(((t,e,n)=>{if(!lt.listening)return;const i=P(t),r=F(i);if(r)return void B(a(r,{replace:!0}),i).catch(c);b=i;const s=y.value;o&&T(N(s.fullPath,n.delta),A()),G(i,s).catch((t=>W(t,12)?t:W(t,2)?(B(t.to,i).then((t=>{W(t,20)&&!n.delta&&n.type===S.pop&&u.go(-1,!1)})).catch(c),Promise.reject()):(n.delta&&u.go(-n.delta,!1),tt(t,i,s)))).then((t=>{t=t||Y(i,s,!1),t&&(n.delta&&!W(t,8)?u.go(-n.delta,!1):n.type===S.pop&&W(t,20)&&u.go(-1,!1)),V(i,s,t)})).catch(c)})))}let K,Z=$t(),Q=$t();function tt(t,e,n){nt(t);const i=Q.list();return i.length?i.forEach((i=>i(t,e,n))):console.error(t),Promise.reject(t)}function et(){return K&&y.value!==q?Promise.resolve():new Promise(((t,e)=>{Z.add([t,e])}))}function nt(t){return K||(K=!t,X(),Z.list().forEach((([e,n])=>t?n(t):e())),Z.reset()),t}function it(e,n,r,s){const{scrollBehavior:a}=t;if(!o||!a)return Promise.resolve();const l=!r&&I(N(e.fullPath,0))||(s||!r)&&history.state&&history.state.scroll||null;return(0,i.Y3)().then((()=>a(e,n,l))).then((t=>t&&M(t))).catch((t=>tt(t,e,n)))}const ot=t=>u.go(t);let st;const at=new Set,lt={currentRoute:y,listening:!0,addRoute:_,removeRoute:E,hasRoute:C,getRoutes:L,resolve:P,options:t,push:j,replace:R,go:ot,back:()=>ot(-1),forward:()=>ot(1),beforeEach:d.add,beforeResolve:m.add,afterEach:v.add,onError:Q.add,isReady:et,install(t){const e=this;t.component("RouterLink",Vt),t.component("RouterView",te),t.config.globalProperties.$router=e,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,r.SU)(y)}),o&&!st&&y.value===q&&(st=!0,j(u.location).catch((t=>{0})));const n={};for(const r in q)n[r]=(0,i.Fl)((()=>y.value[r]));t.provide(Ft,e),t.provide(Bt,(0,r.qj)(n)),t.provide(zt,y);const s=t.unmount;at.add(t),t.unmount=function(){at.delete(t),at.size<1&&(b=q,J&&J(),J=null,y.value=q,st=!1,K=!1),s()}}};function ct(t){return t.reduce(((t,e)=>t.then((()=>U(e)))),Promise.resolve())}return lt}function ne(t,e){const n=[],i=[],r=[],o=Math.max(e.matched.length,t.matched.length);for(let s=0;s<o;s++){const o=e.matched[s];o&&(t.matched.find((t=>v(t,o)))?i.push(o):n.push(o));const a=t.matched[s];a&&(e.matched.find((t=>v(t,a)))||r.push(a))}return[n,i,r]}}}]);
//# sourceMappingURL=chunk-vendors.49e8cfcb.js.map